{"ID":"20240131145829-hhw7871","Spec":"2","Type":"NodeDocument","Properties":{"id":"20240131145829-hhw7871","scroll":"{\u0026quot;startId\u0026quot;:\u0026quot;20240131150108-7ry80uc\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20240131150549-jp8thf7\u0026quot;,\u0026quot;scrollTop\u0026quot;:1947,\u0026quot;focusId\u0026quot;:\u0026quot;20240131150549-jp8thf7\u0026quot;,\u0026quot;focusStart\u0026quot;:4,\u0026quot;focusEnd\u0026quot;:4}","title":"1. 2308问题识别","type":"doc","updated":"20240131150552"},"Children":[{"ID":"20240131150108-7ry80uc","Type":"NodeParagraph","Properties":{"id":"20240131150108-7ry80uc","updated":"20240131150108"},"Children":[{"Type":"NodeText","Data":"阐述哪些场景，哪些报错可以确认可能跟2308相关。"}]},{"ID":"20240131150108-4wf5s9t","Type":"NodeParagraph","Properties":{"id":"20240131150108-4wf5s9t","updated":"20240131150108"},"Children":[{"Type":"NodeText","Data":"常见的2308问题包括BIOS启动过程中的问题和OS中2308下硬盘故障或链路异常导致的业务顿卡、硬盘掉盘、I/O error、OS挂死等。BIOS启动过程中的，会看到明显报错(部分显示并非报错，在常见问题中澄清)或卡顿；RAID组状态异常的，详细判断方法在日志收集中会阐述；OS下要判断问题是否与2308强相关，建议优先从KDump或messages(dmesg以及/var/log/messages文件，特别系统需要单独确认)的查看结果来看，主要分为下面两类判断方法："}]},{"ID":"20240131150147-jfvyi1y","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240131150147-jfvyi1y","updated":"20240131150212"},"Children":[{"Type":"NodeText","Data":"1. 对于大多数2308卡的问题，OS Message中都会有mpt2sas字样的打印，具体分三类故障，分别如下"}]},{"ID":"20240131150216-86v78rn","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240131150216-86v78rn","updated":"20240131150306"},"Children":[{"Type":"NodeText","Data":"1.1 硬盘移除，有remove/removing字段，硬盘添加，有detecting/Direct-Access(启动时会有打印，注意不要误判)字段："}]},{"ID":"20240131150238-ddm0z7q","Type":"NodeParagraph","Properties":{"id":"20240131150238-ddm0z7q","updated":"20240131150249"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240131150249-8d93fvb.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240131150253-li0ylos","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240131150253-li0ylos","updated":"20240131150324"},"Children":[{"Type":"NodeText","Data":"1.2 命令收发失败导致的FW Command报错，有log_info字段："}]},{"ID":"20240131150328-485z95x","Type":"NodeParagraph","Properties":{"id":"20240131150328-485z95x","updated":"20240131150329"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240131150329-q81zjly.png"},{"Type":"NodeCloseParen"}]}]},{"ID":"20240131150331-sn79ias","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240131150331-sn79ias","updated":"20240131150344"},"Children":[{"Type":"NodeText","Data":"1.3 较严重的链路或硬盘故障导致的控制器复位，有diag reset字段(启动时会有一次打印，不要误判)："}]},{"ID":"20240131150404-x1c09no","Type":"NodeParagraph","Properties":{"id":"20240131150404-x1c09no","updated":"20240131150405"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240131150405-7zpeg8w.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240131150418-uf5zdtq","Type":"NodeParagraph","Properties":{"id":"20240131150418-uf5zdtq","updated":"20240131150418"},"Children":[{"Type":"NodeText","Data":"有的Diag reset会伴随着FW的Fault Code，当出现这类故障，一定要截取到Fault Code的值，便于快速定位："}]},{"ID":"20240131150428-wbv7z6q","Type":"NodeParagraph","Properties":{"id":"20240131150428-wbv7z6q","updated":"20240131150428"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240131150428-vkf5tmk.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240131150423-ea1f4bn","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240131150423-ea1f4bn","updated":"20240131150450"},"Children":[{"Type":"NodeText","Data":"2.  还有一些业务顿卡的问题，可能只会有内核的task abort字段，打印信息如下"}]},{"ID":"20240131150514-9007zxh","Type":"NodeParagraph","Properties":{"id":"20240131150514-9007zxh","updated":"20240131150515"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240131150515-ox0lf1q.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240131150516-fhrlr6p","Type":"NodeParagraph","Properties":{"id":"20240131150516-fhrlr6p","updated":"20240131150528"},"Children":[{"Type":"NodeText","Data":"另外就是一些OS下的掉盘以及IO失败问题，会伴随有I/O error，Offline字段的打印，打印信息如下："}]},{"ID":"20240131150529-l3fnvb0","Type":"NodeParagraph","Properties":{"id":"20240131150529-l3fnvb0","updated":"20240131150535"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240131150535-fv5lovl.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240131150539-nrm68vl","Type":"NodeParagraph","Properties":{"id":"20240131150539-nrm68vl","updated":"20240131150539"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240131150539-dgq7brz.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240131150548-63jsglb","Type":"NodeParagraph","Properties":{"id":"20240131150548-63jsglb","updated":"20240131150548"},"Children":[{"Type":"NodeText","Data":"综上所述，在碰到搭配2308控制器的环境，出现业务顿卡、硬盘掉盘、OS挂死问题时，优先搜索dmesg和messages中是否有mpt2sas的打印，在这些打印中重点搜索remove/removing、detect/Direct-Access、log_info、diag rese、Recovered Error等，如果都没有，搜索task abort、I/O error、offline，基本可确定问题是否与2308卡所在的存储子系统强相关。"}]},{"ID":"20240131150548-ult7o4c","Type":"NodeParagraph","Properties":{"id":"20240131150548-ult7o4c","updated":"20240131150548"},"Children":[{"Type":"NodeText","Data":"另外还有一种可能是PCIe链路问题，可以通过BMC一键收集日志，查看LogDump/ fdm_log，如果有RAID Card的Hardware Error Log，则一般表明存在PCIE链路问题："}]},{"ID":"20240131150549-jp8thf7","Type":"NodeParagraph","Properties":{"id":"20240131150549-jp8thf7","updated":"20240131150552"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240131150552-azgs3vx.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]}]}