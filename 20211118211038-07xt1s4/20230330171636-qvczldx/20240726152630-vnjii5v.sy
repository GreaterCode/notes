{
	"ID": "20240726152630-vnjii5v",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20240726152630-vnjii5v",
		"scroll": "{\u0026quot;startId\u0026quot;:\u0026quot;20240726152630-km20pb6\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20240814103110-3hgz3dp\u0026quot;,\u0026quot;scrollTop\u0026quot;:2203,\u0026quot;focusId\u0026quot;:\u0026quot;20240731171913-zkyfyrn\u0026quot;,\u0026quot;focusStart\u0026quot;:3,\u0026quot;focusEnd\u0026quot;:3}",
		"title": "iscsiadm命令 – iSCSI服务管理工具 ",
		"type": "doc",
		"updated": "20250219101245"
	},
	"Children": [
		{
			"ID": "20240726152630-km20pb6",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20240726152630-km20pb6",
				"updated": "20240726152746"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1. 简介"
				}
			]
		},
		{
			"ID": "20240726152746-uwadbaw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240726152746-uwadbaw",
				"updated": "20240726152920"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "\tiscsiadm命令来自英文词组iSCSI administration的缩写，是最常用的iSCSI服务管理工具。iscsiadm是一个命令行工具，能够发现、登录、卸载远程iSCSI目标，还能管理open-iscsi数据库，提供对iSCSI节点、会话、连接以及发现记录的操作。"
				}
			]
		},
		{
			"ID": "20240726152920-5xebqwa",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20240726152920-5xebqwa",
				"updated": "20240726152937"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2. 安装"
				}
			]
		},
		{
			"ID": "20240726152959-gj3qbvx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240726152959-gj3qbvx",
				"updated": "20240726153000"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "\t"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "在服务器上安装了iSCSI initiator以及iscsiadm"
				}
			]
		},
		{
			"ID": "20240726152945-zytmtrg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240726152945-zytmtrg",
				"updated": "20240726153009"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "\t"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong code",
					"TextMarkTextContent": "# rpm –ivh iscsi-initiator-utils-6.2.0.742-0.5.el5.i386.rpm "
				},
				{
					"Type": "NodeText",
					"Data": "​​"
				}
			]
		},
		{
			"ID": "20240726154505-8qwjatn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240726154505-8qwjatn",
				"updated": "20240726154508"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "\t或者"
				}
			]
		},
		{
			"ID": "20240726154453-va734qw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240726154453-va734qw"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​\t"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "yum install iscsi-initiator-utils   #安装iscsiadm"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240726152954-gpkdgcz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240726152954-gpkdgcz",
				"updated": "20240726154405"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "   \tiscsiadm的使用说明可以查看/usr/share/doc/iscsi-initiator-utils-6.2.0.742/README，也可以运行man iscsiadm或iscsiadm --help使用。"
				}
			]
		},
		{
			"ID": "20240726153009-fodpz1i",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20240726153009-fodpz1i",
				"updated": "20240726154519"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3. 语法"
				}
			]
		},
		{
			"ID": "20240726154646-cefkvpk",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240726154646-cefkvpk",
				"updated": "20240726163929"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "iscsiadm [选项] \u003c命令\u003e \u003c参数\u003e\n-m，--mode         # \u003c模式\u003e 指定工作模式，如discovery（发现模式）、node（管理节点）、session（管理会话）、discoverydb、host、iface（管理 iSCSI 网络接口）；\n-t，--type         # 指定类型，如sendtargets (或st)、isns、fw，仅用于discovery模式；\n-T，--targetname   # 指定目标名称，仅用于node模式；\n-p，--portal       # \u003cip:port\u003e 指定目标IP,不带端口默认使用3260，仅用于discovery、node模式；\n-l，--login        # 登录一个iSCSI设备，仅用于discovery、node模式；\n-u，--logout       # 退出一个iSCSI设备，仅用于node、session模式；\n-I，--interface    # 指定用于iSCSI操作的网络接口；\n-P，--print        # \u003c0-4\u003e 打印详细，用于discovery、node、session模式；\n-s，--stats        # 查看会话状态\n-h，--help         # 显示帮助；\n-V，--version      # 显示版本信息。\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240726154519-9ch2xdf",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20240726154519-9ch2xdf",
				"updated": "20250219101245"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4. 常用命令"
				}
			]
		},
		{
			"ID": "20240726164520-hmtufp6",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240726164520-hmtufp6",
				"updated": "20240726203657"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 可以查看硬盘传输类型\n# lsblk -S /dev/sd*   \nNAME HCTL       TYPE VENDOR   MODEL             REV TRAN\nsda  0:1:0:0    disk HP       LOGICAL VOLUME   3.00 sas\nsdb  12:0:0:1   disk SYNOLOGY Storage          4.0  iscsi\n\n// 查看已登录的设备：\n# iscsiadm -m session\ntcp: [3] 10.10.10.10:3260,1 iqn.2000-01.com.synology:NAS.target.1 (non-flash)\n\n// 发送iSCSI发现请求，并列出发现的iSCSI设备目标器：\n# iscsiadm -m discovery -t st -p 10.10.10.10\n10.10.10.10:3260,1 iqn.2000-01.com.synology:NAS.default-target.1\n\n// 登录到发现的iSCSI目标器\n#iscsiadm -m node -T iqn.2000-01.com.synology:NAS.target.1 -p 10.10.10.10 -l\nLogging in to [iface: default, target: iqn.2000-01.com.synology:NAS.target.1, portal: 10.10.10.10,3260] (multiple)\nLogin to [iface: default, target: iqn.2000-01.com.synology:NAS.target.1, portal: 10.10.10.10,3260] successful.\n\n//退出已登录的设备\n# iscsiadm -m node -T iqn.2000-01.com.synology:NAS.target.1 -p 10.10.10.10 -u\nLogging out of session [sid: 11, target: iqn.2000-01.com.synology:NAS.target.1, portal: 10.10.10.10,3260]\n或\n# iscsiadm -m session -u   #退出所有iscsi会话\n\n// 查看所有被发现的节点（target）\n#iscsiadm  -m node\n\n\n// 断开所有 Target 连接：\n#iscsiadm -m node -U all\n\n// 刪除所有 node 信息 ( 需重新 discovery) ：\n#iscsiadm -m node --op delete\n\n// 建立所有与Target的连接\niscsiadm -m node -L all\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240731171627-2d4zh0j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240731171627-2d4zh0j",
				"updated": "20240731171706"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "有效磁盘"
				}
			]
		},
		{
			"ID": "20240726154540-yw9avy4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240726154540-yw9avy4",
				"updated": "20240731171535"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# sg_luns /dev/sda -q -d\n0000000000000000\n      Peripheral device addressing: lun=0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240726154530-xo0b06m",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240726154530-xo0b06m",
				"updated": "20240731171714"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "残留磁盘"
				}
			]
		},
		{
			"ID": "20240731171756-ow4uog6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240731171756-ow4uog6"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240731171753-3x76pq3.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240731171901-x3q7cb3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240731171901-x3q7cb3",
				"updated": "20240731171911"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "清理残留磁盘"
				}
			]
		},
		{
			"ID": "20240731171913-zkyfyrn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240731171913-zkyfyrn",
				"updated": "20240731171913"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240731171913-703gwb7.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240801172227-qj3yi5o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240801172227-qj3yi5o",
				"updated": "20250219101245"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240811014337-ojmdqfz.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240814103109-h7whax4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240814103109-h7whax4"
			}
		},
		{
			"ID": "20240814103110-pijtyrr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240814103110-pijtyrr"
			}
		},
		{
			"ID": "20240814103110-3hgz3dp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240814103110-3hgz3dp",
				"updated": "20240814103112"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "/var/log/csi/cai-iscsi.log 和"
				}
			]
		}
	]
}