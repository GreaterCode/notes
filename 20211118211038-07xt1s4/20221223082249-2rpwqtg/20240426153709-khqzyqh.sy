{"ID":"20240426153709-khqzyqh","Spec":"2","Type":"NodeDocument","Properties":{"id":"20240426153709-khqzyqh","scroll":"{\u0026quot;startId\u0026quot;:\u0026quot;20240426153709-xnezdan\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20240426153709-9hzk0cw\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20240426153709-bfhb396\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0}","title":"Linux kernel 笔记 （46）——配置crashkernel参数 | 我的站点","type":"doc","updated":"20240426153822"},"Children":[{"ID":"20240426153709-xnezdan","Type":"NodeThematicBreak","Properties":{"id":"20240426153709-xnezdan","updated":"20240426153709"}},{"ID":"20240426153709-vfinxq3","Type":"NodeList","ListData":{},"Properties":{"id":"20240426153709-vfinxq3","updated":"20240426153822"},"Children":[{"ID":"20240426153709-2xqhrr4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240426153709-2xqhrr4","updated":"20240426153709"},"Children":[{"ID":"20240426153709-3ftily8","Type":"NodeParagraph","Properties":{"id":"20240426153709-3ftily8","updated":"20240426153709"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://nanxiao.me/linux-kernel-note-46-crashkernel-configuration/","TextMarkTextContent":"https://nanxiao.me/linux-kernel-note-46-crashkernel-configuration/"}]}]}]},{"ID":"20240426153709-9simp14","Type":"NodeThematicBreak","Properties":{"id":"20240426153709-9simp14","updated":"20240426153709"}},{"ID":"20240426153709-3zu8vtn","Type":"NodeParagraph","Properties":{"id":"20240426153709-3zu8vtn","updated":"20240426153709"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"crashkernel"},{"Type":"NodeText","Data":"​用来配置"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Kexec"},{"Type":"NodeText","Data":"​启动的第二个"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"kernel"},{"Type":"NodeText","Data":"​（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"crash kernel"},{"Type":"NodeText","Data":"​），即用来捕获第一个"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"kernel crash dump"},{"Type":"NodeText","Data":"​的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"kernel"},{"Type":"NodeText","Data":"​的大小和位置。 配置"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"crashkernel"},{"Type":"NodeText","Data":"​参数有四种形式："}]},{"ID":"20240426153709-tnymhur","Type":"NodeParagraph","Properties":{"id":"20240426153709-tnymhur","updated":"20240426153709"},"Children":[{"Type":"NodeText","Data":"（1）"}]},{"ID":"20240426153709-bfhb396","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240426153709-bfhb396","updated":"20240426153709"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"crashkernel=size[@offset]  \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240426153709-x0icrx4","Type":"NodeParagraph","Properties":{"id":"20240426153709-x0icrx4","updated":"20240426153709"},"Children":[{"Type":"NodeText","Data":"保留"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"[offset，offset + size]"},{"Type":"NodeText","Data":"​这段内存，如果"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@offset"},{"Type":"NodeText","Data":"​省略，则会自动选择一个合适的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"offset"},{"Type":"NodeText","Data":"​。\n （2）"}]},{"ID":"20240426153709-q5z8fco","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240426153709-q5z8fco","updated":"20240426153709"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"crashkernel=range1:size1[,range2:size2,...][@offset]\nrange=start-[end](包含`start`，但不包含`end`)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240426153709-efbezah","Type":"NodeParagraph","Properties":{"id":"20240426153709-efbezah","updated":"20240426153709"},"Children":[{"Type":"NodeText","Data":"举例来看："}]},{"ID":"20240426153709-aveluta","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240426153709-aveluta","updated":"20240426153709"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"crashkernel=512M-2G:64M,2G-:128M\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240426153709-l1p3wd6","Type":"NodeParagraph","Properties":{"id":"20240426153709-l1p3wd6","updated":"20240426153709"},"Children":[{"Type":"NodeText","Data":"含义如下：\n a）如果内存小于"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"512M"},{"Type":"NodeText","Data":"​，则不保留内存；\n b）内存介于"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"512M"},{"Type":"NodeText","Data":"​和"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"2G"},{"Type":"NodeText","Data":"​之间，保留"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"64M"},{"Type":"NodeText","Data":"​内存；\n c）内存"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"2G"},{"Type":"NodeText","Data":"​以上，保留"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"128M"},{"Type":"NodeText","Data":"​内存。"}]},{"ID":"20240426153709-20ybn7y","Type":"NodeParagraph","Properties":{"id":"20240426153709-20ybn7y","updated":"20240426153709"},"Children":[{"Type":"NodeText","Data":"（3）"}]},{"ID":"20240426153709-liqp4es","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240426153709-liqp4es","updated":"20240426153709"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"crashkernel=size,high\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240426153709-ub0xwhe","Type":"NodeParagraph","Properties":{"id":"20240426153709-ub0xwhe","updated":"20240426153709"},"Children":[{"Type":"NodeText","Data":"只用于"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"X86_64"},{"Type":"NodeText","Data":"​平台。当内存大于"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"4G"},{"Type":"NodeText","Data":"​时，允许"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"kernel"},{"Type":"NodeText","Data":"​从"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"top"},{"Type":"NodeText","Data":"​，也就是高于"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"4G"},{"Type":"NodeText","Data":"​的内存地址开始分配。如果内存小于"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"4G"},{"Type":"NodeText","Data":"​，则自然从低于"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"4G"},{"Type":"NodeText","Data":"​的地址空间分配。如果指定"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"crashkernel=size"},{"Type":"NodeText","Data":"​，则这个选项会被忽略。"}]},{"ID":"20240426153709-a4d2w1e","Type":"NodeParagraph","Properties":{"id":"20240426153709-a4d2w1e","updated":"20240426153709"},"Children":[{"Type":"NodeText","Data":"（4）"}]},{"ID":"20240426153709-wek5378","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240426153709-wek5378","updated":"20240426153709"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"crashkernel=size,low\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240426153709-g62yr1c","Type":"NodeParagraph","Properties":{"id":"20240426153709-g62yr1c","updated":"20240426153709"},"Children":[{"Type":"NodeText","Data":"只用于"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"X86_64"},{"Type":"NodeText","Data":"​平台。当指定"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"crashkernel=size,high"},{"Type":"NodeText","Data":"​时，也需要在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"low"},{"Type":"NodeText","Data":"​，也就是低于"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"4G"},{"Type":"NodeText","Data":"​的内存地址分配一段内存。默认情况下，系统会尝试自动分配至少"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"256M"},{"Type":"NodeText","Data":"​内存。"}]},{"ID":"20240426153709-9hzk0cw","Type":"NodeParagraph","Properties":{"id":"20240426153709-9hzk0cw","updated":"20240426153709"},"Children":[{"Type":"NodeText","Data":"参考资料：\n"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://www.kernel.org/doc/Documentation/kernel-parameters.txt","TextMarkTextContent":"Kernel Parameters"},{"Type":"NodeText","Data":"。"}]}]}