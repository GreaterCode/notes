{"ID":"20221124011824-tn607mh","Spec":"2","Type":"NodeDocument","Properties":{"id":"20221124011824-tn607mh","title":"nmcli","type":"doc","updated":"20250508010931"},"Children":[{"ID":"20221124011914-herullb","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20221124011914-herullb","updated":"20250507151635"},"Children":[{"Type":"NodeText","Data":"一、日常用法"}]},{"ID":"20221124011914-4e929vn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20221124011914-4e929vn","style":"line-height: 22px;","updated":"20250507151635"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"nmcli dev status //查看系统现有网络设备的连接状态\nnmcli conn show //查看已有连接\nnmcli conn delete UUID1 UUID2 UUID3 //删除不需要的连接\nnmcli dev connect ens160 //连接设备ens160，该操作类似于接上网卡网线\nnmcli dev disconnect ens160 //断开设备ens160，类似于拔掉网线\nnmcli conn down ens160 //关闭连接ens160，等同于ifdown ens160\nnmcli conn up ens160 //打开连接ens160，等同于ifup ens160\nnmcli dev show //查看设备详细信息\nnmcli connection add ifname eno33554992 con-name eth1 type ethernet   //查看conn，无device\nnmcli device wifi list // 所有无线网络\nnmcli general status  // 显示网络管理器状态\nnmcli general hostname  //显示系统主机名\nnmcli general hostname \u003cnew hostname\u003e//设置系统主机名\nnmcli connection delete \u003cconnection name\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20221124011914-ic9hj16","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20221124011914-ic9hj16","updated":"20221124011914"},"Children":[{"Type":"NodeText","Data":"二、创建、命名连接，并做基本配置"}]},{"ID":"20221124011914-8m9sokp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20221124011914-8m9sokp","updated":"20221124012013"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"\nnmcli conn add type ethernet con-name ens160 ifname ens160\n\n#创建新连接con-name是ens160，也可以根据个人习惯改为eth0.连接到的设备是ens160，根据实际情况改成自己使用的网卡\n\nnmcli conn mod ens160 ipv4.method manual //配置IP地址获取方式为手动\nnmcli conn mod ens160 ipv4.addresses \"10.x.x.x/24\" //配置IP和掩码\nnmcli conn mod ens160 ipv4.gateway \"10.x.x.254\" //配置网关\nnmcli conn mod ens160 ipv4.dns \"x.x.x.x\" //配置dns\nnmcli conn mod ens160 connection.autoconnect yes //配置开机自动启动\nnmcli conn up ens160 //启动网卡 .zj\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20221124011914-qqojqst","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20221124011914-qqojqst","updated":"20250506215734"},"Children":[{"Type":"NodeText","Data":"三、配置网卡"}]},{"ID":"20221124011914-j6wswv1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20221124011914-j6wswv1","style":"line-height: 22px;","updated":"20250506215734"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"网卡bond是创建一个虚拟链接做为主，若干个连接做为从。从连接关联各自的物理网卡，避免物理网卡的单点故障，提高可用性。\n\n//这里系统有两个网卡enp9s0f1和enp9s0f1\nnmcli conn add type bond con-name bond0 ifname bond0 mode active-backup autoconnect yes\n\n//添加一个连接，类型为bond，连接名bond0,设置连接自动启动.设备指向bond0，将创建出一个虚拟设备bond0\nnmcli conn add type bond-slave con-name eth0 ifname enp9s0f0 master bond0 autoconnect yes\nnmcli conn add type bond-slave con-name eth1 ifname enp9s0f1 master bond0 autoconnect yes\n\n//为bond0添加两个从连接eth0和eth1，分别关联物理网卡enp9s0f1和enp9s0f1，设置连接自动启动.也可以不指定从连接名，会自动命名bond-slave-enp9s0f0和bond-slave-enp9s0f1\nnmcli conn modify bond0 ipv4.addresses \"10.x.x.x/24\"\nnmcli conn modify bond0 ipv4.gateway \"10.x.x.254\"\nnmcli conn modify bond0 ipv4.dns \"x.x.x.x\"\nnmcli conn modify bond0 ipv4.method manual\n\n//为连接bond0配置IP、网关、dns、启动方式\nnmcli connection up eth0\nnmcli connection up eth1\nnmcli connection up bond0\n\n// 连接到一个Wi-Fi网络：\n nmcli device wifi connect \u003cSSID\u003e password \u003cpassword\u003e\n\n//启用/禁用网络接口\nnmcli device set \u003cdevice_name\u003e managed yes/no\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250506215525-nukf20x","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20250506215525-nukf20x","updated":"20250507102430"},"Children":[{"Type":"NodeText","Data":"四.VPN管理"}]},{"ID":"20250506221619-jfg550z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250506221619-jfg550z","style":"line-height: 22px;","updated":"20250506221824"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 添加VPN连接\nnmcli \u003cconfig file.ovpn\u003e connection import type openvpn file\n\n//激活VPN连接\nnmcli connection up \u003cvpn connection name\u003e\n\n// 禁用VPN连接\nnmcli connection down \u003cvpn connection name\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250506221600-wvp753q","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250506221600-wvp753q","updated":"20250506221616"},"Children":[{"ID":"20250506221615-98mv261","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250506221615-98mv261","updated":"20250506221616"},"Children":[{"ID":"20250506221615-0c09k8u","Type":"NodeParagraph","Properties":{"id":"20250506221615-0c09k8u","updated":"20250506221616"},"Children":[{"Type":"NodeText","Data":"添加VPN连接"}]}]}]},{"ID":"20250506215517-le53tii","Type":"NodeParagraph","Properties":{"id":"20250506215517-le53tii","updated":"20250506221511"},"Children":[{"Type":"NodeText","Data":"\t连接到指定WiFi网络"}]},{"ID":"20250506221512-liyk6il","Type":"NodeParagraph","Properties":{"id":"20250506221512-liyk6il","updated":"20250506221512"},"Children":[{"Type":"NodeText","Data":"\tnmcli device wifi connect \u003cSSID\u003e password \u003cpassword\u003e"}]},{"ID":"20250506220616-m3k508e","Type":"NodeParagraph","Properties":{"id":"20250506220616-m3k508e","updated":"20250506221520"}},{"ID":"20250506220510-e9w4m6p","Type":"NodeParagraph","Properties":{"id":"20250506220510-e9w4m6p","updated":"20250506220510"}},{"ID":"20250506220510-gxjhscy","Type":"NodeParagraph","Properties":{"id":"20250506220510-gxjhscy","updated":"20250506220706"},"Children":[{"Type":"NodeText","Data":"添加新的WIFI连"}]},{"ID":"20250506220839-auaq7rt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250506220839-auaq7rt","style":"line-height: 22px;","updated":"20250507102430"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 查看设备日志\nnmcli general logging level \u003clevel\u003e domains \u003cdomains\u003e\n\n// 重新启动网络设备\nnmcli device reapply  \u003cdevice name\u003e\n\n// 检查连接的连通性\nnmcli networking connectivity check\n\n//设置网络管理器的日志级别\nnmcli general logging level \u003clevel\u003e\n\n// 禁用所有网络\nnmcli networking off\n\n// 打开用所有网络\nnmcli networking on\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250506220542-3p6ol3a","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20250506220542-3p6ol3a","updated":"20250508010931"},"Children":[{"Type":"NodeText","Data":"5. Nmcli 通过 Linux 终端连接到 Wi-Fi"}]},{"ID":"20250507101547-d0p535s","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250507101547-d0p535s","style":"line-height: 22px;","updated":"20250507103009"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 查看所有网络接口的状态\nnmcli dev status\n\n// 查看Wi-Fi设备是否启用\nnmcli radio wifi\n\n// 启用 Wi-Fi\nnmcli radio wifi on\n\n//扫描附近的 Wi-Fi 网络\nnmcli dev wifi list\nnmcli device wifi rescan\n\n// 连接到 Wi-Fi， network-ssid替换为网络名称。\nsudo nmcli dev wifi connect network-ssid\n\n// 如果 Wi-Fi 具有 WEP 或 WPA 安全性，可以在命令中指定网络密码。, 通过空格分割参数，若SSID参数一个以上，记得用引号括起来\nnmcli dev wifi connect network-ssid password \"network-password\"\n\n// 如果不想在屏幕上写出密码，可以使用--ask\nnmcli --ask dev wifi connect network-ssid\n\n// 使用 nmcli 管理网络连接\n// 可以通过发出以下命令查看所有已保存的连接：\nnmcli con show\n\n//down链接\nnmcli con down ssid/uuid\n\n//up链接\nnmcli con up ssid/uuid\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250507151643-z45kk92","Type":"NodeParagraph","Properties":{"id":"20250507151643-z45kk92","updated":"20250507151643"}}]}