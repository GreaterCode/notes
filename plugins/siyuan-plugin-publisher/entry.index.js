const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chunks/chunk.vendor_chatgpt.js","./chunks/chunk.vendor_keyv.js","./chunks/chunk.vendor_asn1-js.js","./chunks/chunk.vendor_bn-js.js","./chunks/chunk.vendor_vite-plugin-node-polyfills.js","./chunks/chunk.vendor_inherits.js","./chunks/chunk.vendor_minimalistic-assert.js","./chunks/chunk.vendor_vm-browserify.js","./chunks/chunk.vendor_crypto-js.js","./chunks/chunk.vendor_crypto-browserify.js","./chunks/chunk.vendor_randombytes.js","./chunks/chunk.vendor_safe-buffer.js","./chunks/chunk.vendor_create-hash.js","./chunks/chunk.vendor_md5-js.js","./chunks/chunk.vendor_hash-base.js","./chunks/chunk.vendor_stream-browserify.js","./chunks/chunk.vendor_events.js","./chunks/chunk.vendor_readable-stream.js","./chunks/chunk.vendor_util.js","./chunks/chunk.vendor_is-arguments.js","./chunks/chunk.vendor_has-tostringtag.js","./chunks/chunk.vendor_has-symbols.js","./chunks/chunk.vendor_call-bind.js","./chunks/chunk.vendor_get-intrinsic.js","./chunks/chunk.vendor_es-errors.js","./chunks/chunk.vendor_has-proto.js","./chunks/chunk.vendor_function-bind.js","./chunks/chunk.vendor_hasown.js","./chunks/chunk.vendor_set-function-length.js","./chunks/chunk.vendor_define-data-property.js","./chunks/chunk.vendor_es-define-property.js","./chunks/chunk.vendor_gopd.js","./chunks/chunk.vendor_has-property-descriptors.js","./chunks/chunk.vendor_is-generator-function.js","./chunks/chunk.vendor_which-typed-array.js","./chunks/chunk.vendor_for-each.js","./chunks/chunk.vendor_is-callable.js","./chunks/chunk.vendor_available-typed-arrays.js","./chunks/chunk.vendor_possible-typed-array-names.js","./chunks/chunk.vendor_is-typed-array.js","./chunks/chunk.vendor_string_decoder.js","./chunks/chunk.vendor_util-deprecate.js","./chunks/chunk.vendor_process-nextick-args.js","./chunks/chunk.vendor_isarray.js","./chunks/chunk.vendor_core-util-is.js","./chunks/chunk.vendor_ripemd160.js","./chunks/chunk.vendor_sha-js.js","./chunks/chunk.vendor_cipher-base.js","./chunks/chunk.vendor_create-hmac.js","./chunks/chunk.vendor_browserify-sign.js","./chunks/chunk.vendor_browserify-rsa.js","./chunks/chunk.vendor_elliptic.js","./chunks/chunk.vendor_minimalistic-crypto-utils.js","./chunks/chunk.vendor_brorand.js","./chunks/chunk.vendor_hash-js.js","./chunks/chunk.vendor_hmac-drbg.js","./chunks/chunk.vendor_parse-asn1.js","./chunks/chunk.vendor_evp_bytestokey.js","./chunks/chunk.vendor_browserify-aes.js","./chunks/chunk.vendor_buffer-xor.js","./chunks/chunk.vendor_pbkdf2.js","./chunks/chunk.vendor_browserify-cipher.js","./chunks/chunk.vendor_browserify-des.js","./chunks/chunk.vendor_des-js.js","./chunks/chunk.vendor_diffie-hellman.js","./chunks/chunk.vendor_miller-rabin.js","./chunks/chunk.vendor_create-ecdh.js","./chunks/chunk.vendor_public-encrypt.js","./chunks/chunk.vendor_randomfill.js","./chunks/chunk.vendor_json-buffer.js","./chunks/chunk.vendor_p-timeout.js","./chunks/chunk.vendor_quick-lru.js","./chunks/chunk.vendor_js-tiktoken.js","./chunks/chunk.vendor_base64-js.js","./chunks/chunk.vendor_eventsource-parser.js","./chunks/chunk.vendor_uuid.js"])))=>i.map(i=>d[i]);
var el=Object.defineProperty;var tl=(u,o,t)=>o in u?el(u,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[o]=t;var D=(u,o,t)=>tl(u,typeof o!="symbol"?o+"":o,t);import{l as J,o as _,m as O,bP as sl,bQ as ol,r as q,G as E,L as j,u as h,J as X,O as f,n as Ct,W as al,D as C,E as b,I as nl,bR as il,aM as ll,K as R,bS as rl,bT as cl,ah as fn,bU as Eo,bV as pl,c as yn,ap as ie,a4 as ce,af as Rs,S as Je,aA as ul,R as Ze,M as Ce,aj as xe,a1 as Po,H as zt,b1 as qe,bW as bn,ak as Zn,Y as wn,bX as Ae,f as as,bY as Hs,aN as dl,F as Qn,bZ as $o,b_ as gl,x as Rn,b$ as ml,P as hl,a_ as fl}from"./chunks/chunk.vendor.js";import{u as yl,c as bl}from"./chunks/chunk.vendor_vue-i18n.js";import{I as wl,L as _l,A as vl,v as Pl,R as Tl,T as ue,P as Q,f as Oe,Z as ei,H as it,J as lt,Q as Co,a as _n,F as Ht,B as ze,b as ft,S as rs,O as kl,z as tt,M as Et,_ as rt,D as Sl,X as El,c as cs}from"./chunks/chunk.vendor_zhi-blog-api.js";import{P as T,Q as De,T as te,d as ae,B as At,H as re,Z as Ls}from"./chunks/chunk.vendor_zhi-common.js";import{T as Kt,d as St,w as Tt,u as Lt}from"./chunks/chunk.vendor_zhi-device.js";import{u as _t,a as Xe,c as Cl,b as Al}from"./chunks/chunk.vendor_vue-router.js";import{w as Ul}from"./chunks/chunk.vendor_zhi-lib-base.js";import{d as Il,c as xl}from"./chunks/chunk.vendor_pinia.js";import{v as mt,O as wt,c as ti,V as nt}from"./chunks/chunk.vendor_zhi-siyuan-api.js";import{s as Ml}from"./chunks/chunk.vendor_shorthash2.js";import{a as Dl}from"./chunks/chunk.vendor_uuid.js";import{I as si,E as oi,B as ai,T as ni}from"./chunks/chunk.vendor_simple-xmlrpc.js";import{f as Ol}from"./chunks/chunk.vendor_cross-fetch.js";import{x as Vl}from"./chunks/chunk.vendor_xmlbuilder2.js";import{B as No,a as vn}from"./chunks/chunk.vendor_vite-plugin-node-polyfills.js";import{S as $l}from"./chunks/chunk.vendor_zhi-fetch-middleware.js";import{g as Ut}from"./chunks/chunk.vendor_js-base64.js";import{S as Gn,I as Nl}from"./chunks/chunk.vendor_zhi-siyuan-picgo.js";import{E as ee,a as Hl,b as Pt,c as Dt,d as Ve,e as Se,f as Gs,g as Pn,h as Ao,i as Tn,j as kn,k as Uo,l as Bs,m as Ue,n as Ie,o as Io,p as Sn,q as pt,r as ut,s as Ll,t as Rl,u as xo,v as st,w as ii,x as li,y as Mo,z as ri,A as qt,B as En,C as Gl,D as Bl,F as ci,G as pi,H as jl,I as Kl,J as Wl,K as Fl,L as zl,M as Jl}from"./chunks/chunk.vendor_element-plus.js";import{p as Ho}from"./chunks/chunk.vendor_path-browserify.js";import{l as ve}from"./chunks/chunk.vendor_lodash-es.js";import{C as ui,U as ql,B as Yl}from"./chunks/chunk.vendor_crypto-js.js";import{l as ns}from"./chunks/chunk.vendor_cheerio.js";import{D as di}from"./chunks/chunk.vendor_zhi-notion-markdown.js";import{Z as Xl,Y as Zl}from"./chunks/chunk.vendor_zhi-github-middleware.js";import{D as Ql}from"./chunks/chunk.vendor_zhi-gitlab-middleware.js";import{k as er}from"./chunks/chunk.vendor_katex.js";import{c as tr}from"./chunks/chunk.vendor_cookie-parse.js";import{m as Bn}from"./chunks/chunk.vendor_telegraph-md.js";import{i as sr}from"./chunks/chunk.vendor_iframe-resizer.js";import"./chunks/chunk.vendor_vue-demi.js";import"./chunks/chunk.vendor_asn1-js.js";import"./chunks/chunk.vendor_bn-js.js";import"./chunks/chunk.vendor_inherits.js";import"./chunks/chunk.vendor_minimalistic-assert.js";import"./chunks/chunk.vendor_vm-browserify.js";import"./chunks/chunk.vendor_dayjs.js";import"./chunks/chunk.vendor_async-validator.js";import"./chunks/chunk.vendor_normalize-wheel-es.js";import"./chunks/chunk.vendor_crypto-browserify.js";import"./chunks/chunk.vendor_randombytes.js";import"./chunks/chunk.vendor_safe-buffer.js";import"./chunks/chunk.vendor_create-hash.js";import"./chunks/chunk.vendor_md5-js.js";import"./chunks/chunk.vendor_hash-base.js";import"./chunks/chunk.vendor_stream-browserify.js";import"./chunks/chunk.vendor_events.js";import"./chunks/chunk.vendor_readable-stream.js";import"./chunks/chunk.vendor_util.js";import"./chunks/chunk.vendor_is-arguments.js";import"./chunks/chunk.vendor_has-tostringtag.js";import"./chunks/chunk.vendor_has-symbols.js";import"./chunks/chunk.vendor_call-bind.js";import"./chunks/chunk.vendor_get-intrinsic.js";import"./chunks/chunk.vendor_es-errors.js";import"./chunks/chunk.vendor_has-proto.js";import"./chunks/chunk.vendor_function-bind.js";import"./chunks/chunk.vendor_hasown.js";import"./chunks/chunk.vendor_set-function-length.js";import"./chunks/chunk.vendor_define-data-property.js";import"./chunks/chunk.vendor_es-define-property.js";import"./chunks/chunk.vendor_gopd.js";import"./chunks/chunk.vendor_has-property-descriptors.js";import"./chunks/chunk.vendor_is-generator-function.js";import"./chunks/chunk.vendor_which-typed-array.js";import"./chunks/chunk.vendor_for-each.js";import"./chunks/chunk.vendor_is-callable.js";import"./chunks/chunk.vendor_available-typed-arrays.js";import"./chunks/chunk.vendor_possible-typed-array-names.js";import"./chunks/chunk.vendor_is-typed-array.js";import"./chunks/chunk.vendor_string_decoder.js";import"./chunks/chunk.vendor_util-deprecate.js";import"./chunks/chunk.vendor_process-nextick-args.js";import"./chunks/chunk.vendor_isarray.js";import"./chunks/chunk.vendor_core-util-is.js";import"./chunks/chunk.vendor_ripemd160.js";import"./chunks/chunk.vendor_sha-js.js";import"./chunks/chunk.vendor_cipher-base.js";import"./chunks/chunk.vendor_create-hmac.js";import"./chunks/chunk.vendor_browserify-sign.js";import"./chunks/chunk.vendor_browserify-rsa.js";import"./chunks/chunk.vendor_elliptic.js";import"./chunks/chunk.vendor_minimalistic-crypto-utils.js";import"./chunks/chunk.vendor_brorand.js";import"./chunks/chunk.vendor_hash-js.js";import"./chunks/chunk.vendor_hmac-drbg.js";import"./chunks/chunk.vendor_parse-asn1.js";import"./chunks/chunk.vendor_evp_bytestokey.js";import"./chunks/chunk.vendor_browserify-aes.js";import"./chunks/chunk.vendor_buffer-xor.js";import"./chunks/chunk.vendor_pbkdf2.js";import"./chunks/chunk.vendor_browserify-cipher.js";import"./chunks/chunk.vendor_browserify-des.js";import"./chunks/chunk.vendor_des-js.js";import"./chunks/chunk.vendor_diffie-hellman.js";import"./chunks/chunk.vendor_miller-rabin.js";import"./chunks/chunk.vendor_create-ecdh.js";import"./chunks/chunk.vendor_public-encrypt.js";import"./chunks/chunk.vendor_randomfill.js";import"./chunks/chunk.vendor_parse5.js";import"./chunks/chunk.vendor_entities.js";import"./chunks/chunk.vendor_parse5-htmlparser2-tree-adapter.js";import"./chunks/chunk.vendor_domhandler.js";import"./chunks/chunk.vendor_domelementtype.js";import"./chunks/chunk.vendor_dom-serializer.js";import"./chunks/chunk.vendor_htmlparser2.js";import"./chunks/chunk.vendor_domutils.js";import"./chunks/chunk.vendor_cheerio-select.js";import"./chunks/chunk.vendor_css-select.js";import"./chunks/chunk.vendor_boolbase.js";import"./chunks/chunk.vendor_css-what.js";import"./chunks/chunk.vendor_nth-check.js";import"./chunks/chunk.vendor_commonmark.js";import"./chunks/chunk.vendor_mdurl.js";import"./chunks/chunk.vendor_string-prototype-repeat.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(e){if(e.ep)return;e.ep=!0;const a=t(e);fetch(e.href,a)}})();var gi={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const It=gi.DEV_MODE==="true",Cn=gi.APP_BASE,or="https://terwer.space/about",Me="dynamic-config",To="[auto]",ar=10,nr="https://api.terwer.space/api",_e="https://api.terwer.space/api/middleware",W=u=>Ul(u,"picgo-plugin-app"),Z=()=>{const{messages:u,locale:o}=yl();return{t:s=>{var a;return((a=u.value)==null?void 0:a[o.value])[s]||s},locale:o}},ir={class:"header-default"},lr=J({__name:"DefaultHeader",setup(u){return Z(),(o,t)=>(_(),O("div",ir))}}),rr="siyuan-plugin-publisher",mi="1.29.3",cr="Publish articles from Siyuan Notes to platforms such as Yuque, Notion, Cnblogs, WordPress, Typecho, Hexo, Zhihu and more",pr="terwer/siyuan-plugin-publisher",ur="https://github.com/terwer/siyuan-plugin-publisher",dr="terwer",gr="MIT",mr={makeLink:"python scripts/make_dev_link.py",serve:"python scripts/serve.py",dev:"python scripts/dev.py",test:"vitest",lint:"vue-tsc --noEmit",coverage:"vitest run --coverage",build:"python scripts/build.py",pluginBuild:"python scripts/plugin_build.py",siyuanBuild:"python scripts/siyuan_build.py",vercelBuild:"python3 scripts/vercel_build.py",nginxBuild:"python scripts/nginx_build.py",widgetBuild:"python scripts/widget_build.py",extBuild:"python scripts/ext_build.py",syncVersion:"python scripts/version.py",parseChangelog:"python scripts/parse_changelog.py",prepareRelease:"pnpm syncVersion && pnpm parseChangelog",package:"pnpm build && pnpm widgetBuild && pnpm extBuild && pnpm extBuild -t firefox && pnpm nginxBuild",syncWidgetRepo:"python scripts/sync_widget_repo.py"},hr={"@halo-dev/api-client":"^2.20.0","@terwer/esbuild-config-custom":"2.0.0","@terwer/eslint-config-custom":"^1.3.6","@types/crypto-js":"^4.2.2","@types/iframe-resizer":"^3.5.13","@types/katex":"^0.16.7","@types/minimist":"^1.2.5","@types/node":"^18.19.67","@vitejs/plugin-vue":"^5.2.1","@vitest/coverage-v8":"^1.6.0","@vue/test-utils":"^2.4.6","esbuild-plugin-copy":"^2.1.1","esbuild-style-plugin":"^1.6.3","fast-glob":"^3.3.2",jsdom:"^25.0.1",minimist:"^1.2.8","rollup-plugin-livereload":"^2.0.5",stylus:"^0.64.0",typescript:"5.6.2","unplugin-auto-import":"^0.18.6","unplugin-vue-components":"^0.27.5",vercel:"^39.1.2",vite:"^5.4.11","vite-plugin-html":"^3.2.2","vite-plugin-node-polyfills":"^0.22.0",vitest:"^1.6.0","vue-tsc":"2.0.29"},hi={"@element-plus/icons-vue":"^2.3.1","@iconify/json":"^2.2.278","@vueuse/components":"^11.3.0","@vueuse/core":"^11.3.0",chatgpt:"^5.2.5",cheerio:"1.0.0","cookie-parse":"^0.4.0","cross-fetch":"^3.1.8","crypto-js":"^4.2.0","element-plus":"^2.9.0","iframe-resizer":"^5.3.2","js-base64":"^3.7.7",katex:"^0.16.11","lodash-es":"^4.17.21",pinia:"^2.2.8",shorthash2:"^1.0.5","simple-xmlrpc":"^1.4.2",siyuan:"^1.0.6","telegraph.md":"^0.0.1","unplugin-icons":"^0.20.2",uuid:"^11.0.3",vue:"^3.5.13","vue-i18n":"^10.0.5","vue-router":"^4.5.0",xmlbuilder2:"^3.1.1","zhi-blog-api":"^1.67.1","zhi-common":"^1.33.0","zhi-device":"^2.11.0","zhi-fetch-middleware":"^0.12.0","zhi-github-middleware":"^0.5.0","zhi-gitlab-middleware":"^0.10.0","zhi-lib-base":"^0.8.0","zhi-notion-markdown":"^0.1.4","zhi-siyuan-api":"^2.24.1","zhi-siyuan-picgo":"^1.12.0","zhi-xmlrpc-middleware":"^0.6.21"},fr="pnpm@9.13.2",yr={name:rr,version:mi,description:cr,repository:pr,homepage:ur,author:dr,license:gr,scripts:mr,devDependencies:hr,dependencies:hi,packageManager:fr};class I{static blogApi(o,t){if(!t)throw new Error("apiAdaptor cannot be null");if(!t.getUsersBlogs)throw this.logger.error("apiAdaptor must implements BlogApi",t),new Error(`apiAdaptor must implements BlogApi => ${this.getObjectName(t)}`);return new wl(t)}static webApi(o,t){if(!t)throw new Error("webAdaptor cannot be null");if(!t.getMetaData)throw this.logger.error("webAdaptor must implements WebApi",t),new Error(`webAdaptor must implements WebApi => ${this.getObjectName(t)}`);return new _l(t)}static getObjectName(o){try{return typeof o=="function"&&/^class\s/.test(o.toString())?o.name:typeof o=="function"?o.name||"anonymous function":typeof o=="object"&&Object.values(o.constructor).includes(o)?Object.keys(o.constructor)[Object.values(o.constructor).indexOf(o)]:typeof o!="object"?o:"{}"}catch(t){return console.error(t),"{}"}}static emptyOrDefault(o,t){return typeof o=="string"&&(o=o.trim()),T.isEmptyString(o)?t:o}static emptyBooleanOrDefault(o,t){return typeof o>"u"?t:o}}D(I,"logger",W("publisher-widget-utils"));const dt=()=>({isInSiyuanMainWin:()=>Kt.getDevice()===St.DeviceType_Siyuan_MainWin,isInSiyuanWidget:()=>Kt.getDevice()===St.DeviceType_Siyuan_Widget,isInSiyuanBrowser:()=>Kt.getDevice()===St.DeviceType_Siyuan_Browser,isInChromeExtension:()=>Kt.getDevice()===St.DeviceType_Chrome_Extension,isInSiyuanOrSiyuanNewWin:()=>{const n=Kt.getDevice();return n===St.DeviceType_Siyuan_MainWin||n===St.DeviceType_Siyuan_RendererWin||n===St.DeviceType_Siyuan_Widget},isInSiyuanWin:()=>{const n=Kt.getDevice();return n===St.DeviceType_Siyuan_MainWin||n===St.DeviceType_Siyuan_RendererWin}}),br={class:"footer"},wr={class:"text"},_r={key:0,class:"text"},vr={key:2,class:"text"},Pr=J({__name:"DefaultFooter",setup(u){const{t:o}=Z(),t=sl(),s=ol(t),{isInChromeExtension:e}=dt(),a=e(),n=q(yr.version),i=De.nowYear(),l=_t(),c=()=>{window.open("https://github.com/terwer/siyuan-plugin-publisher")},r=async()=>{await l.push({path:"/"})},m=async()=>{await l.push({path:"/about",query:{showBack:"true"}})},y=()=>{l.push({path:"/test"})},p=()=>{const P=chrome.runtime.getURL("/index.html#/");window.open(P)},g=async()=>{await l.push({path:"/setting/publish",query:{showBack:"true"}})},w=async()=>{await l.push({path:"/setting/general",query:{showBack:"true"}})},d=async()=>{await l.push({path:"/test",query:{showBack:"true"}})};return(v,P)=>(_(),O("div",null,[E("div",br,[E("div",null,[E("span",wr," Â©2011-"+j(h(i)),1),E("span",{class:"text s-dark",onClick:P[0]||(P[0]=S=>c())},"Â siyuan-plugin-publisherÂ "),E("span",{class:"text",onClick:y},"v"+j(n.value)+"Â ",1),E("span",{class:"text s-dark",onClick:P[1]||(P[1]=S=>m())},j(h(o)("syp.about")),1),P[4]||(P[4]=E("span",{class:"text"},".",-1)),E("span",{class:"text s-dark",onClick:r},j(h(o)("service.tab.manage")),1),P[5]||(P[5]=E("span",{class:"text"},".",-1)),E("span",{class:"text s-dark",onClick:P[2]||(P[2]=S=>h(s)())},j(h(t)?h(o)("theme.mode.light"):h(o)("theme.mode.dark")),1),P[6]||(P[6]=E("span",{class:"text"},".",-1)),E("span",{class:"text s-dark",onClick:g},j(h(o)("service.tab.publish.setting")),1),P[7]||(P[7]=E("span",{class:"text"},".",-1)),E("span",{class:"text s-dark",onClick:w},j(h(o)("service.tab.change.local")),1),h(It)?(_(),O("span",_r,".")):X("",!0),h(It)?(_(),O("span",{key:1,class:"text s-dark",onClick:d}," ç»„ä»¶æµ‹è¯• ")):X("",!0),h(a)?(_(),O("span",vr,".")):X("",!0),h(a)?(_(),O("span",{key:3,class:"text s-dark",onClick:P[3]||(P[3]=S=>p())},j(h(o)("blog.newwin.open")),1)):X("",!0)])])]))}}),pe=(u,o)=>{const t=u.__vccOpts||u;for(const[s,e]of o)t[s]=e;return t},Tr=pe(Pr,[["__scopeId","data-v-166e8134"]]),kr={id:"app-layout-default"},Sr={class:"default-main"},Er=J({__name:"AppLayoutDefault",setup(u){return(o,t)=>(_(),O("div",kr,[f(lr),E("div",Sr,[Ct(o.$slots,"default",{},void 0,!0)]),f(Tr)]))}}),Cr=pe(Er,[["__scopeId","data-v-0cf32ad2"]]),Ar=J({__name:"AppLayout",setup(u){const o=al(Cr);return(t,s)=>(_(),C(il,null,{default:b(()=>[(_(),C(nl(o.value),null,{default:b(()=>[Ct(t.$slots,"default")]),_:3}))]),_:3}))}}),Ur=J({__name:"App",setup(u){return(o,t)=>{const s=ll("router-view");return _(),C(Ar,null,{default:b(()=>[f(s)]),_:1})}}}),Ir={class:"loading-tips"},xr={key:0},Mr={key:1},Dr={key:2},Or={key:3},Vr={key:4},$r={key:5},js=J({__name:"LoadingTimer",props:{loadingTime:Number},setup(u){const{t:o}=Z();return(t,s)=>(_(),O("div",Ir,[E("div",null,[R(j(h(o)("loading.cost"))+": "+j(u.loadingTime)+" ms ",1),u.loadingTime<200?(_(),O("span",xr,"ðŸ˜")):u.loadingTime<400?(_(),O("span",Mr,"ðŸ˜„")):u.loadingTime<600?(_(),O("span",Dr,"ðŸ˜Š")):u.loadingTime<800?(_(),O("span",Or,"ðŸ¤”")):u.loadingTime<1e3?(_(),O("span",Vr,"ðŸ˜’")):(_(),O("span",$r,"ðŸ˜­"))])]))}}),Nr={lang:"zh_CN",[Me]:"{}"};class Hr{constructor(o){D(this,"logger");D(this,"fs");D(this,"path");D(this,"filePath");this.logger=W("json-storage");const t=Tt.siyuanWindow();this.fs=t.require("fs"),this.path=t.require("path");const s=t==null?void 0:t.siyuan.config.system.dataDir;this.filePath=this.path.join(s,o);const e=this.path.dirname(this.filePath);this.logger.info("store dir =>",e),this.fs.existsSync(e)||this.fs.mkdirSync(e),this.fs.existsSync(this.filePath)||this.writeFile({}),this.logger.info("ininted json local storage in =>",this.filePath)}getItem(o){return this.getStoredItems()[o]||null}setItem(o,t){const s=this.getStoredItems();s[o]=t,this.writeFile(s)}removeItem(o){const t=this.getStoredItems();delete t[o],this.writeFile(t)}getStoredItems(){return te.safeParse(this.readFile(),{})}readFile(){return this.fs.readFileSync(this.filePath,this.getFileOptions())}writeFile(o){return this.fs.writeFileSync(this.filePath,JSON.stringify(o),this.getFileOptions())}getFileOptions(){return{encoding:"utf8"}}}const jn=W("use-common-local-storage"),An=(u,o,t,s={})=>{const e=Lr(u,s);return rl(o,t,e,s)},Lr=(u,o={})=>{let t;const{isInSiyuanOrSiyuanNewWin:s}=dt();if(s())t=new Hr(u),jn.info("using JsonStorage for localStorage");else{const{window:e=cl}=o;t=e==null?void 0:e.localStorage,jn.info("using window.localStorage for localStorage")}return t},Un=()=>{const u="storage/syp/siyuan-cfg.json",o="siyuan-cfg",t=()=>{const e="http://127.0.0.1:6806",a="",n=_e;let i;const l=Tt.siyuanWindow();i=l==null?void 0:l.location.origin;const c=new mt(i??e,a);c.middlewareUrl=n;const r=An(u,o,c,{serializer:Eo.object});return i&&(r.value.apiUrl=i),r};return{getSiyuanSetting:t,getReadOnlySiyuanSetting:()=>{const e=t();return fn(e)}}};class Rr extends vl{constructor(){super();D(this,"experimentalUseSiyuanNoteAIConfig");D(this,"experimentalAIEnabled");D(this,"experimentalAICode");D(this,"experimentalAIBaseUrl");D(this,"experimentalAIProxyUrl");D(this,"experimentalAIApiModel");D(this,"experimentalAIApiMaxTokens");D(this,"experimentalAIApiTemperature");D(this,"showDocQuickMenu");D(this,"showQuickMenu");D(this,"showSingleMenu");D(this,"showBatchMenu");D(this,"showAIMenu");D(this,"showExtendMenu");D(this,"showArticleManageMenu");this.experimentalUseSiyuanNoteAIConfig=!0,this.experimentalAIEnabled=!1,this.showDocQuickMenu=!0,this.showQuickMenu=!0,this.showSingleMenu=!0,this.showBatchMenu=!0,this.showAIMenu=!0,this.showExtendMenu=!0,this.showArticleManageMenu=!0}}const xt=()=>{const u="storage/syp/publish-preference-cfg.json",o="publish-preference-cfg",t=W("use-publish-pref"),s=()=>{var c,r,m;const a=new Rr,n=An(u,o,a,{serializer:Eo.object}),i=Tt.siyuanWindow(),l=(m=(r=(c=i==null?void 0:i.siyuan)==null?void 0:c.config)==null?void 0:r.ai)==null?void 0:m.openAI;return t.info("try load win.siyuan.config =>",l),l?(n.value.experimentalUseSiyuanNoteAIConfig=!0,n.value.experimentalAIProxyUrl=l.apiProxy,n.value.experimentalAICode=l.apiKey,n.value.experimentalAIBaseUrl=l.apiBaseURL,n.value.experimentalAIApiModel=l.apiModel,n.value.experimentalAIApiMaxTokens=l.apiMaxTokens,n.value.experimentalAIApiTemperature=l.apiTemperature,t.info("use siyuan-note ai config")):(n.value.experimentalUseSiyuanNoteAIConfig=!1,t.info("use custom ai config")),n.value.showDocQuickMenu=I.emptyBooleanOrDefault(n.value.showDocQuickMenu,!0),n.value.showQuickMenu=I.emptyBooleanOrDefault(n.value.showQuickMenu,!0),n.value.showSingleMenu=I.emptyBooleanOrDefault(n.value.showSingleMenu,!0),n.value.showBatchMenu=I.emptyBooleanOrDefault(n.value.showBatchMenu,!0),n.value.showAIMenu=I.emptyBooleanOrDefault(n.value.showAIMenu,!0),n.value.showExtendMenu=I.emptyBooleanOrDefault(n.value.showExtendMenu,!0),n};return{getPublishPreferenceSetting:s,getReadOnlyPublishPreferenceSetting:()=>{const a=s();return fn(a)}}};var so={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const Re=()=>{const u=W("use-siyuan-api"),{getReadOnlySiyuanSetting:o}=Un(),{getReadOnlyPublishPreferenceSetting:t}=xt(),s=I.emptyOrDefault(so.VITE_SIYUAN_API_URL,""),e=I.emptyOrDefault(so.VITE_SIYUAN_AUTH_TOKEN,""),a=I.emptyOrDefault(so.VITE_SIYUAN_COOKIE,""),n=t(),i=o(),l=I.emptyOrDefault(i.value.apiUrl,s),c=I.emptyOrDefault(i.value.password,e),r=new mt(l,c);r.cookie=I.emptyOrDefault(i.value.cookie,a),r.preferenceConfig.fixTitle=n.value.fixTitle,r.preferenceConfig.keepTitle=n.value.keepTitle,r.preferenceConfig.removeFirstH1=n.value.removeFirstH1,r.preferenceConfig.removeMdWidgetTag=n.value.removeMdWidgetTag;const m=new wt(r),y=new ti(r),{isInChromeExtension:p,isInSiyuanOrSiyuanNewWin:g}=dt(),w=()=>{const v=so.VITE_DEFAULT_TYPE,P=v==="siyuan";return u.info("defaultType=>",v),u.info("storeViaSiyuanApi=>",String(P)),P},d=p()?!1:w()&&!g();return{blogApi:m,kernelApi:y,siyuanConfig:r,isStorageViaSiyuanApi:w,isUseSiyuanProxy:d}};class Gr{constructor(o){D(this,"logger");D(this,"storageViaSiyuanApi");D(this,"kernelApi");D(this,"key");this.logger=W("common-storage");const{isStorageViaSiyuanApi:t,kernelApi:s}=Re();if(this.storageViaSiyuanApi=t(),this.kernelApi=s,this.storageViaSiyuanApi)this.key=o;else{const e=o.split("/").pop()??"";this.key=e.slice(0,e.lastIndexOf("."))}}async getItem(o){this.logger.info(`Retrieving value for '${o}' from CommonStorage.`);let t;if(this.storageViaSiyuanApi)try{t=await this.kernelApi.getFile(o,"text")??""}catch(s){this.logger.error(`Failed to get value for key '${o}' from SiYuan Api LocalStorageAdaptor. Error:`,s)}else try{t=Tt.siyuanWindow().localStorage.getItem(o)??""}catch(s){this.logger.error(`Failed to get value for key '${o}' from Browser LocalStorageAdaptor. Error:`,s)}return T.isEmptyString(t)&&(t="{}"),t}async removeItem(o){this.logger.info(`Removing value for ${o} from CommonStorage.`)}async setItem(o,t){if(this.storageViaSiyuanApi)try{const s=await this.kernelApi.saveTextData(o,t);this.logger.debug(`Use SiYuan Api LocalStorageAdaptor to setItem - Key '${o}'`,s)}catch(s){this.logger.errot(`Failed to set value for key '${o}' from SiYuan Api LocalStorageAdaptor. Error:`,s)}else Tt.siyuanWindow().localStorage.setItem(o,t),this.logger.debug(`Use Browser LocalStorageAdaptor to setItem - Key '${o}'`)}}const Br=(u,o)=>{const t=W("common-storage-async"),s=new Gr(u),e=pl(o),a=jr(e);t.debug(`It is detected that the serialization type is ${a}`);const n=Eo[a];return{commonStore:{async get(){t.debug("Fetching data from common storage...");const l=await s.getItem(s.key)??"{}";let c=await n.read(l)??{};return ae.isEmptyObject(c)&&(t.info("Initial data not found in common storage. Setting initial value..."),await s.setItem(s.key,n.write(o)),t.debug("Initial value set:",o),c=o),c},async set(l){await s.setItem(s.key,n.write(l))}}}};function jr(u){return u==null?"any":u instanceof Set?"set":u instanceof Map?"map":u instanceof Date?"date":typeof u=="boolean"?"boolean":typeof u=="string"?"string":typeof u=="object"?"object":Number.isNaN(u)?"any":"number"}const me=Il("setting",()=>{const u=W("use-setting-store"),o="/data/storage/syp/sy-p-plus-cfg.json",t=Nr,{commonStore:s}=Br(o,t),e=q(null),a=yn(async()=>{const r=await s.get();return u.debug("get data from setting=>",r),e.value=r,r});return{getSetting:async()=>{if(e.value===null){u.info("Setting not initialized. Initializing now...");const r=a.value;return u.info("Loaded setting from remote api"),r??{}}return u.info("Loaded setting from cache."),e.value??{}},updateSetting:async r=>{u.debug("update setting=>",r),await s.set(r),e.value={...e.value,...r}},checkKeyExists:r=>{const m=e.value;if(!m)return!1;for(const y in m)if(y===r)return!0;return!1},deleteKey:r=>{const m=e.value;if(m){for(const y in m)if(y===r){delete m[y];return}}}}}),Kr=()=>{const u=new Date().toISOString();return Ml(u).toLowerCase()},Wr=()=>Dl(),Fr=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const t=Math.random()*16|0;return(o==="x"?t:t&3|8).toString(16)}),Ks={newUuid:Wr,newID:Kr,randomUuid:Fr};class Os{constructor(o,t,s,e,a){D(this,"platformType");D(this,"subPlatformType");D(this,"platformKey");D(this,"platformName");D(this,"platformIcon");D(this,"isEnabled");D(this,"isAuth");D(this,"authMode");D(this,"authUrl");D(this,"logoutUrl");D(this,"domain");D(this,"cookieLimit");D(this,"isSys");this.platformType=o,this.platformKey=t,this.platformName=s,this.isAuth=!1,this.isEnabled=!1,this.authMode="api",t.toLowerCase().includes("Custom".toLowerCase())&&(this.authMode="web"),this.cookieLimit=!1,this.isSys=!1,this.subPlatformType=e,this.platformIcon=a}}var ge=(u=>(u.API="api",u.WEBSITE="web",u))(ge||{}),ye=(u=>(u.Common="Common",u.Metaweblog="Metaweblog",u.Wordpress="Wordpress",u.Github="Github",u.Gitlab="Gitlab",u.Custom="Custom",u.System="System",u))(ye||{}),H=(u=>(u.Common_Yuque="Yuque",u.Common_Notion="Notion",u.Common_Halo="Halo",u.Common_Telegraph="Telegraph",u.Github_Hexo="Hexo",u.Github_Hugo="Hugo",u.Github_Jekyll="Jekyll",u.Github_Vuepress="Vuepress",u.Github_Vuepress2="Vuepress2",u.Github_Vitepress="Vitepress",u.Gitlab_Hexo="Gitlabhexo",u.Gitlab_Hugo="Gitlabhugo",u.Gitlab_Jekyll="Gitlabjekyll",u.Gitlab_Vuepress="Gitlabvuepress",u.Gitlab_Vuepress2="Gitlabvuepress2",u.Gitlab_Vitepress="Gitlabvitepress",u.Metaweblog_Metaweblog="Metaweblog",u.Metaweblog_Cnblogs="Cnblogs",u.Metaweblog_Typecho="Typecho",u.Metaweblog_Jvue="Jvue",u.Wordpress_Wordpress="Wordpress",u.Wordpress_Wordpressdotcom="Wordpressdotcom",u.Custom_Zhihu="Zhihu",u.Custom_CSDN="Csdn",u.Custom_Wechat="Wechat",u.Custom_Jianshu="Jianshu",u.Custom_Juejin="Juejin",u.Custom_Haloweb="Haloweb",u.System_Siyuan="Siyuan",u.NONE="none",u))(H||{});function zr(u){const o=[];switch(u){case"Common":o.push("Yuque"),o.push("Notion"),o.push("Halo"),o.push("Telegraph");break;case"Github":o.push("Hexo"),o.push("Hugo"),o.push("Jekyll"),o.push("Vuepress"),o.push("Vuepress2"),o.push("Vitepress");break;case"Gitlab":o.push("Gitlabhexo"),o.push("Gitlabhugo"),o.push("Gitlabjekyll"),o.push("Gitlabvuepress"),o.push("Gitlabvuepress2"),o.push("Gitlabvitepress");break;case"Metaweblog":o.push("Metaweblog"),o.push("Cnblogs"),o.push("Typecho"),o.push("Jvue");break;case"Wordpress":o.push("Wordpress"),o.push("Wordpressdotcom");break;case"Custom":o.push("Zhihu"),o.push("Csdn"),o.push("Wechat"),o.push("Jianshu"),o.push("Juejin"),o.push("Haloweb");break;case"System":o.push("Siyuan");break}return o}function ht(u){const o=u,t=[],s=[],e=[],a=[],n=[],i=[],l=[];return o.forEach(r=>{switch(r.platformType){case"Common":t.push(r);break;case"Github":s.push(r);break;case"Gitlab":e.push(r);break;case"Metaweblog":a.push(r);break;case"Wordpress":n.push(r);break;case"Custom":i.push(r);break;case"System":l.push(r);break}}),{totalCfg:o,commonCfg:t,githubCfg:s,gitlabCfg:e,metaweblogCfg:a,wordpressCfg:n,customCfg:i,systemCfg:l}}function ro(u){const o=u.split("-");let t="";if(o.length>0){const a=o[0].split("_");t=a.length>1?a[1]:a[0]}else throw new Error("Invalid platform key");const e=Object.values(H).find(a=>typeof a=="string"&&a.toLowerCase()===t.toLowerCase());if(e)return e;throw new Error("Invalid platform key")}function Vs(u,o){let t;const s=Ks.newID();return t=u.toLowerCase(),!T.isEmptyString(o)&&o!=="none"&&(t=[t,"_",T.upperFirst(o)].join("")),[t,"-",s].join("")}function fi(u,o){let t=!1;for(let s=0;s<u.length;s++)if(u[s].platformKey===o){t=!0;break}return t}function Ws(u,o){for(let t=0;t<u.length;t++)if(u[t].platformKey===o)return u[t];return null}function Wt(u,o,t){const s=[...u];for(let e=0;e<s.length;e++)if(s[e].platformKey===o){s[e]=t;break}return s}function Jr(u,o){return u.filter(t=>t.platformKey!==o)}function Ee(u){return"custom-"+u+"-post-id"}function $s(u){return"custom-"+u.replace(/_/g,"-")+"-yaml"}function Kn(u){const o=/^custom-(.+?)-post-id$/,t=u.match(o);if(t&&t[1])return t[1];throw new Error("Invalid postidKey format")}const Te={iconEPPlus:'<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-ea893728=""><path d="M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"></path></svg>',iconIFEdit:'<svg t="1689998125340" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5430" width="16" height="16"><path d="M652.4 156.6125a112.5 112.5 0 1 1 155.925 161.15625L731.375 394.71875 572.3 235.5875l79.5375-79.5375 0.5625 0.5625zM333.63125 792.40625v0.1125H174.5v-159.1875l358.03125-357.975 159.075 159.13125-357.975 357.91875zM62 849.5h900v112.5H62v-112.5z" p-id="5431"></path></svg>',iconIFHexo:'<svg t="1684170255787" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7119" width="16" height="16"><path d="M512 0.298667L66.986667 258.389333V770.133333L512 1023.786667l445.013333-258.090667V253.952L512 0.298667z m204.714667 729.813333l-40.064 22.229333-40.064-22.229333V552.106667H387.413333v178.005333l-40.106666 22.229333-40.021334-22.229333V293.973333l40.064-22.229333 40.064 22.229333v178.005334h249.173334V293.973333l40.106666-22.229333 40.021334 22.229333v436.138667z" p-id="7120"></path></svg>',iconIFHexoGitlab:'<svg t="1693214758547" class="icon" viewBox="0 0 1137 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12137" width="16" height="16"><path d="M896.227556 577.991111c-21.048889 0-38.115556 16.952889-38.115556 38.058667v280.007111c0 28.103111-22.755556 50.801778-50.858667 50.801778H728.177778v-131.242667a127.317333 127.317333 0 0 0-127.146667-127.032889H538.168889a127.317333 127.317333 0 0 0-127.089778 127.032889v131.128889H331.776a50.801778 50.801778 0 0 1-50.801778-50.801778v-279.893333a38.115556 38.115556 0 1 0-76.288 0v280.007111a127.317333 127.317333 0 0 0 127.089778 127.032889h155.363556v-207.473778c0-28.046222 22.755556-50.801778 50.858666-50.801778h62.919111c28.103111 0 50.858667 22.755556 50.858667 50.801778v207.36h155.477333a127.317333 127.317333 0 0 0 127.146667-127.032889v-279.893333c0-21.048889-17.066667-38.115556-38.115556-38.115556z" p-id="12138"></path><path d="M1073.208889 413.411556a38.115556 38.115556 0 0 0-22.755556 72.817777 15.36 15.36 0 0 1 2.503111 28.16 15.530667 15.530667 0 0 1-21.845333-9.272889 41.528889 41.528889 0 0 0-4.039111-8.988444l-172.259556-398.677333-0.170666-0.398223a15.473778 15.473778 0 0 1 0.682666-11.662222 15.530667 15.530667 0 0 1 8.760889-7.907555 15.530667 15.530667 0 0 1 11.662223 0.625777 15.36 15.36 0 0 1 5.688888 22.983112 38.115556 38.115556 0 0 0 61.212445 45.511111 91.022222 91.022222 0 0 0 12.856889-84.878223 90.624 90.624 0 0 0-46.819556-52.224A91.192889 91.192889 0 0 0 838.656 5.688889a90.680889 90.680889 0 0 0-52.280889 46.762667 92.728889 92.728889 0 0 0-8.590222 30.890666H359.765333A91.932444 91.932444 0 0 0 298.894222 5.688889a91.192889 91.192889 0 0 0-70.087111 3.811555 91.704889 91.704889 0 0 0-33.962667 137.102223 38.115556 38.115556 0 1 0 61.212445-45.511111 15.36 15.36 0 1 1 26.794667-3.982223l-0.113778 0.341334L110.592 496.071111a44.487111 44.487111 0 0 0-4.039111 8.988445 15.303111 15.303111 0 0 1-10.24 10.296888 15.815111 15.815111 0 0 1-11.662222-1.024 15.36 15.36 0 0 1 2.56-28.216888 38.229333 38.229333 0 0 0 25.031111-47.786667 38.286222 38.286222 0 0 0-47.786667-24.974222 91.591111 91.591111 0 0 0-15.018667 168.448 90.680889 90.680889 0 0 0 69.802667 6.257777c23.893333-7.509333 43.349333-24.177778 54.442667-46.136888h790.414222a91.704889 91.704889 0 0 0 169.244444-13.824 91.818667 91.818667 0 0 0-60.131555-114.744889z m-866.474667 52.451555L339.057778 159.573333h459.434666l132.323556 306.289778H206.734222z" p-id="12139"></path></svg>',iconIFHugo:'<svg t="1684170339672" class="icon" viewBox="0 0 1280 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9235" width="16" height="16"><path d="M800.20014 389.6c-21.8 5.6-39.8 8.6-58.2 15.2-14.6 3.8-29.4 7.8-46.4 12.2l-1.2 0.2c-8.4 2.4-9.2 2.6-17-6.4-9.4-10.6-16.2-17.4-29.2-23.8-39.4-19.2-77.4-13.6-112.8 9.4-42.4 27.4-64.2 68-63.6 118.4 0.6 50 34.8 91 82.4 97.8 44 5.6 79.6-9.2 107.6-41 4.2-5.2 8-10.6 12.2-16.6 1.6-2 3-4.2 4.6-6.6h-120.2c-13 0-16.2-8-11.8-18.6 8-19.4 23-51.8 31.8-68 1.8-3.6 6.2-11.6 13.8-11.6h202.2c9-26.8 23.6-53.8 43.2-79.4 45.4-59.8 98.6-91 174.4-104 63.6-11.2 123.4-5 177.8 31.8 49.2 33.6 79.6 79.2 87.8 139 10.6 84.2-13.8 152.6-73.4 211.2-39.4 41.8-89.8 68-147.8 79.8-11.2 2-22.2 3-33 4-5.8 0.4-11.4 1-17 1.6-56.6-1.2-108.4-17.4-152-54.8-30.6-26.6-51.8-59.2-62.2-97-7.4 14.6-16 28.8-28 42.2-43.2 59.2-101.8 96-175.8 105.8-61.2 8.2-117.8-3.6-167.8-41-46-35-72.2-81-79-138.4-8.2-68 11.8-130.8 52.8-182.6 44.4-58 103-94.8 174.6-107.8 58.6-12.4 114.6-3.8 165.2 30.6 33 21.8 56.6 51.6 72.2 87.8 3.8 5.6 1.2 8.8-6.2 10.6z m-703.6 11.2c-2.5 0-3.12-1.2-1.88-3.2l13.1-16.8c1.24-1.8 4.36-3 6.86-3H337.20014c2.4 0 3 1.8 1.8 3.6l-10.6 16.2c-1.2 2-4.4 3.8-6.2 3.8l-225.6-0.6zM2.49214 458.2c-2.492 0-3.116-1.4-1.868-3.2l13.086-16.8c1.248-1.8 4.364-3.2 6.85-3.2H304.80014c2.4 0 3.6 2 3 3.8l-5 15c-0.6 2.4-3 3.8-5.6 3.8l-294.708 0.6z m148.948 53.6c-1.24 1.8-0.62 3.6 1.86 3.6l135.9 0.6c1.8 0 4.4-1.8 4.4-4.2l1.2-15c0-2.6-1.2-4.4-3.8-4.4H166.40014c-2.5 0-4.98 1.8-6.24 3.8l-8.72 15.6z m1002.96-36c-0.4-5.2-0.6-9.6-1.4-14-11.2-61.6-68-96.6-127.2-82.8-58 13-95.4 49.8-109 108.4-11.2 48.6 12.4 97.8 57.2 117.8 34.4 15 68.6 13.2 101.6-3.8 49.2-27.2 76-65.4 79.2-119-0.2-2.4-0.2-4.6-0.4-6.6z" p-id="9236"></path></svg>',iconIFJekyll:'<svg t="1694167709305" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4932" width="16" height="16"><path d="M667.4 180c-35.2 0-69.6 8.8-99.7 27.1-57.2 32.2-91.6 89.4-91.6 151.7v306.4c0 35.9-20.5 68.9-55 88.7-19.8 11-41.8 16.9-64.5 16.9-66 0-119.5-47.6-119.5-105.5 0-17.6 4.4-34.4 13.9-49.8 13.9-23.5 38.8-41.8 70.4-51.3 3.7-1.5 6.6-1.5 8.1-1.5 20.5 0 36.6-16.1 36.6-36.6s-16.1-36.6-36.6-36.6c-8.8 0-17.6 1.5-30.8 5.1-46.9 13.9-85.8 43.2-109.9 82.8-16.1 27.1-24.9 57.2-24.9 87.9 0 98.9 86.5 178.8 192.8 178.8 35.2 0 69.6-8.8 100.4-26.4 57.2-32.2 91.6-89.4 91.6-151.7V358.8c0-35.9 20.5-68.9 55-88.7 19.8-11 41.8-16.9 64.5-16.9 65.2 0 118.7 47.6 118.7 105.5 0 17.6-4.4 34.4-13.9 49.8-13.9 24.2-38.8 42.5-70.4 51.3-3.7 1.5-6.6 1.5-8.1 1.5-20.5 0-36.6 16.1-36.6 36.6s16.1 36.6 36.6 36.6c8.8 0 18.3-1.5 30.8-5.1 46.9-13.9 85.8-43.2 109.9-82.8 16.1-27.1 24.9-57.2 24.9-87.9 0-98.8-86.5-178.7-192.7-178.7z" p-id="4933"></path></svg>',iconIFVuepress:'<svg t="1694167910261" class="icon" viewBox="0 0 1120 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8613" width="16" height="16"><path d="M1055.594124 381.672727L897.339578 139.636364c-18.618182-37.236364-74.472727-55.854545-111.709091-55.854546H282.939578c-37.236364 0-93.090909 27.927273-111.709091 55.854546L12.975942 381.672727c-18.618182 37.236364-18.618182 83.781818 9.309091 111.709091l465.454545 493.381818c27.927273 27.927273 65.163636 18.618182 93.090909 0l465.454546-493.381818c27.927273-27.927273 37.236364-83.781818 9.309091-111.709091z m-242.036364-74.472727s0 9.309091 0 0L552.903215 726.109091H422.575942L376.030487 344.436364c0-18.618182-9.309091-27.927273-9.309091-37.236364-9.309091-9.309091-18.618182-9.309091-27.927272-9.309091l9.309091-18.618182H469.121396c9.309091 0 18.618182 0 27.927273 9.309091 9.309091 9.309091 9.309091 18.618182 9.309091 27.927273l27.927273 269.963636 139.636363-251.345454v-9.309091-9.309091c0-9.309091 0-9.309091-9.309091-18.618182-9.309091 0-9.309091-9.309091-18.618181-9.309091l9.309091-18.618182h139.636363c9.309091 0 18.618182 0 18.618182 9.309091s9.309091 18.618182 0 27.927273c9.309091 0 0 0 0 0z" p-id="8614"></path></svg>',iconIFVuepress2:'<svg t="1694167983538" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8866" width="16" height="16"><path d="M554.666667 384h234.666666L554.666667 149.333333V384M256 85.333333h341.333333l256 256v512a85.333333 85.333333 0 0 1-85.333333 85.333334H256a85.333333 85.333333 0 0 1-85.333333-85.333334V170.666667c0-47.36 37.973333-85.333333 85.333333-85.333334m384 682.666667v-85.333333H256v85.333333h384m128-170.666667v-85.333333H256v85.333333h512z" p-id="8867"></path><path d="M516.010667 555.946667l249.941333 431.36 249.941333-429.269334v-2.133333h-97.152l-151.338666 259.925333-150.613334-259.925333z" fill="#41B883" p-id="8868"></path><path d="M616.789333 555.946667l150.613334 259.925333 151.338666-259.968h-91.136L768 658.218667l-59.306667-102.314667z" p-id="8869"></path></svg>',iconIFVue:'<svg t="1684170497745" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10726" width="16" height="16"><path d="M512 504L764.8 68.8h-134.4L512 275.2 393.6 70.4h-134.4L512 504zM819.2 70.4L512 600 204.8 68.8H0l512 886.4L1024 70.4H819.2z" p-id="10727"></path></svg>',iconIFNuxt:'<svg t="1689995630285" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2710" width="16" height="16"><path d="M841.557333 864.938667l0.981334-1.92a31.573333 31.573333 0 0 0 2.261333-4.992l0.085333-0.213334a49.493333 49.493333 0 0 0 2.304-25.898666l0.042667 0.298666a76.586667 76.586667 0 0 0-10.026667-26.581333l0.213334 0.341333-226.858667-399.061333-34.645333-60.586667-34.432 60.586667-226.730667 399.061333a78.933333 78.933333 0 0 0-8.704 25.770667l-0.042667 0.469333a53.632 53.632 0 0 0 3.413334 30.421334l-0.128-0.341334a34.517333 34.517333 0 0 0 2.133333 4.352l-0.085333-0.170666c6.826667 11.733333 21.333333 25.685333 53.333333 25.685333h422.314667c6.698667 0 39.466667-1.365333 54.613333-27.178667z m-265.685333-397.482667l207.317333 364.714667H368.64z m437.290667 338.517333L713.813333 278.613333c-3.072-5.546667-20.352-33.578667-50.432-33.578666-13.525333 0-32.938667 5.76-48.725333 33.493333l-38.698667 67.84 34.432 60.586667 53.333334-94.378667 296.149333 519.68h-112.64a50.645333 50.645333 0 0 1-2.474667 25.941333l0.128-0.341333a32.938667 32.938667 0 0 1-2.432 5.376l0.085334-0.170667-0.981334 1.92c-15.146667 25.813333-47.872 27.178667-54.272 27.178667h176.170667c6.485333 0 39.125333-1.365333 54.272-27.178667 6.698667-11.733333 11.52-31.445333-4.565333-58.965333zM311.637333 866.432a42.197333 42.197333 0 0 1-1.92-3.925333l-0.085333-0.256a52.394667 52.394667 0 0 1-3.584-30.378667l-0.042667 0.298667H64.042667L423.68 199.338667l118.058667 207.530666 34.218666-60.586666-102.912-181.290667c-2.858667-5.205333-20.266667-33.152-50.218666-33.152-13.525333 0-32.938667 5.845333-48.725334 33.578667L9.813333 805.930667c-3.072 5.546667-18.133333 34.645333-3.2 60.458666 6.826667 11.733333 21.333333 25.685333 53.333334 25.685334h305.109333c-31.786667 0-46.506667-13.738667-53.333333-25.685334z" p-id="2711"></path></svg>',iconIFYuque:'<svg t="1684169305378" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5780" width="16" height="16"><path d="M903.542857 350.4c-11.314286-45.028571 11.314286-116.8 83.885714-142.171429l-77.6-4.114285s-29.371429-102.857143-164.114285-112c-134.628571-9.257143-222.742857-3.428571-222.857143-3.428572 0.114286 0 99.885714 63.542857 59.885714 176.8-29.257143 60-75.2 109.257143-124.342857 165.371429-1.485714 1.485714-2.857143 2.971429-4 4.228571C291.885714 618.285714 36.571429 909.714286 36.571429 909.714286c281.028571 73.6 469.371429-7.2 580.8-104.114286 23.428571-0.228571 41.028571-0.342857 52.914285-0.342857 155.2 0 286.4-134.4 281.028572-283.885714-3.657143-102.742857-36.457143-125.942857-47.771429-170.971429z m-233.257143 381.714286c-12.114286 0-29.942857 0.114286-53.485714 0.342857l-26.971429 0.228571-20.342857 17.714286c-53.828571 46.857143-119.314286 81.714286-195.885714 100.114286-60 14.4-125.714286 18.514286-197.371429 10.971428 20.571429-23.428571 41.714286-47.542857 63.314286-72.114285 105.142857-119.542857 198.628571-225.714286 270.742857-306.857143l1.6-1.6 1.485715-1.714286c4.685714-5.257143 23.542857-26.628571 28.228571-32.114286 11.085714-12.685714 19.771429-22.742857 28-32.685714 35.085714-41.942857 59.657143-77.485714 78.857143-116.8l1.828571-3.771429 1.371429-3.885714c15.657143-44.342857 17.6-87.885714 7.085714-128.914286 25.714286 0.8 53.142857 2.171429 81.942857 4.114286 38.057143 2.628571 63.428571 14.742857 81.257143 33.371429 6.628571 6.857143 11.657143 14.285714 15.314286 21.371428 1.142857 2.285714 1.942857 4.114286 2.628571 5.714286l5.714286 20.228571c-17.942857 39.428571-22.742857 83.771429-13.028571 122.514286 3.428571 13.485714 7.885714 25.6 14.057142 39.314286 2.4 5.371429 10.857143 22.971429 12.571429 26.628571 11.771429 25.942857 17.6 49.142857 19.085714 89.942857 3.771429 108.114286-94.514286 207.885714-208 207.885715z" p-id="5781"></path></svg>',iconIFNotion:'<svg t="1691069780339" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3978" width="16" height="16"><path d="M190.3619 179.479263c31.818329 25.847061 43.760866 23.885073 103.558852 19.875793l563.645073-33.822969c11.942537 0 2.00464-11.942537-1.961988-13.904525L761.940229 83.938971c-17.913805-13.904525-41.84153-29.856341-87.649688-25.889713L128.559273 97.886148c-19.875793 1.961988-23.885073 11.942537-15.951816 19.875793z m33.822969 131.367902v593.032243c0 31.860981 15.909165 43.803518 51.779427 41.798878l619.433779-35.827609c35.870262-1.961988 39.879542-23.885073 39.879541-49.774787V271.010276c0-25.847061-9.937896-39.794238-31.903633-37.83225l-647.328132 37.83225c-23.885073 2.00464-31.860981 13.947177-31.860982 39.794237z m611.500523 31.775678c3.966628 17.913805 0 35.82761-17.913805 37.874902l-29.856341 5.971268v437.779268c-25.932365 13.947177-49.817438 21.923085-69.735883 21.923085-31.903633 0-39.879542-9.980548-63.764615-39.794238l-195.21782-306.49667v296.516122L520.956902 810.386408s0 35.82761-49.817438 35.82761l-137.424474 7.933256c-3.966628-7.933256 0-27.851701 13.947177-31.818329l35.827609-9.937897V420.291982L333.800294 416.282702c-4.00928-17.913805 5.971268-43.760866 33.82297-45.765506l147.405022-9.937896 203.193729 310.463298v-274.678341l-51.822078-5.928616c-3.966628-21.923085 11.942537-37.83225 31.860981-39.794238zM82.751115 44.144733l567.697005-41.798878c69.693231-5.971268 87.649688-2.00464 131.453206 29.856342l181.227992 127.358622c29.856341 21.880433 39.83689 27.851701 39.83689 51.736774v698.553084c0 43.760866-15.909165 69.693231-71.65522 73.617207l-659.313321 39.83689c-41.798878 2.00464-61.759975-3.966628-83.683059-31.860982l-133.457846-173.166779c-23.885073-31.860981-33.82297-55.703403-33.82297-83.597756V113.752661c0-35.784958 15.951817-65.683951 61.717323-69.607928z" p-id="3979"></path></svg>',iconIFHalo:'<svg t="1695187534618" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5055" width="16" height="16"><path d="M540.672 470.09792c0-0.7424-0.03584-1.46944-0.11264-2.19136a20.9408 20.9408 0 0 1 11.58144-20.92032c1.54112-0.75776 2.98496-1.70496 4.3008-2.816l320.9216-314.17856a20.93056 20.93056 0 0 0-13.5936-36.89984H160.2304a21.00224 21.00224 0 0 0-15.2576 6.56384 20.9152 20.9152 0 0 0 0.84992 29.60384l288.82944 314.17344c2.2272 2.0992 4.88448 3.6864 7.7824 4.64896a20.94592 20.94592 0 0 1 14.336 20.92544c-0.0256 0.54272-0.0256 0.54272-0.03072 1.09056v426.89536l83.93216 20.9408V470.10304z m41.96864 481.73056c0 15.56992-16.41472 25.69728-30.36672 18.73408l-125.9008-41.89184a20.9408 20.9408 0 0 1-11.60192-18.73408V480.90624c-3.1744-2.05824-6.16448-4.4032-8.9344-7.0144L117.00736 159.71328c-25.27744-23.82848-26.41408-63.60064-2.54464-88.832A63.00672 63.00672 0 0 1 160.2304 51.2h703.5392C898.5344 51.2 926.72 79.3344 926.72 114.03264c0 18.432-8.11008 35.9424-22.17984 47.87712l-320.9216 314.17344c-0.32256 0.27648-0.65024 0.54784-0.97792 0.81408v474.9312z"  p-id="5056"></path></svg>',iconIFCnblogs:'<svg t="1684168925817" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4454" width="16" height="16"><path d="M851.404 172.596c-187.462-187.461-491.346-187.461-678.808 0-187.461 187.462-187.461 491.346 0 678.808 187.462 187.461 491.346 187.461 678.808 0 187.461-187.462 187.461-491.346 0-678.808zM387.33 728.087a47.084 47.084 0 1 1-66.633-66.502 47.084 47.084 0 0 1 66.633 66.502z m205.527 1.397a38.75 38.75 0 0 1-76.625-11.52h-0.044a6.545 6.545 0 0 0-0.044 0.305v-0.349c0.306-2.618 2.051-20.727-2.967-44.99a174.24 174.24 0 0 0-48.567-89.28 172.102 172.102 0 0 0-88.8-48.305 156.698 156.698 0 0 0-42.458-2.923 38.662 38.662 0 0 1-35.39-65.324 38.618 38.618 0 0 1 21.12-10.822v-0.218c4.452-0.742 111.142-16.45 200.335 72.742 89.018 89.018 74.182 196.145 73.44 200.727z m175.2 7.592a38.75 38.75 0 0 1-65.673 21.382 39.49 39.49 0 0 1-11.65-33.73c0.087-0.35 5.105-37.484-5.062-88.975-13.31-67.375-45.295-126.895-94.953-176.902-50.007-49.702-109.527-81.644-176.945-94.953-51.491-10.167-88.582-5.193-89.019-5.149h0.219-0.044a39.927 39.927 0 0 1-44.684-32.902 38.836 38.836 0 0 1 32.204-44.378c1.92-0.305 47.869-7.33 111.273 4.364a411.753 411.753 0 0 1 106.254 34.952 425.76 425.76 0 0 1 114.633 82.255l0.916 0.96 0.96 0.873a425.89 425.89 0 0 1 82.255 114.72c16.407 33.6 28.145 69.294 34.996 106.21 11.651 63.404 4.67 109.353 4.32 111.273z" p-id="4455"></path></svg>',iconIFTypecho:'<svg t="1684170671485" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12354" width="16" height="16"><path d="M942.933333 132.266667l-168.533333-10.666667v64l164.266667 10.666667c8.533333 0 12.8 4.266667 14.933333 6.4 2.133333 2.133333 6.4 8.533333 4.266667 14.933333l-46.933334 718.933333c0 10.666667-10.666667 19.2-21.333333 19.2h-2.133333l-115.2-8.533333c-4.266667 21.333333-23.466667 36.266667-46.933334 36.266667H362.666667l522.666666 34.133333h6.4c44.8 0 81.066667-34.133333 85.333334-78.933333L1024 219.733333c2.133333-44.8-34.133333-85.333333-81.066667-87.466666z" p-id="12355"></path><path d="M727.466667 74.666667c6.4 0 10.666667 4.266667 10.666666 10.666666v853.333334c0 6.4-4.266667 10.666667-10.666666 10.666666h-640c-6.4 0-10.666667-4.266667-10.666667-10.666666V85.333333c0-6.4 4.266667-10.666667 10.666667-10.666666h640m0-74.666667h-640c-46.933333 0-85.333333 38.4-85.333334 85.333333v853.333334c0 46.933333 38.4 85.333333 85.333334 85.333333h640c46.933333 0 85.333333-38.4 85.333333-85.333333V85.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z" p-id="12356"></path><path d="M522.666667 518.4H177.066667c-21.333333 0-36.266667-17.066667-36.266667-36.266667 0-21.333333 17.066667-36.266667 36.266667-36.266666h345.6c21.333333 0 36.266667 17.066667 36.266666 36.266666 0 19.2-17.066667 36.266667-36.266666 36.266667z" p-id="12357"></path><path d="M424.533333 686.933333H177.066667c-21.333333 0-38.4 17.066667-38.4 38.4s17.066667 38.4 38.4 38.4h247.466666c21.333333 0 38.4-17.066667 38.4-38.4s-17.066667-38.4-38.4-38.4z" p-id="12358"></path></svg>',iconIFWordpress:'<svg t="1684168789622" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4159" width="16" height="16"><path d="M916.010667 291.2c35.84 65.578667 56.234667 140.8 56.234666 220.8 0 169.770667-91.989333 318.122667-228.821333 397.866667l140.586667-406.485334c26.24-65.706667 34.986667-118.229333 34.986666-164.864 0-17.28-1.109333-33.28-2.986666-47.36m-340.522667 4.48c27.605333-1.28 52.565333-4.48 52.565333-4.48 24.832-3.2 21.930667-39.68-2.858666-38.357333 0 0-74.88 5.76-122.88 5.76-45.397333 0-121.6-6.4-121.6-6.4-24.96-1.28-28.202667 36.48-3.2 37.76 0 0 23.04 2.602667 48 3.84l71.68 196.48-101.12 302.08L228.437333 294.4c27.690667-1.28 52.650667-4.266667 52.650667-4.266667 24.96-3.2 22.016-39.68-2.773333-38.229333 0 0-74.496 5.888-122.624 5.888-8.533333 0-18.688-0.341333-29.44-0.64C209.536 134.4 351.36 51.84 512 51.84c119.850667 0 228.906667 45.738667 310.869333 120.874667-1.962667-0.128-3.882667-0.384-6.016-0.384-45.226667 0-77.312 39.381333-77.312 81.664 0 37.973333 21.888 70.101333 45.226667 107.989333 17.536 30.72 37.973333 70.101333 37.973333 127.018667 0 39.04-15.104 85.077333-35.029333 148.437333l-45.866667 152.96-166.4-495.36 0.042667 0.597333zM512 972.117333c-45.184 0-88.789333-6.528-130.048-18.645333l138.112-401.322667 141.44 387.712c1.024 2.261333 2.133333 4.309333 3.328 6.357334-47.786667 16.768-99.2 25.984-152.832 25.984M51.669333 512c0-66.730667 14.336-130.133333 39.893334-187.306667L311.04 926.250667A460.544 460.544 0 0 1 51.669333 512M512 0C229.76 0 0 229.76 0 512s229.76 512 512 512 512-229.76 512-512S794.24 0 512 0" p-id="4160"></path></svg>',iconIFZhihu:'<svg t="1689993036802" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2449" width="16" height="16"><path d="M564.7 230.1V803h60l25.2 71.4L756.3 803h131.5V230.1H564.7z m247.7 497h-59.9l-75.1 50.4-17.8-50.4h-18V308.3h170.7v418.8zM526.1 486.9H393.3c2.1-44.9 4.3-104.3 6.6-172.9h130.9l-0.1-8.1c0-0.6-0.2-14.7-2.3-29.1-2.1-15-6.6-34.9-21-34.9H287.8c4.4-20.6 15.7-69.7 29.4-93.8l6.4-11.2-12.9-0.7c-0.8 0-19.6-0.9-41.4 10.6-35.7 19-51.7 56.4-58.7 84.4-18.4 73.1-44.6 123.9-55.7 145.6-3.3 6.4-5.3 10.2-6.2 12.8-1.8 4.9-0.8 9.8 2.8 13 10.5 9.5 38.2-2.9 38.5-3 0.6-0.3 1.3-0.6 2.2-1 13.9-6.3 55.1-25 69.8-84.5h56.7c0.7 32.2 3.1 138.4 2.9 172.9h-141l-2.1 1.5c-23.1 16.9-30.5 63.2-30.8 65.2l-1.4 9.2h167c-12.3 78.3-26.5 113.4-34 127.4-3.7 7-7.3 14-10.7 20.8-21.3 42.2-43.4 85.8-126.3 153.6-3.6 2.8-7 8-4.8 13.7 2.4 6.3 9.3 9.1 24.6 9.1 5.4 0 11.8-0.3 19.4-1 49.9-4.4 100.8-18 135.1-87.6 17-35.1 31.7-71.7 43.9-108.9L497 850l5-12c0.8-1.9 19-46.3 5.1-95.9l-0.5-1.8-108.1-123-22 16.6c6.4-26.1 10.6-49.9 12.5-71.1h158.7v-8c0-40.1-18.5-63.9-19.2-64.9l-2.4-3z" p-id="2450"></path></svg>',iconIFCSDN:'<svg t="1690721786570" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3120" width="16" height="16"><path d="M512 0c282.784 0 512 229.216 512 512s-229.216 512-512 512S0 794.784 0 512 229.216 0 512 0z m189.952 752l11.2-108.224c-31.904 9.536-100.928 16.128-147.712 16.128-134.464 0-205.728-47.296-195.328-146.304 11.584-110.688 113.152-145.696 232.64-145.696 54.784 0 122.432 8.8 151.296 18.336L768 272.704C724.544 262.24 678.272 256 599.584 256c-203.2 0-388.704 94.88-406.4 263.488C178.336 660.96 303.584 768 535.616 768c80.672 0 138.464-6.432 166.336-16z" p-id="3121"></path></svg>',iconIFJianshu:'<svg t="1690723639888" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5035" width="16" height="16"><path d="M654.791 38.495h-286.53c-95.005 0-142.412 0-193.612 16.118-55.94 20.48-99.935 64.474-120.225 120.226-16.308 51.2-16.308 98.607-16.308 193.611v286.53c0 95.005 0 142.602 16.118 193.613 20.29 55.75 64.285 99.745 120.036 120.035 51.2 16.119 98.607 16.119 193.611 16.119h286.53c95.005 0 142.413 0 193.613-16.119 55.75-20.29 99.745-64.284 120.225-120.035 16.118-51.2 16.118-98.608 16.118-193.612V368.45c0-95.005 0-142.412-16.118-193.612-20.29-55.752-64.285-99.746-120.225-120.226-50.821-16.118-98.228-16.118-193.233-16.118z m0 0" p-id="5036"></path><path d="M235.52 456.818h70.732v370.346H235.52V456.818z m40.012-112.45c17.825 32.995 29.203 65.8 34.512 98.796h77.18c-10.62-42.097-23.894-74.903-39.823-98.797h-71.87z m0 0" fill="#a0cfff" p-id="5037"></path><path d="M427.804 278.566h85.144v-46.649H358.59c1.706-3.603 4.361-10.05 7.964-19.153 1.707-7.395 3.603-12.705 5.31-16.497H292.03c-12.326 49.303-40.77 85.902-85.144 109.795v46.65c58.595-14.602 100.124-39.254 124.966-73.956H358.4c8.913 23.703 14.222 46.648 15.929 68.645h74.524c-5.12-25.79-12.326-48.734-21.049-68.835z m-34.702 148.1h320.664v301.701c1.707 27.497-10.62 40.202-37.167 38.306h-43.995v54.803h63.906c62.009 1.896 92.16-26.549 90.453-85.144V371.864h-393.86v54.803z m0 0" fill="#a0cfff" p-id="5038"></path><path d="M643.224 476.16H382.483v277.049H563.39c56.699 1.896 83.437-25.6 79.834-82.3V476.16z m-188.871 49.304h117.001v63.146H454.353v-63.146z m82.488 178.252h-82.488v-68.457h117.001v32.996c1.707 25.41-9.671 37.357-34.513 35.46zM645.88 229.262c0-1.896 0.948-4.55 2.654-8.154l7.965-24.652h-79.834c-12.516 51.2-39.823 89.695-82.49 115.295v43.805c54.993-14.602 96.712-40.202 124.967-76.8h37.167c8.913 23.703 14.222 46.648 15.929 68.645h71.87c-1.707-18.204-8.913-41.15-21.239-68.645h93.108v-49.304H645.88z m0 0" fill="#a0cfff" p-id="5039"></path></svg>',iconIFJuejin:'<svg t="1690725319716" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6174" width="16" height="16"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" p-id="6175"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" p-id="6176"></path></svg>',iconIFFlowus:'<svg t="1695385585153" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9273" width="16" height="16"><path d="M357.717333 907.733333c-93.952 56.661333-174.805333 72.533333-223.829333 31.445334-45.269333-37.973333-47.616-105.984-19.584-192.512a42.666667 42.666667 0 0 1 81.194667 26.325333c-18.389333 56.746667-17.194667 92.074667-6.741334 100.821333 13.909333 11.690667 64.981333-0.768 136.576-46.762666 82.218667-52.864 177.365333-140.074667 265.386667-244.992 88.277333-105.173333 157.269333-212.821333 194.602667-301.44 32.554667-77.184 35.712-128.256 21.76-139.946667-3.413333-2.858667-10.368-4.48-22.698667-3.157333a42.666667 42.666667 0 1 1-9.002667-84.906667c33.664-3.541333 63.530667 3.413333 86.528 22.656 47.829333 40.149333 47.786667 118.357333 11.264 216.192C915.797333 353.493333 938.666667 430.549333 938.666667 512c0 235.648-191.018667 426.666667-426.666667 426.666667a426.026667 426.026667 0 0 1-142.08-24.234667 42.624 42.624 0 0 1-12.202667-6.698667z m86.997334-61.013333A341.333333 341.333333 0 0 0 853.333333 512c0-44.373333-8.448-86.741333-24.362666-124.288-41.898667 78.122667-100.992 163.541333-172.885334 249.173333-69.973333 83.413333-142.464 155.136-211.370666 209.834667z m222.933333-733.141333a42.666667 42.666667 0 0 1-29.696 80.042666A362.026667 362.026667 0 0 0 512 170.666667a341.333333 341.333333 0 0 0-321.706667 455.68 42.666667 42.666667 0 0 1-80.426666 28.586666A423.68 423.68 0 0 1 85.333333 512C85.333333 276.352 276.352 85.333333 512 85.333333c53.248 0 105.770667 9.813333 155.648 28.245334z" p-id="9274"></path></svg>',iconIFHaloweb:'<svg t="1695385585153" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9273" width="16" height="16"><path d="M256 0v409.6h512V0h256v1024H768V665.6H256V1024H0V0z" p-id="6601"></path><</svg>',iconIFWechat:'<svg t="1690726490823" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7276" width="16" height="16"><path d="M996.427776 623.853568c0-139.354112-138.063872-251.815936-291.87072-251.815936-162.281472 0-290.656256 112.461824-290.656256 251.815936 0 139.352064 128.374784 251.807744 290.656256 251.807744 35.119104 0 69.031936-11.001856 104.148992-18.331648l92.043264 52.559872-24.2176-88.014848c67.821568-50.122752 119.896064-119.791616 119.896064-198.02112z m-386.338816-45.24032c-16.95744 0-33.906688-15.890432-33.906688-31.77472 0-19.562496 16.95744-35.446784 33.906688-35.446784 25.438208 0 43.599872 15.890432 43.599872 35.446784 0.002048 15.884288-18.161664 31.77472-43.599872 31.77472z m190.144512 0c-18.167808 0-33.910784-15.890432-33.910784-31.77472 0-19.562496 15.745024-35.446784 33.910784-35.446784 24.219648 0 42.387456 15.890432 42.387456 35.446784 0 15.884288-18.169856 31.77472-42.387456 31.77472z"  p-id="7277"></path><path d="M683.97056 352.48128c9.68704 0 20.588544 1.216512 32.700416 3.672064-29.063168-141.809664-178.03264-242.044928-345.155584-242.044928-188.925952 0-343.943168 127.127552-343.943168 293.373952 0 94.130176 50.868224 171.145216 136.855552 232.25344l-35.131392 105.132032 122.318848-62.347264c42.385408 12.232704 75.087872 19.562496 119.90016 19.562496 9.68704 0 20.594688 0 30.27968-1.216512-6.053888-24.45312-9.684992-47.681536-9.684992-73.34912 0-150.355968 127.156224-275.03616 291.86048-275.03616z m-185.2928-91.686912c26.64448 0 43.599872 15.890432 43.599872 42.78272 0 25.675776-16.955392 42.784768-43.599872 42.784768-25.432064 0-49.657856-17.1008-49.657856-42.784768 0-26.894336 24.225792-42.78272 49.657856-42.78272z m-239.794176 85.573632c-25.432064 0-52.076544-17.115136-52.076544-42.79296 0-26.894336 26.64448-42.78272 52.076544-42.78272 24.223744 0 43.599872 15.890432 43.599872 42.78272 0 25.677824-19.376128 42.79296-43.599872 42.79296z"  p-id="7278"></path></svg>',iconIFSiyuan:'<svg t="1690817357506" class="icon" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1557" width="16" height="16"><path d="M1.706667 0h1024v1024H1.706667z" fill="#2E2C2F" p-id="1558"></path><path d="M307.862187 555.677013l38.34368 13.202774c-13.19936 47.77472-22.00064 70.40512-38.971734 106.23488-13.830827 28.91264-22.00064 42.115413-42.745173 69.771946l-35.82976-25.775786c22.00064-24.512853 30.17216-37.08416 43.373227-62.85824 17.600853-33.312427 25.14432-54.683307 35.82976-100.575574z m-13.201067-103.673173v-153.378133c0-27.02848-0.628053-44.00128-2.515627-60.972374 16.34304 2.51392 34.573653 3.141973 59.088214 3.141974H668.0064c24.512853 0 42.743467-0.628053 59.086507-3.141974-1.88416 16.34304-2.51392 32.058027-2.51392 60.972374v153.378133c0 26.400427 0.62976 42.115413 2.51392 58.4192-18.230613-2.471253-37.085867-3.10272-59.086507-3.10272H350.605653c-21.998933 0-40.855893 1.256107-58.458453 3.10272 1.885867-16.93184 2.51392-33.90464 2.51392-58.4192z m230.029653 20.744533h161.542827v-83.60448h-161.542827v83.60448z m0-117.548373h161.542827v-79.83104h-161.542827v79.83104z m-191.684266 117.548373h154.632533v-83.60448h-154.632533v83.60448z m0-117.548373h154.632533v-79.83104h-154.632533v79.83104z m144.576853 196.082347l29.540693-20.744534c36.462933 34.573653 58.422613 59.712853 90.478934 104.3456l-32.05632 25.14432c-27.0336-45.88544-48.402773-72.915627-87.963307-108.745386z m-43.999573 57.828693v89.260373c0 23.888213 10.68032 27.026773 91.106986 27.026774 72.91392 0 95.5392-3.13856 104.97024-15.085227 6.28736-8.797867 9.42592-28.286293 11.32032-72.287573 13.824 8.173227 23.253333 11.94496 38.966614 15.714986-6.28736 61.60384-11.93984 81.716907-27.656534 92.407467-16.34304 11.941547-52.169387 16.341333-135.14752 16.341333-104.9344 0-123.16672-8.173227-123.16672-55.942826v-97.4336c0-32.684373-0.626347-42.745173-3.76832-57.8304h47.14496c-3.145387 16.96768-3.770027 27.656533-3.770026 57.828693z m261.4528-57.828693c42.743467 52.800853 71.02976 96.802133 103.71584 162.174293l-35.82976 24.517973c-30.173867-72.28928-53.430613-111.261013-98.689707-167.835306l30.803627-18.85696z" fill="#FFFFFF" p-id="1559"></path></svg>',iconOTYes:'<svg viewBox="64 64 896 896" focusable="false" class="" data-icon="check-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="#52c41a"></path><path d="M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z" fill="#f6ffed"></path><path d="M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z" fill="#52c41a"></path></svg>',iconOTNo:'<svg t="1690801094533" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3185" width="16" height="16"><path d="M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m0 93.12a418.88 418.88 0 1 0 0 837.76 418.88 418.88 0 0 0 0-837.76zM676.544 281.6L742.4 347.52 577.792 512l164.608 164.544L676.48 742.4 512 577.792 347.456 742.4 281.6 676.48 446.208 512 281.6 347.456 347.52 281.6 512 446.208 676.544 281.6z" fill="none" p-id="3186"></path></svg>',iconTelegraph:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M0 0v24h24V0zm6 6h12v3h-4.5v9h-3V9H6z"/></svg>',iconOTRemove:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#888888" d="M16.066 8.995a.75.75 0 1 0-1.06-1.061L12 10.939L8.995 7.934a.75.75 0 1 0-1.06 1.06L10.938 12l-3.005 3.005a.75.75 0 0 0 1.06 1.06L12 13.06l3.005 3.006a.75.75 0 0 0 1.06-1.06L13.062 12z"/></svg>',iconOTJVue:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 128 128"><path fill="#1697f6" d="M65.3 34.414L40.84 76.79L64 116.926l30.672-53.13l30.66-53.128H79Zm0 0"/><path fill="#aeddff" d="m33.34 63.797l1.605 2.793l22.88-39.649l9.402-16.273H2.668Zm0 0"/><path fill="#1867c0" d="M79 10.668C90.594 48.82 64 116.926 64 116.926L40.84 76.789Zm0 0"/><path fill="#7bc6ff" d="M67.227 10.668c-48.844 0-32.282 55.922-32.282 55.922Zm0 0"/></svg>',iconOTWordpressdotcom:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 256 256"><g fill="none"><rect width="256" height="256" fill="#0073AA" rx="60"/><path fill="#fff" d="M42.214 127.994c0 33.955 19.733 63.299 48.347 77.205L49.641 93.083a85.46 85.46 0 0 0-7.427 34.911m143.694-4.329c0-10.601-3.808-17.943-7.074-23.658c-4.349-7.066-8.425-13.05-8.425-20.116c0-7.886 5.981-15.226 14.405-15.226c.381 0 .741.047 1.112.068c-15.262-13.982-35.595-22.519-57.929-22.519c-29.968 0-56.335 15.376-71.673 38.666c2.012.06 3.909.103 5.52.103c8.973 0 22.862-1.09 22.862-1.09c4.624-.272 5.17 6.52.55 7.067c0 0-4.647.547-9.818.818l31.238 92.918l18.773-56.303l-13.365-36.618c-4.619-.271-8.995-.818-8.995-.818c-4.623-.271-4.081-7.339.542-7.066c0 0 14.166 1.088 22.595 1.088c8.972 0 22.862-1.088 22.862-1.088c4.628-.273 5.171 6.519.55 7.066c0 0-4.657.547-9.818.818l31.001 92.214l8.556-28.592c3.709-11.866 6.531-20.388 6.531-27.732"/><path fill="#fff" d="m129.503 135.498l-25.738 74.79a85.779 85.779 0 0 0 24.233 3.495a85.682 85.682 0 0 0 28.486-4.863a7.476 7.476 0 0 1-.61-1.182zm73.766-48.66a65.8 65.8 0 0 1 .578 8.82c0 8.705-1.626 18.491-6.523 30.727l-26.203 75.759c25.503-14.872 42.657-42.501 42.657-74.148c.001-14.915-3.808-28.94-10.509-41.158"/><path fill="#fff" d="M127.998 28C72.86 28 28 72.857 28 127.994c0 55.144 44.86 99.999 99.998 99.999c55.135 0 100.002-44.855 100.002-99.999C227.998 72.857 183.133 28 127.998 28m0 195.41c-52.61 0-95.413-42.804-95.413-95.416c0-52.609 42.802-95.409 95.413-95.409c52.607 0 95.407 42.8 95.407 95.409c0 52.612-42.8 95.416-95.407 95.416"/></g></svg>'},yi={PRE_CUSTOM_HALOWEB:"custom_Haloweb"},is={cookieWhiteList:[H.Custom_Wechat.toString(),H.Custom_Zhihu.toString()],uaWhiteList:["https://*.qq.com/*"],cookieLimit:[],cookieLimitTipsAuth:{},cookieLimitTipsImg:{}},qr=u=>[{type:ye.Common,title:u("setting.platform.universal"),img:"./images/universal.webp",description:u("setting.platform.universal.desc")},{type:ye.Github,title:u("setting.platform.github"),img:"./images/github.png",description:u("setting.platform.github.desc")},{type:ye.Gitlab,title:u("setting.platform.gitlab"),img:"./images/gitlab.jpg",description:u("setting.platform.gitlab.desc")},{type:ye.Metaweblog,title:u("setting.platform.metaweblog"),img:"./images/xmlrpc.png",description:u("setting.platform.metaweblog.desc")},{type:ye.Wordpress,title:u("setting.platform.wordpress"),img:"./images/wordpress-logo.svg",description:u("setting.platform.wordpress.desc")},{type:ye.Custom,title:u("setting.platform.custom"),img:"./images/http.png",description:u("setting.platform.custom.desc")}],Ke={commonCfg:[{platformType:ye.Common,subPlatformType:H.Common_Yuque,platformKey:"common_Yuque",platformName:"è¯­é›€",platformIcon:Te.iconIFYuque,authMode:ge.API,isEnabled:!1},{platformType:ye.Common,subPlatformType:H.Common_Notion,platformKey:"common_Notion",platformName:"Notion",platformIcon:Te.iconIFNotion,authMode:ge.API,isEnabled:!1},{platformType:ye.Common,subPlatformType:H.Common_Halo,platformKey:"common_Halo",platformName:"Halo29",platformIcon:Te.iconIFHalo,authMode:ge.API,isEnabled:!1},{platformType:ye.Common,subPlatformType:H.Common_Telegraph,platformKey:"common_Telegraph",platformName:"Telegraph",platformIcon:Te.iconTelegraph,authMode:ge.API,isEnabled:!1}],githubCfg:[{platformType:ye.Github,subPlatformType:H.Github_Hexo,platformKey:"github_Hexo",platformName:"Hexo",platformIcon:Te.iconIFHexo,authMode:ge.API,isEnabled:!1},{platformType:ye.Github,subPlatformType:H.Github_Hugo,platformKey:"github_Hugo",platformName:"Hugo",platformIcon:Te.iconIFHugo,authMode:ge.API,isEnabled:!1},{platformType:ye.Github,subPlatformType:H.Github_Jekyll,platformKey:"github_Jekyll",platformName:"Jekyll",platformIcon:Te.iconIFJekyll,authMode:ge.API,isEnabled:!1},{platformType:ye.Github,subPlatformType:H.Github_Vuepress,platformKey:"github_Vuepress",platformName:"Vuepress",platformIcon:Te.iconIFVuepress,authMode:ge.API,isEnabled:!1},{platformType:ye.Github,subPlatformType:H.Github_Vuepress2,platformKey:"github_Vuepress2",platformName:"Vuepress2",platformIcon:Te.iconIFVuepress2,authMode:ge.API,isEnabled:!1},{platformType:ye.Github,subPlatformType:H.Github_Vitepress,platformKey:"github_Vitepress",platformName:"Vitepress",platformIcon:Te.iconIFVue,authMode:ge.API,isEnabled:!1}],gitlabCfg:[{platformType:ye.Gitlab,subPlatformType:H.Gitlab_Hexo,platformKey:"gitlab_Gitlabhexo",platformName:"Gitlabhexo",platformIcon:Te.iconIFHexo,authMode:ge.API,isEnabled:!1},{platformType:ye.Gitlab,subPlatformType:H.Gitlab_Hugo,platformKey:"gitlab_Gitlabhugo",platformName:"Gitlabhugo",platformIcon:Te.iconIFHugo,authMode:ge.API,isEnabled:!1},{platformType:ye.Gitlab,subPlatformType:H.Gitlab_Jekyll,platformKey:"gitlab_Gitlabjekyll",platformName:"Gitlabjekyll",platformIcon:Te.iconIFJekyll,authMode:ge.API,isEnabled:!1},{platformType:ye.Gitlab,subPlatformType:H.Gitlab_Vuepress,platformKey:"gitlab_Gitlabvuepress",platformName:"Gitlabvuepress",platformIcon:Te.iconIFVuepress,authMode:ge.API,isEnabled:!1},{platformType:ye.Gitlab,subPlatformType:H.Gitlab_Vuepress2,platformKey:"gitlab_Gitlabvuepress2",platformName:"Gitlabvuepress2",platformIcon:Te.iconIFVuepress2,authMode:ge.API,isEnabled:!1},{platformType:ye.Gitlab,subPlatformType:H.Gitlab_Vitepress,platformKey:"gitlab_Gitlabvitepress",platformName:"Gitlabvitepress",platformIcon:Te.iconIFVue,authMode:ge.API,isEnabled:!1}],metaweblogCfg:[{platformType:ye.Metaweblog,subPlatformType:H.Metaweblog_Cnblogs,platformKey:"metaweblog_Cnblogs",platformName:"åšå®¢å›­",platformIcon:Te.iconIFCnblogs,authMode:ge.API,isEnabled:!1},{platformType:ye.Metaweblog,subPlatformType:H.Metaweblog_Typecho,platformKey:"metaweblog_Typecho",platformName:"Typecho",platformIcon:Te.iconIFTypecho,authMode:ge.API,isEnabled:!1},{platformType:ye.Metaweblog,subPlatformType:H.Metaweblog_Jvue,platformKey:"metaweblog_Jvue",platformName:"Jvue",platformIcon:Te.iconOTJVue,authMode:ge.API,isEnabled:!1}],wordpressCfg:[{platformType:ye.Wordpress,subPlatformType:H.Wordpress_Wordpress,platformKey:"wordpress_Wordpress",platformName:"Wordpress",platformIcon:Te.iconIFWordpress,authMode:ge.API,isEnabled:!1},{platformType:ye.Wordpress,subPlatformType:H.Wordpress_Wordpressdotcom,platformKey:"wordpress_Wordpressdotcom",platformName:"Wordpress.com",platformIcon:Te.iconOTWordpressdotcom,authMode:ge.API,isEnabled:!1}],customCfg:[{platformType:ye.Custom,subPlatformType:H.Custom_Zhihu,platformKey:"custom_Zhihu",platformName:"çŸ¥ä¹Ž",platformIcon:Te.iconIFZhihu,authMode:ge.WEBSITE,authUrl:"https://www.zhihu.com/signin",domain:"zhihu.com",isEnabled:!1},{platformType:ye.Custom,subPlatformType:H.Custom_CSDN,platformKey:"custom_Csdn",platformName:"CSDN",platformIcon:Te.iconIFCSDN,authMode:ge.WEBSITE,authUrl:"https://passport.csdn.net/login",domain:"csdn.net",isEnabled:!1},{platformType:ye.Custom,subPlatformType:H.Custom_Wechat,platformKey:"custom_Wechat",platformName:"å¾®ä¿¡å…¬ä¼—å·",platformIcon:Te.iconIFWechat,authMode:ge.WEBSITE,authUrl:"https://mp.weixin.qq.com/",domain:"qq.com",isEnabled:!1},{platformType:ye.Custom,subPlatformType:H.Custom_Jianshu,platformKey:"custom_Jianshu",platformName:"ç®€ä¹¦",platformIcon:Te.iconIFJianshu,authMode:ge.WEBSITE,authUrl:"https://www.jianshu.com/sign_in",domain:"jianshu.com",isEnabled:!1},{platformType:ye.Custom,subPlatformType:H.Custom_Juejin,platformKey:"custom_Juejin",platformName:"æŽ˜é‡‘",platformIcon:Te.iconIFJuejin,authMode:ge.WEBSITE,authUrl:"https://juejin.cn/login",domain:"juejin.cn",isEnabled:!1},{platformType:ye.Custom,subPlatformType:H.Custom_Haloweb,platformKey:yi.PRE_CUSTOM_HALOWEB,platformName:"Haloç½‘é¡µç‰ˆ",platformIcon:Te.iconIFHaloweb,authMode:ge.WEBSITE,authUrl:"/login",domain:"",isEnabled:!1}],systemCfg:[{platformType:ye.System,subPlatformType:H.System_Siyuan,platformKey:"system_Siyuan",platformName:"æ€æºç¬”è®°",platformIcon:Te.iconIFSiyuan,authMode:ge.API,isEnabled:!0,isSys:!0}]};var at=(u=>(u.METHOD_ADD="add",u.METHOD_EDIT="edit",u))(at||{});class fe{constructor(){D(this,"logger");D(this,"deviceType");D(this,"win");D(this,"moduleBase");D(this,"fetch");D(this,"xmlbuilder2");D(this,"simpleXmlrpc");var o,t,s,e;this.logger=W("app-instance"),this.deviceType=Kt.getDevice(),this.fetch=Ol,this.xmlbuilder2={create:Vl.create},this.simpleXmlrpc={SimpleXmlRpcClient:si,Serializer:oi,Deserializer:ai,XmlrpcUtil:ni},this.win=Tt.siyuanWindow(),this.moduleBase=`${(e=(s=(t=(o=this.win)==null?void 0:o.siyuan)==null?void 0:t.config)==null?void 0:s.system)==null?void 0:e.workspaceDir}/data${Cn}`}}class Yt extends Pl{}class Xt extends Yt{}class ps extends Tl{constructor(t,s,e,a,n){super();D(this,"placeholder",{});this.home=t,this.apiUrl=s,this.username=e,this.password=a,this.tokenSettingUrl=void 0,this.apiStatus=!1,this.blogid="",this.blogName="",this.posidKey="",this.previewUrl="",this.pageType=ue.Markdown,this.middlewareUrl=n,this.usernameEnabled=!1,this.allowPreviewUrlChange=!0,this.showTokenTip=!1,this.yamlLinkEnabled=!0,this.placeholder=new Yt}}class Fs extends ps{constructor(t,s,e,a,n){super(t,s,e,a,n);D(this,"home","");D(this,"apiUrl","");D(this,"username","");D(this,"password","");D(this,"apiStatus",!1);D(this,"blogid","");D(this,"blogName","");D(this,"posidKey","");D(this,"previewUrl","");D(this,"pageType",ue.Markdown);D(this,"placeholder",{});D(this,"middlewareUrl","");this.home=t,this.apiUrl=s,this.username=e,this.password=a,this.apiStatus=!1,this.blogid="",this.blogName="",this.posidKey="",this.previewUrl="",this.pageType=ue.Html,this.middlewareUrl=n,this.placeholder=new Xt,this.usernameEnabled=!0,this.showTokenTip=!1,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class Yr extends Fs{constructor(o,t,s,e){super("https://www.cnblogs.com/",o,t,s,e),this.tokenSettingUrl="https://i.cnblogs.com/settings",this.previewUrl="/[userid]/p/[postid].html",this.pageType=ue.Markdown,this.usernameEnabled=!0,this.passwordType=Oe.PasswordType_Token,this.showTokenTip=!0,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class ko{}D(ko,"METHOD_GET_USERS_BLOGS","blogger.getUsersBlogs"),D(ko,"METHOD_DELETE_POST","blogger.deletePost");class Fe{}D(Fe,"METHOD_GET_USERS_BLOGS","metaWeblog.getUsersBlogs"),D(Fe,"METHOD_NEW_POST","metaWeblog.newPost"),D(Fe,"METHOD_EDIT_POST","metaWeblog.editPost"),D(Fe,"METHOD_DELETE_POST","metaWeblog.deletePost"),D(Fe,"METHOD_GET_RECENT_POSTS","metaWeblog.getRecentPosts"),D(Fe,"METHOD_GET_POST","metaWeblog.getPost"),D(Fe,"METHOD_GET_CATEGORIES","metaWeblog.getCategories"),D(Fe,"METHOD_NEW_MEDIA_OBJECT","metaWeblog.newMediaObject");const Do=(u,o)=>{const t=W("use-proxy"),{kernelApi:s,isUseSiyuanProxy:e}=Re(),a=new fe,n="";u=u??_e,o=o??"";const i=new $l(a,n,u,It),l=new oi(a),c=async(p,g=[],w=void 0,d="GET",v="application/json",P=!1,S="text",k="text")=>{if(e||!e&&P)return t.info("Using Siyuan forwardProxy"),await y(p,g,w,d,v,S,k);{t.info("Using middleware proxy fetch");const M=g.length>0?g[0]:{},x={method:d,headers:{...M,"Content-Type":v},body:w};t.info("commonFetchClient url in proxyFetch =>",p),t.info("commonFetchClient fetchOptions in proxyFetch =>",x);const K=await i.fetchCall(p,x,P);return t.debug("Result of proxyFetch in commonFetchClient =>",K),K}},r=async(p,g,w,d=!1)=>{const v=l.serializeMethodCall(g,w);let P=await c(p,[],v,"POST","text/xml",d,"base64");P=ni.removeXmlHeader(P);const k=await new ai().deserializeMethodResponse(P);return t.debug("xmlrpc fetch result, resJson =>",k),k},m=async(p,g=[],w=void 0,d="GET")=>{const v=`${o.endsWith("/")?o:o+"/"}${p}`,P=g.length>0?g[0]:{},S=["Origin","Referer","Cookie"],k=ae.getProperty(P,"x-cors-headers");let M=te.safeParse(k,{});for(const[U,z]of Object.entries(P)){const L=U.toLowerCase();S.map(V=>V.toLowerCase()).includes(L)&&(t.warn(`corsFetch header ${U} is not allowed`),M[U]=z,delete P[U])}P["x-cors-headers"]=JSON.stringify(M);const x={method:d,headers:P,body:w};t.debug("corsFetch url =>",v),t.debug("corsFetch options =>",x);const K=await fetch(v,x),$={},B=te.safeParse(K.headers.get("cors-received-headers"),{});for(const[U,z]of Object.entries(B))if(U==="cors-received-headers"){const L=B["cors-received-headers"];for(const[V,Y]of Object.entries(L))$[V]=Y;delete B[U]}else $[U]=z;t.debug("corsFetch corsRespHeaders =>",$);const A=await K.text();t.debug("corsFetch resText =>",A);const F=te.safeParse(A,{});return F["cors-received-headers"]=JSON.stringify($),t.debug("corsFetch resJson =>",F),F},y=async(p,g=[],w=void 0,d="GET",v="application/json",P="text",S="text")=>{let k=w;const M=`${n}${p}`,x=g.length>0?g[0]:{};let K=v,$,B=new ArrayBuffer(0);if(d!=="GET"){const U=new Request("",{method:d,body:k});console.log("generate temp myRequest =>",U),B=await U.arrayBuffer(),(U.headers.get("Content-Type")??v).includes("multipart/form-data")&&(K=U.headers.get("Content-Type"))}P==="text"?$=No.from(B).toString("utf8"):P==="base64"?$=No.from(B).toString("base64"):P==="hex"?$=No.from(B).toString("hex"):$=B;const A=[x];t.debug("siyuan forwardProxy url =>",M),t.debug("siyuan forwardProxy fetchOptions =>",{headers:g,payload:$,method:d,contentType:v});const F=await s.forwardProxy(M,A,$,d,K,P,S,3e4);if(t.debug("proxyFetch result =>",F),!(F.status>=200&&F.status<300)){const U=te.safeParse(F==null?void 0:F.body,{});throw T.isEmptyString(U==null?void 0:U.msg)?new Error(T.decodeUnicodeToChinese(T.isEmptyString(F==null?void 0:F.body)?`è¯·æ±‚å¼‚å¸¸ï¼š${F.status}`:F==null?void 0:F.body)):new Error(U==null?void 0:U.msg)}if(S==="text")if(v==="application/json"){const U=F==null?void 0:F.body;return te.safeParse(U,{})}else return v==="text/html"||v==="text/xml"?F==null?void 0:F.body:(t.info("SiYuan proxy directly response fetchResult for content type:",v),F);else return F};return{isUseSiyuanProxy:e,proxyFetch:c,proxyXmlrpc:r,corsFetch:m}};class zs{static getFormData(o){const t=o.win;let s=t.FormData,e=t.Blob;if(t.require){const a=t.require(`${o.moduleBase}libs/node-fetch-cjs/dist/index.js`);s=a.FormData,e=a.Blob}return{FormData:s,Blob:e}}static getFormDataFetch(o){return o.win.require(`${o.moduleBase}libs/zhi-formdata-fetch/index.cjs`)}}class Zt extends ei{constructor(t,s){super();D(this,"appInstance");D(this,"logger");D(this,"cfg");D(this,"baseExtendApi");D(this,"isUseSiyuanProxy");D(this,"proxyFetch");D(this,"corsFetch");this.appInstance=t,this.cfg=s,this.logger=W("base-web-api"),this.baseExtendApi=new _i(this,s);const{isUseSiyuanProxy:e,proxyFetch:a,corsFetch:n}=Do(s.middlewareUrl,s.corsAnywhereUrl);this.isUseSiyuanProxy=e,this.proxyFetch=a,this.corsFetch=n}async checkAuth(){return!0}getPostPreviewUrl(t){return this.getPreviewUrl(t)}async getCategories(t){return this.baseExtendApi.getCategories(t)}async getTags(){return this.baseExtendApi.getTags()}updateCfg(t){this.cfg=t}async buildCookie(t){return t.map(s=>`${s.name}=${s.value}`).join(";")}getYamlAdaptor(){return null}async preEditPost(t,s,e){return await this.baseExtendApi.preEditPost(t,s,e)}async newPost(t,s){try{const e=await this.addPost(t);if(e.status!=="success")throw new Error("ç½‘é¡µæŽˆæƒå‘å¸ƒæ–‡ç« å¼‚å¸¸");return e.post_id}catch(e){throw e}}async newMediaObject(t,s){this.logger.debug("newMediaObject on baseWebApi =>",t);const e=await this.uploadFile(t);return{attachment_id:e==null?void 0:e.id,date_created_gmt:new Date,parent:0,link:e==null?void 0:e.url,title:t.name,caption:"",description:"",metadata:{width:0,height:0,file:"",filesize:0,sizes:[]},type:t.type,thumbnail:"",id:e==null?void 0:e.article_id,file:t.name,url:e.url}}async webFetch(t,s=[],e={},a="GET",n="application/json",i=!1,l="text",c="text"){const r=s.length>0?s[0]:{};if(this.isUseSiyuanProxy||!this.isUseSiyuanProxy&&i||!i){this.logger.info("Using legency web fetch"),delete r["x-cors-headers"];const m=[r];return await this.proxyFetch(t,m,e,a,n,i,l,c)}else{this.logger.info("Using cors web fetch");const m=[r];return this.corsFetch(t,m,e,a)}}async webFormFetch(t,s,e,a=!1){if(this.isUseSiyuanProxy||!this.isUseSiyuanProxy&&a||!a){this.logger.info("Using legency web formFetch");const{isInSiyuanOrSiyuanNewWin:n}=dt();if(!n()||a){const i=await this.webFetch(t,s,e,"POST",void 0,a,"base64","base64"),l=Ut.fromBase64(i.body),c=te.safeParse(l,{});return this.logger.debug("apiForm doFetch success, resJson=>",c),c}else{const i=zs.getFormDataFetch(this.appInstance),l=s.length>0?s[0]:{};this.logger.debug("before zhi-formdata-fetch, header =>",l),this.logger.debug("before zhi-formdata-fetch, url =>",t);const c=await i(this.appInstance.moduleBase,t,l,e);return this.logger.debug("apiForm doFetch success, resText =>",c),te.safeParse(c,{})}}else return this.logger.info("Using cors-anywhere web formFetch"),this.corsFetch(t,s,e,"POST")}}class Ns{static mdToHtml(o){if(typeof window>"u")return this.logger.warn("ä¸æ˜¯æµè§ˆå™¨çŽ¯å¢ƒï¼Œä¸æ¸²æŸ“"),o;const t=window.Lute;if(!t)return this.logger.warn("æœªæ‰¾åˆ°Luteï¼Œä¸æ¸²æŸ“"),o;this.logger.info("found Lute =>",t),this.logger.info("ä½¿ç”¨Luteæ¸²æŸ“Markdown");const s=t.New(),e={renderInlineMathCloseMarker:(n,i)=>i?["$",t.WalkContinue]:["",t.WalkContinue],renderInlineMathContent:(n,i)=>i?[n.TokensStr(),t.WalkContinue]:["",t.WalkContinue],renderInlineMathOpenMarker:(n,i)=>i?["$",t.WalkContinue]:["",t.WalkContinue],renderInlineMath:(n,i)=>["",t.WalkContinue],renderMathBlockCloseMarker:(n,i)=>i?["$$",t.WalkContinue]:["",t.WalkContinue],renderMathBlockContent:(n,i)=>i?[n.TokensStr(),t.WalkContinue]:["",t.WalkContinue],renderMathBlockOpenMarker:(n,i)=>i?["$$",t.WalkContinue]:["",t.WalkContinue],renderMathBlock:(n,i)=>["",t.WalkContinue]};s.SetJSRenderers({renderers:{Md2HTML:e}});const a=s.MarkdownStr("",o);return this.logger.debug("md to html =>",{html:a}),a}}D(Ns,"logger",W("lute-util"));var Xr={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const Zr=W("siyuan-util"),{isInSiyuanWidget:Qr,isInSiyuanBrowser:ec}=dt(),Ja=async(u,o,t)=>{try{const s=await u.getFile(o,t);return t==="text"?!T.isEmptyString(s):s!==null}catch{return!1}},bi=()=>{if(window.frameElement==null||window.frameElement.parentElement==null||window.frameElement.parentElement.parentElement==null)return"";const u=window.frameElement.parentElement.parentElement;if(!u)return"";const o=u.getAttribute("data-node-id");return o||""},tc=()=>{let u;const o=window;return o&&o.terwer&&o.terwer.pageId&&(u=o.terwer.pageId),u},wi=async(u,o)=>{if(!T.isEmptyString(u))return Zr.debug("æ˜¾ç¤ºæŒ‡å®špageId=>",u),u;if(Qr()){const e=bi();if(!T.isEmptyString(e)){const{kernelApi:a}=Re();return(await a.getBlockByID(e)).root_id}}if(ec()){const e=tc();if(!T.isEmptyString(e))return e}if(Lt.isInBrowser){const e=Lt.getQueryParam("id");if(!T.isEmptyString(e))return e}const s=Xr.VITE_SIYUAN_DEV_PAGE_ID;return T.isEmptyString(s)?"":s},Oo=()=>{const u=W("use-picgo-bridge"),{siyuanConfig:o,kernelApi:t,blogApi:s}=Re(),e=async(l,c)=>{let r=c;const m="æ–‡æ¡£å¯èƒ½å·²ç»æˆåŠŸå‘å¸ƒï¼Œä½†æ˜¯å›¾ç‰‡ä¸Šä¼ å¤±è´¥æˆ–è€…å½“å‰åœºæ™¯ä¸æ”¯æŒå›¾ç‰‡ä¸Šä¼ ï¼Œè¯¦ç»†ä¿¡æ¯=>";try{const y=await t.getBlockAttrs(l),p={pageId:l,meta:y};T.isEmptyString(r)&&(r=(await s.getPost(l)).markdown);const w=await(await Gn.getInstance(o,It)).uploadPostImagesToBed(p.pageId,p.meta,r);w.hasImages?w.flag?r=w.mdContent:(u.warn(m+w.errmsg),ee.warning(m+w.errmsg)):u.info(m+w.errmsg)}catch(y){u.error(m,y),ee.error("æ–‡æ¡£å¯èƒ½å·²ç»æˆåŠŸå‘å¸ƒï¼Œä½†æ˜¯å›¾ç‰‡ä¸Šä¼ å¤±è´¥æˆ–è€…å½“å‰åœºæ™¯ä¸æ”¯æŒå›¾ç‰‡ä¸Šä¼ ï¼Œè¯¦ç»†ä¿¡æ¯=>"+y)}return r},a=async(l,c)=>{const r=new Nl;let m=[];u.debug("getImageItemsFromMd=>",{md:c});const y=r.parseImagesToArray(c);m=[...new Set([...m,...y])],u.debug("retImgs=>",m);const p=await t.getBlockAttrs(l),g=o.apiUrl??"",d=await(await Gn.getInstance(o,It)).doConvertImagesToImagesItemArray(p,m,g);return u.debug("imageItemArray=>",d),d},n=async l=>{let c=it.None;return T.isEmptyString(l.picbedService)?(await i()&&l.picgoPicbedSupported?c=it.PicGo:l.bundledPicbedSupported?c=it.Bundled:c=it.None,u.info("ä½¿ç”¨é»˜è®¤çš„å›¾åºŠæœåŠ¡")):(c=l.picbedService,u.info("ä½¿ç”¨è‡ªå®šä¹‰å›¾åºŠæœåŠ¡")),c},i=async()=>{const{kernelApi:l}=Re();return await Ja(l,"/data/plugins/siyuan-plugin-picgo/plugin.json","text")};return{handlePicgo:e,getImageItemsFromMd:a,getPicbedServiceType:n,checkPicgoInstalled:i}},Js=async u=>new Promise((o,t)=>{const s=new FileReader;s.onload=e=>{const a=vn.from(e.target.result);o(a)},s.onerror=t,s.readAsArrayBuffer(u)}),sc=u=>{const o=u.match(/^data:(.*?);base64,/);return o&&o[1]?o[1]:""},In=async u=>{const o=await ac(u);return oc(u,o)},oc=(u,o)=>{const t=o.split(";base64,").pop()||"",s=u.substring(u.lastIndexOf("/")+1),e=sc(o);return{imageName:s,mimeType:e,imageBase64:t}},xn=u=>{const o=Ut.toUint8Array(u);return vn.from(o)};function ac(u){return new Promise((o,t)=>{(async()=>{let s=null;try{s=await(await window.fetch(u)).blob()}catch(e){return t(e)}if(s!=null){const e=new FileReader;e.readAsDataURL(s),e.onloadend=function(){const a=e.result;o(a)},e.onerror=function(a){t(a)}}})()})}const nc=u=>{const o=new Uint8Array(u);return vn.from(o)};class ic{constructor(){D(this,"metadata")}}class lc{constructor(){D(this,"tags");D(this,"categories");D(this,"templates");this.tags=[],this.categories=[],this.templates=[]}}const qa=()=>{const u="storage/syp/platform-metadata.json",o="platform-metadata",t=()=>{const n=new ic;return An(u,o,n,{serializer:Eo.object})},s=()=>{const n=t();return fn(n)};return{getPlatformMetadata:n=>{const i=[],l=[],c=[],m=s().value;if(m.metadata&&m.metadata.hasOwnProperty(n)){const y=m.metadata[n];i.push(...y.tags),l.push(...y.categories),c.push(...y.templates)}return{tags:i,categories:l,templates:c}},updatePlatformMetadata:(n,i,l,c)=>{if(i.length===0&&l.length===0&&c.length===0)return;const r=t(),m=r.value;m.metadata=m.metadata??{},m.metadata.hasOwnProperty(n)||(m.metadata[n]=new lc);const y=m.metadata[n];y.tags=y.tags.filter(p=>p.trim()!==""),y.categories=y.categories.filter(p=>p.trim()!==""),y.templates=y.templates.filter(p=>p.trim()!==""),i.length>0&&(y.tags=Array.from(new Set([...y.tags,...i.filter(p=>p.trim()!=="")]))),l.length>0&&(y.categories=Array.from(new Set([...y.categories,...l.filter(p=>p.trim()!=="")]))),c.length>0&&(y.templates=Array.from(new Set([...y.templates,...c.filter(p=>p.trim()!=="")]))),m.metadata[n]=y,r.value=m}}};class Wn{static replaceSignToAnother(o,t,s,e){const a=t.replace(/\*/g,"\\*"),n=[],i=[],l=[],c=[],r=o.replace(new RegExp("```[\\s\\S]*?```|`.*?`|\\$\\$[\\s\\S]*?\\$\\$|\\$.*?\\$","g"),g=>{if(g.startsWith("```"))return n.push(g),`__PUBLISHER_PLACEHOLDER_CODEBLOCK${n.length-1}`;if(g.startsWith("`"))return i.push(g),`__PUBLISHER_PLACEHOLDER_INLINECODE${i.length-1}`;if(g.startsWith("$$"))return l.push(g),`__PUBLISHER_PLACEHOLDER_FORMULA${l.length-1}`;if(g.startsWith("$"))return c.push(g),`__PUBLISHER_PLACEHOLDER_INLINEFORMULA${c.length-1}`}),m=new RegExp(`(?<!\`)(?<!\`\`\`[\\s\\S])(?<!\\$[\\s\\S])(?<!\\$$[\\s\\S])${a}(.*?[^${a}])${a}(?![\\s\\S]*?\`)(?![\\s\\S]*?\`\`\`)(?![\\s\\S]*?\\$)(?![\\s\\S]*?\\$$)`,"g");return r.replace(m,(g,w)=>`${s}${w}${e}`).replace(/(__PUBLISHER_PLACEHOLDER_CODEBLOCK(\d+))|(__PUBLISHER_PLACEHOLDER_INLINECODE(\d+))|(__PUBLISHER_PLACEHOLDER_FORMULA(\d+))|(__PUBLISHER_PLACEHOLDER_INLINEFORMULA(\d+))/g,(g,w,d,v,P,S,k,M,x)=>{if(w)return n[parseInt(d,10)];if(v)return i[parseInt(P,10)];if(S)return l[parseInt(k,10)];if(M)return c[parseInt(x,10)]})}static getHumanFilename(o){return o.replace(/([\u4e00-\u9fa5])([a-zA-Z0-9])/g,"$1-$2").replace(/([a-zA-Z0-9])([\u4e00-\u9fa5])/g,"$1-$2").replace(/[^\w\u4e00-\u9fa5\/\-_.~]/g,"").replace(/\s+/g,"-").replace(/\/+/g,"/").replace(/-+/g,"-").replace(/_+/g,"_").replace(/\.{2,}/g,".").replace(/^-+|-+$/g,"")}}class _i extends ei{constructor(t,s){super();D(this,"logger");D(this,"api");D(this,"cfg");D(this,"picgoBridge");D(this,"isSiyuanOrSiyuanNewWin");D(this,"kernelApi");this.logger=W("base-extend-api"),this.api=t,this.cfg=s,this.picgoBridge=Oo();const{isInSiyuanOrSiyuanNewWin:e}=dt();this.isSiyuanOrSiyuanNewWin=e();const{kernelApi:a}=Re();this.kernelApi=a}async preEditPost(t,s,e){return t=await this.handleFilename(t,s,e),t=await this.handleDesc(t,s,e),t=await this.handleCategories(t,s,e),t=await this.handlePictures(t,s,e),t=await this.handleMd(t,s,e),t=await this.handleYaml(t,s,e),t=await this.handleOther(t,s,e),t}async getCategories(t){const s=[],{getPlatformMetadata:e}=qa(),a=Kn(this.cfg.posidKey),{categories:n}=e(a);return n.forEach(i=>{const l=new lt;l.categoryId=i,l.categoryName=i,s.push(l)}),s}async getTags(){const t=[],{getPlatformMetadata:s}=qa(),e=Kn(this.cfg.posidKey),{tags:a}=s(e);return a.forEach(n=>{const i=new Co;i.tagId=n,i.tagName=n,t.push(i)}),t}async handleFilename(t,s,e){var c,r,m,y,p,g,w,d,v,P,S;const a=e==null?void 0:e.cfg,n=ve.cloneDeep(t);if(a!=null&&a.mdFilenameRule){(c=a==null?void 0:a.mdFilenameRule)!=null&&c.includes("[filename]")&&(a.useMdFilename=!0);const x=De.formatIsoToZhDate(n.dateCreated.toISOString(),!0).split(" ")[0].split("-"),K=x[0],$=x[1],B=x[2];this.logger.debug("created numarr=>",x);let A=a.mdFilenameRule;if(A=A.replace(/\[yyyy]/g,K).replace(/\[MM]/g,$).replace(/\[mm]/g,$).replace(/\[dd]/g,B),(r=a==null?void 0:a.mdFilenameRule)!=null&&r.includes("category")){const F=((m=n==null?void 0:n.categories)==null?void 0:m[0])??"";A=A.replace("[category]",F)}if((y=a==null?void 0:a.mdFilenameRule)!=null&&y.includes("cats")){const F=((p=n==null?void 0:n.categories)==null?void 0:p.join("/"))??"";A=A.replace(/\[cats]/,F)}if((g=a==null?void 0:a.mdFilenameRule)!=null&&g.includes("tag")){const F=((d=(w=n==null?void 0:n.mt_keywords)==null?void 0:w.split(","))==null?void 0:d[0])??"";A=A.replace(/\[tag]/,F)}if((v=a==null?void 0:a.mdFilenameRule)!=null&&v.includes("tags")){const F=((S=(P=n==null?void 0:n.mt_keywords)==null?void 0:P.split(","))==null?void 0:S.join("/"))??"";A=A.replace(/\[tags]/,F)}a.useMdFilename?(A=A.replace(/\[filename]/g,n.originalTitle),A=Wn.getHumanFilename(A)):A=A.replace(/\[slug]/g,n.wp_slug),n.mdFilename=A}const{getReadOnlyPublishPreferenceSetting:i}=xt();return i().value.fixTitle&&(n.title=At.removeTitleNumber(n.title).replace(/\.md/g,"")),this.logger.debug("å¤„ç†MDæ–‡ä»¶åå®Œæˆï¼Œpost",{post:ie(n)}),n}async handleDesc(t,s,e){const a=ve.cloneDeep(t);return a.mt_excerpt=a.shortDesc,a.mt_text_more=a.shortDesc,a}async handleCategories(t,s,e){var m;const a=e==null?void 0:e.cfg,n=ve.cloneDeep(t),i=((m=n.cate_slugs)==null?void 0:m[0])??a.blogid,l=[];i!=null&&i.toString().includes(To)&&(a.usePathCategory=!0);const c=Ho.dirname(n.link);if(a.usePathCategory){const y=Ho.join(i.replace(To,""),c);n.cate_slugs=[y];const p=c.split("/");if(p.length>1)for(let g=1;g<p.length;g++){const w=p[g];if(T.isEmptyString(w))continue;const d=At.removeTitleNumber(w);l.push(d)}}this.logger.info("ç›®å½•è·¯å¾„è½¬æ¢çš„åˆ†ç±» =>",l);const r=[...new Set([...l??[],...(n==null?void 0:n.categories)??[]])].filter(y=>y.trim()!=="");return n.categories=r,this.logger.info("æœ€ç»ˆçš„åˆ†ç±» =>",n.categories),this.logger.debug("ç›®å½•è·¯å¾„è½¬æ¢å®Œæˆï¼Œpost",{post:ie(n)}),n}async handleMd(t,s,e){const a=e==null?void 0:e.cfg,n=e==null?void 0:e.setting,i=ve.cloneDeep(t);let l=i.markdown;l=re.extractMarkdown(l),l=Wn.replaceSignToAnother(l,"=="," **","** ");const{getReadOnlyPublishPreferenceSetting:c}=xt(),r=c(),m=/\[(.+?)]\(siyuan:\/\/blocks\/(\d+-\w+)\)/g;return l=await this.replaceOuterLinks(l,m,{pref:r,cfg:a,setting:n}),i.markdown=l,this.logger.debug("markdownå¤„ç†å®Œæ¯•ï¼Œpost",{post:ie(i)}),i}async handleOther(t,s,e){const a=e==null?void 0:e.cfg,n=ve.cloneDeep(t),i=re.extractMarkdown(n.markdown);return n.html=Ns.mdToHtml(i),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}async handleYaml(t,s,e){const a=e==null?void 0:e.cfg,n=ve.cloneDeep(t);this.logger.debug("å¼€å§‹å¤„ç†yamlï¼Œpost",{post:ie(n)});const i=this.api.getYamlAdaptor();switch(n.yamlType){case Ht.Yaml_custom_auto:{const l=i.convertToYaml(n,void 0,a);n.yaml=l.formatter,n.markdown=l.mdFullContent,n.html=l.htmlContent,this.logger.info("rehandled yaml using YamlConverterAdaptor");break}case Ht.Yaml_custom_hand:{const l=n.yaml;if(this.checkPropertiesStartsWith(l,"siyuan://")||n.editMode!==ze.EditMode_source){const c=new ft,r=await re.yaml2ObjAsync(n.yaml);c.yamlObj=r;const m=i.convertToYaml(n,c,a);n.yaml=m.formatter,n.markdown=m.mdFullContent,n.html=m.htmlContent,this.logger.info("assign latest custom yaml to md")}else n.markdown=re.addYamlToMd(n.yaml,n.markdown),this.logger.info("assert yaml is saved by source mode, ignore");break}default:{const l=_n.toYamlObj(n),c=re.obj2Yaml(l),r=re.extractMarkdown(n.markdown);n.yaml=c,n.markdown=r,n.html=Ns.mdToHtml(r),this.logger.info("yaml adaptor not found, using default");break}}return this.logger.debug("yamlå¤„ç†ä¹‹åŽï¼Œpost",{post:ie(n)}),n}async handlePictures(t,s,e){const a=e==null?void 0:e.cfg;e==null||e.dynCfg;const n=ve.cloneDeep(t);switch(this.logger.debug("å›¾ç‰‡å¤„ç†ä¹‹å‰, post =>",{post:ie(n)}),a.picbedService){case it.PicGo:{this.logger.info("ä½¿ç”¨ PicGOä¸Šä¼ å›¾ç‰‡"),this.logger.debug("å¼€å§‹å›¾ç‰‡å¤„ç†, post =>",{post:ie(n)}),n.markdown=await this.picgoBridge.handlePicgo(s,n.markdown),this.logger.debug("å›¾ç‰‡å¤„ç†å®Œæ¯•, post.markdown =>",{md:n.markdown});break}case it.Bundled:{this.logger.info("ä½¿ç”¨å¹³å°ä¸Šä¼ å›¾ç‰‡");const l=await this.picgoBridge.getImageItemsFromMd(s,n.markdown);if(l.length===0)return this.logger.info("æœªæ‰¾åˆ°å›¾ç‰‡ï¼Œä¸å¤„ç†"),n;this.logger.info(`æ‰¾åˆ°${l.length}å¼ å›¾ç‰‡ï¼Œå¼€å§‹ä¸Šä¼ `);const c={};try{for(const y of l){const p=y.url,g=await this.readFileToBase64(p),w=xn(g.imageBase64),d=new rs(y.name,g.mimeType,w);this.logger.debug("before upload, mediaObject =>",d);const v=await this.api.newMediaObject(d);this.logger.debug("attachResult =>",v),v&&v.url&&(c[y.originUrl]=v.url);const P=`ä½¿ç”¨å¹³å°è‡ªå¸¦çš„å›¾ç‰‡ä¸Šä¼ èƒ½åŠ›ï¼Œå·²æˆåŠŸä¸Šä¼ å›¾ç‰‡ ${y.name}`;await this.kernelApi.pushMsg({msg:P,timeout:3e3})}}catch(y){const p="æ–‡ç« å¯èƒ½å·²ç»å‘å¸ƒæˆåŠŸï¼Œä½†æ˜¯å¹³å°å›¾ç‰‡ä¸Šä¼ å¤±è´¥ã€‚è¯·æ‰“å¼€ã€Œå¼€å‘è€…å·¥å…·ã€æŸ¥çœ‹é”™è¯¯æ—¥å¿—";this.logger.error(p,y),await this.kernelApi.pushMsg({msg:p,timeout:7e3})}this.logger.info("å¹³å°å›¾ç‰‡å…¨éƒ¨ä¸Šä¼ å®Œæˆï¼Œå°†å¼€å§‹è¿›è¡Œè¿žæŽ¥æ›¿æ¢ï¼ŒurlMap =>",c);const r=new RegExp(Object.keys(c).map(y=>`\\b${y}\\b`).join("|"),"g"),m=y=>c[y]||y;n.markdown=n.markdown.replace(r,m);break}default:{await this.kernelApi.pushMsg({msg:"æœªæŒ‡å®šä¸Šä¼ å›¾ç‰‡æœåŠ¡ï¼Œä¸å¤„ç†å›¾ç‰‡",timeout:7e3}),this.logger.warn("æœªæŒ‡å®šä¸Šä¼ å›¾ç‰‡æœåŠ¡ï¼Œä¸å¤„ç†å›¾ç‰‡");break}}return n.html=Ns.mdToHtml(n.markdown),this.logger.info("å›¾ç‰‡é¢„å¤„ç†å…¨éƒ¨å®Œæˆ"),this.logger.debug("å›¾ç‰‡å¤„ç†ä¹‹åŽï¼Œpost",{post:ie(n)}),n}async readFileToBase64(t){let s;if(this.isSiyuanOrSiyuanNewWin)this.logger.info("Inside Siyuan notes, use the built-in request to obtain base64"),s=await In(t);else{this.logger.info("Outside the browser, use an image proxy");let e;if(this.api instanceof Rt)e=await this.api.apiFetch(t,[],void 0,"GET",void 0,!0,"base64","base64");else if(this.api instanceof Zt)e=await this.api.webFetch(t,[],void 0,"GET",void 0,!0,"base64","base64");else throw new Error("proxyFetch is not valid");this.logger.debug("readFileToBase64 proxyFetch response =>",e);const a=e.body;s={imageName:t.substring(t.lastIndexOf("/")+1),mimeType:e.contentType,imageBase64:a}}return this.logger.debug("readFileToBase64 proxyFetch base64Info =>",{base64Info:s}),s}async replaceOuterLinks(t,s,e){var m;const{pref:a,cfg:n,setting:i}=e,l=this,c=Array.from(t.matchAll(s));let r=t;for(const y of c){const[p,g,w]=y;let d=g;a.value.fixTitle&&(d=At.removeTitleNumber(d));let v;const P=ae.getProperty(i,w,{}),S=n.posidKey;if(P.hasOwnProperty(S)){let k;const M=P[S];if(k=await l.api.getPostPreviewUrl(M),(m=n==null?void 0:n.mdFilenameRule)!=null&&m.includes("[filename]")){const x=P[nt.Custom_slug],K=Ho.basename(M).replace(/\.md/g,"");k=k.replace(K,x)}!k.startsWith("http")&&!k.startsWith("/")&&(k=`/${k}`),v=k}else throw v=`siyuan://blocks/${w}`,this.logger.error("å¼•ç”¨çš„æ–‡æ¡£å°šæœªå‘å¸ƒï¼Œæ‚¨å¯ä»¥åˆ é™¤æ­¤å¤–é“¾å†å‘å¸ƒï¼Œæˆ–è€…å…ˆå‘å¸ƒå¤–é“¾æ–‡ç«  =>",w),new Error(`å¼•ç”¨çš„æ–‡æ¡£ ${w} å°šæœªå‘å¸ƒï¼Œæ‚¨å¯ä»¥åˆ é™¤æ­¤å¤–é“¾å†å‘å¸ƒï¼Œæˆ–è€…å…ˆå‘å¸ƒå¤–é“¾æ–‡ç« `);r=r.replace(p,`[${d}](${v})`)}return r}checkPropertiesStartsWith(t,s){if(ae.isEmptyObject(t))return!1;for(const e in t)if(t.hasOwnProperty(e)&&!T.isEmptyString(t[e])&&t[e].startsWith(s))return!0;return!1}}class Rt extends kl{constructor(t,s){super();D(this,"appInstance");D(this,"logger");D(this,"cfg");D(this,"baseExtendApi");D(this,"isUseSiyuanProxy");D(this,"proxyFetch");D(this,"corsFetch");this.appInstance=t,this.cfg=s,this.logger=W("base-blog-api"),this.baseExtendApi=new _i(this,s);const{isUseSiyuanProxy:e,proxyFetch:a,corsFetch:n}=Do(s.middlewareUrl,s.corsAnywhereUrl);this.isUseSiyuanProxy=e,this.proxyFetch=a,this.corsFetch=n}async checkAuth(){return!0}getYamlAdaptor(){return null}getPostPreviewUrl(t){return this.getPreviewUrl(t)}async preEditPost(t,s,e){return await this.baseExtendApi.preEditPost(t,s,e)}async getCategories(t){return this.baseExtendApi.getCategories(t)}async getTags(){return this.baseExtendApi.getTags()}async apiFetch(t,s=[],e=void 0,a="GET",n="application/json",i=!1,l="text",c="text"){const r=s.length>0?s[0]:{};if(this.isUseSiyuanProxy||!this.isUseSiyuanProxy&&i||!i){this.logger.info("Using legency api fetch"),delete r["x-cors-headers"];const m=[{...r}];return this.proxyFetch(t,m,e,a,n,i,l,c)}else{this.logger.info("Using cors api fetch");const m=[{...r}];return this.corsFetch(t,m,e,a)}}async apiFormFetch(t,s,e,a=!1){if(this.isUseSiyuanProxy||!this.isUseSiyuanProxy&&a||!a){this.logger.info("Using legency api formFetch");const{isInSiyuanOrSiyuanNewWin:n}=dt();if(!n()||a){const i=await this.apiFetch(t,s,e,"POST",void 0,a,"base64","base64"),l=Ut.fromBase64(i.body),c=te.safeParse(l,{});return this.logger.debug("apiForm doFetch success, resJson=>",c),c}else{const i=zs.getFormDataFetch(this.appInstance),l=s.length>0?s[0]:{};this.logger.debug("before zhi-formdata-fetch, headers =>",s),this.logger.debug("before zhi-formdata-fetch, url =>",t);const c=await i(this.appInstance.moduleBase,t,l,e);return this.logger.debug("apiForm doFetch success, resText =>",c),te.safeParse(c,{})}}else return this.logger.info("Using cors-anywhere api formFetch"),this.corsFetch(t,s,e,"POST")}}class us extends Rt{constructor(t,s){super(t,s);D(this,"proxyXmlrpc");this.cfg.blogid="metaweblog",this.logger=W("metaweblog-api-adaptor");const{proxyXmlrpc:e}=Do(s.middlewareUrl);this.proxyXmlrpc=e}async checkAuth(){return!0}async getUsersBlogs(){let t=[];return t=await this.metaweblogCall(Fe.METHOD_GET_USERS_BLOGS,[this.cfg.blogid,this.cfg.username,this.cfg.password]),this.logger.debug("getUsersBlogs=>",t),t}async getRecentPostsCount(t){return 0}async getRecentPosts(t){const s=[],e=await this.metaweblogCall(Fe.METHOD_GET_RECENT_POSTS,[this.cfg.blogid,this.cfg.username,this.cfg.password,t]);for(let a=0;a<e.length;a++){const n=e[a],i=new tt;i.postid=n.postid,i.title=n.title,i.mt_keywords=n.mt_keywords,i.permalink=n.permalink,i.description=n.description,i.wp_slug=n.wp_slug,i.dateCreated=n.dateCreated,i.categories=n.categories,s.push(i)}return s}async getPost(t){return await this.metaweblogCall(Fe.METHOD_GET_POST,[t,this.cfg.username,this.cfg.password])}async newPost(t,s){s=s??!0;const e=t.post_status;t.post_status=s===!1?Et.PostStatusEnum_Draft:Et.PostStatusEnum_Publish,e!==t.post_status&&(t.post_status=e);const a=this.createPostStruct(t);this.logger.debug("postStruct=>",a);let n=await this.metaweblogCall(Fe.METHOD_NEW_POST,[this.cfg.blogid,this.cfg.username,this.cfg.password,a,s]);return n=n+"",n=n.replace(/"/g,""),this.logger.debug("ret=>",n),n}async editPost(t,s,e){e=e??!0;const a=s.post_status;s.post_status=e===!1?Et.PostStatusEnum_Draft:Et.PostStatusEnum_Publish,a!==s.post_status&&(s.post_status=a);const n=this.createPostStruct(s);this.logger.debug("postStruct=>",n);const i=await this.metaweblogCall(Fe.METHOD_EDIT_POST,[t,this.cfg.username,this.cfg.password,n,e]);return this.logger.debug("ret=>",i),i}async deletePost(t){const s=await this.metaweblogCall(Fe.METHOD_DELETE_POST,[this.cfg.blogid,t,this.cfg.username,this.cfg.password,!1]);return this.logger.debug("ret=>",s),s}async getPreviewUrl(t){return this.cfg.previewUrl.replace(/\[postid\]/g,t)}async getCategories(){const t=[];try{const e=await this.metaweblogCall(Fe.METHOD_GET_CATEGORIES,[this.cfg.blogid,this.cfg.username,this.cfg.password]);this.logger.debug("èŽ·å–çš„åˆ†ç±»ä¿¡æ¯ï¼ŒdataArr=>",e),e.forEach(a=>{const n=new lt;n.categoryId=a.categoryId,n.categoryName=a.categoryName,n.description=a.description,n.categoryDescription=a.categoryDescription,n.htmlUrl=a.htmlUrl,n.parentId=a.parentId,n.rssUrl=a.rssUrl,t.push(n)})}catch(s){this.logger.error("åˆ†ç±»èŽ·å–å¤±è´¥",s)}return t}async newMediaObject(t,s){let e;try{e=await this.metaweblogCall(Fe.METHOD_NEW_MEDIA_OBJECT,[this.cfg.blogid,this.cfg.username,this.cfg.password,t]),this.logger.debug("ä¸Šä¼ åª’ä½“å®Œæˆ, ret =>",e)}catch(a){this.logger.error("åª’ä½“ä¸Šä¼ å¤±è´¥",a)}return e}async metaweblogCall(t,s){return await this.proxyXmlrpc(this.cfg.apiUrl,t,s)}createPostStruct(t){const s={};return T.isEmptyString(t.title)||Object.assign(s,{title:t.title}),T.isEmptyString(t.mt_keywords)||Object.assign(s,{mt_keywords:t.mt_keywords}),T.isEmptyString(t.mt_excerpt)||Object.assign(s,{mt_excerpt:t.mt_excerpt}),T.isEmptyString(t.mt_text_more)||Object.assign(s,{mt_text_more:t.mt_text_more}),T.isEmptyString(t.description)||Object.assign(s,{description:t.description}),T.isEmptyString(t.wp_slug)||Object.assign(s,{wp_slug:t.wp_slug}),Object.assign(s,{categories:t.categories||[]}),Object.assign(s,{post_status:t.post_status??Et.PostStatusEnum_Publish}),T.isEmptyString(t.wp_password)||Object.assign(s,{wp_password:t.wp_password}),s}}class rc extends us{constructor(t,s){super(t,s);D(this,"MD_CATEGORY","[Markdown]");this.logger=W("cnblogs-api-adaptor"),this.cfg.blogid="cnblogs"}async getUsersBlogs(){let t=[];return t=await this.metaweblogCall(ko.METHOD_GET_USERS_BLOGS,[this.cfg.blogid,this.cfg.username,this.cfg.password]),this.logger.debug("getUsersBlogs=>",t),t}async newPost(t,s){return t=this.assignMdCategory(t),super.newPost(t,s)}async editPost(t,s,e){return s=this.assignMdCategory(s),super.editPost(t,s,e)}async deletePost(t){const s=await this.metaweblogCall(ko.METHOD_DELETE_POST,[this.cfg.blogid,t,this.cfg.username,this.cfg.password,!1]);return this.logger.debug("ret=>",s),s}async getCategories(){const t=[];try{const e=await this.metaweblogCall(Fe.METHOD_GET_CATEGORIES,[this.cfg.blogid,this.cfg.username,this.cfg.password]);this.logger.debug("åšå®¢å›­èŽ·å–çš„åˆ†ç±»ä¿¡æ¯ï¼ŒdataArr=>",e),e.forEach(a=>{const n=new lt;a.title!==this.MD_CATEGORY&&(n.categoryId=a.categoryid,n.categoryName=a.title,n.description=a.description,n.categoryDescription=a.categoryDescription,n.htmlUrl=a.htmlUrl,n.parentId=a.parentId,n.rssUrl=a.rssUrl,t.push(n))})}catch(s){this.logger.error("åšå®¢å›­åˆ†ç±»èŽ·å–å¤±è´¥",s)}return t}async getPreviewUrl(t){var a;const s=this.cfg.apiUrl?((a=this.cfg.apiUrl.match(/[^/]+$/))==null?void 0:a[0])??"":"";return this.cfg.previewUrl.replace(/\[userid]/g,s).replace(/\[postid]/g,t)}assignMdCategory(t){const s=t.categories??[];return s.some(e=>e.toLowerCase()===this.MD_CATEGORY.toLowerCase())||s.push(this.MD_CATEGORY),t}}var oo={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const Ya=async(u,o)=>{const t=W("use-cnblogs-api");t.info("Start using Cnblogs API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const l=I.emptyOrDefault(oo.VITE_CNBLOGS_API_URL,"https://rpc.cnblogs.com/metaweblog/[your-blog-name]"),c=I.emptyOrDefault(oo.VITE_CNBLOGS_USERNAME,""),r=I.emptyOrDefault(oo.VITE_CNBLOGS_AUTH_TOKEN,""),m=I.emptyOrDefault(oo.VITE_MIDDLEWARE_URL,_e);e=new Yr(l,c,r,m),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.categoryType=Q.CategoryType_Multi,e.allowCateChange=!0,e.knowledgeSpaceEnabled=!1,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new rc(s,e);return t.info("Cnblogs API created successfully."),{cfg:e,blogApi:a}};class Mn{static parseHomeAndUrl(o){this.logger.debug(`Parsing Home address: ${o}`);let t="";return o.endsWith("/xmlrpc.php")?(t=o,o=o.replace("/xmlrpc.php","")):(o=o.replace(/\/$/,""),t=`${o}/xmlrpc.php`),this.logger.debug(`Parse result: home=${o}, apiUrl=${t}`),{home:o,apiUrl:t}}}D(Mn,"logger",W("wordpress-utils"));class vi extends Fs{constructor(o,t,s,e){super(o,"",t,s,e);const{home:a,apiUrl:n}=Mn.parseHomeAndUrl(o);this.home=a,this.apiUrl=n,this.previewUrl="/?p=[postid]",this.pageType=ue.Html,this.usernameEnabled=!0,this.showTokenTip=!1,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class cc extends us{constructor(o,t){super(o,t),this.logger=W("wordpress-api-adaptor"),this.cfg.blogid="wordpress"}}var ao={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const Xa=async(u,o)=>{const t=W("use-wordpress-api");t.info("Start using Wordpress API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const l=I.emptyOrDefault(ao.VITE_WORDPRESS_API_URL,"http://your-wordpress-home.com"),c=I.emptyOrDefault(ao.VITE_WORDPRESS_USERNAME,""),r=I.emptyOrDefault(ao.VITE_WORDPRESS_AUTH_TOKEN,""),m=I.emptyOrDefault(ao.VITE_MIDDLEWARE_URL,_e);e=new vi(l,c,r,m),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.categoryType=Q.CategoryType_Multi,e.allowCateChange=!0,e.knowledgeSpaceEnabled=!1,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new cc(s,e);return t.info("Wordpress API created successfully.",e),{cfg:e,blogApi:a}};class Dn{static parseHomeAndUrl(o){this.logger.debug(`Parsing Home address: ${o}`);let t="";return o.endsWith("/index.php/action/xmlrpc")?(t=o,o=o.replace("/index.php/action/xmlrpc","")):(o=o.replace(/\/$/,""),t=`${o}/index.php/action/xmlrpc`),this.logger.debug(`Parse result: home=${o}, apiUrl=${t}`),{home:o,apiUrl:t}}}D(Dn,"logger",W("typecho-utils"));class pc extends Fs{constructor(o,t,s,e){super(o,"",t,s,e);const{home:a,apiUrl:n}=Dn.parseHomeAndUrl(o);this.home=a,this.apiUrl=n,this.previewUrl="/index.php/archives/[postid]",this.pageType=ue.Html,this.showTokenTip=!1,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class uc extends us{constructor(o,t){super(o,t),this.logger=W("typecho-api-adaptor"),this.cfg.blogid="typecho"}}var no={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const Za=async(u,o)=>{const t=W("use-typecho-api");t.info("Start using Typecho API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const l=I.emptyOrDefault(no.VITE_TYPECHO_API_URL,"http://your-typecho-home.com/"),c=I.emptyOrDefault(no.VITE_TYPECHO_USERNAME,""),r=I.emptyOrDefault(no.VITE_TYPECHO_AUTH_TOKEN,""),m=I.emptyOrDefault(no.VITE_MIDDLEWARE_URL,_e);e=new pc(l,c,r,m),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.categoryType=Q.CategoryType_Multi,e.allowCateChange=!0,e.knowledgeSpaceEnabled=!1,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new uc(s,e);return t.info("Typecho API created successfully.",e),{cfg:e,blogApi:a}};class dc extends ps{constructor(o,t,s){super("https://www.yuque.com/","https://www.yuque.com/api/v2",o,t,s),this.tokenSettingUrl="https://www.yuque.com/settings/tokens",this.showTokenTip=!0,this.previewUrl="/[notebook]/[postid]",this.pageType=ue.Markdown,this.usernameEnabled=!0,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="çŸ¥è¯†åº“",this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽè¯­é›€å¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žçŸ¥è¯†åº“ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„çŸ¥è¯†åº“å‘å¸ƒ"}}class gc extends Rt{constructor(o,t){super(o,t),this.logger=W("yuque-api-adaptor")}async getUsersBlogs(){const o=[];return(await this.getRepos()).forEach(s=>{const e=new rt;e.blogid=s.namespace,e.blogName=s.name,e.url=s.namespace,o.push(e)}),o}async newPost(o,t){var e;const s=((e=o.cate_slugs)==null?void 0:e[0])??this.cfg.blogid;return await this.addDoc(o.title,o.wp_slug,o.description,s)}async editPost(o,t,s){const e=this.getYuquePostidKey(o);return await this.updateDoc(e.docId,t.title,t.wp_slug,t.description,e.docRepo)}async deletePost(o){const t=this.getYuquePostidKey(o);return await this.delDoc(t.docId,t.docRepo)}async getPost(o,t){const s=this.getYuquePostidKey(o),e=await this.getDoc(s.docId,s.docRepo);this.logger.debug("yuqueDoc=>",e);const a=new tt;a.title=e.title,a.description=e.body;const n=e.book,i=[];return i.push(n.namespace),a.cate_slugs=i,a}async getCategories(){const o=[],t=await this.getRepos();return t&&t.length>0&&t.forEach(s=>{if(s.type==="Book"){const e=new lt;e.categoryId=`${this.cfg.username}/${s.slug}`,e.categoryName=s.name,e.description=s.name,e.categoryDescription=s.name,o.push(e)}}),o}async getPreviewUrl(o){const t=this.cfg.previewUrl??"",s=this.getYuquePostidKey(o),e=s.docId,a=s.docRepo??this.cfg.blogid??"";return t.replace("[postid]",e).replace("[notebook]",a)}async getRepos(){const o="/users/"+this.cfg.username+"/repos",t=await this.yuqueRequest(o,{},"GET");return this.logger.debug("yuque repos=>",t),t}async addDoc(o,t,s,e){let a="/repos/"+this.cfg.blogid+"/docs";e&&(a="/repos/"+e+"/docs",this.logger.warn("yuque addDoc with repo",e));const n={title:o,slug:t,format:"markdown",body:s},i=await this.yuqueRequest(a,n,"POST");if(this.logger.debug("yuqueRequest addDoc=>",i),!i)throw new Error("è¯·æ±‚è¯­é›€APIå¼‚å¸¸");return e?`${i.id}_${e}`:`${i.id}`}async updateDoc(o,t,s,e,a){let n="/repos/"+this.cfg.blogid+"/docs/"+o;a&&(n="/repos/"+a+"/docs/"+o,this.logger.warn("yuque updateDoc with repo",a));const i={title:t,slug:s,body:e,_force_asl:1};if(!await this.yuqueRequest(n,i,"PUT"))throw new Error("è¯·æ±‚è¯­é›€APIå¼‚å¸¸");return!0}getYuquePostidKey(o){let t,s;if(o.indexOf("_")>0){const e=o.split("_");t=e[0],s=e[1]}else t=o;return{docId:t,docRepo:s}}async delDoc(o,t){let s="/repos/"+this.cfg.blogid+"/docs/"+o;if(t&&(s="/repos/"+t+"/docs/"+o,this.logger.warn("yuque delDoc with repo",t)),!await this.yuqueRequest(s,{},"DELETE"))throw new Error("è¯·æ±‚è¯­é›€APIå¼‚å¸¸");return!0}async getDoc(o,t){let s="/repos/"+this.cfg.blogid+"/docs/"+o;t&&(s="/repos/"+t+"/docs/"+o,this.logger.warn("yuque getDoc with repo",t));const e=await this.yuqueRequest(s,{},"GET");if(!e)throw new Error("è¯·æ±‚è¯­é›€APIå¼‚å¸¸");return e}async yuqueRequest(o,t,s="POST"){const e="application/json",a={"Content-Type":e,"X-Auth-Token":this.cfg.password},n=`${this.cfg.apiUrl}${o}`;this.logger.debug("å‘è¯­é›€è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",n),this.logger.debug("å‘è¯­é›€è¯·æ±‚æ•°æ®ï¼Œparams =>",t);const i=ae.isEmptyObject(t)?"":JSON.stringify(t),l=await this.apiFetch(n,[a],i,s,e);if(this.logger.debug("å‘è¯­é›€è¯·æ±‚æ•°æ®ï¼ŒresJson =>",l),(l==null?void 0:l.status)===401)throw new Error(l==null?void 0:l.message);return l.data?l.data:null}}var Lo={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const Qa=async(u,o)=>{const t=W("use-yuque-api");t.info("Start using Yuque API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const l=I.emptyOrDefault(Lo.VITE_YUQUE_USERNAME,""),c=I.emptyOrDefault(Lo.VITE_YUQUE_AUTH_TOKEN,""),r=I.emptyOrDefault(Lo.VITE_MIDDLEWARE_URL,_e);e=new dc(l,c,r),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!1,e.cateEnabled=!1,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceType=Q.CategoryType_Single,e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽè¯­é›€å¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žçŸ¥è¯†åº“ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„çŸ¥è¯†åº“å‘å¸ƒ",e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!1;const a=new gc(s,e);return t.info("Yuque API created successfully.",e),{cfg:e,blogApi:a}},mc=(u,o,t)=>new OSS({endpoint:u,accessKeyId:t.access_id,accessKeySecret:t.access_key,stsToken:t.access_token,cname:!0,bucket:o});class Fn{static processZHTable(o){const t=ns(o),s=t("table thead").html();return t("table thead").remove(),t("table tbody tr:first-child").before(s),t("table").attr("data-draft-node","block").attr("data-draft-type","table").attr("data-size","normal").attr("data-row-style","normal"),t.html()}static processZHMath(o){const t=ns(o,{xml:{xmlMode:!0,decodeEntities:!1}}),s=/\$\$([^\$]+)\$\$|\$([^\$]+)\$/g;return t("*:not(pre)").each((a,n)=>{const l=(t(n).html()??"").replace(s,(c,r,m)=>{const y=r||m;return`<img eeimg="1" src="//www.zhihu.com/equation?tex=${encodeURIComponent(y)}" 
            alt="${y}" />`});t(n).html(l)}),t.html()}}class ls{}D(ls,"HEADERS",{MACOS_CHROME:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"}});class hc extends Zt{async getMetaData(){const o=await this.zhihuFetch("https://www.zhihu.com/api/v4/me?include=account_status%2Cis_bind_phone%2Cis_force_renamed%2Cemail%2Crenamed_fullname"),t=!!o.uid;return this.logger.info(`get zhihu metadata finished, flag => ${t}`),{flag:t,uid:o.uid,title:o.name,avatar:o.avatar_url,supportTypes:["html"],type:"zhihu",displayName:"çŸ¥ä¹Ž",home:"https://www.zhihu.com/settings/account",icon:"https://static.zhihu.com/static/favicon.ico"}}async getUsersBlogs(){let o=[];const t=await this.getColumns();return this.logger.debug("get columns=>",t),t.forEach(s=>{const e=new rt,a=s.column;e.blogid=a.id,e.blogName=a.title,e.url=a.url,o.push(e)}),this.logger.debug("getUsersBlogs=>",o),o}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.html;this.logger.info("å‡†å¤‡å¤„ç†çŸ¥ä¹Žæ­£æ–‡"),this.logger.debug("html =>",{html:i});let l=i;return l=Fn.processZHTable(l),l=Fn.processZHMath(l),n.html=l,this.logger.info("çŸ¥ä¹Žæ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedHtml =>",{updatedHtml:l}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}async addPost(o){var l;const t=JSON.stringify({title:o.title,content:o.description}),s=await this.zhihuFetch("https://zhuanlan.zhihu.com/api/articles/drafts",t,"POST");if(this.logger.debug("save zhihu draft res=>",s),!s.id)throw new Error("çŸ¥ä¹Žæ–‡ç« å‘å¸ƒå¤±è´¥");const e=s.id.toString(),a=JSON.stringify({column:null,commentPermission:"anyone",disclaimer_type:"none",disclaimer_status:"close",table_of_contents_enabled:!1,commercial_report_info:{commercial_types:[]},commercial_zhitask_bind_info:null}),n=await this.zhihuFetch(`https://zhuanlan.zhihu.com/api/articles/${s.id}/publish`,a,"PUT");this.logger.debug("publish zhihu article pubRes=>",n);const i=((l=o.cate_slugs)==null?void 0:l[0])??this.cfg.blogid;return await this.addPostToColumn(i,e),{status:"success",post_id:e}}async editPost(o,t,s){var l;const e=JSON.stringify({title:t.title,content:t.description,table_of_contents:!1,delta_time:10}),a=await this.zhihuFetch(`https://zhuanlan.zhihu.com/api/articles/${o}/draft`,e,"PATCH");if(this.logger.debug("updated zhihu draft =>",a),(l=a==null?void 0:a.error)!=null&&l.message)throw new Error(`çŸ¥ä¹Žæ–‡ç« æ›´æ–°å¤±è´¥ï¼š[${a.error.name}] `+a.error.message);const n=JSON.stringify({disclaimer_type:"none",disclaimer_status:"close",table_of_contents_enabled:!1,commercial_report_info:{commercial_types:[]},commercial_zhitask_bind_info:null}),i=await this.zhihuFetch(`https://zhuanlan.zhihu.com/api/articles/${o}/publish`,n,"PUT");return this.logger.debug("edit zhihu pubRes=>",i),!0}async getPreviewUrl(o){return`https://zhuanlan.zhihu.com/p/${o}`}async deletePost(o){let t=!1;try{const s=await this.zhihuFetch(`https://www.zhihu.com/api/v4/articles/${o}`,void 0,"DELETE");if(this.logger.debug("delete zhihu article res=>",s),s.success)t=!0;else throw new Error(s.error.message)}catch(s){throw this.logger.error("çŸ¥ä¹Žæ–‡ç« åˆ é™¤å¤±è´¥",s),s}return t}async getCategories(){const o=[],t=await this.getColumns();return this.logger.debug("get columns=>",t),t.forEach(s=>{const e=new lt,a=s.column;e.categoryId=a.id,e.categoryName=a.title,e.description=a.url,e.categoryDescription=a.url,o.push(e)}),o}async uploadFile(o){const t=new Blob([o.bits],{type:o.type}),s=o.name;if(this.logger.debug(`zhihu start uploadFile ${s}=>`,t),t instanceof Blob){const e=await t.arrayBuffer(),a=nc(e),n=ui.MD5(a.toString("utf8")).toString(),i=JSON.stringify({image_hash:n,source:"article"});this.logger.debug("zhihu uploadFile, params =>",i);const l=await this.zhihuFormFetch("https://api.zhihu.com/images",i,{});this.logger.debug("zhihu uploadFile, fileResp =>",l);const c=l.upload_file;if(l.upload_file.state==1){const r=await this.untilImageDone(c.image_id);this.logger.debug("imgDetail",r),c.object_key=r.original_hash}else{const r=l.upload_token;try{const m=mc("https://zhihu-pics-upload.zhimg.com","zhihu-pics",r),y=await m.put(c.object_key,new Blob([a]));this.logger.debug("zhihu uploadFile finished",{client:m,finalUrl:y})}catch(m){throw this.logger.error("çŸ¥ä¹Žå›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>",m),new Error("çŸ¥ä¹Žå›¾ç‰‡ä¸Šä¼ å¤±è´¥, é”™è¯¯åŽŸå›  =>"+m)}}return t.type==="image/gif"&&(c.object_key=c.object_key+".gif"),{id:c.object_key,object_key:c.object_key,url:"https://pic4.zhimg.com/"+c.object_key}}return{}}async getColumns(){let o;try{o=await this.zhihuFetch(`https://www.zhihu.com/api/v4/members/${this.cfg.username}/column-contributions?include=data%5B*%5D.column.intro%2Cfollowers%2Carticles_count%2Cvoteup_count%2Citems_count&offset=0&limit=20`,void 0,"GET")}catch(t){this.logger.error("zhihu get columns error",t)}return(o==null?void 0:o.data)??[]}async zhihuFetch(o,t,s="GET",e={},a="application/json"){const n=new Map;n.set("Cookie",this.cfg.password);const i={...Object.fromEntries(n),"User-Agent":ls.HEADERS.MACOS_CHROME["User-Agent"],...e},l=t,c=o;this.logger.debug("å‘ Zhihu è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",c),this.logger.debug("å‘ Zhihu è¯·æ±‚æ•°æ®ï¼Œheaders =>",e),this.logger.debug("å‘ Zhihu è¯·æ±‚æ•°æ®ï¼Œbody =>",l);const r=await this.webFetch(c,[i],l,s,a,!0,"base64");return this.logger.debug("å‘ Zhihu è¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}async zhihuFormFetch(o,t,s={}){const e=o,a=new Map;a.set("Cookie",this.cfg.password);const n={...Object.fromEntries(a),"User-Agent":ls.HEADERS.MACOS_CHROME["User-Agent"],...s},i={method:"POST",headers:n,body:t};this.logger.debug("å‘çŸ¥ä¹Žå‘é€è¡¨å•æ•°æ®ï¼ŒapiUrl =>",e),this.logger.debug("å‘çŸ¥ä¹Žå‘é€è¡¨å•æ•°æ®ï¼Œoptions =>",i);const l=await this.webFormFetch(e,[n],t,!0);if(l.error)throw new Error("çŸ¥ä¹Žè¡¨å•æäº¤é”™è¯¯ã€‚è¯¦ç»†é”™è¯¯ =>"+l.error);return this.logger.debug("å‘çŸ¥ä¹Žå‘é€è¡¨å•æ•°æ®ï¼ŒresJson =>",l),l}async addPostToColumn(o,t){if(T.isEmptyString(o)||T.isEmptyString(t)){this.logger.info("æ–‡ç« æˆ–è€…ä¸“æ ä¸ºç©ºï¼Œä¸æ”¶å½•");return}try{const s=JSON.stringify({type:"article",id:t});await this.zhihuFetch(`https://www.zhihu.com/api/v4/columns/${o}/items`,s,"POST")}catch(s){this.logger.error("æ–‡ç« æ”¶å½•åˆ°ä¸“æ å¤±è´¥",s)}this.logger.info("æ–‡ç« æ”¶å½•åˆ°ä¸“æ æˆåŠŸ")}async untilImageDone(o){const t=this;return new Promise(function(s,e){function a(){t.logger.debug("untilImageDone start processing...",o),(async()=>{const n=await t.zhihuFetch(`https://api.zhihu.com/images/${o}`,void 0,"GET");t.logger.debug("imgDetail",n),n.status!="processing"?(t.logger.info("image upload all done"),s(n)):(t.logger.debug("go next",a),setTimeout(a,300))})()}a()})}}class Qt extends Sl{}class ds extends El{constructor(t,s,e,a,n){super(a,n);D(this,"placeholder",{});this.home=t,this.apiUrl=s,this.username=e,this.password=a,this.apiStatus=!1,this.blogid="",this.blogName="",this.posidKey="",this.previewUrl="",this.pageType=ue.Markdown,this.middlewareUrl=n,this.usernameEnabled=!1,this.allowPreviewUrlChange=!0,this.showTokenTip=!1,this.yamlLinkEnabled=!0,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!1,this.placeholder=new Qt}}class fc extends ds{constructor(t,s,e){super("https://zhuanlan.zhihu.com","https://zhuanlan.zhihu.com/api",t,s,e);D(this,"logoutUrl");this.logoutUrl="https://www.zhihu.com/logout",this.previewUrl="/p/[postid]",this.pageType=ue.Html,this.passwordType=Oe.PasswordType_Cookie,this.usernameEnabled=!0,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="ä¸“æ ",this.knowledgeSpaceType=Q.CategoryType_Single,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽçŸ¥ä¹Žå¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žä¸“æ ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„ä¸“æ å‘å¸ƒ"}}class Pi extends Qt{}var Ro={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const en=async(u,o)=>{const t=W("use-zhihu-web");t.info("Start using Zhihu WebAuth...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Ro.VITE_MIDDLEWARE_URL,_e),r=I.emptyOrDefault(Ro.VITE_ZHIHU_AUTH_TOKEN,"");e=new fc("",r,c),e.picbedService=it.Bundled,t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=I.emptyOrDefault(Ro.VITE_MIDDLEWARE_URL,_e);T.isEmptyString(e.middlewareUrl)&&(e.middlewareUrl=l),T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!1,e.cateEnabled=!1,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceType=Q.CategoryType_Single,e.allowKnowledgeSpaceChange=!1,e.placeholder||(e.placeholder=new Pi),e.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽçŸ¥ä¹Žå¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žä¸“æ ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„ä¸“æ å‘å¸ƒ",e.logoutUrl="https://www.zhihu.com/logout",e.picgoPicbedSupported=!1,e.bundledPicbedSupported=!0;const a=new hc(s,e);return{cfg:e,webApi:a}};var yc={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const tn=async(u,o)=>{const t=W("use-metaweblog-api");t.info("Start using Metaweblog API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const l="",c="",r="",m=I.emptyOrDefault(yc.VITE_MIDDLEWARE_URL,_e);e=new Fs("",l,c,r,m),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.categoryType=Q.CategoryType_Multi,e.allowCateChange=!0,e.knowledgeSpaceEnabled=!1,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new us(s,e);return t.info("Metaweblog API created successfully."),{cfg:e,blogApi:a}};class bc extends ps{constructor(o,t){super("https://www.notion.so/","https://api.notion.com/v1","",o,t),this.tokenSettingUrl="https://www.notion.so/my-integrations",this.showTokenTip=!0,this.previewUrl="/[postid]",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="æ ¹é¡µé¢",this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽNotionå¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žçˆ¶é¡µé¢ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„æ ¹é¡µé¢å‘å¸ƒ",this.cateSearchEnabled=!0}}class wc extends Rt{constructor(o,t){super(o,t),this.logger=W("notion-api-adaptor")}async getUsersBlogs(o){const t=[];return(await this.getPages(o)).forEach(e=>{var i,l;const a=new rt;a.blogid=e.id;const n=((l=(i=e==null?void 0:e.properties)==null?void 0:i.title)==null?void 0:l.title)??[];a.blogName=n.map(c=>c.plain_text).join(""),a.url=e.public_url,t.push(a)}),this.logger.debug("get usersBlogs result=>",t),t}async newPost(o,t){var e;const s=((e=o.cate_slugs)==null?void 0:e[0])??this.cfg.blogid;return await this.createPage(o.title,o.description,s)}async editPost(o,t,s){await this.deletePost(o);const e=await this.newPost(t),{getSetting:a,updateSetting:n}=me(),i=await a(),l=this.cfg.posidKey,c=t.originalId,r=ae.getProperty(i,c,{});return r[l]=e,i[c]=r,await n(i),!0}async deletePost(o){const t=this.getNotionPostidKey(o);return await this.deletePage(t.pageId)}async getPost(o,t){var c,r,m;const s=this.getNotionPostidKey(o),e=await this.getPage(s.pageId);this.logger.debug("notionPage=>",e),this.logger.debug("postid=>",o);const a=new tt,n=((r=(c=e==null?void 0:e.properties)==null?void 0:c.title)==null?void 0:r.title)??[];a.title=n.map(y=>y.plain_text).join(""),a.description="æš‚ä¸æ”¯æŒNotionæ­£æ–‡";const i=(m=e==null?void 0:e.parent)==null?void 0:m.page_id,l=[];return l.push(i),a.cate_slugs=l,a}async getCategories(o){const t=[],s=await this.getPages(o);return s&&s.length>0&&s.forEach(e=>{var i,l;const a=new lt;a.categoryId=e.id;const n=((l=(i=e==null?void 0:e.properties)==null?void 0:i.title)==null?void 0:l.title)??[];a.categoryName=n.map(c=>c.plain_text).join(""),a.description=a.categoryName,a.categoryDescription=a.categoryName,a.htmlUrl=e.public_url,t.push(a)}),t}async getPreviewUrl(o){const t=this.cfg.previewUrl??"",e=this.getNotionPostidKey(o).endUrl;return t.replace("[postid]",e)}async getPages(o){const t={page_size:10,query:o??"",filter:{value:"page",property:"object"}},e=(await this.notionRequest("/search",t,"POST")).results;if(this.logger.debug("notion pages=>",e),e.length===0)throw new Error("no shared page linked to your connection, you must have at least one page as root page, see more at: https://stackoverflow.com/a/75537092/4037224");return e}async createPage(o,t,s){const e=s??this.cfg.blogid,a=di.markdownToNotion(t),n={parent:{page_id:e},properties:{title:[{text:{content:o}}]},children:a};this.logger.debug("before createPage =>",{markdownText:t,notionObject:a});const i=await this.notionRequest("/pages",n,"POST");if(i.object!=="page")throw new Error("Notion create page error");const c=i.url.split("/").slice(-1)[0];return`${i.id}_${c}`}async deletePage(o){this.logger.debug("before deletePage, pageId=>",o);const t=`/pages/${o}`,s={archived:!0},e=await this.notionRequest(t,s,"PATCH");if(e.object!=="page")throw new Error("Notion delete page error");return e.archived}async updatePage(o,t,s){throw new Error("Notionæ˜¯åŸºäºŽå—çš„APIï¼Œæš‚æ—¶ä¸æ”¯æŒæ›´æ–°ï¼Œå¦‚éœ€æ›´æ–°ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ")}async getPage(o){this.logger.debug("before getPage, pageId=>",o);const t=`/pages/${o}`,s=await this.notionRequest(t,{},"GET");if(s.object!=="page")throw new Error("Notion get page error");return s}getNotionPostidKey(o){let t,s;if(o.indexOf("_")>0){const e=o.split("_");t=e[0],s=e[1]}else t=o;return{pageId:t,endUrl:s}}async notionRequest(o,t,s="POST"){const e="application/json",a={"Content-Type":e,Authorization:`Bearer ${this.cfg.password}`,"Notion-Version":"2022-06-28"},n=`${this.cfg.apiUrl}${o}`;this.logger.debug("å‘Notionè¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",n),this.logger.debug("å‘Notionè¯·æ±‚æ•°æ®ï¼Œparams =>",t);const i=ae.isEmptyObject(t)?void 0:JSON.stringify(t),l=await this.apiFetch(n,[a],i,s,e,!0,"base64","text");if(this.logger.debug("å‘Notionè¯·æ±‚æ•°æ®ï¼ŒresJson =>",l),(l==null?void 0:l.status)===400||(l==null?void 0:l.status)===401||(l==null?void 0:l.status)===404||(l==null?void 0:l.status)===429)throw new Error(l==null?void 0:l.message);return l}}var zn={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const sn=async(u,o)=>{const t=W("use-notion-api");t.info("Start using Notion API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const l=I.emptyOrDefault(zn.VITE_NOTION_AUTH_TOKEN,""),c=I.emptyOrDefault(zn.VITE_MIDDLEWARE_URL,_e);e=new bc(l,c),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!1,e.cateEnabled=!1,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceType=Q.CategoryType_Single,e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽNotionå¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žçˆ¶é¡µé¢ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„æ ¹é¡µé¢å‘å¸ƒ",e.cateSearchEnabled=!0,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!1;const a=new wc(s,e);return t.info("Notion API created successfully.",e),{cfg:e,blogApi:a}};class es extends ps{constructor(t,s,e,a,n){super("https://github.com","https://api.github.com",t,s,n);D(this,"githubRepo");D(this,"githubBranch");D(this,"defaultPath");D(this,"defaultMsg");D(this,"author");D(this,"email");D(this,"site");D(this,"mdFilenameRule");D(this,"previewPostUrl","");D(this,"previewUrl","");this.username=t,this.usernameEnabled=!0,this.password=s,this.passwordType=Oe.PasswordType_Token,this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.knowledgeSpaceEnabled=!1,this.githubRepo=e,this.githubBranch=a,this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.defaultPath="/",this.defaultMsg="auto published by siyuan-plugin-publisher",this.author="terwer",this.email="youweics@163.com",this.site=T.pathJoin(this.home,"/"+this.username),this.mdFilenameRule="[filename].md",this.middlewareUrl=n}}class Ti extends es{constructor(o,t,s,e,a){super(o,t,s,e,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="source/_posts",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Hexo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class gs extends Rt{constructor(t,s){super(t,s);D(this,"githubClient");this.logger=W("common-github-api-adaptor");const e=new Xl(s.username,s.githubRepo,s.password);e.defaultBranch=s.githubBranch,e.defaultPath=s.defaultPath,e.defaultMsg=s.defaultMsg,e.author=s.author,e.email=s.email,e.previewMdUrl=s.previewUrl,e.previewUrl=s.previewPostUrl,e.baseUrl=s.home,e.mdFilenameRule=s.mdFilenameRule,this.githubClient=new Zl(e)}async checkAuth(){var s;let t;try{const e="test.md";await this.safeDeletePost(e);const a=await this.githubClient.publishGithubPage(e,"Hello, World!");await this.safeDeletePost(e),t=!T.isEmptyString((s=a==null?void 0:a.content)==null?void 0:s.path)}catch(e){this.logger.info("checkAuth error =>",e),t=!1}return this.logger.info(`checkAuth finished => ${t}`),t}async getUsersBlogs(){const t=[],s=await this.githubClient.getGithubPageTreeNode("");if(this.logger.debug("getGithubPageTreeNode =>",s),s&&s.length>0){const e=new rt,a=this.cfg;e.blogid=a.defaultPath,e.blogName=a.defaultPath,e.url=T.pathJoin(T.pathJoin(a.home,a.username),a.githubRepo),t.push(e)}return this.logger.debug("result result =>",t),t}async newPost(t,s){var c,r,m;this.logger.debug("start newPost =>",{post:ie(t)});const e=this.cfg,a=((c=t.cate_slugs)==null?void 0:c[0])??e.blogid,n=t.mdFilename??"auto-"+Ks.newID()+".md";let i=T.pathJoin(a,n);i.startsWith("/")&&(i=i.substring(1)),i.startsWith("./")&&(i=i.substring(2)),this.logger.info("Githubæ–‡ç« å°†è¦æœ€ç»ˆå‘é€åˆ°ä»¥ä¸‹ç›®å½• =>",i);let l;try{const y=await this.githubClient.publishGithubPage(i,t.description);if(!((r=y==null?void 0:y.content)!=null&&r.path))throw new Error("Github è°ƒç”¨APIå¼‚å¸¸");l=y}catch{try{await this.deletePost(i)}catch(g){this.logger.warn("å°è¯•åˆ é™¤å¤±è´¥ï¼Œå¿½ç•¥",g)}const p=await this.githubClient.publishGithubPage(i,t.description);if(!((m=p==null?void 0:p.content)!=null&&m.path))throw new Error("é‡å‘ä¾æ—§å¤±è´¥ï¼ŒGithub è°ƒç”¨APIå¼‚å¸¸");l=p}return l.content.path}async getPost(t,s){this.logger.debug("start getPost =>",{postid:t});const e=await this.githubClient.getGithubPage(t);if(this.logger.debug("getPost finished =>",e),!e)throw new Error("Github è°ƒç”¨APIå¼‚å¸¸");let a=new tt;a.postid=e.path,a.mdFilename=e.name,a.markdown=Ut.fromBase64(e.content),a.description=a.markdown;const n=this.getYamlAdaptor();if(n!==null){const c=await re.yaml2ObjAsync(a.description),r=new ft;r.yamlObj=c,this.logger.debug("extract frontFormatter, yamlFormatObj =>",r),a=n.convertToAttr(a,r,this.cfg),this.logger.debug("handled yamlObj using YamlConverterAdaptor =>",c)}const i=[],l=e.path.replace(e.name,"").replace(/\/$/,"");return i.push(l),a.cate_slugs=i,a}async editPost(t,s,e){var n;this.logger.debug("start editPost =>",{postid:t,post:ie(s)});const a=await this.githubClient.updateGithubPage(s.postid,s.description);if(!((n=a==null?void 0:a.content)!=null&&n.path))throw new Error("Github è°ƒç”¨APIå¼‚å¸¸");return!0}async deletePost(t){var e;const s=await this.githubClient.deleteGithubPage(t);if(!((e=s==null?void 0:s.commit)!=null&&e.sha))throw new Error("Github è°ƒç”¨APIå¼‚å¸¸");return!0}async getCategoryTreeNodes(t){return await this.githubClient.getGithubPageTreeNode(t)}async getPreviewUrl(t){const s=this.cfg;let e;return e=s.previewUrl.replace("[user]",s.username).replace("[repo]",s.githubRepo).replace("[branch]",s.githubBranch).replace("[docpath]",t),e}async getPostPreviewUrl(t){let s;const e=t.substring(t.lastIndexOf("/")+1).replace(".md","");return s=this.cfg.previewPostUrl.replace("[postid]",e),s}async newMediaObject(t){const s=this.cfg;try{const e=t.bits,a=Ut.fromUint8Array(e),n=this.cfg.imageStorePath??"images";let i=T.pathJoin(n,t.name);i.startsWith("/")&&(i=i.substring(1)),i.startsWith("./")&&(i=i.substring(2)),this.logger.info("Github å›¾ç‰‡å°†è¦æœ€ç»ˆå‘é€åˆ°ä»¥ä¸‹ç›®å½• =>",i);const l=await this.githubClient.publishGithubPage(i,a,"base64"),c=t.name,r=t.name;let m=T.pathJoin("https://raw.githubusercontent.com",this.cfg.username);m=T.pathJoin(m,s.githubRepo),m=T.pathJoin(m,s.githubBranch),m=T.pathJoin(m,encodeURI(n)),m=T.pathJoin(m,encodeURIComponent(t.name));const y=m;return this.logger.info("Github å›¾ç‰‡ä¸Šä¼ æˆåŠŸ",y),this.logger.debug("github publishGithubPage res =>",l),{attachment_id:c,date_created_gmt:new Date,parent:0,link:y,title:t.name,caption:"",description:"",metadata:{width:0,height:0,file:"",filesize:0,sizes:[]},type:t.type,thumbnail:"",id:r,file:t.name,url:y}}catch(e){throw this.logger.error("Error uploading image to github:",e),e}}async safeDeletePost(t){try{await this.githubClient.deleteGithubPage(t)}catch{}return!0}}class On extends cs{constructor(){super(...arguments);D(this,"logger",W("hexo-yaml-converter-adaptor"))}convertToYaml(t,s,e){var n,i;if(this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Hexo Yaml Converter",{post:ie(t)}),s)this.logger.info("yaml å·²ä¿å­˜ï¼Œä¸ä½¿ç”¨é¢„è®¾",{post:ie(t)});else{if(s=new ft,s.yamlObj.title=t.title,s.yamlObj.date=De.formatIsoToZh(t.dateCreated.toISOString(),!0),t.dateUpdated||(t.dateUpdated=new Date),s.yamlObj.updated=De.formatIsoToZh(t.dateUpdated.toISOString(),!0),T.isEmptyString(t.shortDesc)||(s.yamlObj.excerpt=t.shortDesc),!T.isEmptyString(t.mt_keywords)){const c=t.mt_keywords.split(",");s.yamlObj.tags=c}if(((n=t.categories)==null?void 0:n.length)>0&&(s.yamlObj.categories=t.categories),e.yamlLinkEnabled){let c="/post/"+t.wp_slug+".html";if(e instanceof es){const r=e;if(!T.isEmptyString(e.previewPostUrl)){c=r.previewPostUrl.replace("[postid]",t.wp_slug);const p=De.formatIsoToZh(t.dateCreated.toISOString(),!0).split(" ")[0].split("-");this.logger.debug("created numarr=>",p);const g=p[0],w=p[1],d=p[2];c=c.replace(/\[yyyy]/g,g),c=c.replace(/\[MM]/g,w),c=c.replace(/\[mm]/g,w),c=c.replace(/\[dd]/g,d),((i=s.yamlObj.categories)==null?void 0:i.length)>0?c=c.replace(/\[cats]/,s.yamlObj.categories.join("/")):c=c.replace(/\/\[cats]/,"")}}s.yamlObj.permalink=c}const l=te.safeParse((e==null?void 0:e.dynYamlCfg)??"{}",{});ae.isEmptyObject(l)?(s.yamlObj.comments=!0,s.yamlObj.toc=!0):Object.keys(l).forEach(c=>{s.yamlObj[c]=l[c]})}let a=re.obj2Yaml(s.yamlObj);return this.logger.debug("yaml=>",a),s.formatter=a,s.mdContent=t.markdown,s.mdFullContent=re.addYamlToMd(s.formatter,s.mdContent),s.htmlContent=t.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),s}convertToAttr(t,s,e){var a,n,i,l,c,r,m,y,p,g;return this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",s),(a=s.yamlObj)!=null&&a.title&&(t.title=(n=s.yamlObj)==null?void 0:n.title),(i=s.yamlObj)!=null&&i.date&&(t.dateCreated=De.convertStringToDate((l=s.yamlObj)==null?void 0:l.date)),(c=s.yamlObj)!=null&&c.updated&&(t.dateUpdated=De.convertStringToDate((r=s.yamlObj)==null?void 0:r.updated)),t.shortDesc=(m=s.yamlObj)==null?void 0:m.excerpt,t.mt_keywords=(p=(y=s.yamlObj)==null?void 0:y.tags)==null?void 0:p.join(","),t.categories=(g=s.yamlObj)==null?void 0:g.categories,t.yaml=re.obj2Yaml(s.yamlObj),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",t),t}}class _c extends gs{getYamlAdaptor(){return new On}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Hexo æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);return n.markdown=`${l}
${c}`,this.logger.info("Hexo æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var vs={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const co=async(u,o)=>{const t=W("use-hexo-api");t.info("Start using Hexo API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(vs.VITE_GITHUB_USERNAME,""),r=I.emptyOrDefault(vs.VITE_GITHUB_AUTH_TOKEN,""),m=I.emptyOrDefault(vs.VITE_GITHUB_REPO,""),y=I.emptyOrDefault(vs.VITE_GITHUB_BRANCH,"main"),p=I.emptyOrDefault(vs.VITE_MIDDLEWARE_URL,_e);e=new Ti(c,r,m,y,p),e.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Hexo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new On,n=new _c(s,e);return t.info("Hexo API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class vc extends Ti{constructor(o,t,s,e,a){super(o,t,s,e,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl="[your-gitlab-host]/-/profile/personal_access_tokens",this.showTokenTip=!0,this.defaultPath="source/_posts",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Githubhexo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class ki extends On{}class Pc{constructor(o,t){D(this,"logger");D(this,"appInstance");D(this,"cfg");this.logger=W("gitlab-fetch-client-proxy"),this.appInstance=o,this.cfg=t}async fetchCall(o,t,s){try{const e=T.pathJoin(this.cfg.apiUrl,o);this.logger.debug("gitlab fetch adaptor start"),this.logger.debug("apiUrl=>",e),this.logger.debug("fetchOptions=>",t);const a=await this.appInstance.fetch(e,t);if(this.logger.debug("gitlab fetch adaptor endï¼Œresp=>",a),a.ok)return this.safeParseBodyJson(a);{const n=await a.text();if(a.status===400&&n.includes("already exists"))return{exist:!0};throw`gitlab fetch adaptor è¯·æ±‚é”™è¯¯ï¼Œcode ${a.status}, detail => ${JSON.stringify({statusText:a.statusText,msg:n})}`}}catch(e){throw this.logger.error(e),new Error("è¯·æ±‚å¤„ç†å¼‚å¸¸ => "+e.toString())}}async safeParseBodyJson(o){const t=await o.text();return te.safeParse(t,{})}}class ms extends Rt{constructor(t,s){super(t,s);D(this,"gitlabClient");D(this,"gitlabCfg");this.logger=W("common-gitlab-api-adaptor"),this.gitlabCfg=s;const e=new Pc(t,s);this.gitlabClient=new Ql(t,s.apiUrl,s.password,s.username,s.githubRepo,s.githubBranch,s.defaultMsg,s.email,s.author,e,s.middlewareUrl,It)}async checkAuth(){let t;try{const s="test.md";await this.safeDeletePost(s);const e=await this.gitlabClient.createRepositoryFile(s,"Hello, World!");await this.safeDeletePost(s),t=!T.isEmptyString(e==null?void 0:e.file_path)}catch(s){this.logger.info("checkAuth error =>",s),t=!1}return this.logger.info(`checkAuth finished => ${t}`),t}async getUsersBlogs(){const t=[],s=await this.gitlabClient.getRepositoryTree("");if(this.logger.debug("getRepositoryTree =>",s),s&&s.length>0){const e=new rt,a=this.cfg;e.blogid=a.defaultPath,e.blogName=a.defaultPath,e.url=T.pathJoin(T.pathJoin(a.home,a.username),a.githubRepo),t.push(e)}return this.logger.debug("result result =>",t),t}async newPost(t,s){var c;this.logger.debug("start newPost =>",{post:ie(t)});const e=this.cfg,a=((c=t.cate_slugs)==null?void 0:c[0])??e.blogid,n=t.mdFilename??"auto-"+Ks.newID()+".md";let i=T.pathJoin(a,n);i.startsWith("/")&&(i=i.substring(1)),i.startsWith("./")&&(i=i.substring(2)),this.logger.info("Gitlabæ–‡ç« å°†è¦æœ€ç»ˆå‘é€åˆ°ä»¥ä¸‹ç›®å½• =>",i);let l;try{const r=await this.gitlabClient.createRepositoryFile(i,t.description);if(this.logger.debug("gitlab newPost finished =>",r),!(r!=null&&r.file_path))throw new Error("Gitlab è°ƒç”¨APIå¼‚å¸¸ =>"+(r==null?void 0:r.message));l=r}catch{try{await this.deletePost(i)}catch(y){this.logger.warn("å°è¯•åˆ é™¤å¤±è´¥ï¼Œå¿½ç•¥",y)}const m=await this.gitlabClient.createRepositoryFile(i,t.description);if(!(m!=null&&m.file_path))throw new Error("é‡å‘ä¾æ—§å¤±è´¥ï¼ŒGitlab è°ƒç”¨APIå¼‚å¸¸ =>"+(m==null?void 0:m.message));l=m}return l.file_path}async getPost(t,s){this.logger.debug("start getPost =>",{postid:t});const e=await this.gitlabClient.getRepositoryFile(t);if(this.logger.debug("gitlab getPost finished =>",e),!e)throw new Error("Gitlab è°ƒç”¨APIå¼‚å¸¸");let a=new tt;a.postid=e.file_path,a.mdFilename=e.file_name,a.markdown=Ut.fromBase64(e.content),a.description=a.markdown;const n=this.getYamlAdaptor();if(n!==null){const c=await re.yaml2ObjAsync(a.description),r=new ft;r.yamlObj=c,this.logger.debug("extract frontFormatter, yamlFormatObj =>",r),a=n.convertToAttr(a,r,this.cfg),this.logger.debug("handled yamlObj using YamlConverterAdaptor =>",c)}const i=[],l=e.file_path.replace(e.file_name,"").replace(/\/$/,"");return i.push(l),a.cate_slugs=i,a}async editPost(t,s,e){this.logger.debug("start editPost =>",{postid:t,post:ie(s)});const a=await this.gitlabClient.updateRepositoryFile(s.postid,s.description);if(this.logger.debug("gitlab editPost finished =>",a),!(a!=null&&a.file_path))throw new Error("Gitlab è°ƒç”¨APIå¼‚å¸¸");return!0}async deletePost(t){try{const s=await this.gitlabClient.deleteRepositoryFile(t);this.logger.debug("gitlab deletePost finished =>",s)}catch(s){throw new Error("Gitlab è°ƒç”¨APIå¼‚å¸¸ =>"+s)}return!0}async getCategoryTreeNodes(t){return await this.gitlabClient.getRepositoryTree(t)}async getPreviewUrl(t){const s=this.cfg;let e;return e=s.previewUrl.replace("[user]",s.username).replace("[repo]",s.githubRepo).replace("[branch]",s.githubBranch).replace("[docpath]",t),e}async getPostPreviewUrl(t){let s;const e=t.substring(t.lastIndexOf("/")+1).replace(".md","");return s=this.cfg.previewPostUrl.replace("[postid]",e),s}async newMediaObject(t){try{const s=t.bits,e=Ut.fromUint8Array(s);let a=T.pathJoin(this.cfg.imageStorePath??"images",t.name);a.startsWith("/")&&(a=a.substring(1)),a.startsWith("./")&&(a=a.substring(2)),this.logger.info("Gitlabå›¾ç‰‡å°†è¦æœ€ç»ˆå‘é€åˆ°ä»¥ä¸‹ç›®å½• =>",a);const n=await this.gitlabClient.createRepositoryFile(a,e,"base64");this.logger.debug("gitlab createRepositoryFile res =>",n);const i=t.name,l=t.name;let c=T.pathJoin(this.cfg.home,this.cfg.username);if(c=T.pathJoin(c,this.gitlabCfg.githubRepo),c=T.pathJoin(c,"-/raw"),c=T.pathJoin(c,this.gitlabCfg.githubBranch),n!=null&&n.exist)this.logger.warn("å›¾ç‰‡å·²å­˜åœ¨ï¼Œç›´æŽ¥è¿”å›ž"),c=T.pathJoin(c,a);else{if(T.isEmptyString(n.file_path))throw new Error("Gitlab è°ƒç”¨APIå¼‚å¸¸");c=T.pathJoin(c,n.file_path)}const r=c;return this.logger.info("Gitlab å›¾ç‰‡ä¸Šä¼ æˆåŠŸ",r),{attachment_id:i,date_created_gmt:new Date,parent:0,link:r,title:t.name,caption:"",description:"",metadata:{width:0,height:0,file:"",filesize:0,sizes:[]},type:t.type,thumbnail:"",id:l,file:t.name,url:r}}catch(s){throw this.logger.error("Error uploading image to gitlab:",s),s}}async safeDeletePost(t){try{await this.gitlabClient.deleteRepositoryFile(t)}catch{}return!0}}class Tc extends ms{getYamlAdaptor(){return new ki}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabhexo æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);return n.markdown=`${l}
${c}`,this.logger.info("Gitlabhexo æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var Ps={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const po=async(u,o)=>{const t=W("use-gitlab-hexo-api");t.info("Start using Gitlabhexo API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Ps.VITE_GITLAB_USERNAME,""),r=I.emptyOrDefault(Ps.VITE_GITLAB_AUTH_TOKEN,""),m=I.emptyOrDefault(Ps.VITE_GITLAB_REPO,""),y=I.emptyOrDefault(Ps.VITE_GITLAB_BRANCH,"main"),p=I.emptyOrDefault(Ps.VITE_MIDDLEWARE_URL,_e);e=new vc(c,r,m,y,p),e.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabhexo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new ki,n=new Tc(s,e);return t.info("Gitlabhexo API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class kc extends ds{constructor(t,s,e){super("https://blog.csdn.net","https://bizapi.csdn.net",t,s,e);D(this,"logoutUrl");this.logoutUrl="https://passport.csdn.net/account/logout",this.previewUrl="/[userid]/article/details/[postid]",this.pageType=ue.Markdown,this.usernameEnabled=!1,this.passwordType=Oe.PasswordType_Cookie,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class on{static renderToString(o){return this.logger.debug("å‡†å¤‡å¤„ç† Katex =>",{mathExpression:o}),er.renderToString(o)}}D(on,"logger",W("katex-utils"));const Ft=class Ft{static generateXCaNonce(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const t=16*Math.random()|0;return(o==="x"?t:3&t|8).toString(16)})}static generateXCaSignature(o,t,s,e,a){const n=new URL(o),i=ql.parse(Ft.APP_SECRET);let l;if(t==="GET"){const m=n.pathname+n.search;l=`GET
${s}

${a}

x-ca-key:${Ft.X_CA_KEY}
x-ca-nonce:${e}
${m}`}else{const m=n.pathname;l=`POST
${s}

${a}

x-ca-key:${Ft.X_CA_KEY}
x-ca-nonce:${e}
${m}`}const c=ui.HmacSHA256(l,i);return Yl.stringify(c)}static processCsdnMath(o){const t=ns(o,{xml:{xmlMode:!0,decodeEntities:!1}}),s=/\$\$([^$]+)\$\$/g;t("*:not(pre)").each((a,n)=>{const l=t(n).html().replace(s,(c,r)=>`<span class="katex--display">${on.renderToString(r)}</span>`);t(n).html(l)});const e=/\$([^$]+)\$/g;return t("*:not(pre)").each((a,n)=>{const l=t(n).html().replace(e,(c,r)=>`<span class="katex--inline">${on.renderToString(r)}</span>`);t(n).html(l)}),t.html()}static async processPrismjs(o,t){const s=`${nr}/prismjs`,e="application/json",a={"Content-Type":e},n=JSON.stringify({html:t}),i=await o.webFetch(s,[a],n,"POST",e,!1);return console.log("processPrismjs res=>",i),i.html}};D(Ft,"X_CA_KEY","203803574"),D(Ft,"APP_SECRET","9znpamsyl2c7cdrr9sas0le9vbc3r6ba");let $t=Ft;class Sc{static readCookie(o,t){const s=t.split(";");for(const e of s){const[a,n]=e.split("=");if(a.trim()===o)return decodeURIComponent(n)??""}return""}}class Ec extends Zt{async getMetaData(){const o=await this.csdnFetch("https://bizapi.csdn.net/blog-console-api/v1/user/info"),t=!!o.data.username;return this.logger.info(`get csdn metadata finished, flag => ${t}`),{flag:t,uid:o.data.username,title:o.data.username,avatar:o.data.avatar,type:"csdn",displayName:"CSDN",supportTypes:["markdown","html"],home:"https://mp.csdn.net/",icon:"https://g.csdnimg.cn/static/logo/favicon32.ico"}}async getUsersBlogs(){var s;let o=[];const t=await this.csdnFetch("https://bizapi.csdn.net/blog/phoenix/console/v1/column/list?type=all");if(this.logger.debug("get csdn columns =>",t),(t==null?void 0:t.code)===200){const e=(s=t==null?void 0:t.data)==null?void 0:s.list,a=(e==null?void 0:e.column)??[],n=(e==null?void 0:e.pay_column)??[];a.forEach(i=>{const l=new rt;l.blogid=i.id,l.blogName=i.edit_title,l.url=i.column_url,o.push(l)}),n.forEach(i=>{const l=new rt;l.blogid=i.id,l.blogName=i.edit_title,l.url=i.column_url,o.push(l)})}return this.logger.debug("getUsersBlogs=>",o),o}async getCategories(){var s;const o=[],t=await this.csdnFetch("https://bizapi.csdn.net/blog/phoenix/console/v1/column/list?type=all");if(this.logger.debug("get csdn columns =>",t),(t==null?void 0:t.code)===200){const e=(s=t==null?void 0:t.data)==null?void 0:s.list,a=(e==null?void 0:e.column)??[],n=(e==null?void 0:e.pay_column)??[];a.forEach(i=>{const l=new lt;l.categoryId=i.id,l.categoryName=i.edit_title,l.description=i.column_url,l.categoryDescription=i.desc,o.push(l)}),n.forEach(i=>{const l=new lt;l.categoryId=i.id,l.categoryName=i.edit_title,l.description=i.column_url,l.categoryDescription=i.desc,o.push(l)})}return o}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.html;this.logger.info("å‡†å¤‡å¤„ç†CSDNæ­£æ–‡"),this.logger.debug("html =>",{html:i});let l=i;return l=$t.processCsdnMath(l),n.html=l,this.logger.info("CSDNæ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedHtml =>",{updatedHtml:l}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}async addPost(o){let t=o.html;t=await $t.processPrismjs(this,t);const s=JSON.stringify({title:o.title,markdowncontent:o.markdown,content:t,readType:"public",level:0,tags:o.mt_keywords,status:0,categories:o.categories.join(","),type:"original",original_link:"",authorized_status:!1,Description:o.shortDesc,not_auto_saved:"1",source:"pc_mdeditor",cover_images:[],cover_type:1,is_new:1,vote_id:0,resource_id:"",pubStatus:"publish"}),e=await this.csdnFetch("https://bizapi.csdn.net/blog-console-api/v3/mdeditor/saveArticle",[],s,"POST");if(this.logger.debug("save csdn post res=>",e),(e==null?void 0:e.code)!==200)throw new Error("CSDNæ–‡ç« å‘å¸ƒå¤±è´¥ï¼Œå¯èƒ½æ˜¯ç­‰çº§ä¸å¤Ÿå¯¼è‡´ï¼Œå¦‚è¿‡ç­‰çº§ä¸å¤Ÿï¼Œè¯·åŽ»æŽ‰æ–‡ç« æ ‡ç­¾");return{status:"success",post_id:e.data.id.toString()}}async editPost(o,t,s){let e=t.html;e=await $t.processPrismjs(this,e);const a=JSON.stringify({id:o,title:t.title,markdowncontent:t.markdown,content:e,readType:"public",level:"1",tags:t.mt_keywords,status:0,categories:t.categories.join(","),type:"original",original_link:"",authorized_status:!1,Description:t.shortDesc,resource_url:"",not_auto_saved:"1",source:"pc_mdeditor",cover_images:[],cover_type:1,is_new:1,vote_id:0,resource_id:"",pubStatus:"publish"}),n=await this.csdnFetch("https://bizapi.csdn.net/blog-console-api/v3/mdeditor/saveArticle",[],a,"POST");if(this.logger.debug("save csdn post res=>",n),(n==null?void 0:n.code)!==200)throw new Error("CSDNæ–‡ç« æ›´æ–°å¤±è´¥ï¼Œå¯èƒ½æ˜¯ç­‰çº§ä¸å¤Ÿå¯¼è‡´ï¼Œå¦‚æžœç­‰çº§ä¸å¤Ÿï¼Œè¯·åŽ»æŽ‰æ–‡ç« æ ‡ç­¾");return this.logger.debug("edit csdn post res=>",n),!0}async getPost(o){const t=await this.csdnFetch(`https://bizapi.csdn.net/blog-console-api/v3/editor/getArticle?id=${o}`);this.logger.debug("get csdn post =>",t);const s=new tt;if((t==null?void 0:t.code)===200){const e=t==null?void 0:t.data;s.postid=e.article_id,s.title=e.title,s.mt_keywords=(e==null?void 0:e.tags)??"",s.categories=(e==null?void 0:e.categories.split(","))??[]}return s}async deletePost(o){let t=!1;try{const s=JSON.stringify({articleId:o,deep:!1}),e=await this.csdnFetch("https://bizapi.csdn.net/blog/phoenix/console/v1/article/del",[],s,"POST");if(this.logger.debug("delete csdn article res=>",e),(e==null?void 0:e.code)!==200)throw new Error(e==null?void 0:e.message);t=!0}catch(s){throw this.logger.error("CSDNæ–‡ç« åˆ é™¤å¤±è´¥",s),s}return t}async getPreviewUrl(o){const t=this.cfg.password,s=Sc.readCookie("UserName",t);return this.cfg.previewUrl.replace(/\[userid\]/g,s).replace(/\[postid\]/g,o)}async uploadFile(o){const{FormData:t,Blob:s}=zs.getFormData(this.appInstance),e=new s([o.bits],{type:o.type}),a=o.name;if(this.logger.debug(`csdn start uploadFile ${a}=>`,e),e instanceof s){const n=await this.requestUpload(a);if(this.logger.debug("csdn image uploadData =>",n),!n)throw new Error("CSDNå›¾ç‰‡ä¿¡æ¯èŽ·å–å¤±è´¥ =>"+a);const i=n.host,l=new t;l.append("key",n.filePath),l.append("policy",n.policy),l.append("OSSAccessKeyId",n.accessId),l.append("success_action_status","200"),l.append("signature",n.signature),l.append("callback",n.callbackUrl),l.append("file",e),this.logger.debug("csdn image upload strat...");const c={},r=await this.csdnFormFetch(i,l,c);if(r.code!==200)throw new Error("CSDNå›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>"+a);return{id:r.data.targetObjectKey,object_key:r.data.targetObjectKeyy,url:r.data.imageUrl}}return{}}async requestUpload(o){const t="https://imgservice.csdn.net/direct/v1.0/image/upload?watermark=&type=blog&rtype=markdown",s=o.split(".").pop();if(!this.validateFileExt(s))return null;var e=await this.csdnFetch(t,{"x-image-app":"direct_blog","x-image-suffix":s,"x-image-dir":"direct"});return e.code!==200?(this.logger.error("å›¾ç‰‡å¯èƒ½å·²ç»ä¸Šä¼ ï¼Œä¿¡æ¯å¦‚ä¸‹",e),null):e.data}validateFileExt(o){switch(o.toLowerCase()){case"jpg":case"png":case"jpeg":case"gif":return!0;default:return!1}}async csdnFetch(o,t={},s=void 0,e="GET",a="application/json"){const n="*/*",i=$t.X_CA_KEY,l=$t.generateXCaNonce(),c=$t.generateXCaSignature(o,e,n,l,a),r=new Map;r.set("accept",n),r.set("content-type",a),r.set("x-ca-key",i),r.set("x-ca-nonce",l),r.set("x-ca-signature",c),r.set("x-ca-signature-headers","x-ca-key,x-ca-nonce"),r.set("Cookie",this.cfg.password);const m={...Object.fromEntries(r),...t},y={method:e,headers:m,body:s};return this.logger.debug("csdn url =>",o),this.logger.debug("csdn requestOptions =>",y),await this.webFetch(o,[m],s,e,a,!0,"base64")}async csdnFormFetch(o,t,s={}){const e=o,a={method:"POST",headers:s,body:t};this.logger.debug("å‘ CSDN å‘é€è¡¨å•æ•°æ®ï¼ŒapiUrl =>",e),this.logger.debug("å‘ CSDN å‘é€è¡¨å•æ•°æ®ï¼Œoptions =>",a);const n=await this.webFormFetch(e,[s],t,!1);if(n.error)throw new Error("CSDN è¡¨å•æäº¤é”™è¯¯ã€‚è¯¦ç»†é”™è¯¯ =>"+n.error);return this.logger.debug("å‘ CSDN å‘é€è¡¨å•æ•°æ®ï¼ŒresJson =>",n),n}}var Go={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const an=async(u,o)=>{const t=W("use-csdn-web");t.info("Start using Csdn WebAuth...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Go.VITE_MIDDLEWARE_URL,_e),r=I.emptyOrDefault(Go.VITE_CSDN_AUTH_TOKEN,"");e=new kc("",r,c),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=I.emptyOrDefault(Go.VITE_MIDDLEWARE_URL,_e);T.isEmptyString(e.middlewareUrl)&&(e.middlewareUrl=l),T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.categoryType=Q.CategoryType_Multi,e.allowCateChange=!0,e.knowledgeSpaceEnabled=!1,e.picgoPicbedSupported=!1,e.bundledPicbedSupported=!0,e.logoutUrl="https://passport.csdn.net/account/logout",e.picgoPicbedSupported=!1,e.bundledPicbedSupported=!0;const a=new Ec(s,e);return{cfg:e,webApi:a}};class Cc extends ds{constructor(t,s,e){super("https://mp.weixin.qq.com","https://mp.weixin.qq.com/cgi-bin/appmsg",t,s,e);D(this,"logoutUrl");this.logoutUrl="https://mp.weixin.qq.com/cgi-bin/logout",this.previewUrl="/cgi-bin/appmsg?t=media/appmsg_edit&action=edit&type=77&appmsgid=[postid]&token=[token]&lang=zh_CN",this.pageType=ue.Html,this.passwordType=Oe.PasswordType_Cookie,this.usernameEnabled=!1,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!1}}class Ac extends Zt{async getMetaData(){const o=await this.weChatFetch("https://mp.weixin.qq.com/",void 0,"GET",{},"text/html");this.logger.debug("WechatWebAdaptor res=>",{res:o});const t=ns(o),s=t("script")[0],e=t(s).text();this.logger.debug("scriptElement =>",{scriptText:e});const a=e.substring(e.indexOf("window.wx.commonData")),n=new Function("window.wx = {}; window.handlerNickname = function(){};"+a+"; return window.wx;")();this.logger.debug(a,n);const i=Object.assign({},n.commonData);if(delete window.wx,!i.data.t)throw new Error("å¾®ä¿¡å…¬ä¼—å·æœªç™»å½•æˆ–è€…ç™»å½•è¿‡æœŸï¼Œè¯·æ›´æ–°cookie");const l={flag:!T.isEmptyString(i.data.t),uid:i.data.user_name,title:i.data.nick_name,token:i.data.t,commonData:i,avatar:t(".weui-desktop-account__thumb").eq(0).attr("src"),type:"weixin",supportTypes:["html"],home:"https://mp.weixin.qq.com",icon:"https://mp.weixin.qq.com/favicon.ico"};return this.logger.info(`get wechat metadata finished, flag => ${l}`),l}async getUsersBlogs(){let o=[];const t=await this.weChatFetch("https://mp.weixin.qq.com/",void 0,"GET",{},"text/html");this.logger.debug("WechatWebAdaptor res=>",{res:t});const s=ns(t),e=s("script")[0],a=s(e).text();this.logger.debug("scriptElement =>",{scriptText:a});const n=a.substring(a.indexOf("window.wx.commonData")),i=new Function("window.wx = {}; window.handlerNickname = function(){};"+n+"; return window.wx;")();this.logger.debug(n,i);const l=Object.assign({},i.commonData);if(delete window.wx,!l.data.t)throw new Error("å¾®ä¿¡å…¬ä¼—å·æœªç™»å½•æˆ–è€…ç™»å½•è¿‡æœŸï¼Œè¯·æ›´æ–°cookie");this.logger.info("get wechat commonData =>",l);const c=new rt;return c.blogid=l.data.user_name,c.blogName=l.data.nick_name,o.push(c),this.logger.debug("getUsersBlogs=>",o),o}async addPost(o){this.logger.debug("addPost get metadata =>",{cfg:ie(this.cfg.metadata)});const t="https://mp.weixin.qq.com/cgi-bin/operate_appmsg?t=ajax-response&sub=create&type=77&token="+this.cfg.metadata.token+"&lang=zh_CN",s=At.parseHtml(o.shortDesc??"",119,!0),e={token:this.cfg.metadata.token,lang:"zh_CN",f:"json",ajax:"1",random:Math.random(),AppMsgId:"",count:"1",data_seq:null,operate_from:"Chrome",isnew:"0",autosave_log:"true",articlenum:"1",pre_timesend_set:"0",is_finder_video0:"0",finder_draft_id0:"0",applyori0:"0",ad_video_transition0:"",can_reward0:"0",pay_gifts_count0:"0",reward_reply_id0:"",related_video0:"",is_video_recommend0:"-1",title0:o.title,author0:"",writerid0:"0",fileid0:"",digest0:s,auto_gen_digest0:"1",content0:o.html,sourceurl0:"",last_choose_cover_from0:"0",need_open_comment0:"1",only_fans_can_comment0:"0",only_fans_days_can_comment0:"0",reply_flag0:"5",not_pay_can_comment0:"0",open_fansmsg0:"0",cdn_url0:"",cdn_235_1_url0:"",cdn_16_9_url0:"",cdn_3_4_url0:"",cdn_1_1_url0:"",cdn_finder_url0:"",cdn_video_url0:"",cdn_url_back0:"",crop_list0:"",app_cover_auto0:"0",music_id0:"",video_id0:"",voteid0:"",voteismlt0:"",supervoteid0:"",cardid0:"",cardquantity0:"",cardlimit0:"",vid_type0:"",show_cover_pic0:"0",shortvideofileid0:"",copyright_type0:"0",is_cartoon_copyright0:"0",copyright_img_list0:'{"max_width":578,"img_list":[]}',releasefirst0:"",platform0:"",reprint_permit_type0:"",allow_fast_reprint0:"0",allow_reprint0:"",allow_reprint_modify0:"",original_article_type0:"",ori_white_list0:"",video_ori_status0:"",hit_nickname0:"",free_content0:"",fee0:"0",ad_id0:"",guide_words0:"",is_share_copyright0:"0",share_copyright_url0:"",source_article_type0:"",reprint_recommend_title0:"",reprint_recommend_content0:"",share_page_type0:"0",share_imageinfo0:'{"list":[]}',share_video_id0:"",dot0:"{}",share_voice_id0:"",share_finder_audio_username0:"",share_finder_audio_exportid0:"",mmlistenitem_json_buf0:"",insert_ad_mode0:"",categories_list0:"[]",is_pay_subscribe0:"0",pay_fee0:"",pay_preview_percent0:"",pay_desc0:"",pay_album_info0:"",appmsg_album_info0:'{"appmsg_album_infos":[]}',can_insert_ad0:"1",audio_info0:'{"audio_infos":[]}',danmu_pub_type0_0:"0",is_set_sync_to_finder0:"0",sync_to_finder_cover0:"",sync_to_finder_cover_source0:"",import_to_finder0:"0",import_from_finder_export_id0:"",style_type0:"3",sticker_info0:'{"is_stickers":0,"common_stickers_num":0,"union_stickers_num":0,"sticker_id_list":[],"has_invalid_sticker":0}',new_pic_process0:"0",disable_recommend0:"0",req:'{"idx_infos":[{"save_old":0,"cps_info":{"cps_import":0}}]}',is_auto_type_setting:"3",save_type:"1",isneedsave:"0"},a=new FormData;for(const i in e)a.append(i,e[i]??"");const n=await this.wechatFormFetch(t,a);if(!n.appMsgId){const i=n.base_resp;throw new Error("åŒæ­¥åˆ°å¾®ä¿¡å…¬ä¼—å·å¤±è´¥ï¼Œé”™è¯¯å†…å®¹ï¼š"+(i&&i.errmsg?i.errmsg:i.ret))}return{status:"success",post_id:n.appMsgId.toString()}}async editPost(o,t,s){this.logger.debug("editPost get metadata =>",{cfg:ie(this.cfg.metadata)});let e=!1;const a="https://mp.weixin.qq.com/cgi-bin/operate_appmsg?t=ajax-response&sub=update&type=77&token="+this.cfg.metadata.token+"&lang=zh_CN",n=At.parseHtml(t.shortDesc??"",119,!0),i=o,l={token:this.cfg.metadata.token,lang:"zh_CN",f:"json",ajax:"1",random:Math.random(),AppMsgId:i,count:"1",data_seq:null,operate_from:"Chrome",isnew:"0",autosave_log:"true",articlenum:"1",pre_timesend_set:"0",is_finder_video0:"0",finder_draft_id0:"0",applyori0:"0",ad_video_transition0:"",can_reward0:"0",pay_gifts_count0:"0",reward_reply_id0:"",related_video0:"",is_video_recommend0:"-1",title0:t.title,author0:"",writerid0:"0",fileid0:"",digest0:n,auto_gen_digest0:"1",content0:t.html,sourceurl0:"",last_choose_cover_from0:"0",need_open_comment0:"1",only_fans_can_comment0:"0",reply_flag0:"5",not_pay_can_comment0:"0",open_fansmsg0:"0",cdn_url0:"",cdn_235_1_url0:"",cdn_16_9_url0:"",cdn_3_4_url0:"",cdn_1_1_url0:"",cdn_finder_url0:"",cdn_video_url0:"",cdn_url_back0:"",crop_list0:"",app_cover_auto0:"0",music_id0:"",voteid0:"",voteismlt0:"",supervoteid0:"",cardid0:"",cardquantity0:"",cardlimit0:"",vid_type0:"",show_cover_pic0:"0",shortvideofileid0:"",copyright_type0:"0",is_cartoon_copyright0:"0",copyright_img_list0:'{"max_width":578,"img_list":[]}',releasefirst0:"",platform0:"",reprint_permit_type0:"",allow_fast_reprint0:"0",allow_reprint0:"",allow_reprint_modify0:"",original_article_type0:"",ori_white_list0:"",video_ori_status0:"",hit_nickname0:"",free_content0:"",fee0:"0",ad_id0:"",guide_words0:"",is_share_copyright0:"0",share_copyright_url0:"",source_article_type0:"",reprint_recommend_title0:"",reprint_recommend_content0:"",share_page_type0:"0",share_imageinfo0:'{"list":[]}',share_video_id0:"",dot0:"{}",share_voice_id0:"",share_finder_audio_username0:"",share_finder_audio_exportid0:"",mmlistenitem_json_buf0:"",insert_ad_mode0:"",categories_list0:"[]",is_pay_subscribe0:"0",pay_fee0:"",pay_preview_percent0:"",pay_desc0:"",pay_album_info0:"",appmsg_album_info0:'{"appmsg_album_infos":[]}',can_insert_ad0:"1",audio_info0:'{"audio_infos":[]}',danmu_pub_type0_0:"0",is_set_sync_to_finder0:"0",sync_to_finder_cover0:"",sync_to_finder_cover_source0:"",import_to_finder0:"0",import_from_finder_export_id0:"",style_type0:"3",sticker_info0:'{"is_stickers":0,"common_stickers_num":0,"union_stickers_num":0,"sticker_id_list":[],"has_invalid_sticker":0}',new_pic_process0:"0",disable_recommend0:"0",req:'{"idx_infos":[{"save_old":0,"cps_info":{"cps_import":0}}]}',is_auto_type_setting:"3",save_type:"1",isneedsave:"0"},c=new FormData;for(const m in l)c.append(m,l[m]??"");const r=await this.wechatFormFetch(a,c);if(!r.appMsgId){const m=r.base_resp;throw new Error("åŒæ­¥åˆ°å¾®ä¿¡å…¬ä¼—å·å¤±è´¥ï¼Œé”™è¯¯å†…å®¹ï¼š"+(m&&m.errmsg?m.errmsg:m.ret))}return e=!0,e}async getPost(o){const t=this.cfg.metadata.token,s=`https://mp.weixin.qq.com/cgi-bin/appmsg?t=media/appmsg_edit&action=edit&type=77&appmsgid=${o}&token=${t}&lang=zh_CN`,e=await this.webFetch(s,[],{},"GET","text/html");this.logger.debug("get wechat post finished, res=>",e);const a=new tt,l=(ns(e)("html").html()||"").match(/infos\s*=\s*({.*?}},)/);if(l&&l[1]){const c=l[1].replace(/,$/,"");this.logger.debug(`matched infoJSON ${typeof c} =>`,c);try{const r=te.safeParse(c,{});if(!ae.isEmptyObject(r)){this.logger.debug("found infos =>",r);const m=r.item.find(y=>y.app_id.toString()===o);this.logger.debug("curItem =>",m),a.title=m.title,a.shortDesc=m.digest}}catch(r){this.logger.error("å¾®ä¿¡å…¬ä¼—å·JSONè§£æžé”™è¯¯",r)}}else this.logger.error("å¾®ä¿¡å…¬ä¼—å·æœªæ‰¾åˆ°infos = {}},");return a}async deletePost(o){let t=!1;const s="https://mp.weixin.qq.com/cgi-bin/operate_appmsg?sub=del&t=ajax-response",e={token:this.cfg.metadata.token,lang:"zh_CN",f:"json",ajax:"1",AppMsgId:o},a=new FormData;for(const i in e)a.append(i,e[i]??"");const n=await this.wechatFormFetch(s,a);if(!n.appMsgId){const i=n.base_resp;throw new Error("å¾®ä¿¡å…¬ä¼—å·æ–‡ç« åˆ é™¤å¤±è´¥ï¼Œé”™è¯¯å†…å®¹ï¼š"+(i&&i.errmsg?i.errmsg:i.ret))}return this.logger.debug("delete wechat article res=>",n),t=!0,t}async getPreviewUrl(o){const t=this.cfg.metadata.token;return`https://mp.weixin.qq.com/cgi-bin/appmsg?t=media/appmsg_edit&action=edit&type=77&appmsgid=${o}&token=${t}&lang=zh_CN`}async uploadFile(o){const t=new Blob([o.bits],{type:o.type}),s=o.name;if(this.logger.debug(`wechat start uploadFile ${s}=>`,t),t instanceof Blob){const e=this.cfg.metadata.commonData.data.user_name,a=this.cfg.metadata.commonData.data.ticket,n=this.cfg.metadata.commonData.data.time,i=this.cfg.metadata.commonData.data.t,l=new Date().getTime(),c=`https://mp.weixin.qq.com/cgi-bin/filetransfer?action=upload_material&f=json&scene=8&writetype=doublewrite&groupid=1&ticket_id=${e}&ticket=${a}&svr_time=${n}&token=${i}&lang=zh_CN&seq=${l}&t=`+Math.random(),r=await Js(t),m=new Blob([r],{type:t.type}),y=new FormData;y.append("type",t.type),y.append("id",new Date().getTime()),y.append("name",s),y.append("lastModifiedDate",new Date().toString()),y.append("size",t.size),y.append("file",m,s);const p=await this.wechatFormFetch(c,y);if(p.base_resp.err_msg!="ok")throw this.logger.error(`å¾®ä¿¡å…¬ä¼—å·å›¾ç‰‡ä¸Šä¼ å¤±è´¥, ${s} =>`,p.base_resp.err_msg),new Error("upload failed =>"+p.base_resp.err_msg);const g=p.cdn_url;return{id:p.content,object_key:p.content,url:g}}return{}}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.html;this.logger.info("å‡†å¤‡å¤„ç†å¾®ä¿¡å…¬ä¼—å·æ­£æ–‡"),this.logger.debug("html =>",{html:i});let l=i;return n.html=l,this.logger.info("å¾®ä¿¡å…¬ä¼—å·æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedHtml =>",{updatedHtml:l}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}async weChatFetch(o,t,s="GET",e={},a="application/json"){const n=new Map;n.set("Cookie",this.cfg.password);const i={...Object.fromEntries(n),"User-Agent":ls.HEADERS.MACOS_CHROME["User-Agent"],...e},l=t,c=o;this.logger.debug("å‘å¾®ä¿¡å…¬ä¼—å·è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",c),this.logger.debug("å‘å¾®ä¿¡å…¬ä¼—å·è¯·æ±‚æ•°æ®ï¼Œheaders =>",e),this.logger.debug("å‘å¾®ä¿¡å…¬ä¼—å·è¯·æ±‚æ•°æ®ï¼Œbody =>",l);const r=await this.webFetch(c,[i],l,s,a,!0,"base64","text");return this.logger.debug("å‘å¾®ä¿¡å…¬ä¼—å·è¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}async wechatFormFetch(o,t){const s={Cookie:this.cfg.password,Referer:"https://mp.weixin.qq.com/cgi-bin/appmsg","User-Agent":ls.HEADERS.MACOS_CHROME["User-Agent"]};return await this.webFormFetch(o,[s],t,!0)}}var Bo={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const nn=async(u,o)=>{const t=W("use-wechat-web");t.info("Start using Wechat WebAuth...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Bo.VITE_MIDDLEWARE_URL,_e),r=I.emptyOrDefault(Bo.VITE_WECHAT_AUTH_TOKEN,"");e=new Cc("",r,c),e.picbedService=it.Bundled,t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=I.emptyOrDefault(Bo.VITE_MIDDLEWARE_URL,_e);T.isEmptyString(e.middlewareUrl)&&(e.middlewareUrl=l),T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!1,e.cateEnabled=!1,e.knowledgeSpaceEnabled=!1,e.picgoPicbedSupported=!1,e.bundledPicbedSupported=!0;const a=new Ac(s,e);return{cfg:e,webApi:a}};class Uc extends ds{constructor(t,s,e){super("https://www.jianshu.com","https://www.jianshu.com",t,s,e);D(this,"logoutUrl");this.logoutUrl="https://www.jianshu.com/shakespeare/sign_out",this.previewUrl="/p/[postid]",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Cookie,this.usernameEnabled=!1,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="ç¬”è®°æœ¬",this.knowledgeSpaceType=Q.CategoryType_Single,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽç®€ä¹¦å¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žç¬”è®°æœ¬ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„ç¬”è®°æœ¬å‘å¸ƒ"}}class Ic extends Zt{async getMetaData(){const o=await this.jianshuFetch("https://www.jianshu.com/settings/basic.json"),t=o.data.avatar,s=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")),e=!!s;return this.logger.info(`get jianshu metadata finished, flag => ${e}`),{flag:e,uid:s,title:o.data.nickname,avatar:t,type:"jianshu",displayName:"ç®€ä¹¦",supportTypes:["html"],home:"https://www.jianshu.com/settings/basic",icon:"https://www.jianshu.com/favicon.ico"}}async getUsersBlogs(){const o=[],t={accept:"application/json"},s=await this.jianshuFetch("https://www.jianshu.com/author/notebooks",void 0,"GET",t);return this.logger.info("get jianshu notebooks",s),s&&s.length>0&&s.forEach(e=>{const a=new rt;a.blogid=e.id,a.blogName=e.name,o.push(a)}),this.logger.debug("getUsersBlogs=>",o),o}async getCategories(){const o=[],t={accept:"application/json"},s=await this.jianshuFetch("https://www.jianshu.com/author/notebooks",void 0,"GET",t);return this.logger.info("get jianshu notebooks",s),s&&s.length>0&&s.forEach(e=>{const a=new lt;a.categoryId=e.id,a.categoryName=e.name,o.push(a)}),o}async addPost(o){var c,r;this.logger.debug("start add post =>",{post:o});const t=((r=(c=o.cate_slugs)==null?void 0:c[0])==null?void 0:r.toString())??this.cfg.blogid.toString(),s={accept:"application/json"},e=JSON.stringify({notebook_id:t,title:o.title,at_bottom:!1}),a=await this.jianshuFetch("https://www.jianshu.com/author/notes",e,"POST",s);this.logger.debug("jianshu addPost initRes =>",a);const n=a.id,i=a.slug;return await this.updateJianshuArticle(n,o.title,o.description,1),this.logger.info(`æ–‡ç« å‘å¸ƒæˆåŠŸï¼Œå¼€å§‹ç»„è£…ç®€ä¹¦çš„IDç»„åˆ,pageId=${n},notebookId=${t},endUrl=${i}`),{status:"success",post_id:[n,t,i].join("_")}}async getPreviewUrl(o){const t=this.cfg.previewUrl??"",e=this.getJianshuPostidKey(o).endUrl;return t.replace("[postid]",e)}async deletePost(o){const s=this.getJianshuPostidKey(o).pageId,e={accept:"application/json"},a=await this.jianshuFetch(`https://www.jianshu.com/author/notes/${s}/soft_destroy`,JSON.stringify({}),"POST",e);return this.logger.debug("jianshu delete post res =>",a),!0}async editPost(o,t,s){let e=!1;try{const n=this.getJianshuPostidKey(o).pageId,i={accept:"application/json"},l=await this.jianshuFetch(`https://www.jianshu.com/author/notes/${n}/note_logs`,void 0,"GET",i);this.logger.debug("jianshu get post version res =>",l);const c=l.length+1;this.logger.debug("jianshu update post with new version =>",c),await this.updateJianshuArticle(n,t.title,t.description,c),e=!0}catch(a){this.logger.error("ç®€ä¹¦æ–‡ç« æ›´æ–°å¤±è´¥",a)}return e}async uploadFile(o){const t=new Blob([o.bits],{type:o.type}),s=o.name;if(this.logger.debug(`jianshu start uploadFile ${s}=>`,t),t instanceof Blob){const e="https://upload.qiniup.com/",a=await Js(t),n=new Blob([a],{type:t.type}),i=await this.jianshuFetch("https://www.jianshu.com/upload_images/token.json?filename="+s);this.logger.debug("jianshu get picture token res =>",i);const l=new FormData;l.append("token",i.token),l.append("key",i.key),l.append("x:protocol","https"),l.append("file",n,s);const c=await this.jianshuFormFetch(e,l);if(this.logger.debug("jianshu upload success, resJson =>",c),!c.url)throw new Error("ç®€ä¹¦å›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>"+s);const r=c.url;return{id:i.key,object_key:i.key,url:r}}return{}}getJianshuPostidKey(o){let t,s,e;if(o.indexOf("_")>0){const a=o.split("_");t=a[0],s=a[1],e=a[2]}else t=o;return{pageId:t,notebookId:s,endUrl:e}}async updateJianshuArticle(o,t,s,e=1){const a={accept:"application/json"},n=JSON.stringify({id:o,autosave_control:e,title:t,content:s}),i=await this.jianshuFetch(`https://www.jianshu.com/author/notes/${o}`,n,"PUT",a);this.logger.debug("jianshu savePost saveRes =>",i);try{const l={accept:"application/json"},c=JSON.stringify({}),r=await this.jianshuFetch(`https://www.jianshu.com/author/notes/${o}/publicize`,c,"POST",l);this.logger.debug("jianshu publishPost pubRes =>",r)}catch(l){ee.warning("ç®€ä¹¦æ–‡ç« å‘å¸ƒå¤±è´¥ï¼Œå†…å®¹å·²å­˜å…¥è‰ç¨¿ =>"+l),this.logger.error("ç®€ä¹¦æ–‡ç« å‘å¸ƒå¤±è´¥",l)}}async jianshuFetch(o,t,s="GET",e={},a="application/json"){const n=new Map;n.set("Cookie",this.cfg.password);const i={...Object.fromEntries(n),...e},l=t,c=o;this.logger.debug("å‘ç®€ä¹¦ç½‘ç«™è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",c),this.logger.debug("å‘ç®€ä¹¦ç½‘ç«™è¯·æ±‚æ•°æ®ï¼Œheaders =>",e),this.logger.debug("å‘ç®€ä¹¦ç½‘ç«™è¯·æ±‚æ•°æ®ï¼Œbody =>",l);const r=await this.webFetch(c,[i],l,s,a,!0,"base64");return this.logger.debug("å‘ç®€ä¹¦ç½‘ç«™è¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}async jianshuFormFetch(o,t){const s={};return await this.webFormFetch(o,[s],t,!0)}}var jo={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const ln=async(u,o)=>{const t=W("use-jianshu-web");t.info("Start using Jianshu WebAuth...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(jo.VITE_MIDDLEWARE_URL,_e),r=I.emptyOrDefault(jo.VITE_JIANSHU_AUTH_TOKEN,"");e=new Uc("",r,c),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=I.emptyOrDefault(jo.VITE_MIDDLEWARE_URL,_e);T.isEmptyString(e.middlewareUrl)&&(e.middlewareUrl=l),T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!1,e.cateEnabled=!1,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="ç¬”è®°æœ¬",e.knowledgeSpaceType=Q.CategoryType_Single,e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽç®€ä¹¦å¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žç¬”è®°æœ¬ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„ç¬”è®°æœ¬å‘å¸ƒ",e.logoutUrl="https://www.jianshu.com/shakespeare/sign_out",e.picgoPicbedSupported=!1,e.bundledPicbedSupported=!0;const a=new Ic(s,e);return{cfg:e,webApi:a}};class xc extends ds{constructor(t,s,e){super("https://juejin.cn","https://api.juejin.cn",t,s,e);D(this,"logoutUrl");this.logoutUrl="https://juejin.cn/passport/web/logout",this.previewUrl="/post/[postid]",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Cookie,this.usernameEnabled=!1,this.tagEnabled=!1,this.tagSlugEnabled=!0,this.cateEnabled=!1,this.categoryType=Q.CategoryType_Single,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="åˆ†ç±»",this.knowledgeSpaceType=Q.CategoryType_Single,this.allowKnowledgeSpaceChange=!0}}class Mc extends Zt{async getMetaData(){var s;const o=await this.juejinFetch("https://api.juejin.cn/user_api/v1/user/get",void 0,"GET"),t=!!((s=o.data)!=null&&s.user_id);if(!t)throw new Error(`æŽ˜é‡‘å¹³å°æ ¡éªŒå¤±è´¥ï¼Œè¯¦ç»†é”™è¯¯ï¼šcode: ${o==null?void 0:o.err_no}ï¼Œmsg: ${o==null?void 0:o.err_msg}`);return this.logger.info(`get juejin metadata finished, flag => ${t}`),{flag:t,uid:o.data.user_id,title:o.data.user_name,avatar:o.data.avatar_large,type:"juejin",displayName:"æŽ˜é‡‘",raw:o.data,supportTypes:["markdown","html"],home:"https://juejin.cn/editor/drafts",icon:"https://juejin.cn/favicon.ico"}}async getUsersBlogs(){let o=[];const t={accept:"application/json"},s=await this.juejinFetch("https://api.juejin.cn/tag_api/v1/query_category_list",void 0,"POST",t);return this.logger.info("get juejin categories",s.data),s.data&&s.data.length>0&&s.data.forEach(a=>{const n=new rt;n.blogid=a.category_id,n.blogName=a.category.category_name,n.url=a.category.icon,o.push(n)}),this.logger.debug("getUsersBlogs=>",o),o}async addPost(o){var m;let t=((m=o.cate_slugs)==null?void 0:m[0])??this.cfg.blogid;T.isEmptyString(t)&&(t="6809637769959178254",this.logger.error("æŽ˜é‡‘å¹³å°æœªé€‰æ‹©åˆ†ç±»ï¼Œå°†ä½¿ç”¨é»˜è®¤åˆ†ç±»ï¼šåŽç«¯"));let s=o.tags_slugs??"";T.isEmptyString(s)&&(s="6809640482725954000",this.logger.error("æŽ˜é‡‘å¹³å°æœªé€‰æ‹©æ ‡ç­¾ï¼Œå°†ä½¿ç”¨é»˜è®¤æ ‡ç­¾ï¼šç¨‹åºå‘˜"));const e="ç”±äºŽæŽ˜é‡‘å¹³å°çš„æ‘˜è¦æœ‰å¼ºåˆ¶å­—æ•°è¦æ±‚ï¼Œè¿™é‡Œéœ€è¦ç»™ä¸€ä¸‹é»˜è®¤æ–‡å­—ä½œä¸ºæ‘˜è¦ã€‚è¿™é‡Œæ˜¯æŽ˜é‡‘å¹³å°çš„é»˜è®¤æ‘˜è¦ï¼Œæ‚¨å¯ä»¥ç¨åŽè‡ªè¡Œä¿®æ”¹ã€‚";if((T.isEmptyString(o.shortDesc)||o.shortDesc.length<e.length)&&(o.shortDesc=e,this.logger.error("æŽ˜é‡‘å¹³å°æœªè®¾ç½®æ‘˜è¦æˆ–è€…æ‘˜è¦å­—æ•°ï¼Œå°†ä½¿ç”¨é»˜è®¤æ‘˜è¦")),o.shortDesc.length<50){for(;o.shortDesc.length<50;)o.shortDesc+=o.shortDesc;o.shortDesc=o.shortDesc.slice(0,100)}else o.shortDesc.length>100&&(o.shortDesc=o.shortDesc.slice(0,100));const a="https://api.juejin.cn/content_api/v1/article_draft/create",n=JSON.stringify({category_id:t,tag_ids:s.split(","),link_url:"",cover_image:"",title:o.title,brief_content:o.shortDesc,edit_type:10,html_content:"deprecated",mark_content:o.description,theme_ids:[]}),i=await this.juejinFetch(a,n,"POST",{});if(this.logger.debug("juejin add post =>",i),i.err_no!==0)throw new Error("æŽ˜é‡‘æ–‡ç« è‰ç¨¿ä¿å­˜é”™è¯¯ =>"+i.err_msg);const l=i.data.id.toString();return{status:"success",post_id:[await this.publishPost(l),l].join("_")}}async editPost(o,t,s){var m;const e=((m=t.cate_slugs)==null?void 0:m[0])??this.cfg.blogid;if(T.isEmptyString(e))throw new Error("æŽ˜é‡‘å¹³å°å¿…é¡»é€‰æ‹©ä¸€ä¸ªåˆ†ç±»");const a=t.tags_slugs??"";if(T.isEmptyString(a))throw new Error("æŽ˜é‡‘å¹³å°å¿…é¡»é€‰æ‹©ä¸€ä¸ªæ ‡ç­¾");const i=this.getJuejinPostidKey(o).draftId,l="https://api.juejin.cn/content_api/v1/article_draft/update",c=JSON.stringify({id:i,category_id:e,tag_ids:a.split(","),link_url:"",cover_image:"",title:t.title,brief_content:t.shortDesc,edit_type:10,html_content:"deprecated",mark_content:t.markdown,theme_ids:[]}),r=await this.juejinFetch(l,c,"POST",{});if(this.logger.debug("juejin update post =>",r),r.err_no!==0)throw new Error("æŽ˜é‡‘æ–‡ç« æ›´æ–°é”™è¯¯ =>"+r.err_msg);return await this.publishPost(i),!0}async getPreviewUrl(o){const s=this.getJuejinPostidKey(o).pageId;return this.cfg.previewUrl.replace("[postid]",s)}async deletePost(o){const t="https://api.juejin.cn/content_api/v1/article/delete",e=this.getJuejinPostidKey(o).pageId,a=JSON.stringify({article_id:e}),n=await this.juejinFetch(t,a,"POST",{});if(this.logger.debug("juejin delete post res =>",n),n.err_no!==0)throw new Error("æŽ˜é‡‘æ–‡ç« åˆ é™¤å¤±è´¥ =>"+n.err_msg);return!0}async getPost(o,t){const e=this.getJuejinPostidKey(o).pageId,a="https://api.juejin.cn/content_api/v1/article/detail",n=JSON.stringify({article_id:e}),i=await this.juejinFetch(a,n,"POST",{});if(this.logger.debug("juejin get post res =>",i),i.err_no!==0)throw new Error("æŽ˜é‡‘æ–‡ç« èŽ·å–å¤±è´¥ =>"+i.err_msg);const l=new tt,c=i.data.tags??[],r=[];c.forEach(p=>{r.push(p.tag_id)}),l.tags_slugs=r.join(",");const m=i.data.category.category_id,y=[];return y.push(m),l.cate_slugs=y,l}async getCategories(){const o=[],t={accept:"application/json"},s=await this.juejinFetch("https://api.juejin.cn/tag_api/v1/query_category_list",void 0,"POST",t);return this.logger.info("get juejin categories",s.data),s.data&&s.data.length>0&&s.data.forEach(e=>{const a=new lt;a.categoryId=e.category_id,a.categoryName=e.category.category_name,o.push(a)}),o}async getTags(){const o=[],t={accept:"application/json"},s=JSON.stringify({cursor:"0",key_word:"",limit:10,sort_type:1}),e=await this.juejinFetch("https://api.juejin.cn/tag_api/v1/query_tag_list",s,"POST",t);return this.logger.info("get juejin categories",e.data),e.data&&e.data.length>0&&e.data.forEach(a=>{const n=new Co;n.tagId=a.tag_id,n.tagName=a.tag.tag_name,o.push(n)}),o}getJuejinPostidKey(o){let t,s;if(o.indexOf("_")>0){const e=o.split("_");t=e[0],s=e[1]}else t=o;return{pageId:t,draftId:s}}async publishPost(o){const t="https://api.juejin.cn/content_api/v1/article/publish",s=JSON.stringify({draft_id:o,sync_to_org:!1,column_ids:[],theme_ids:[]}),e=await this.juejinFetch(t,s,"POST",{});if(this.logger.debug("juejin publish post res =>",e),e.err_no!==0)throw new Error("æŽ˜é‡‘æ–‡ç« å‘å¸ƒå¤±è´¥ =>"+((e==null?void 0:e.err_msg)??e));return e.data.article_id.toString()}async juejinFetch(o,t,s="GET",e={},a="application/json"){const n=new Map;n.set("Cookie",this.cfg.password);const i={...Object.fromEntries(n),...e},l=t,c=o;this.logger.debug("å‘æŽ˜é‡‘è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",c),this.logger.debug("å‘æŽ˜é‡‘è¯·æ±‚æ•°æ®ï¼Œheaders =>",e),this.logger.debug("å‘æŽ˜é‡‘è¯·æ±‚æ•°æ®ï¼Œbody =>",l);const r=await this.webFetch(c,[i],l,s,a,!0,"base64");return this.logger.debug("å‘æŽ˜é‡‘è¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}}var Ko={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const rn=async(u,o)=>{const t=W("use-juejin-web");t.info("Start using Juejin WebAuth...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Ko.VITE_MIDDLEWARE_URL,_e),r=I.emptyOrDefault(Ko.VITE_JUEJIN_AUTH_TOKEN,"");e=new xc("",r,c),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=I.emptyOrDefault(Ko.VITE_MIDDLEWARE_URL,_e);T.isEmptyString(e.middlewareUrl)&&(e.middlewareUrl=l),T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!1,e.tagSlugEnabled=!0,e.cateEnabled=!1,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="åˆ†ç±»",e.knowledgeSpaceType=Q.CategoryType_Single,e.allowKnowledgeSpaceChange=!0,e.logoutUrl="https://juejin.cn/passport/web/logout",e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!1;const a=new Mc(s,e);return{cfg:e,webApi:a}};class Si extends es{constructor(o,t,s,e,a){super(o,t,s,e,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="content/post",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Hugo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Vn extends cs{constructor(){super(...arguments);D(this,"logger",W("hugo-yaml-converter-adaptor"))}convertToYaml(t,s,e){var n;if(this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Hugo Yaml Converter",{post:ie(t)}),s)this.logger.info("yaml å·²ä¿å­˜ï¼Œä¸ä½¿ç”¨é¢„è®¾",{post:ie(t)});else{s=new ft,s.yamlObj.title=t.title,s.yamlObj.slug=t.wp_slug,e.yamlLinkEnabled&&(s.yamlObj.url="/post/"+t.wp_slug+".html");let i="+00:00";const l=new Date().getTimezoneOffset()/-60,c=l>0?"+":"-";if(l.toString().length<2?i=`${c}0${l}:00`:i=`${c}${l}:00`,s.yamlObj.date=De.formatIsoToZh(t.dateCreated.toISOString(),!0)+i,t.dateUpdated||(t.dateUpdated=new Date),s.yamlObj.lastmod=De.formatIsoToZh(t.dateUpdated.toISOString(),!0)+i,!T.isEmptyString(t.mt_keywords)){const m=t.mt_keywords.split(",");s.yamlObj.tags=m}((n=t.categories)==null?void 0:n.length)>0&&(s.yamlObj.categories=t.categories),T.isEmptyString(t.mt_keywords)||(s.yamlObj.keywords=t.mt_keywords),T.isEmptyString(t.shortDesc)||(s.yamlObj.description=t.shortDesc);const r=te.safeParse((e==null?void 0:e.dynYamlCfg)??"{}",{});ae.isEmptyObject(r)?(s.yamlObj.toc=!0,s.yamlObj.isCJKLanguage=!0):Object.keys(r).forEach(m=>{s.yamlObj[m]=r[m]})}let a=re.obj2Yaml(s.yamlObj);return this.logger.debug("yaml=>",a),s.formatter=a,s.mdContent=t.markdown,s.mdFullContent=re.addYamlToMd(s.formatter,s.mdContent),s.htmlContent=t.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),s}convertToAttr(t,s,e){var a,n,i,l,c,r,m,y,p,g;return this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",s),(a=s.yamlObj)!=null&&a.title&&(t.title=(n=s.yamlObj)==null?void 0:n.title),(i=s.yamlObj)!=null&&i.date&&(t.dateCreated=De.convertStringToDate((l=s.yamlObj)==null?void 0:l.date)),(c=s.yamlObj)!=null&&c.lastmod&&(t.dateUpdated=De.convertStringToDate((r=s.yamlObj)==null?void 0:r.lastmod)),t.shortDesc=(m=s.yamlObj)==null?void 0:m.description,t.mt_keywords=(p=(y=s.yamlObj)==null?void 0:y.tags)==null?void 0:p.join(","),t.categories=(g=s.yamlObj)==null?void 0:g.categories,t.yaml=re.obj2Yaml(s.yamlObj),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",t),t}}class Dc extends gs{getYamlAdaptor(){return new Vn}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Hugo æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);return n.markdown=`${l}
${c}`,this.logger.info("Hugo æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var Ts={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const uo=async(u,o)=>{const t=W("use-hugo-api");t.info("Start using Hexo API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Ts.VITE_GITHUB_USERNAME,""),r=I.emptyOrDefault(Ts.VITE_GITHUB_AUTH_TOKEN,""),m=I.emptyOrDefault(Ts.VITE_GITHUB_REPO,""),y=I.emptyOrDefault(Ts.VITE_GITHUB_BRANCH,"main"),p=I.emptyOrDefault(Ts.VITE_MIDDLEWARE_URL,_e);e=new Si(c,r,m,y,p),e.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Hugo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new Vn,n=new Dc(s,e);return t.info("Hugo API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class Oc extends Si{constructor(o,t,s,e,a){super(o,t,s,e,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl="[your-gitlab-host]/-/profile/personal_access_tokens",this.showTokenTip=!0,this.defaultPath="content/post",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Githubhugo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Ei extends Vn{}class Vc extends ms{getYamlAdaptor(){return new Ei}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabhugo æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);return n.markdown=`${l}
${c}`,this.logger.info("Gitlabhugo æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var ks={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const go=async(u,o)=>{const t=W("use-gitlab-hugo-api");t.info("Start using Gitlabhugo API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(ks.VITE_GITLAB_USERNAME,""),r=I.emptyOrDefault(ks.VITE_GITLAB_AUTH_TOKEN,""),m=I.emptyOrDefault(ks.VITE_GITLAB_REPO,""),y=I.emptyOrDefault(ks.VITE_GITLAB_BRANCH,"main"),p=I.emptyOrDefault(ks.VITE_MIDDLEWARE_URL,_e);e=new Oc(c,r,m,y,p),e.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabhugo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new Ei,n=new Vc(s,e);return t.info("Gitlbhugo API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class Ci extends es{constructor(o,t,s,e,a){super(o,t,s,e,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="_posts",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[yyyy]-[mm]-[dd]-[slug].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Jekyll å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class $n extends cs{constructor(){super(...arguments);D(this,"logger",W("hexo-yaml-converter-adaptor"))}convertToYaml(t,s,e){var n;if(this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Jekyll Yaml Converter",{post:ie(t)}),s)this.logger.info("yaml å·²ä¿å­˜ï¼Œä¸ä½¿ç”¨é¢„è®¾",{post:ie(t)});else{s=new ft,s.yamlObj.title=t.title,s.yamlObj.date=De.formatIsoToZh(t.dateCreated.toISOString(),!0);let i="/post/"+t.wp_slug+".html";const l=e;if(l.yamlLinkEnabled&&!T.isEmptyString(l.previewPostUrl)&&(i=l.previewPostUrl.replace("[postid]",t.wp_slug)),this.logger.debug("link=>",i),s.yamlObj.permalink=i,T.isEmptyString(t.shortDesc)||(s.yamlObj.tagline=t.shortDesc),!T.isEmptyString(t.mt_keywords)){const r=t.mt_keywords.split(",");s.yamlObj.tags=r}((n=t.categories)==null?void 0:n.length)>0&&(s.yamlObj.categories=t.categories);const c=te.safeParse((e==null?void 0:e.dynYamlCfg)??"{}",{});ae.isEmptyObject(c)?(s.yamlObj.layout="post",s.yamlObj.published=!0):Object.keys(c).forEach(r=>{s.yamlObj[r]=c[r]})}let a=re.obj2Yaml(s.yamlObj);return this.logger.debug("yaml=>",a),s.formatter=a,s.mdContent=t.markdown,s.mdFullContent=re.addYamlToMd(s.formatter,s.mdContent),s.htmlContent=t.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),s}convertToAttr(t,s,e){var a,n,i,l,c,r,m,y;return this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",s),(a=s.yamlObj)!=null&&a.title&&(t.title=(n=s.yamlObj)==null?void 0:n.title),(i=s.yamlObj)!=null&&i.date&&(t.dateCreated=De.convertStringToDate((l=s.yamlObj)==null?void 0:l.date)),t.shortDesc=(c=s.yamlObj)==null?void 0:c.tagline,t.mt_keywords=(m=(r=s.yamlObj)==null?void 0:r.tags)==null?void 0:m.join(","),t.categories=(y=s.yamlObj)==null?void 0:y.categories,t.yaml=re.obj2Yaml(s.yamlObj),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",t),t}}class $c extends gs{getYamlAdaptor(){return new $n}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Jekyll æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);return n.markdown=`${l}
${c}`,this.logger.info("Jekyll æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var Ss={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const mo=async(u,o)=>{const t=W("use-jekyll-api");t.info("Start using Hexo API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Ss.VITE_GITHUB_USERNAME,""),r=I.emptyOrDefault(Ss.VITE_GITHUB_AUTH_TOKEN,""),m=I.emptyOrDefault(Ss.VITE_GITHUB_REPO,""),y=I.emptyOrDefault(Ss.VITE_GITHUB_BRANCH,"main"),p=I.emptyOrDefault(Ss.VITE_MIDDLEWARE_URL,_e);e=new Ci(c,r,m,y,p),e.mdFilenameRule="[yyyy]-[mm]-[dd]-[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Jekyll å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new $n,n=new $c(s,e);return t.info("Jekyll API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class Nc extends Ci{constructor(o,t,s,e,a){super(o,t,s,e,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl="[your-gitlab-host]/-/profile/personal_access_tokens",this.showTokenTip=!0,this.defaultPath="_posts",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[yyyy]-[mm]-[dd]-[slug].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabjekyll å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Ai extends $n{}class Hc extends ms{getYamlAdaptor(){return new Ai}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabjekyll æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);return n.markdown=`${l}
${c}`,this.logger.info("Gitlabjekyll æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var Es={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const ho=async(u,o)=>{const t=W("use-gitlab-hugo-api");t.info("Start using Gitlabhugo API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Es.VITE_GITLAB_USERNAME,""),r=I.emptyOrDefault(Es.VITE_GITLAB_AUTH_TOKEN,""),m=I.emptyOrDefault(Es.VITE_GITLAB_REPO,""),y=I.emptyOrDefault(Es.VITE_GITLAB_BRANCH,"main"),p=I.emptyOrDefault(Es.VITE_MIDDLEWARE_URL,_e);e=new Nc(c,r,m,y,p),e.mdFilenameRule="[yyyy]-[mm]-[dd]-[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabjekyll å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new Ai,n=new Hc(s,e);return t.info("Gitlabjekyll API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class Ui extends es{constructor(o,t,s,e,a){super(o,t,s,e,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="docs",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[filename].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Vuepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Nn extends cs{constructor(){super(...arguments);D(this,"logger",W("vuepress-yaml-converter-adaptor"))}convertToYaml(t,s,e){var n,i;if(this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Vuepress Yaml Converter",{post:ie(t)}),s)this.logger.info("yaml å·²ä¿å­˜ï¼Œä¸ä½¿ç”¨é¢„è®¾",{post:ie(t)});else{if(s=new ft,s.yamlObj.title=t.title,s.yamlObj.date=De.formatIsoToZh(t.dateCreated.toISOString(),!0),s.yamlObj.meta=[],T.isEmptyString(t.mt_keywords)||s.yamlObj.meta.push({name:"keywords",content:t.mt_keywords.split(",").join(" ")||""}),T.isEmptyString(t.shortDesc)||s.yamlObj.meta.push({name:"description",content:t.shortDesc}),!T.isEmptyString(t.mt_keywords)){const m=t.mt_keywords.split(",");s.yamlObj.tags=m}if(((n=t.categories)==null?void 0:n.length)>0&&(s.yamlObj.categories=t.categories),e.yamlLinkEnabled){let m="/post/"+t.wp_slug+".html";s.yamlObj.permalink=m}const l=e;let c=l.site;T.isEmptyString(l.site)&&(c=T.pathJoin(l.home,"/"+l.username)),s.yamlObj.author={name:l.author??"terwer",link:c},(i=t==null?void 0:t.title)!=null&&i.includes("[æ—¥è®°]")&&(s.yamlObj.article=!1);const r=te.safeParse((e==null?void 0:e.dynYamlCfg)??"{}",{});ae.isEmptyObject(r)||Object.keys(r).forEach(m=>{s.yamlObj[m]=r[m]})}let a=re.obj2Yaml(s.yamlObj);return this.logger.debug("yaml=>",a),s.formatter=a,s.mdContent=t.markdown,s.mdFullContent=re.addYamlToMd(s.formatter,s.mdContent),s.htmlContent=t.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),s}convertToAttr(t,s,e){var n,i,l,c,r,m,y;this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",s),(n=s.yamlObj)!=null&&n.title&&(t.title=(i=s.yamlObj)==null?void 0:i.title),(l=s.yamlObj)!=null&&l.date&&(t.dateCreated=De.convertStringToDate((c=s.yamlObj)==null?void 0:c.date));const a=s.yamlObj.meta;for(let p=0;p<a.length;p++){const g=a[p];if(g.name==="description"&&!T.isEmptyString(g.content)){t.shortDesc=g.content;break}}return t.mt_keywords=(m=(r=s.yamlObj)==null?void 0:r.tags)==null?void 0:m.join(","),t.categories=(y=s.yamlObj)==null?void 0:y.categories,t.yaml=re.obj2Yaml(s.yamlObj),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",t),t}}class Lc extends gs{getYamlAdaptor(){return new Nn}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Vuepress æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);const r=n.shortDesc??"";return/(\n{2}<!-- more -->\n{2})/.test(c)||(c=`${r}

<!-- more -->

${c}`),n.markdown=`${l}
${c}`,this.logger.info("Vuepress æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var Cs={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const fo=async(u,o)=>{const t=W("use-vuepress-api");t.info("Start using Vuepress API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Cs.VITE_GITHUB_USERNAME,""),r=I.emptyOrDefault(Cs.VITE_GITHUB_AUTH_TOKEN,""),m=I.emptyOrDefault(Cs.VITE_GITHUB_REPO,""),y=I.emptyOrDefault(Cs.VITE_GITHUB_BRANCH,"main"),p=I.emptyOrDefault(Cs.VITE_MIDDLEWARE_URL,_e);e=new Ui(c,r,m,y,p),e.mdFilenameRule="[filename].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Vuepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new Nn,n=new Lc(s,e);return t.info("Vuepress API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class Rc extends Ui{constructor(o,t,s,e,a){super(o,t,s,e,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl="[your-gitlab-host]/-/profile/personal_access_tokens",this.showTokenTip=!0,this.defaultPath="docs",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[filename].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvuepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Ii extends Nn{}class Gc extends ms{getYamlAdaptor(){return new Ii}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabvuepress æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);const r=n.shortDesc??"";return/(\n{2}<!-- more -->\n{2})/.test(c)||(c=`${r}

<!-- more -->

${c}`),n.markdown=`${l}
${c}`,this.logger.info("Gitlabvuepress æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var As={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const yo=async(u,o)=>{const t=W("use-gitlab-hexo-api");t.info("Start using Gitlabvuepress API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(As.VITE_GITLAB_USERNAME,""),r=I.emptyOrDefault(As.VITE_GITLAB_AUTH_TOKEN,""),m=I.emptyOrDefault(As.VITE_GITLAB_REPO,""),y=I.emptyOrDefault(As.VITE_GITLAB_BRANCH,"main"),p=I.emptyOrDefault(As.VITE_MIDDLEWARE_URL,_e);e=new Rc(c,r,m,y,p),e.mdFilenameRule="[filename].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvuepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new Ii,n=new Gc(s,e);return t.info("Gitlabvuepress API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class xi extends es{constructor(o,t,s,e,a){super(o,t,s,e,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="src/post",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Vuepress2 å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Hn extends cs{constructor(){super(...arguments);D(this,"logger",W("vuepress2-yaml-converter-adaptor"))}convertToYaml(t,s,e){var n;if(this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Vuepress2 Yaml Converter",{post:ie(t)}),s)this.logger.info("yaml å·²ä¿å­˜ï¼Œä¸ä½¿ç”¨é¢„è®¾",{post:ie(t)});else{if(s=new ft,s.yamlObj.title=t.title,s.yamlObj.short_title="",s.yamlObj.date=t.dateCreated,T.isEmptyString(t.shortDesc)||(s.yamlObj.description=t.shortDesc),!T.isEmptyString(t.mt_keywords)){const l=t.mt_keywords.split(",");s.yamlObj.tag=l}((n=t.categories)==null?void 0:n.length)>0&&(s.yamlObj.category=t.categories);const i=te.safeParse((e==null?void 0:e.dynYamlCfg)??"{}",{});ae.isEmptyObject(i)?(s.yamlObj.article=!0,s.yamlObj.timeline=!1,s.yamlObj.isOriginal=!0):Object.keys(i).forEach(l=>{s.yamlObj[l]=i[l]})}const a=re.obj2Yaml(s.yamlObj);return s.formatter=this.removeTZ(a),s.mdContent=t.markdown,s.mdFullContent=re.addYamlToMd(s.formatter,s.mdContent),s.htmlContent=t.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),s}convertToAttr(t,s,e){var n,i,l,c,r,m,y,p;this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",s),(n=s.yamlObj)!=null&&n.title&&(t.title=(i=s.yamlObj)==null?void 0:i.title),(l=s.yamlObj)!=null&&l.date&&(t.dateCreated=(c=s.yamlObj)==null?void 0:c.date),t.shortDesc=(r=s.yamlObj)==null?void 0:r.description,t.mt_keywords=(y=(m=s.yamlObj)==null?void 0:m.tag)==null?void 0:y.join(","),t.categories=(p=s.yamlObj)==null?void 0:p.category;const a=re.obj2Yaml(s.yamlObj);return t.yaml=this.removeTZ(a),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",t),t}removeTZ(t){return t.replace(/---([\s\S]*?)---/g,function(s,e){return s.replace(/T/g," ").replace(/\.\d{3}Z/g,"")})}}class Bc extends gs{getYamlAdaptor(){return new Hn}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Vuepress2 æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);const r=n.shortDesc??"";return/(\n{2}<!-- more -->\n{2})/.test(c)||(c=`${r}

<!-- more -->

${c}`),n.markdown=`${l}
${c}`,this.logger.info("Vuepress2 æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var Us={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const bo=async(u,o)=>{const t=W("use-vuepress2-api");t.info("Start using Vuepress2 API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Us.VITE_GITHUB_USERNAME,""),r=I.emptyOrDefault(Us.VITE_GITHUB_AUTH_TOKEN,""),m=I.emptyOrDefault(Us.VITE_GITHUB_REPO,""),y=I.emptyOrDefault(Us.VITE_GITHUB_BRANCH,"main"),p=I.emptyOrDefault(Us.VITE_MIDDLEWARE_URL,_e);e=new xi(c,r,m,y,p),e.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Vuepress2 å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new Hn,n=new Bc(s,e);return t.info("Vuepress2 API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class Mi extends es{constructor(o,t,s,e,a){super(o,t,s,e,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="docs",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Vitepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Ln extends cs{constructor(){super(...arguments);D(this,"logger",W("vitepress-yaml-converter-adaptor"))}convertToYaml(t,s,e){var n;if(this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Vitepress Yaml Converter",{post:ie(t)}),s)this.logger.info("yaml å·²ä¿å­˜ï¼Œä¸ä½¿ç”¨é¢„è®¾",{post:ie(t)});else{s=new ft,s.yamlObj.title=t.title,T.isEmptyString(t.shortDesc)||(s.yamlObj.description=t.shortDesc),s.yamlObj.date=De.formatIsoToZh(t.dateCreated.toISOString(),!0),s.yamlObj.head=[],T.isEmptyString(t.mt_keywords)||s.yamlObj.head.push({name:"keywords",content:t.mt_keywords.split(",").join(" ")}),T.isEmptyString(t.shortDesc)||s.yamlObj.head.push({name:"description",content:t.shortDesc}),((n=t.categories)==null?void 0:n.length)>0&&(s.yamlObj.categories=t.categories);const i=te.safeParse((e==null?void 0:e.dynYamlCfg)??"{}",{});ae.isEmptyObject(i)?(s.yamlObj.outline="deep",s.yamlObj.sidebar=!1,s.yamlObj.prev=!1,s.yamlObj.next=!1):Object.keys(i).forEach(l=>{s.yamlObj[l]=i[l]})}let a=re.obj2Yaml(s.yamlObj);return this.logger.debug("yaml=>",a),s.formatter=a,s.mdContent=t.markdown,s.mdFullContent=re.addYamlToMd(s.formatter,s.mdContent),s.htmlContent=t.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),s}convertToAttr(t,s,e){var n,i,l,c,r,m,y,p;this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",s),(n=s.yamlObj)!=null&&n.title&&(t.title=(i=s.yamlObj)==null?void 0:i.title),(l=s.yamlObj)!=null&&l.date&&(t.dateCreated=De.convertStringToDate((c=s.yamlObj)==null?void 0:c.date)),(r=s.yamlObj)!=null&&r.description&&(t.shortDesc=s.yamlObj.description);const a=(m=s.yamlObj)==null?void 0:m.head;if(a&&a.length==4)for(let g=0;g<a.length;g++){const w=a[g];if((w==null?void 0:w.name)==="keywords"&&!T.isEmptyString(w.content)){t.mt_keywords=(y=w.content)==null?void 0:y.split(" ");break}}return t.categories=(p=s.yamlObj)==null?void 0:p.categories,t.yaml=re.obj2Yaml(s.yamlObj),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",t),t}}class jc extends gs{getYamlAdaptor(){return new Ln}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Vitepress æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);return n.markdown=`${l}
${c}`,this.logger.info("Vitepress æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var Is={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const wo=async(u,o)=>{const t=W("use-vitepress-api");t.info("Start using Vitepress API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Is.VITE_GITHUB_USERNAME,""),r=I.emptyOrDefault(Is.VITE_GITHUB_AUTH_TOKEN,""),m=I.emptyOrDefault(Is.VITE_GITHUB_REPO,""),y=I.emptyOrDefault(Is.VITE_GITHUB_BRANCH,"main"),p=I.emptyOrDefault(Is.VITE_MIDDLEWARE_URL,_e);e=new Mi(c,r,m,y,p),e.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Vitepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new Ln,n=new jc(s,e);return t.info("Vitepress API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class Kc extends xi{constructor(o,t,s,e,a){super(o,t,s,e,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl="[your-gitlab-host]/-/profile/personal_access_tokens",this.showTokenTip=!0,this.defaultPath="src/post",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvuepress2 å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Di extends Hn{}class Wc extends ms{getYamlAdaptor(){return new Di}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabvuepress2 æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);const r=n.shortDesc??"";return/(\n{2}<!-- more -->\n{2})/.test(c)||(c=`${r}

<!-- more -->

${c}`),n.markdown=`${l}
${c}`,this.logger.info("Gitlabvuepress2 æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var xs={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const _o=async(u,o)=>{const t=W("use-gitlab-hexo-api");t.info("Start using Gitlabvuepress2 API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(xs.VITE_GITLAB_USERNAME,""),r=I.emptyOrDefault(xs.VITE_GITLAB_AUTH_TOKEN,""),m=I.emptyOrDefault(xs.VITE_GITLAB_REPO,""),y=I.emptyOrDefault(xs.VITE_GITLAB_BRANCH,"main"),p=I.emptyOrDefault(xs.VITE_MIDDLEWARE_URL,_e);e=new Kc(c,r,m,y,p),e.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvuepress2 å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new Di,n=new Wc(s,e);return t.info("Gitlabvuepress2 API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class Fc extends Mi{constructor(o,t,s,e,a){super(o,t,s,e,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl="[your-gitlab-host]/-/profile/personal_access_tokens",this.showTokenTip=!0,this.defaultPath="docs",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ue.Markdown,this.passwordType=Oe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvitepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Oi extends Ln{}class zc extends ms{getYamlAdaptor(){return new Oi}async preEditPost(o,t,s){const e=await super.preEditPost(o,t,s),a=s==null?void 0:s.cfg,n=ve.cloneDeep(e),i=n.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabvitepress æ­£æ–‡"),this.logger.debug("md =>",{md:i});const l=re.extractFrontmatter(i,!0);let c=re.extractMarkdown(i);return n.markdown=`${l}
${c}`,this.logger.info("Gitlabvitepress æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),(a==null?void 0:a.pageType)==ue.Markdown?n.description=n.markdown:n.description=n.html,n}}var Ms={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const vo=async(u,o)=>{const t=W("use-gitlab-vitepress-api");t.info("Start using Gitlabvitepress API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:i}=me(),l=await i();if(e=te.safeParse(l[u],{}),ae.isEmptyObject(e)){const c=I.emptyOrDefault(Ms.VITE_GITLAB_USERNAME,""),r=I.emptyOrDefault(Ms.VITE_GITLAB_AUTH_TOKEN,""),m=I.emptyOrDefault(Ms.VITE_GITLAB_REPO,""),y=I.emptyOrDefault(Ms.VITE_GITLAB_BRANCH,"main"),p=I.emptyOrDefault(Ms.VITE_MIDDLEWARE_URL,_e);e=new Fc(c,r,m,y,p),e.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.allowCateChange=!0,e.categoryType=Q.CategoryType_Multi,e.knowledgeSpaceEnabled=!0,e.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",e.allowKnowledgeSpaceChange=!1,e.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvitepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",e.knowledgeSpaceType=Q.CategoryType_Tree_Single,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new Oi,n=new zc(s,e);return t.info("Gitlabvitepress API created successfully.",e),{cfg:e,yamlAdaptor:a,blogApi:n}};class Jc extends ps{constructor(o,t,s){super("","",o,t,s),this.home="[your-halo-home]",this.apiUrl="[your-halo-api-url]",this.previewUrl="/archives/{slug}",this.pageType=ue.Html,this.usernameEnabled=!0,this.showTokenTip=!1,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class Vi{constructor(o,t,s){D(this,"slug");D(this,"name");D(this,"year");D(this,"month");D(this,"day");this.slug=o,this.name=t;const n=De.formatIsoToZhDate(s.toISOString(),!0).split(" ")[0].split("-");this.year=n[0],this.month=n[1],this.day=n[2]}}class Nt{static addIdToH1_H6(o){return o.replace(/<h([1-6])>(.*?)<\/h\1>/g,function(t,s,e){return`<h${s} id="${e}">${e}</h${s}>`})}}class qc extends Rt{constructor(o,t){super(o,t),this.logger=W("halo-api-adaptor-v29")}async getUsersBlogs(){const o=[];return(await this.getHaloCategories()).forEach(s=>{const e=new rt;e.blogid=s.spec.slug,e.blogName=s.spec.displayName,e.url=s.status.permalink,o.push(e)}),this.logger.debug("get halo categories =>",o),o}async newPost(o,t){var n;const s={post:{spec:{title:"",slug:"",template:"",cover:"",deleted:!1,publish:!1,publishTime:void 0,pinned:!1,allowComment:!0,visible:"PUBLIC",priority:0,excerpt:{autoGenerate:!0,raw:""},categories:[],tags:[],htmlMetas:[]},apiVersion:"content.halo.run/v1alpha1",kind:"Post",metadata:{name:"",annotations:{}}},content:{raw:"",content:"",rawType:this.cfg.pageType}};this.cfg.pageType==="markdown"?s.content.raw=o.markdown:s.content.raw=Nt.addIdToH1_H6(o.html),s.content.content=Nt.addIdToH1_H6(o.html),T.isEmptyString(o.shortDesc)?s.post.spec.excerpt.autoGenerate=!0:(s.post.spec.excerpt.autoGenerate=!1,s.post.spec.excerpt.raw=o.shortDesc),s.post.metadata.name=Ks.randomUuid(),s.post.spec.title=o.title,s.post.spec.slug=o.wp_slug;try{if(o.categories&&o.categories.length>0){const i=await this.getCategoryNames(o.categories);s.post.spec.categories=i}if(!T.isEmptyString(o.mt_keywords)){const i=o.mt_keywords.split(","),l=await this.getTagNames(i);s.post.spec.tags=l}}catch(i){throw i}s.post.spec.publishTime=o.dateCreated.toISOString();const e=await this.haloFetch("/apis/api.console.halo.run/v1alpha1/posts",s,"POST");if(this.logger.debug("halo newPost res =>",e),!((n=e==null?void 0:e.metadata)!=null&&n.name))throw new Error("Halo æ–‡ç« å‘å¸ƒå¤±è´¥");this.logger.debug("halo æ–‡ç« è‰ç¨¿å®Œæˆ"),await this.haloFetch(`/apis/api.console.halo.run/v1alpha1/posts/${s.post.metadata.name}/publish`,{},"PUT"),this.logger.debug("halo æ–‡ç« å‘å¸ƒå®Œæˆ");const a=new Vi(e.spec.slug,e.metadata.name,o.dateCreated);return this.logger.debug("postidMeta =>",a),JSON.stringify(a)}async editPost(o,t,s){let e=!1;try{const n=this.getHaloPostidKey(o).name;let i=await this.getHaloPost(n);if(this.logger.debug("get latest halo post =>",{name:n,haloPost:i}),!i.post)throw new Error("èŽ·å–æ–‡ç« ä¿¡æ¯å¤±è´¥ï¼Œå¦‚æžœæ–‡ç« åˆ é™¤ï¼Œè¯·å¼ºåˆ¶åˆ é™¤è§£é™¤å…³è”");if(i.content.rawType==="markdown"?i.content.raw=t.markdown:i.content.raw=Nt.addIdToH1_H6(t.html),i.content.content=Nt.addIdToH1_H6(t.html),T.isEmptyString(t.shortDesc)?i.post.spec.excerpt.autoGenerate=!0:(i.post.spec.excerpt.autoGenerate=!1,i.post.spec.excerpt.raw=t.shortDesc),i.post.metadata.name=n,i.post.spec.title=t.title,i.post.spec.slug=t.wp_slug,t.categories&&t.categories.length>0){const l=await this.getCategoryNames(t.categories);i.post.spec.categories=l}if(!T.isEmptyString(t.mt_keywords)){const l=t.mt_keywords.split(","),c=await this.getTagNames(l);i.post.spec.tags=c}i.post.spec.publishTime=t.dateCreated.toISOString(),await this.haloFetch(`/apis/content.halo.run/v1alpha1/posts/${n}`,i.post,"PUT"),await this.haloFetch(`/apis/api.console.halo.run/v1alpha1/posts/${n}/content`,i.content,"PUT"),await this.haloFetch(`/apis/api.console.halo.run/v1alpha1/posts/${i.post.metadata.name}/publish`,{},"PUT"),this.logger.debug("halo æ–‡ç« å‘å¸ƒå®Œæˆ")}catch(a){this.logger.error("Haloæ–‡ç« æ›´æ–°å¤±è´¥",a)}return e}async getPost(o,t){const e=this.getHaloPostidKey(o).name,a=await this.getHaloPost(e);this.logger.debug("getPost haloPost =>",{name:e,haloPost:a});const n=new tt;return n.title=a.post.spec.title,n.wp_slug=a.post.spec.slug,n.shortDesc=a.post.spec.excerpt.raw,n.tags_slugs=a.post.spec.tags.join(","),n.cate_slugs=a.post.spec.categories,n}async getPreviewUrl(o){const t=this.getHaloPostidKey(o);return this.cfg.previewUrl.replace("{slug}",t.slug).replace("{name}",t.name).replace("{year}",t.year).replace("{month}",t.month).replace("{day}",t.day)}async deletePost(o){var a;const s=`/apis/api.console.halo.run/v1alpha1/posts/${this.getHaloPostidKey(o).name}/recycle`,e=await this.haloFetch(s,{},"PUT");if(this.logger.debug("halo deletePost res =>",e),!((a=e==null?void 0:e.metadata)!=null&&a.name))throw new Error("Halo æ–‡ç« åˆ é™¤å¤±è´¥");return!0}async getCategories(){const o=[],t=await this.getHaloCategories();return t&&t.length>0&&(t.forEach(s=>{const e=new lt;e.categoryId=s.spec.slug,e.categoryName=s.spec.displayName,e.description=s.spec.displayName,e.categoryDescription=s.spec.description,o.push(e)}),this.logger.debug("get halo categories =>",o)),o}async getTags(){return(await this.getHaloTags()).map(t=>{const s=new Co;return s.tagId=t.spec.slug,s.tagName=t.spec.displayName,s.description=t.spec.displayName,s})}async newMediaObject(o,t){var i,l,c;let s;try{const r=o.bits;this.logger.debug("newMediaObject on halo =>",o);const{FormData:m,Blob:y}=zs.getFormData(this.appInstance),p=`${this.cfg.apiUrl}/apis/api.console.halo.run/v1alpha1/attachments/upload`,g=new y([r],{type:o.type}),w=new m;if(w.append("file",g,o.name),w.append("policyName","default-policy"),w.append("groupName",""),w.append("file",g,o.name),s=await this.haloFormFetch(p,w),this.logger.debug("halo upload success, res =>",s),!s.metadata)throw new Error("Haloå›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>"+o.name)}catch(r){throw this.logger.error("Error uploading image to halo:",r),new Error("Error uploading image to halo:"+r.toString())}const e=(i=s==null?void 0:s.spec)==null?void 0:i.displayName,a=(l=s==null?void 0:s.metadata)==null?void 0:l.name,n=this.cfg.home+(((c=s==null?void 0:s.metadata)==null?void 0:c.annotations["storage.halo.run/uri"])??"");return{attachment_id:e,date_created_gmt:new Date,parent:0,link:n,title:o.name,caption:"",description:"",metadata:{width:0,height:0,file:"",filesize:0,sizes:[]},type:o.type,thumbnail:"",id:a,file:o.name,url:n}}getHaloPostidKey(o){return te.safeParse(o,{})}async getHaloPost(o){try{const t=await this.haloFetch(`/apis/content.halo.run/v1alpha1/posts/${o}`,{},"GET"),s=await this.haloFetch(`/apis/api.console.halo.run/v1alpha1/posts/${o}/head-content`,{},"GET");return Promise.resolve({post:t,content:s})}catch{return Promise.resolve(void 0)}}async getCategoryNames(o){const t=await this.getHaloCategories(),s=o.filter(n=>!t.find(i=>i.spec.displayName===n)),e=await Promise.all(s.map(async(n,i)=>{const l=await Ls.getPageSlug(n,!0);return await this.haloFetch("/apis/content.halo.run/v1alpha1/categories",{spec:{displayName:n,slug:l,description:"",cover:"",template:"",priority:t.length+i,children:[]},apiVersion:"content.halo.run/v1alpha1",kind:"Category",metadata:{name:"",generateName:"category-"}},"POST")})),a=o.map(n=>{const i=t.find(l=>l.spec.displayName===n);return i?i.metadata.name:void 0}).filter(Boolean);return this.logger.debug("newCategories =>",e),[...a,...e.map(n=>n.metadata.name)]}async getHaloCategories(){const o=await this.haloFetch("/apis/content.halo.run/v1alpha1/categories",{},"GET");return Promise.resolve(o.items)}async getTagNames(o){const t=await this.getHaloTags(),s=o.filter(n=>!t.find(i=>i.spec.displayName===n)),e=await Promise.all(s.map(async n=>{const i=await Ls.getPageSlug(n,!0);return await this.haloFetch("/apis/content.halo.run/v1alpha1/tags",{spec:{displayName:n,slug:i,color:"#ffffff",cover:""},apiVersion:"content.halo.run/v1alpha1",kind:"Tag",metadata:{name:"",generateName:"tag-"}},"POST")})),a=o.map(n=>{const i=t.find(l=>l.spec.displayName===n);return i?i.metadata.name:void 0}).filter(Boolean);return this.logger.debug("newTags =>",e),[...a,...e.map(n=>n.metadata.name)]}async getHaloTags(){const o=await this.haloFetch("/apis/content.halo.run/v1alpha1/tags",{},"GET");return Promise.resolve(o.items)}async haloFetch(o,t,s="POST",e={}){const a="application/json",n="Basic "+Ut.btoa(this.cfg.username+":"+this.cfg.password),i={"Content-Type":a,Authorization:n,...e},l=`${this.cfg.apiUrl}${o}`;this.logger.debug("å‘ Halo è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",l);const c=ae.isEmptyObject(t)?"":JSON.stringify(t);this.logger.debug("å‘ Halo è¯·æ±‚æ•°æ®ï¼Œbody =>",c);const r=await this.apiFetch(l,[i],c,s,a,!1,"base64","text");return this.logger.debug("å‘ Halo è¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}async haloFormFetch(o,t){const e={Authorization:"Basic "+Ut.btoa(this.cfg.username+":"+this.cfg.password)};return await this.apiFormFetch(o,[e],t)}}var Wo={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const cn=async(u,o)=>{const t=W("use-halo-api");t.info("Start using Halo API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const l=I.emptyOrDefault(Wo.VITE_YUQUE_USERNAME,""),c=I.emptyOrDefault(Wo.VITE_YUQUE_AUTH_TOKEN,""),r=I.emptyOrDefault(Wo.VITE_MIDDLEWARE_URL,_e);e=new Jc(l,c,r),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.usernameEnabled=!0,e.tagEnabled=!0,e.cateEnabled=!0,e.categoryType=Q.CategoryType_Multi,e.allowCateChange=!0,e.knowledgeSpaceEnabled=!1,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new qc(s,e);return t.info("Halo API created successfully.",e),{cfg:e,blogApi:a}};var Jt=(u=>(u.ANONYMOUS="anonymous",u.LOGIN_USER="user",u))(Jt||{});class Yc extends ps{constructor(t,s,e){super(t,"https://edit.telegra.ph","",s,e);D(this,"postType");D(this,"accessToken");D(this,"saveHash");D(this,"forceReAuth");this.postType="anonymous",this.previewUrl="/[postid]",this.allowPreviewUrlChange=!1,this.forceReAuth=!1}}class pn{static addCookieArray(o,t,s=!1){let e=!1;return t.forEach(a=>{const[n]=a.split("="),i=this.parseCookie(a),l=o.findIndex(c=>c.startsWith(`${n}=`));if(l!==-1){const c=this.parseCookie(o[l]);(!T.isEmptyString(i.expires)&&!T.isEmptyString(c.expires)&&new Date(i.expires).getTime()>new Date(c.expires).getTime()||s)&&(o[l]=a,e=!0)}else o.push(a),e=!0}),{isUpdated:e,cookieArray:ve.uniq(o)}}static getCookie(o,t){return o.find(s=>s.startsWith(`${t}=`))}static getCookieObject(o,t){const s=this.getCookie(o,t);return this.parseCookie(s)}static parseCookie(o){let t={};try{t=tr.parse(o),this.logger.debug("cookieObj",t)}catch(s){this.logger.warn("Failed to parse cookie =>"+s)}return t}}D(pn,"logger",W("cookie-utils"));class Xc extends Rt{constructor(){super(...arguments);D(this,"TPH_TOKEN_KEY","tph_token");D(this,"TPH_UUID_KEY","tph_uuid")}async getUsersBlogs(){const t=this.cfg,s=[];if(t.postType===Jt.LOGIN_USER){if(T.isEmptyString(t.password)||T.isEmptyString(t.accessToken)||T.isEmptyString(t.saveHash))throw new Error("ç™»å½•æ¨¡å¼å¿…é¡»æ‰‹åŠ¨å¡«å†™ uuid ã€ Access Token å’Œ save hashï¼Œè¯·ä»Žæµè§ˆå™¨å¼€å‘è€…å·¥å…·èŽ·å–");const e=new rt;e.blogid=t.saveHash,e.blogName="telegra.ph",e.url=t.apiUrl}else{const e="text/plain";let a={};a.origin="https://telegra.ph",a.referer="https://telegra.ph/",a["Content-Type"]=e;const n={"x-cors-headers":JSON.stringify(a)};for(const[y,p]of Object.entries(a))n[y]=p;let i,l=await this.telegraphFetch("/check","page_id=0","POST",n,e);if(this.logger.debug("checkJson =>",l),l["cors-received-headers"]){if(l.error)throw new Error("telegra.ph request error =>"+l.error);i=te.safeParse(l["cors-received-headers"],{})["Set-Cookie-Array"]}else if(l.status==200){i=l.headers["Set-Cookie"];const y=te.safeParse(l.body,{});l={...l,...y}}else throw new Error(`telegra.ph request error ${l.status}=>`+l.body);const c=new rt;c.blogid=l.save_hash,c.blogName="telegra.ph",c.url=t.apiUrl;const{isUpdated:r,cookieArray:m}=pn.addCookieArray((t==null?void 0:t.corsCookieArray)??[],i,t.forceReAuth);if(this.logger.info(`æ˜¯å¦éœ€è¦åˆ·æ–°ï¼š${r}ï¼Œæ˜¯å¦å¼ºåˆ¶åˆ·æ–°ï¼š${t.forceReAuth}`),r){const y=pn.getCookieObject(i,this.TPH_UUID_KEY);c.metadataMap={username:l.author_name,password:y[this.TPH_UUID_KEY],saveHash:l.save_hash,corsCookieArray:m}}else this.logger.warn("Cookie è¿˜åœ¨æœ‰æ•ˆæœŸï¼Œå¯ç­‰å¾… Cookie è¿‡æœŸä¹‹åŽå†è¿›è¡Œæ“ä½œ",m);s.push(c)}return this.logger.debug("get telegraph cfg =>",s),s}async newPost(t,s){const e=this.cfg;let a={},n;const i=`${this.TPH_UUID_KEY}=${e.password}`;if(e.postType==Jt.ANONYMOUS){if(T.isEmptyString(e.password))throw new Error(`Cookie ${this.TPH_UUID_KEY} èŽ·å–å¤±è´¥ï¼Œæ— æ³•æ–°å»ºæ–‡ç« `);n=i,this.logger.warn("å½“å‰ä¸ºåŒ¿åå‘å¸ƒ")}else{if(T.isEmptyString(e.password)||T.isEmptyString(e.accessToken))throw new Error(`Cookie ${this.TPH_UUID_KEY},${this.TPH_TOKEN_KEY} èŽ·å–å¤±è´¥ï¼Œæ— æ³•æ–°å»ºæ–‡ç« `);const w=`${this.TPH_TOKEN_KEY}=${e.accessToken}`;n=[i,w].join(";")}a.Cookie=n??"",a.origin="https://telegra.ph",a.referer="https://telegra.ph/";const l={"x-cors-headers":JSON.stringify(a)};for(const[w,d]of Object.entries(a))l[w]=d;const c=new FormData,r=Bn(t.description),m=new Blob([JSON.stringify(r)],{type:"text/plain"});c.append("Data",m,"content.html"),c.append("title",t.title),c.append("author",e.username),c.append("save_hash",e.saveHash),c.append("page_id","0");const y=await this.telegraphFormFetch("/save",c,l);if(y.error)throw new Error("telegra.ph å‘å¸ƒé”™è¯¯ï¼Œæ³¨æ„ï¼šåˆ‡æ¢è®¾å¤‡ï¼ˆåŒ…æ‹¬ä»ŽPCåˆ°æµè§ˆå™¨çŽ¯å¢ƒï¼‰éœ€è¦é‡æ–°éªŒè¯ï¼Œå¹¶ä¸”èŽ·å–æ–°tokenã€‚è¯¦ç»†é”™è¯¯ =>"+y.error);this.logger.debug("telegraph newPost resJson =>",y);const p={update_cookie:n,page_id:y.page_id,path:y.path,save_hash:e.saveHash};return JSON.stringify(p)}async editPost(t,s,e){const a=this.cfg,n=te.safeParse(t,{});let i={};if(T.isEmptyString(n.update_cookie))throw new Error("Cookie èŽ·å–å¤±è´¥ï¼Œæ— æ³•æ›´æ–°æ–‡ç« ");i.Cookie=n.update_cookie,i.origin="https://telegra.ph",i.referer="https://telegra.ph/";const l={"x-cors-headers":JSON.stringify(i)};for(const[p,g]of Object.entries(i))l[p]=g;const c=new FormData,r=Bn(s.description),m=new Blob([JSON.stringify(r)],{type:"text/plain"});c.append("Data",m,"content.html"),c.append("title",s.title),c.append("author",a.username),c.append("save_hash",n.save_hash),c.append("page_id",n.page_id);const y=await this.telegraphFormFetch("/save",c,l);if(y.error)throw new Error("telegra.ph æ›´æ–°å¤±è´¥ï¼Œæ³¨æ„ï¼šåˆ‡æ¢è®¾å¤‡ï¼ˆåŒ…æ‹¬ä»ŽPCåˆ°æµè§ˆå™¨çŽ¯å¢ƒï¼‰éœ€è¦é‡æ–°éªŒè¯ï¼Œå¹¶ä¸”èŽ·å–æ–°tokenã€‚è¯¦ç»†é”™è¯¯ =>"+y.error);return this.logger.debug("telegraph editPost resJson =>",y),!0}async deletePost(t){throw new Error("telegra.ph æš‚ä¸æ”¯æŒåˆ é™¤æ–‡ç« åŠŸèƒ½")}async getPost(t,s){const e=new tt;return e.postid=t,e}async getPreviewUrl(t){const s=te.safeParse(t,{});return(this.cfg.previewUrl??"").replace("[postid]",(s==null?void 0:s.path)??"")}async telegraphFetch(t,s,e="GET",a={},n="application/json"){const i=s,l=`${this.cfg.apiUrl}${t}`;this.logger.debug("å‘ Telegraph è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",l),this.logger.debug("å‘ Telegraph è¯·æ±‚æ•°æ®ï¼Œheaders =>",a),this.logger.debug("å‘ Telegraph è¯·æ±‚æ•°æ®ï¼Œbody =>",i);const c=await this.apiFetch(l,[a],i,e,n,!0);return this.logger.debug("å‘ Telegraph è¯·æ±‚æ•°æ®ï¼ŒresJson =>",c),c??null}async telegraphFormFetch(t,s,e={}){const a=`${this.cfg.apiUrl}${t}`,n={method:"POST",headers:e,body:s};this.logger.debug("å‘ Telegraph å‘é€è¡¨å•æ•°æ®ï¼ŒapiUrl =>",a),this.logger.debug("å‘ Telegraph å‘é€è¡¨å•æ•°æ®ï¼Œoptions =>",n);const i=await this.apiFormFetch(a,[e],s,!0);if(i.error)throw new Error("telegra.ph å‘å¸ƒé”™è¯¯ï¼Œæ³¨æ„ï¼šåˆ‡æ¢è®¾å¤‡ï¼ˆåŒ…æ‹¬ä»ŽPCåˆ°æµè§ˆå™¨çŽ¯å¢ƒï¼‰éœ€è¦é‡æ–°éªŒè¯ï¼Œå¹¶ä¸”èŽ·å–æ–°tokenã€‚è¯¦ç»†é”™è¯¯ =>"+i.error);return this.logger.debug("å‘ Telegraph å‘é€è¡¨å•æ•°æ®ï¼ŒresJson =>",i),i}}var Fo={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const un=async(u,o)=>{const t=W("use-telegraph-api");t.info("Start using Telegraph API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const l=I.emptyOrDefault(Fo.VITE_TELEGRAPH_URL,"https://telegra.ph"),c=I.emptyOrDefault(Fo.VITE_MIDDLEWARE_URL,_e),r=I.emptyOrDefault(Fo.VITE_TELEGRAPH_TOKEN,"");e=new Yc(l,r,c),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.usernameEnabled=!0,e.cateEnabled=!1,e.tagEnabled=!1,e.postType=e.postType??Jt.ANONYMOUS,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!1;const a=new Xc(s,e);return t.info("Telegraph API created successfully.",e),{cfg:e,blogApi:a}};class Zc extends Fs{constructor(o,t,s,e,a){super(o,t,s,e,a),this.home=o,this.apiUrl=t,this.previewUrl="/post/[postid].html",this.pageType=ue.Markdown,this.showTokenTip=!1,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class Qc extends us{constructor(o,t){super(o,t),this.logger=W("typecho-api-adaptor"),this.cfg.blogid="jvue"}}var Ds={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const dn=async(u,o)=>{const t=W("use-jvue-api");t.info("Start using Jvue API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const l=I.emptyOrDefault(Ds.VITE_JVUE_HOME,""),c=I.emptyOrDefault(Ds.VITE_JVUE_API_URL,""),r=I.emptyOrDefault(Ds.VITE_JVUE_USERNAME,""),m=I.emptyOrDefault(Ds.VITE_JVUE_PASSWORD,""),y=I.emptyOrDefault(Ds.VITE_MIDDLEWARE_URL,_e);e=new Zc(l,c,r,m,y),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.categoryType=Q.CategoryType_Multi,e.allowCateChange=!0,e.knowledgeSpaceEnabled=!1,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new Qc(s,e);return t.info("Jvue API created successfully.",e),{cfg:e,blogApi:a}};class So{}D(So,"METHOD_GET_USERS_BLOGS","blogger.getUsersBlogs"),D(So,"METHOD_DELETE_POST","blogger.deletePost");class ep extends us{constructor(o,t){super(o,t),this.logger=W("wordpress-dot-com-api-adaptor"),this.cfg.blogid="wordpress-dot-com"}async getUsersBlogs(){let o=[];return o=await this.metaweblogCall(So.METHOD_GET_USERS_BLOGS,[this.cfg.blogid,this.cfg.username,this.cfg.password]),this.logger.debug("getUsersBlogs=>",o),o}async deletePost(o){const t=await this.metaweblogCall(So.METHOD_DELETE_POST,[this.cfg.blogid,o,this.cfg.username,this.cfg.password,!1]);return this.logger.debug("ret=>",t),t}async metaweblogCall(o,t){return await this.proxyXmlrpc(this.cfg.apiUrl,o,t,!0)}}var io={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const gn=async(u,o)=>{const t=W("use-wordpress-dot-com-api");t.info("Start using Wordpress.com API...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n();if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const l=I.emptyOrDefault(io.VITE_WORDPRESS_API_URL,"https://[username].wordpress.com"),c=I.emptyOrDefault(io.VITE_WORDPRESS_USERNAME,""),r=I.emptyOrDefault(io.VITE_WORDPRESS_AUTH_TOKEN,""),m=I.emptyOrDefault(io.VITE_MIDDLEWARE_URL,_e);e=new vi(l,c,r,m),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.categoryType=Q.CategoryType_Multi,e.allowCateChange=!0,e.knowledgeSpaceEnabled=!1,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new ep(s,e);return t.info("Wordpress.com API created successfully.",e),{cfg:e,blogApi:a}};class tp extends ds{constructor(t,s){super(t,t,"","",s);D(this,"logoutUrl");this.logoutUrl=`${t}/logout`,this.previewUrl="/archives/{slug}",this.pageType=ue.Html,this.usernameEnabled=!1,this.showTokenTip=!1,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class sp extends Vi{}class op extends Zt{async getMetaData(){const o=await this.halowebFetch("/actuator/globalinfo"),t=!!o.externalUrl;return this.logger.info(`get haloweb metadata finished, flag => ${t}`),{flag:t,uid:"",title:"",avatar:"",type:"haloweb",displayName:"Haloç½‘é¡µç‰ˆ",supportTypes:["markdown","html"],home:o.externalUrl,icon:"https://g.csdnimg.cn/static/logo/favicon32.ico"}}async getUsersBlogs(){const o=[];return(await this.getHaloCategories()).forEach(s=>{const e=new rt;e.blogid=s.spec.slug,e.blogName=s.spec.displayName,e.url=s.status.permalink,o.push(e)}),this.logger.debug("get halo categories =>",o),o}async getPost(o,t){const e=this.getHaloPostidKey(o).name,a=await this.getHaloPost(e);this.logger.debug("getPost haloPost =>",{name:e,haloPost:a});const n=new tt;return n.title=a.post.spec.title,n.wp_slug=a.post.spec.slug,n.shortDesc=a.post.spec.excerpt.raw,n.tags_slugs=a.post.spec.tags.join(","),n.cate_slugs=a.post.spec.categories,n}async newPost(o,t){var n;const s={post:{spec:{title:"",slug:"",template:"",cover:"",deleted:!1,publish:!1,publishTime:void 0,pinned:!1,allowComment:!0,visible:"PUBLIC",priority:0,excerpt:{autoGenerate:!0,raw:""},categories:[],tags:[],htmlMetas:[]},apiVersion:"content.halo.run/v1alpha1",kind:"Post",metadata:{name:"",annotations:{}}},content:{raw:"",content:"",rawType:this.cfg.pageType}};this.cfg.pageType==="markdown"?s.content.raw=o.markdown:s.content.raw=Nt.addIdToH1_H6(o.html),s.content.content=Nt.addIdToH1_H6(o.html),T.isEmptyString(o.shortDesc)?s.post.spec.excerpt.autoGenerate=!0:(s.post.spec.excerpt.autoGenerate=!1,s.post.spec.excerpt.raw=o.shortDesc),s.post.metadata.name=Ks.randomUuid(),s.post.spec.title=o.title,s.post.spec.slug=o.wp_slug;try{if(o.categories&&o.categories.length>0){const i=await this.getCategoryNames(o.categories);s.post.spec.categories=i}if(!T.isEmptyString(o.mt_keywords)){const i=o.mt_keywords.split(","),l=await this.getTagNames(i);s.post.spec.tags=l}}catch(i){throw i}s.post.spec.publishTime=o.dateCreated.toISOString();const e=await this.halowebFetch("/apis/api.console.halo.run/v1alpha1/posts",s,"POST");if(this.logger.debug("halo newPost res =>",e),!((n=e==null?void 0:e.metadata)!=null&&n.name))throw new Error("Halo æ–‡ç« å‘å¸ƒå¤±è´¥");this.logger.debug("halo æ–‡ç« è‰ç¨¿å®Œæˆ"),await this.halowebFetch(`/apis/api.console.halo.run/v1alpha1/posts/${s.post.metadata.name}/publish`,{},"PUT"),this.logger.debug("halo æ–‡ç« å‘å¸ƒå®Œæˆ");const a=new sp(e.spec.slug,e.metadata.name,o.dateCreated);return this.logger.debug("postidMeta =>",a),JSON.stringify(a)}async editPost(o,t,s){let e=!1;try{const n=this.getHaloPostidKey(o).name;let i=await this.getHaloPost(n);if(this.logger.debug("get latest halo post =>",{name:n,haloPost:i}),!i.post)throw new Error("èŽ·å–æ–‡ç« ä¿¡æ¯å¤±è´¥ï¼Œå¦‚æžœæ–‡ç« åˆ é™¤ï¼Œè¯·å¼ºåˆ¶åˆ é™¤è§£é™¤å…³è”");if(i.content.rawType==="markdown"?i.content.raw=t.markdown:i.content.raw=Nt.addIdToH1_H6(t.html),i.content.content=Nt.addIdToH1_H6(t.html),T.isEmptyString(t.shortDesc)?i.post.spec.excerpt.autoGenerate=!0:(i.post.spec.excerpt.autoGenerate=!1,i.post.spec.excerpt.raw=t.shortDesc),i.post.metadata.name=n,i.post.spec.title=t.title,i.post.spec.slug=t.wp_slug,t.categories&&t.categories.length>0){const l=await this.getCategoryNames(t.categories);i.post.spec.categories=l}if(!T.isEmptyString(t.mt_keywords)){const l=t.mt_keywords.split(","),c=await this.getTagNames(l);i.post.spec.tags=c}i.post.spec.publishTime=t.dateCreated.toISOString(),await this.halowebFetch(`/apis/content.halo.run/v1alpha1/posts/${n}`,i.post,"PUT"),await this.halowebFetch(`/apis/api.console.halo.run/v1alpha1/posts/${n}/content`,i.content,"PUT"),await this.halowebFetch(`/apis/api.console.halo.run/v1alpha1/posts/${i.post.metadata.name}/publish`,{},"PUT"),this.logger.debug("halo æ–‡ç« å‘å¸ƒå®Œæˆ")}catch(a){this.logger.error("Haloæ–‡ç« æ›´æ–°å¤±è´¥",a)}return e}async getPreviewUrl(o){const t=this.getHaloPostidKey(o);return this.cfg.previewUrl.replace("{slug}",t.slug).replace("{name}",t.name).replace("{year}",t.year).replace("{month}",t.month).replace("{day}",t.day)}async deletePost(o){var a;const s=`/apis/api.console.halo.run/v1alpha1/posts/${this.getHaloPostidKey(o).name}/recycle`,e=await this.halowebFetch(s,{},"PUT");if(this.logger.debug("halo deletePost res =>",e),!((a=e==null?void 0:e.metadata)!=null&&a.name))throw new Error("Halo æ–‡ç« åˆ é™¤å¤±è´¥");return!0}async getCategories(){const o=[],t=await this.getHaloCategories();return t&&t.length>0&&(t.forEach(s=>{const e=new lt;e.categoryId=s.spec.slug,e.categoryName=s.spec.displayName,e.description=s.spec.displayName,e.categoryDescription=s.spec.description,o.push(e)}),this.logger.debug("get halo categories =>",o)),o}async getTags(){return(await this.getHaloTags()).map(t=>{const s=new Co;return s.tagId=t.spec.slug,s.tagName=t.spec.displayName,s.description=t.spec.displayName,s})}async newMediaObject(o,t){var i,l,c;let s;try{const r=o.bits;this.logger.debug("newMediaObject on halo =>",o);const{FormData:m,Blob:y}=zs.getFormData(this.appInstance),p="/apis/api.console.halo.run/v1alpha1/attachments/upload",g=new y([r],{type:o.type}),w=new m;if(w.append("file",g,o.name),w.append("policyName","default-policy"),w.append("groupName",""),w.append("file",g,o.name),s=await this.halowebFormFetch(p,w),this.logger.debug("halo upload success, res =>",s),!s.metadata)throw new Error("Haloå›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>"+o.name)}catch(r){throw this.logger.error("Error uploading image to halo:",r),new Error("Error uploading image to halo:"+r.toString())}const e=(i=s==null?void 0:s.spec)==null?void 0:i.displayName,a=(l=s==null?void 0:s.metadata)==null?void 0:l.name,n=this.cfg.home+(((c=s==null?void 0:s.metadata)==null?void 0:c.annotations["storage.halo.run/uri"])??"");return{attachment_id:e,date_created_gmt:new Date,parent:0,link:n,title:o.name,caption:"",description:"",metadata:{width:0,height:0,file:"",filesize:0,sizes:[]},type:o.type,thumbnail:"",id:a,file:o.name,url:n}}getHaloPostidKey(o){return te.safeParse(o,{})}async getCategoryNames(o){const t=await this.getHaloCategories(),s=o.filter(n=>!t.find(i=>i.spec.displayName===n)),e=await Promise.all(s.map(async(n,i)=>{const l=await Ls.getPageSlug(n,!0);return await this.halowebFetch("/apis/content.halo.run/v1alpha1/categories",{spec:{displayName:n,slug:l,description:"",cover:"",template:"",priority:t.length+i,children:[]},apiVersion:"content.halo.run/v1alpha1",kind:"Category",metadata:{name:"",generateName:"category-"}},"POST")})),a=o.map(n=>{const i=t.find(l=>l.spec.displayName===n);return i?i.metadata.name:void 0}).filter(Boolean);return this.logger.debug("newCategories =>",e),[...a,...e.map(n=>n.metadata.name)]}async getTagNames(o){const t=await this.getHaloTags(),s=o.filter(n=>!t.find(i=>i.spec.displayName===n)),e=await Promise.all(s.map(async n=>{const i=await Ls.getPageSlug(n,!0);return await this.halowebFetch("/apis/content.halo.run/v1alpha1/tags",{spec:{displayName:n,slug:i,color:"#ffffff",cover:""},apiVersion:"content.halo.run/v1alpha1",kind:"Tag",metadata:{name:"",generateName:"tag-"}},"POST")})),a=o.map(n=>{const i=t.find(l=>l.spec.displayName===n);return i?i.metadata.name:void 0}).filter(Boolean);return this.logger.debug("newTags =>",e),[...a,...e.map(n=>n.metadata.name)]}async getHaloCategories(){return(await this.halowebFetch("/apis/content.halo.run/v1alpha1/categories",{},"GET")).items}async getHaloPost(o){try{const t=await this.halowebFetch(`/apis/content.halo.run/v1alpha1/posts/${o}`,{},"GET"),s=await this.halowebFetch(`/apis/api.console.halo.run/v1alpha1/posts/${o}/head-content`,{},"GET");return Promise.resolve({post:t,content:s})}catch{return Promise.resolve(void 0)}}async getHaloTags(){return(await this.halowebFetch("/apis/content.halo.run/v1alpha1/tags",{},"GET")).items}async halowebFetch(o,t,s="GET",e={},a="application/json"){const n=new Map;n.set("Cookie",this.cfg.password);const i={...Object.fromEntries(n),...e},l=`${this.cfg.apiUrl}${o}`;this.logger.debug("å‘ Halo è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",l);const c=ae.isEmptyObject(t)?"":JSON.stringify(t);this.logger.debug("å‘Haloç½‘é¡µç‰ˆè¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",l),this.logger.debug("å‘Haloç½‘é¡µç‰ˆè¯·æ±‚æ•°æ®ï¼Œheaders =>",e),this.logger.debug("å‘Haloç½‘é¡µç‰ˆè¯·æ±‚æ•°æ®ï¼Œbody =>",c);const r=await this.webFetch(l,[i],c,s,a,!0,"base64");return this.logger.debug("å‘Haloç½‘é¡µç‰ˆè¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}async halowebFormFetch(o,t,s={}){const e=`${this.cfg.apiUrl}${o}`,a=new Map;a.set("Cookie",this.cfg.password);const n={...Object.fromEntries(a),...s},i={method:"POST",headers:n,body:t};this.logger.debug("å‘Haloç½‘é¡µç‰ˆå‘é€è¡¨å•æ•°æ®ï¼ŒapiUrl =>",e),this.logger.debug("å‘Haloç½‘é¡µç‰ˆå‘é€è¡¨å•æ•°æ®ï¼Œoptions =>",i);const l=await this.webFormFetch(e,[n],t);if(l.error)throw new Error("Haloç½‘é¡µç‰ˆè¡¨å•æäº¤é”™è¯¯ã€‚è¯¦ç»†é”™è¯¯ =>"+l.error);return this.logger.debug("å‘Haloç½‘é¡µç‰ˆå‘é€è¡¨å•æ•°æ®ï¼ŒresJson =>",l),l}}var Jn={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const ap=u=>{const o=te.safeParse(u[Me],{}),t=(o==null?void 0:o.totalCfg)||[];return Ws(t,yi.PRE_CUSTOM_HALOWEB)},mn=async(u,o)=>{const t=W("use-haloweb-web");t.info("Start using Haloweb WebAuth...");const s=new fe;let e;if(o)t.info("Initialize with the latest newCfg passed in..."),e=o;else{const{getSetting:n}=me(),i=await n(),l=ap(i);if(e=te.safeParse(i[u],{}),ae.isEmptyObject(e)){const r=I.emptyOrDefault(Jn.VITE_MIDDLEWARE_URL,_e),m=new URL(l.authUrl);e=new tp(m.origin,r),e.picbedService=it.Bundled,t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const c=I.emptyOrDefault(Jn.VITE_MIDDLEWARE_URL,_e);T.isEmptyString(e.middlewareUrl)&&(e.middlewareUrl=c),T.isEmptyString(e.posidKey)&&(e.posidKey=Ee(u))}e.tagEnabled=!0,e.cateEnabled=!0,e.categoryType=Q.CategoryType_Multi,e.allowCateChange=!0,e.knowledgeSpaceEnabled=!1,e.picgoPicbedSupported=!0,e.bundledPicbedSupported=!0;const a=new op(s,e);return{cfg:e,webApi:a}};class we{static async getCfg(o,t){let s=null;switch(ro(o)){case H.Common_Yuque:{const{cfg:a}=await Qa(o,t);s=a;break}case H.Common_Notion:{const{cfg:a}=await sn(o,t);s=a;break}case H.Common_Halo:{const{cfg:a}=await cn(o,t);s=a;break}case H.Common_Telegraph:{const{cfg:a}=await un(o,t);s=a;break}case H.Github_Hexo:{const{cfg:a}=await co(o,t);s=a;break}case H.Github_Hugo:{const{cfg:a}=await uo(o,t);s=a;break}case H.Github_Jekyll:{const{cfg:a}=await mo(o,t);s=a;break}case H.Github_Vuepress:{const{cfg:a}=await fo(o,t);s=a;break}case H.Github_Vuepress2:{const{cfg:a}=await bo(o,t);s=a;break}case H.Github_Vitepress:{const{cfg:a}=await wo(o,t);s=a;break}case H.Gitlab_Hexo:{const{cfg:a}=await po(o,t);s=a;break}case H.Gitlab_Hugo:{const{cfg:a}=await go(o,t);s=a;break}case H.Gitlab_Jekyll:{const{cfg:a}=await ho(o,t);s=a;break}case H.Gitlab_Vuepress:{const{cfg:a}=await yo(o,t);s=a;break}case H.Gitlab_Vuepress2:{const{cfg:a}=await _o(o,t);s=a;break}case H.Gitlab_Vitepress:{const{cfg:a}=await vo(o,t);s=a;break}case H.Metaweblog_Metaweblog:{const{cfg:a}=await tn(o,t);s=a;break}case H.Metaweblog_Cnblogs:{const{cfg:a}=await Ya(o,t);s=a;break}case H.Metaweblog_Typecho:{const{cfg:a}=await Za(o,t);s=a;break}case H.Metaweblog_Jvue:{const{cfg:a}=await dn(o,t);s=a;break}case H.Wordpress_Wordpress:{const{cfg:a}=await Xa(o,t);s=a;break}case H.Wordpress_Wordpressdotcom:{const{cfg:a}=await gn(o,t);s=a;break}case H.Custom_Zhihu:{const{cfg:a}=await en(o);s=a;break}case H.Custom_CSDN:{const{cfg:a}=await an(o);s=a;break}case H.Custom_Wechat:{const{cfg:a}=await nn(o);s=a;break}case H.Custom_Jianshu:{const{cfg:a}=await ln(o);s=a;break}case H.Custom_Juejin:{const{cfg:a}=await rn(o);s=a;break}case H.Custom_Haloweb:{const{cfg:a}=await mn(o);s=a;break}case H.System_Siyuan:{const{siyuanConfig:a}=Re();s=a;break}default:{s={};break}}return this.logger.debug(`get conf from key ${o}=>`,s),s}static async getAdaptor(o,t){let s=null;switch(ro(o)){case H.Common_Yuque:{const{blogApi:a}=await Qa(o,t);s=a;break}case H.Common_Notion:{const{blogApi:a}=await sn(o,t);s=a;break}case H.Common_Halo:{const{blogApi:a}=await cn(o,t);s=a;break}case H.Common_Telegraph:{const{blogApi:a}=await un(o,t);s=a;break}case H.Github_Hexo:{const{blogApi:a}=await co(o,t);s=a;break}case H.Github_Hugo:{const{blogApi:a}=await uo(o,t);s=a;break}case H.Github_Jekyll:{const{blogApi:a}=await mo(o,t);s=a;break}case H.Github_Vuepress:{const{blogApi:a}=await fo(o,t);s=a;break}case H.Github_Vuepress2:{const{blogApi:a}=await bo(o,t);s=a;break}case H.Github_Vitepress:{const{blogApi:a}=await wo(o,t);s=a;break}case H.Gitlab_Hexo:{const{blogApi:a}=await po(o,t);s=a;break}case H.Gitlab_Hugo:{const{blogApi:a}=await go(o,t);s=a;break}case H.Gitlab_Jekyll:{const{blogApi:a}=await ho(o,t);s=a;break}case H.Gitlab_Vuepress:{const{blogApi:a}=await yo(o,t);s=a;break}case H.Gitlab_Vuepress2:{const{blogApi:a}=await _o(o,t);s=a;break}case H.Gitlab_Vitepress:{const{blogApi:a}=await vo(o,t);s=a;break}case H.Metaweblog_Metaweblog:{const{blogApi:a}=await tn(o,t);s=a;break}case H.Metaweblog_Cnblogs:{const{blogApi:a}=await Ya(o,t);s=a;break}case H.Metaweblog_Typecho:{const{blogApi:a}=await Za(o,t);s=a;break}case H.Metaweblog_Jvue:{const{blogApi:a}=await dn(o,t);s=a;break}case H.Wordpress_Wordpress:{const{blogApi:a}=await Xa(o,t);s=a;break}case H.Wordpress_Wordpressdotcom:{const{blogApi:a}=await gn(o,t);s=a;break}case H.Custom_Zhihu:{const{webApi:a}=await en(o,t);s=a;break}case H.Custom_CSDN:{const{webApi:a}=await an(o,t);s=a;break}case H.Custom_Wechat:{const{webApi:a}=await nn(o,t);s=a;break}case H.Custom_Jianshu:{const{webApi:a}=await ln(o,t);s=a;break}case H.Custom_Juejin:{const{webApi:a}=await rn(o,t);s=a;break}case H.Custom_Haloweb:{const{webApi:a}=await mn(o,t);s=a;break}case H.System_Siyuan:{const{blogApi:a}=Re();s=a;break}}return this.logger.debug(`get blogAdaptor from key ${o}`),s}static async getYamlAdaptor(o,t){let s=null;switch(ro(o)){case H.Github_Hexo:{const{yamlAdaptor:a}=await co(o,t);s=a;break}case H.Github_Hugo:{const{yamlAdaptor:a}=await uo(o,t);s=a;break}case H.Github_Jekyll:{const{yamlAdaptor:a}=await mo(o,t);s=a;break}case H.Github_Vuepress:{const{yamlAdaptor:a}=await fo(o,t);s=a;break}case H.Github_Vuepress2:{const{yamlAdaptor:a}=await bo(o,t);s=a;break}case H.Github_Vitepress:{const{yamlAdaptor:a}=await wo(o,t);s=a;break}case H.Gitlab_Hexo:{const{yamlAdaptor:a}=await po(o,t);s=a;break}case H.Gitlab_Hugo:{const{yamlAdaptor:a}=await go(o,t);s=a;break}case H.Gitlab_Jekyll:{const{yamlAdaptor:a}=await ho(o,t);s=a;break}case H.Gitlab_Vuepress:{const{yamlAdaptor:a}=await yo(o,t);s=a;break}case H.Gitlab_Vuepress2:{const{yamlAdaptor:a}=await _o(o,t);s=a;break}case H.Gitlab_Vitepress:{const{yamlAdaptor:a}=await vo(o,t);s=a;break}}return this.logger.debug(`get yamlAdaptor from key ${o}=>`,s),s}}D(we,"logger",W("adaptors"));const qs=()=>{const{getSetting:u}=me(),o=new fe;return{getPublishCfg:async e=>{const a=await u(),n=te.safeParse(a[Me],{}),i=(n==null?void 0:n.totalCfg)||[];if(e){const l=te.safeParse(a[e],{}),c=await we.getCfg(e,l),r=Ws(i,e);return{setting:a,dynamicConfigArray:i,cfg:c,dynCfg:r}}else return{setting:a,dynamicConfigArray:i,cfg:void 0,dynCfg:void 0}},getPublishApi:async(e,a)=>{const n=await we.getAdaptor(e,a);return I.blogApi(o,n)}}},Ys=()=>{const u=W("use-publish"),{t:o}=Z(),{updateSetting:t}=me(),{kernelApi:s,blogApi:e}=Re(),{getPublishApi:a}=qs(),{updatePlatformMetadata:n}=qa(),i=ce({isPublishLoading:!1,publishProcessStatus:!1,isAdd:!0,errMsg:""}),l=async(p,g,w,d)=>{var M;const v=w.setting,P=w.cfg;w.dynCfg;let S,k;try{const x=Ke.systemCfg.some(A=>A.platformKey===p);if(u.info(`isSys=>${x}`),x)S=g;else{const A=P.posidKey;if(T.isEmptyString(A))throw new Error("é…ç½®é”™è¯¯ï¼ŒposidKeyä¸èƒ½ä¸ºç©ºï¼Œè¯·æ£€æŸ¥é…ç½®");const F=ae.getProperty(v,g,{});S=ae.getProperty(F,A)}i.isAdd=T.isEmptyString(S);const K=ve.cloneDeep(d);u.debug("å‡†å¤‡å¼€å§‹å‘å¸ƒå¤„ç†, doc =>",{post:ie(d)}),K.postid=S;const $=await a(p,P);u.info(`å¼€å§‹æ–‡ç« é¢„å¤„ç†, isAdd =>${i.isAdd}`),u.debug("post=>",ie(K));const B=await $.preEditPost(K,g,w);if(u.info(`æ–‡ç« å…¨éƒ¨é¢„å¤„ç†å®Œæ¯•ï¼Œid=${g},key=${p}`),u.debug("æœ€ç»ˆç»“æžœ =>",{finalPost:ie(B)}),i.isAdd){u.info("æ–‡ç« æœªå‘å¸ƒï¼Œå‡†å¤‡å‘å¸ƒ");const A=await $.newPost(B);S=A;const F=P.posidKey,U=ae.getProperty(v,g,{});U[F]=S,U[nt.Custom_slug]=B.wp_slug,v[g]=U,await t(v),u.info("new post=>",A),u.info("æ–‡ç« å‘å¸ƒæˆåŠŸ")}else{u.info("æ–‡ç« å·²å‘å¸ƒï¼Œå‡†å¤‡æ›´æ–°");const A=await $.editPost(S,B),F=ae.getProperty(v,g,{});F.hasOwnProperty(nt.Custom_slug)?B.wp_slug=F[nt.Custom_slug]:(u.info("æ£€æµ‹åˆ°æœªç”Ÿæˆè¿‡åˆ«åï¼Œå‡†å¤‡æ›´æ–°åˆ«å"),F[nt.Custom_slug]=B.wp_slug,v[g]=F,await t(v)),u.info("edit post=>",A),u.info("æ–‡ç« æ›´æ–°æˆåŠŸ")}if(u.info("å‘å¸ƒå®Œæˆï¼Œå‡†å¤‡å¤„ç†æ–‡ç« å±žæ€§ã€å…ƒæ•°æ®"),x)u.info("å†…ç½®å¹³å°ï¼Œå¿½ç•¥ä¿å­˜å±žæ€§");else{const A=$s(p);await s.setSingleBlockAttr(g,A,B.yaml);const F=ve.cloneDeep(B),U=((M=F.mt_keywords)==null?void 0:M.split(","))??[],z=(F==null?void 0:F.categories)??[];n(p,U,z,[])}u.info("æ–‡ç« å±žæ€§å¤„ç†å®Œæˆ"),k=await m($,g,P),i.publishProcessStatus=!0}catch(x){i.errMsg=o("main.opt.failure")+"=>"+x,await s.pushErrMsg({msg:i.errMsg,timeout:7e3}),i.publishProcessStatus=!1}return{key:p,status:i.publishProcessStatus,name:P==null?void 0:P.blogName,previewUrl:k,errMsg:i.errMsg}},c=async(p,g,w)=>{const d=w.setting,v=w.cfg;w.dynCfg;try{const P=v.posidKey;if(T.isEmptyString(P))throw new Error("é…ç½®é”™è¯¯ï¼ŒposidKeyä¸èƒ½ä¸ºç©ºï¼Œè¯·æ£€æŸ¥é…ç½®");const S=ae.getProperty(d,g,{}),k=ae.getProperty(S,P);if(T.isEmptyString(k))throw new Error("æœªæ‰¾åˆ°postidï¼Œæ— æ³•åˆ é™¤ï¼Œè¯·æ‰‹åŠ¨åœ¨å¹³å°åˆ é™¤");const M=await a(p,v);if(i.publishProcessStatus=await M.deletePost(k),i.publishProcessStatus){const K={...ae.getProperty(d,g,{})};K.hasOwnProperty(P)&&delete K[P],K.hasOwnProperty(nt.Custom_slug)&&delete K[nt.Custom_slug],d[g]=K,await t(d),u.info(`[${p}] [${g}] æ–‡ç« å‘å¸ƒä¿¡æ¯å·²ç§»é™¤`);const $=$s(p);await s.setSingleBlockAttr(g,$,""),u.info(`[${p}] [${g}] å±žæ€§å·²ç§»é™¤`)}}catch(P){i.errMsg=o("main.opt.failure")+"=>"+P,await s.pushErrMsg({msg:i.errMsg,timeout:7e3})}return{key:p,status:i.publishProcessStatus,errMsg:i.errMsg}},r=async(p,g,w)=>{try{const d=w.setting,v=w.cfg,P=w.dynCfg,S=v.posidKey;if(T.isEmptyString(S))throw new Error("é…ç½®é”™è¯¯ï¼ŒposidKeyä¸èƒ½ä¸ºç©ºï¼Œè¯·æ£€æŸ¥é…ç½®");if(!T.isEmptyString(S)){const M={...ae.getProperty(d,g,{})};M.hasOwnProperty(S)&&delete M[S],d[g]=M,await t(d);const x=$s(p);await s.setSingleBlockAttr(g,x,""),u.info(`[${p}] [${g}] å±žæ€§å·²ç§»é™¤`),await s.pushMsg({msg:o("main.opt.ok"),timeout:2e3}),u.info(`[${p}] [${g}] æ–‡ç« å‘å¸ƒä¿¡æ¯å·²å¼ºåˆ¶ç§»é™¤`),ee.success(`[${p}] [${g}] æ–‡ç« å‘å¸ƒä¿¡æ¯å·²å¼ºåˆ¶ç§»é™¤`)}}catch(d){ee.error(o("main.opt.failure")+"=>"+d),u.error(o("main.opt.failure")+"=>",d),await s.pushErrMsg({msg:o("main.opt.failure")+"=>"+d,timeout:7e3})}},m=async(p,g,w)=>{const{getSetting:d}=me(),v=await d(),P=w.posidKey,k=ae.getProperty(v,g,{})[P];let M=await p.getPreviewUrl(k);return/^[a-z]+:\/\//.test(M)?M:T.pathJoin((w==null?void 0:w.home)??"",M)},y={assignInitSlug:async(p,g,w)=>{const d=w.setting,v=ae.getProperty(d,g,{}),P=ve.cloneDeep(p),S=ae.getProperty(v,nt.Custom_slug,P.wp_slug);if(!T.isEmptyString(S))P.wp_slug=S,u.info("Using existing siyuan note slug");else{const k=await Ls.getPageSlug(P.title,!0);P.wp_slug=`${k}`,u.info("Generated new slug")}return P.post_status=Et.PostStatusEnum_Publish,P},assignInitAttrs:async(p,g,w)=>{w.setting;const d=w.cfg,P=w.dynCfg.platformKey,S=Ke.systemCfg.some(x=>x.platformKey===P),k=await y.assignInitSlug(p,g,w);let M=ve.cloneDeep(k);if(!S){const x=$s(P),K=await s.getSingleBlockAttr(g,x),$=re.extractFrontmatter(K).trim(),B=await we.getYamlAdaptor(P,d);if(B!==null)if(T.isEmptyString($)){const A=B.convertToYaml(M,void 0,d);u.info("YAMLæœªä¿å­˜ï¼Œä½¿ç”¨é€‚é…å™¨ç”Ÿæˆé»˜è®¤çš„yamlFormatObj",{yamlFormatObj:ie(A)}),M=B.convertToAttr(M,A,d),M.yamlType=Ht.Yaml_custom_auto,u.debug("ä½¿ç”¨é€‚é…å™¨åˆå§‹åŒ–è½¬æ¢yamlObjåˆ°postå®Œæˆ =>",{post:ie(M)})}else{const A=new ft,F=await re.yaml2ObjAsync(K);A.yamlObj=F,M=B.convertToAttr(M,A,d),M.yamlType=Ht.Yaml_custom_hand,u.info("æœ‰é€‚é…å™¨ä¸”YAMLå·²ä¿å­˜ï¼Œå§‹ç»ˆä¿æŒæœ€æ–°çš„ YAML",{post:ie(M)})}else if(M.yamlType=Ht.YAML_default,T.isEmptyString($))u.info("æœªä¿å­˜è¿‡YAMLï¼Œæœªæ‰¾åˆ°é€‚é…å™¨ï¼Œé»˜è®¤ä¸å¤„ç†",{post:ie(M)});else{const A=await re.yaml2ObjAsync(K);M.yaml=K,_n.fromYaml(M,A),u.info("è¯»å–å·²ç»å­˜åœ¨çš„YAMLï¼Œæ— é€‚é…å™¨ï¼Œä½¿ç”¨fromYamlç”Ÿæˆé»˜è®¤çš„yamlObj",{post:ie(M)})}}return M},doInitSinglePage:async(p,g,w=at.METHOD_ADD,d)=>{const v=d.setting,P=d.cfg;d.dynCfg;const S=P.posidKey;if(T.isEmptyString(S))throw new Error("é…ç½®é”™è¯¯ï¼ŒposidKeyä¸èƒ½ä¸ºç©ºï¼Œè¯·æ£€æŸ¥é…ç½®");const k=ae.getProperty(v,g,{}),M=ae.getProperty(k,S),x=await a(p,P);let K="",$={};const B=await e.getPost(g);if(w===at.METHOD_ADD)u.info("Add, using siyuan post"),$=ve.cloneDeep(B),$.mt_keywords=($==null?void 0:$.mt_keywords)??"",$.categories=($==null?void 0:$.categories)??[];else{if(u.info("Reading post from remote platform"),T.isEmptyString(M))throw new Error("æœªæ‰¾åˆ°postidï¼Œå°†æ— æ³•è¿›è¡Œæ›´æ–°");const A=await x.getPost(M);$=ve.cloneDeep(A),u.debug("get init platformPost ok =>",$),$.title=A.title,$.originalId=B.originalId,$.link=B.link,$.markdown=B.markdown,$.html=B.html,$.description=B.description,K=await m(x,g,P)}return u.debug("doInitPage finished mergedPost =>",ie($)),{mergedPost:$,postPreviewUrl:K}},doOverideBatchPost:(p,g)=>{const w=ve.cloneDeep(g);return w.title=p.title,w.originalId=p.originalId,w.link=p.link,w.shortDesc=p.shortDesc,w.mt_excerpt=p.mt_excerpt,w.mt_keywords=p.mt_keywords,w.categories=p.categories,w},doMergeBatchPost:(p,g)=>{var k,M;const w=ve.cloneDeep(g);w.originalId=p.originalId,w.link=p.link,T.isEmptyString(w.shortDesc)&&(w.shortDesc=w.mt_excerpt),T.isEmptyString(w.mt_excerpt)&&(w.mt_excerpt=w.shortDesc);const d=((k=p==null?void 0:p.mt_keywords)==null?void 0:k.split(","))??[],v=((M=g==null?void 0:g.mt_keywords)==null?void 0:M.split(","))??[],P=[...new Set([...d.map(x=>x.trim()),...v.map(x=>x.trim())])].filter(x=>x.trim()!=="");w.mt_keywords=P.join(",");const S=[...new Set([...((p==null?void 0:p.categories)??[]).map(x=>x.trim()),...((g==null?void 0:g.categories)??[]).map(x=>x.trim())])].filter(x=>x.trim()!=="");return w.categories=S,w}};return{singleFormData:i,doSinglePublish:l,doSingleDelete:c,doForceSingleDelete:r,initPublishMethods:y,getPostPreviewUrl:m}},Xs=u=>{const o=q(0),t=q(0),s=()=>{o.value=new Date().getTime()},e=()=>{const a=new Date().getTime();t.value=a-o.value};return Rs(()=>{s()}),Je(u,a=>{u.value?e():s()}),{loadingTime:t}};class Mt{static subPlatformName(o,t){return T.isEmptyString(o)?"":o.includes("_")?T.upperFirst(T.getByLength(o.split("_")[1],t??9)):this.shortPlatformName(o,t??9)}static shortPlatformName(o,t){return T.isEmptyString(o)?"":T.upperFirst(T.getByLength(o.replace("Gitlab",""),t??9))}static longPlatformName(o,t){if(T.isEmptyString(o))return"";const s=T.upperFirst(T.getByLength(o.replace("Gitlab",""),t??9));return o.includes("Gitlab")?`Gitlab-${s}`:s}}const np={id:"page-body"},ip={key:0,class:"page-head"},lp={class:"flex items-center"},rp={class:"text-large font-600 mr-3"},cp={class:"page-content-box"},pp=J({__name:"BackPage",props:{title:{type:String,default:""},hasBackEmit:{type:Boolean,default:!1}},emits:["backEmit"],setup(u,{emit:o}){const t=W("back-page");Z();const s=_t();Xe();const{query:e}=Xe(),a=u,n=q(e.showBack==="true"),i=o,l=()=>{i&&a.hasBackEmit?(t.info("using backEmit do back"),i("backEmit")):(t.warn("no backEmit, using router handle back"),s.back())};return(c,r)=>{const m=Hl;return _(),O("div",np,[n.value?(_(),O("div",ip,[f(m,{icon:h(ul),title:"è¿”å›ž",onClick:l},{content:b(()=>[E("div",lp,[E("span",rp,j(a.title),1)])]),_:1},8,["icon"])])):X("",!0),E("div",cp,[Ct(c.$slots,"default",{},void 0,!0)])])}}}),$e=pe(pp,[["__scopeId","data-v-cf41ea16"]]),up={id:"quick-publish-box"},dp={class:"publish-tips"},gp={key:0,class:"is-loading info-tips"},mp={key:1,class:"success-tips"},hp=["title"],fp=["title"],yp=["href"],bp={key:2,class:"fail-tips"},wp=["title"],_p=["title"],vp=J({__name:"QuickPublish",setup(u){const o=W("quick-publish-worker"),t=Xe(),{singleFormData:s,doSinglePublish:e,initPublishMethods:a}=Ys(),{blogApi:n}=Re(),{getPublishCfg:i}=qs(),{t:l}=Z(),c=Ke.systemCfg.map(v=>v.platformKey),r=ce(t.params),m=r.key,y=r.id,p=ce({processResult:{}}),g=q(!1),{loadingTime:w}=Xs(g),d=v=>{var S;const P=Tt.siyuanWindow();(S=P==null?void 0:P.syp)!=null&&S.alert?P.syp.alert(v):Pt.alert(v)};return Ze(async()=>{s.isPublishLoading=!0,setTimeout(async()=>{try{const v=await i(m);let P=await n.getPost(y);P=await a.assignInitAttrs(P,y,v),o.debug("quick publish inited siyuanPost =>",ie(P)),o.info("ä¿å­˜åˆ°ç³»ç»Ÿå¹³å°å¼€å§‹");for(const S of c){const k=await i(S);await e(S,y,k,P)}o.info("ä¿å­˜åˆ°ç³»ç»Ÿå¹³å°ç»“æŸ"),o.info("å•ä¸ªå¿«é€Ÿå‘å¸ƒå¼€å§‹"),p.processResult=await e(m,y,v,P),o.info("å•ä¸ªå¿«é€Ÿå‘å¸ƒç»“æŸ"),g.value=!0}catch(v){o.error(l("main.opt.failure")+"=>",v),ee.error(l("main.opt.failure")+"=>"+v)}finally{s.isPublishLoading=!1}},200)}),(v,P)=>{const S=js;return _(),C($e,{title:"æžé€Ÿå‘å¸ƒ - "+h(m)},{default:b(()=>[E("div",up,[E("div",dp,[h(s).isPublishLoading?(_(),O("div",gp,P[1]||(P[1]=[E("i",{class:"el-icon is-loading"},[E("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[E("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})])],-1),R(" å‘å¸ƒä¸­ï¼Œè¯·ç¨åŽ... ")]))):h(s).publishProcessStatus?(_(),O("div",mp,[R(j(h(s).isAdd?"å‘å¸ƒåˆ°":"æ›´æ–°æ–‡ç« åˆ°")+" ",1),E("span",{title:p.processResult.key}," ["+j(h(Mt).subPlatformName(p.processResult.key,6))+"] ",9,hp),h(T).isEmptyString(p.processResult.name)?X("",!0):(_(),O("span",{key:0,title:p.processResult.name},j(`[${h(T).getByLength(p.processResult.name,8)}]`),9,fp)),P[2]||(P[2]=R(" æˆåŠŸï¼Œ ")),E("a",{href:p.processResult.previewUrl,target:"_blank"},"æŸ¥çœ‹æ–‡ç« ",8,yp),f(S,{"loading-time":h(w),style:{padding:"0 10px 0 10px",display:"inline-block"}},null,8,["loading-time"])])):(_(),O("div",bp,[R(j(h(s).isAdd?"å‘å¸ƒåˆ°":"æ›´æ–°æ–‡ç« åˆ°")+" ",1),E("span",{title:p.processResult.key}," ["+j(h(Mt).subPlatformName(p.processResult.key,6))+"] ",9,wp),h(T).isEmptyString(p.processResult.name)?X("",!0):(_(),O("span",{key:0,title:p.processResult.name},j(`[${h(T).getByLength(p.processResult.name,8)}]`),9,_p)),P[3]||(P[3]=R(" å¤±è´¥ï¼ ")),E("a",{href:"javascript:;",onClick:P[0]||(P[0]=k=>d(p.processResult.errMsg))},"è¯¦ç»†é”™è¯¯"),f(S,{"loading-time":h(w),style:{padding:"0 10px 0 10px",display:"inline-block"}},null,8,["loading-time"])]))])])]),_:1},8,["title"])}}}),Pp=pe(vp,[["__scopeId","data-v-c809d0aa"]]),Tp={key:1},kp={class:"platform-title"},Sp={class:"platform-desc"},Ep={class:"one-key-preview"},Cp={class:"icon-list"},Ap={class:"el-icon"},Up=["innerHTML"],Ip=J({__name:"SinglePublishSelectPlatform",props:{id:{type:String,default:""}},setup(u){const o=W("single-publish-select-platform"),t=new fe,{getPostPreviewUrl:s}=Ys(),{kernelApi:e}=Re(),{getReadOnlyPublishPreferenceSetting:a}=xt(),n=u,{t:i}=Z(),l=_t(),{getSetting:c}=me(),r=ce({isInit:!1,enabledConfigArray:[],postInfo:{},postMeta:{},unpublishCount:0}),m=q(""),y=(S,k)=>{S.stopPropagation();const M=p(k)?"edit":"add",x=`/publish/singlePublish/doPublish/${k}/${n.id}`;o.info("will go to =>",x);const K={path:x,query:{showBack:"true",method:M}};l.push(K)},p=S=>{const k=Ee(S),M=ae.getProperty(r.postMeta,k);return!T.isEmptyString(M)},g=async(S,k)=>{if(S.stopPropagation(),!p(k)){r.unpublishCount++;return}const x=await we.getCfg(k),K=await we.getAdaptor(k,x),$=I.blogApi(t,K),B=await s($,n.id,x);window.open(B)},w=async S=>{Pt.confirm("å°†åœ¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€æ‰€æœ‰å·²å‘å¸ƒå¹³å°çš„æ–‡ç« é¢„è§ˆé¡µé¢ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","æ¸©é¦¨æç¤º",{type:"error",icon:qe(bn),confirmButtonText:i("main.opt.ok"),cancelButtonText:i("main.opt.cancel")}).then(async()=>{for(const k of r.enabledConfigArray)await g(S,k.platformKey);(r.enabledConfigArray.length===0||r.unpublishCount===r.enabledConfigArray.length)&&(r.unpublishCount=0,ee.error("æ–‡ç« æœªå‘å¸ƒè¿‡ï¼Œè¯·è‡³å°‘å‘å¸ƒåˆ°ä¸€ä¸ªå¹³å°ï¼"))}).catch(()=>{})},d=async()=>{const S=await c(),k=te.safeParse(S[Me],{}),M=(k==null?void 0:k.totalCfg)||[];if(r.enabledConfigArray=M.filter(K=>K.isEnabled&&K.isAuth),r.postMeta=ae.getProperty(S,n.id,{}),r.postInfo=await e.getBlockByID(n.id),a().value.fixTitle){const K=At.removeTitleNumber(r.postInfo.content).replace(/\.md/g,"");m.value=K}else m.value=r.postInfo.content},v=q(!1),{loadingTime:P}=Xs(v);return Rs(async()=>{await d(),r.isInit=!0,v.value=!0}),(S,k)=>{const M=js,x=Dt,K=Ve,$=Se,B=Gs,A=Pn,F=Ao,U=Tn,z=kn,L=$e;return _(),O(Ce,null,[f(M,{"loading-time":h(P),style:{padding:"0 24px"}},null,8,["loading-time"]),r.isInit?(_(),O("div",Tp,[f(L,{title:"å•ä¸ªæ–‡ç« å‘å¸ƒ"},{default:b(()=>[E("div",kp,j(m.value),1),E("div",Sp,[E("p",null,[f(K,{class:"desc-tip",type:"warning",title:"ç‚¹å‡»å›¾æ ‡è¿›å…¥å¯¹åº”å¹³å°çš„å‘å¸ƒé¡µé¢ï¼Œå¦‚æžœæ–‡ç« å·²å‘å¸ƒï¼Œå¯ç‚¹å‡» [é¢„è§ˆ] ç›´æŽ¥åœ¨æµè§ˆå™¨æ‰“å¼€é¢„è§ˆé¡µé¢ã€‚"})])]),E("div",Ep,[f($,{type:"primary",size:"small",onClick:w},{default:b(()=>k[0]||(k[0]=[R("ä¸€é”®é¢„è§ˆ")])),_:1})]),f(z,{gutter:20,class:"row-box"},{default:b(()=>[(_(!0),O(Ce,null,xe(r.enabledConfigArray,V=>(_(),C(U,{span:8,sm:12,xs:12,md:12,lg:8,xl:8,title:V.platformName,class:"platform-select-card"},{default:b(()=>[f(F,{class:"card-item"},{default:b(()=>[E("div",Cp,[f(A,{type:p(V.platformKey)?"success":"danger",value:p(V.platformKey)?"é¢„è§ˆ":"æœªå‘å¸ƒ",onClick:Po(Y=>g(Y,V.platformKey),["stop"]),class:zt(p(V.platformKey)?"item published-item":"item")},{default:b(()=>[f(B,{class:"define-item",onClick:Po(Y=>y(Y,V.platformKey),["stop"])},{default:b(()=>[E("i",Ap,[E("span",{innerHTML:V==null?void 0:V.platformIcon},null,8,Up)]),R(" "+j(h(Mt).longPlatformName(V==null?void 0:V.platformName,11)),1)]),_:2},1032,["onClick"])]),_:2},1032,["type","value","onClick","class"])])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:1})]),_:1})])):(_(),C(x,{key:0,class:"placeholder platform-skt",rows:12,animated:""}))],64)}}}),xp=pe(Ip,[["__scopeId","data-v-a8d342a5"]]),ss=W("widget-utils"),zo=(u,o,t,s)=>{const{isInSiyuanWidget:e}=dt();e()?Mp(u,void 0,void 0,!1,!1,!t,o,t):window.open(u)},Mp=(u,o,t,s=!1,e=!1,a=!0,n,i=void 0)=>{try{if(T.isEmptyString(u)){ss.error("Url cannot be empty");return}const{isInSiyuanWidget:l}=dt();if(!Lt.isElectron()&&!l){ss.info("BrowserWindow can ony be available in siyuan Electron environment");return}ss.info(T.f("Opening a new BrowserWindow from url => {0}",u));const c=t??Tt.siyuanWindow(),{app:r,BrowserWindow:m,getCurrentWindow:y}=c.require("@electron/remote"),p=c.require("@electron/remote").require("@electron/remote/main"),g=y(),w=new m({parent:g,width:900,height:750,show:a,resizable:!0,modal:e,icon:Tt.browserJoinPath(Tt.siyuanWindow().siyuan.config.system.appDir,"stage","icon-large.png"),titleBarOverlay:{color:"#cccccca5",symbolColor:"black"},webPreferences:{nativeWindowOpen:!0,nodeIntegration:!0,webviewTag:!0,webSecurity:!1,contextIsolation:!1}});w.webContents.session.webRequest.onBeforeSendHeaders({urls:is.uaWhiteList},(v,P)=>{const S=new URL(u);console.warn("UA å·²ä¿®æ”¹é€‚é…ï¼Œå½“å‰è¯·æ±‚ä¸º",S),v.requestHeaders["User-Agent"]=ls.HEADERS.MACOS_CHROME["User-Agent"],P({cancel:!1,requestHeaders:v.requestHeaders})}),p.enable(w.webContents),s&&w.webContents.openDevTools(),w.on("close",v=>{ss.info("çª—å£å…³é—­äº‹ä»¶è§¦å‘")}),w.loadURL(u),i&&((()=>{const P=w.webContents.session,S=n.domain;P.cookies.get({domain:S}).then(async k=>{ss.info(`è¯»å–cookieäº‹ä»¶è§¦å‘ï¼Œå‡†å¤‡è¯»å– ${S} ä¸‹çš„æ‰€æœ‰ Cookie`),await i(n,k)}).catch(k=>{console.error(`è¯»å– Cookie å¤±è´¥ï¼š${k}`)})})(),w.hide(),w.close())}catch(l){ss.error("Open browser window failed",l)}},Dp=u=>{const o=u.querySelector("div.protyle:not(.fn__none)"),t=o==null?void 0:o.querySelector("div.protyle-title");return t==null?void 0:t.getAttribute("data-node-id")},Zs=()=>{const u=window.parent.document;return Dp(u)},Op=J({__name:"SinglePublish",setup(u){const{query:o}=Xe(),t=o.id??Zs();return(s,e)=>(_(),C(xp,{id:h(t)},null,8,["id"]))}}),Vp=J({__name:"PublishStatus",props:{modelValue:{type:Object,default:{}}},emits:["emitSyncPublishStatus"],setup(u,{emit:o}){var i,l;const{t}=Z(),s=u,e=ce({status:(i=s.modelValue)==null?void 0:i.post_status,password:(l=s.modelValue)==null?void 0:l.wp_password}),a=o,n=()=>{const c=e.status,r=e.password;a("emitSyncPublishStatus",c,r)};return(c,r)=>{const m=Uo,y=Bs,p=Ue,g=Ie;return _(),O("div",null,[f(p,{label:h(t)("publisher.post.status")},{default:b(()=>[f(y,{modelValue:e.status,"onUpdate:modelValue":r[0]||(r[0]=w=>e.status=w),class:"ml-4",onChange:n},{default:b(()=>[f(m,{value:h(Et).PostStatusEnum_Publish,size:"large"},{default:b(()=>[R(j(h(t)("publisher.post.status.pubish")),1)]),_:1},8,["value"]),f(m,{value:h(Et).PostStatusEnum_Draft,size:"large"},{default:b(()=>[R(j(h(t)("publisher.post.status.draft")),1)]),_:1},8,["value"]),f(m,{value:h(Et).PostStatusEnum_Private,size:"large"},{default:b(()=>[R(j(h(t)("publisher.post.status.private")),1)]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),f(p,{label:h(t)("publisher.post.password")},{default:b(()=>[f(g,{type:"password",modelValue:e.password,"onUpdate:modelValue":r[1]||(r[1]=w=>e.password=w),placeholder:h(t)("publisher.post.password.tip"),onInput:n},null,8,["modelValue","placeholder"])]),_:1},8,["label"])])}}}),$p={key:0,class:"multi-categories"},Np=J({__name:"MultiCategories",props:{categoryConfig:{type:Object,default:{}},categories:{type:Array,default:[]}},emits:["emitSyncMultiCates"],setup(u,{emit:o}){const t=W("multi-categories"),{t:s}=Z(),e=u,a=ce({categoryConfig:e.categoryConfig,categories:e.categories,useRemoteData:!T.isEmptyString(e.categoryConfig.apiType),cate:{categorySelected:[],categoryList:[]}}),n=o,i=(y,p,g,w)=>{},l=(y,p)=>{t.debug("checked item=>",{data:ie(y),status:ie(p)});const g=[];p.checkedKeys.forEach(d=>{g.push(d.toString())}),a.categories=g,t.debug(" formData.categories=>",{categories:ie(a.categories)}),n("emitSyncMultiCates",g)},c=y=>{const p=y;t.debug("å‡†å¤‡åˆ é™¤ =>",p);const g=a.categories.filter(w=>w!==p);a.categories=g,t.debug("formData.categories=>",{categories:ie(a.categories)}),n("emitSyncMultiCates",g)},r=y=>{const p=y;t.debug("é€‰ä¸­é¡¹å·²æ”¹å˜ =>",p),n("emitSyncMultiCates",p)},m=async()=>{if(a.categoryConfig.cateEnabled){let y=[];if(t.debug(`useRemoteData => ${a.useRemoteData}`),a.useRemoteData){const p=a.categoryConfig.cfg;if(y=await(await we.getAdaptor(a.categoryConfig.apiType,p)).getCategories(),y.length===0&&(y=a.categories.map(w=>{const d=new lt;return d.categoryId=w,d.categoryName=w,d})),t.debug("getCategories for multi categories",y),y.length>0){a.cate.categoryList=y.map(d=>({value:d.categoryName,label:d.categoryName})),t.debug("get multi categoryList =>",{categoryList:ie(a.cate.categoryList)});const w=a.categories;a.cate.categorySelected=w,n("emitSyncMultiCates",w),t.debug("muti cates is syncing =>",{cates:ie(w)})}}else{const p=a.categories??[];y=p.map(g=>{const w=new lt;return w.categoryId=g,w.categoryName=g,w.categoryDescription=g,w}),y.length>0&&(a.cate.categoryList=y.map(g=>({value:g.categoryId,label:g.categoryName})),a.cate.categorySelected=p),t.debug("è¯»å–å·²æœ‰åˆ†ç±» =>",{cates:ie(p)})}}};return Ze(async()=>{await m()}),(y,p)=>{const g=Io,w=Ue;return a.categoryConfig.cateEnabled?(_(),O("div",$p,[f(w,{label:h(s)("main.cat")},{default:b(()=>[f(g,{style:{width:"100%"},modelValue:a.cate.categorySelected,"onUpdate:modelValue":p[0]||(p[0]=d=>a.cate.categorySelected=d),data:a.cate.categoryList,filterable:"","allow-create":"",multiple:"","check-on-click-node":!0,"render-after-expand":!1,"show-checkbox":"",placeholder:h(s)("main.cat.select"),"empty-text":h(s)("main.cat.empty"),"no-data-text":h(s)("main.cat.empty"),disabled:a.categoryConfig.readonlyMode,onNodeClick:i,onCheck:l,onRemoveTag:c,onChange:r},null,8,["modelValue","data","placeholder","empty-text","no-data-text","disabled"])]),_:1},8,["label"])])):X("",!0)}}}),Hp=pe(Np,[["__scopeId","data-v-067d018f"]]),Lp={title:"è‡ªåŠ¨æå–æ ‡é¢˜",description:"ä»Žæ–‡ç« å†…å®¹ä¸­ç”Ÿæˆæœ‰æ„ä¹‰çš„æ ‡é¢˜",key:"title",content:"è¯·ä¸ºè¿™ç¯‡æ–‡ç« ç”Ÿæˆç®€æ´ä¸”å®Œæ•´æ¦‚æ‹¬çš„æ ‡é¢˜ï¼Œåªå¤„ç†æ–‡æœ¬ï¼Œå°½é‡è¿”å›žä¸­æ–‡æ ‡é¢˜ã€‚æ ‡é¢˜é•¿åº¦ä¸è¶…è¿‡100ä¸ªä¸­æ–‡å­—ç¬¦æˆ–255ä¸ªè‹±æ–‡å­—ç¬¦ã€‚è¾“å‡ºä¸º JSON æ ¼å¼ï¼Œé”®åä¸º titleï¼Œç»“æžœéœ€æ”¾åœ¨ {} å†…ã€‚å®Œæ•´ç»“æžœå¿…é¡»æ˜¯åˆæ³•JSONï¼Œä¸å¾—åŒ…å«éžæ³• JSON å­—ç¬¦ã€‚"},Rp={title:"è‡ªåŠ¨æå–æ‘˜è¦",description:"ä»Žæ–‡ç« å†…å®¹ç”Ÿæˆæ–‡ç« æ‘˜è¦",key:"desc",content:"è¯·ä¸ºè¿™ç¯‡æ–‡ç« ç”Ÿæˆç®€æ˜Žæ‰¼è¦çš„æ‘˜è¦ï¼Œåªå¤„ç†æ–‡æœ¬ï¼Œå°½é‡è¿”å›žä¸­æ–‡æ‘˜è¦ã€‚æ‘˜è¦é•¿åº¦ä¸è¶…è¿‡1024ä¸ªä¸­æ–‡å­—ç¬¦æˆ–2048ä¸ªè‹±æ–‡å­—ç¬¦ã€‚è¾“å‡ºä¸º JSON æ ¼å¼ï¼Œé”®åä¸º descï¼Œç»“æžœéœ€æ”¾åœ¨ {} å†…ã€‚å®Œæ•´ç»“æžœå¿…é¡»æ˜¯åˆæ³•JSONï¼Œä¸å¾—åŒ…å«éžæ³• JSON å­—ç¬¦ã€‚"},Gp={title:"è‡ªåŠ¨æå–æ‘˜è¦",description:"ä»Žæ–‡ç« å†…å®¹ç”Ÿæˆæ–‡ç« æ‘˜è¦",key:"desc",content:"è¯·ä¸ºè¿™ç¯‡æ–‡ç« ç”Ÿæˆç®€æ˜Žæ‰¼è¦çš„æ‘˜è¦ï¼Œåªå¤„ç†æ–‡æœ¬ï¼Œå°½é‡è¿”å›žä¸­æ–‡æ‘˜è¦ã€‚æ‘˜è¦é•¿åº¦ä¸è¶…è¿‡1024ä¸ªä¸­æ–‡å­—ç¬¦æˆ–2048ä¸ªè‹±æ–‡å­—ç¬¦ã€‚è¾“å‡ºä¸ºæ–‡æœ¬æ ¼å¼ï¼Œå†…å®¹ä¸ºè¯­ä¹‰åŒ–çš„æ‘˜è¦ã€‚å®Œæ•´ç»“æžœå¿…é¡»æ˜¯æ–‡æœ¬æ‘˜è¦ï¼Œä¸å¾—åŒ…å«éžæ³•å­—ç¬¦ã€‚"},Bp={title:"è‡ªåŠ¨æå–æ ‡ç­¾",description:"ä¸ºæ–‡ç« æ·»åŠ æ ‡ç­¾",key:"tags",content:"è¯·ä¸ºè¿™ç¯‡æ–‡ç« ç”Ÿæˆæ ‡ç­¾ï¼Œåªå¤„ç†æ–‡æœ¬ï¼Œå°½é‡è¿”å›žä¸­æ–‡æ ‡ç­¾ã€‚å•ä¸ªæ ‡ç­¾ä¸è¶…è¿‡6ä¸ªå­—ç¬¦ï¼Œå¤šä¸ªæ ‡ç­¾ç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼Œæœ€å¤šè¿”å›ž5ä¸ªæ ‡ç­¾ã€‚å¦‚æžœå•ä¸ªæ ‡ç­¾æ˜¯è‹±æ–‡ï¼Œè‹±æ–‡å­—æ¯å¿…é¡»å…¨éƒ¨å°å†™å¹¶ä¸”æ¯ä¸ªå•è¯ä¹‹é—´ç”¨-æ‹¼æŽ¥ã€‚æ ‡ç­¾åç§°ä¸èƒ½é‡å¤ï¼Œä¸èƒ½åŒ…å«ä»»ä½•é™¤è‹±æ–‡å­—æ¯ã€-ä»¥åŠæ±‰å­—ä»¥å¤–çš„å­—ç¬¦ã€‚è¾“å‡ºä¸º JSON æ ¼å¼ï¼Œé”®åä¸º tagsï¼ŒæŒ‡ä»¤æ”¾åœ¨æ•°ç»„å†…ï¼Œç»“æžœéœ€æ”¾åœ¨ {} å†…ã€‚å®Œæ•´ç»“æžœå¿…é¡»æ˜¯åˆæ³•JSONï¼Œä¸å¾—åŒ…å«éžæ³• JSON å­—ç¬¦ã€‚"},jp={title:"è‡ªåŠ¨æå–åˆ†ç±»",description:"å¯¹æ–‡ç« å†…å®¹è¿›è¡Œåˆ†ç±»",key:"categories",content:"è¯·ä¸ºè¿™ç¯‡æ–‡ç« æ–‡ç« å†…å®¹è¿›è¡Œåˆ†ç±»ï¼Œåªå¤„ç†æ–‡æœ¬ï¼Œå°½é‡è¿”å›žä¸­æ–‡åˆ†ç±»ã€‚æ¯ä¸ªåˆ†ç±»åç§°ä¸è¶…è¿‡6ä¸ªå­—ç¬¦ï¼Œæœ€å¤šè¿”å›ž3ä¸ªåˆ†ç±»ã€‚å¦‚æžœåˆ†ç±»æ˜¯è‹±æ–‡ï¼Œéœ€è¦ä½¿ç”¨é©¼å³°å‘½åå¹¶ä¸”é¦–å­—æ¯å¤§å†™ã€‚è¾“å‡ºä¸º JSON æ ¼å¼ï¼Œé”®åä¸º categoriesï¼Œç»“æžœéœ€æ”¾åœ¨ {} å†…ã€‚å®Œæ•´ç»“æžœå¿…é¡»æ˜¯åˆæ³•JSONï¼Œä¸å¾—åŒ…å«éžæ³• JSON å­—ç¬¦ã€‚"},Qs={titlePrompt:Lp,shortDescPrompt:Rp,shortDescPromptStream:Gp,tagPrompt:Bp,categoryPrompt:jp},Kp="modulepreload",Wp=function(u,o){return new URL(u,o).href},qn={},Fp=function(o,t,s){let e=Promise.resolve();if(t&&t.length>0){const n=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));e=Promise.allSettled(t.map(c=>{if(c=Wp(c,s),c in qn)return;qn[c]=!0;const r=c.endsWith(".css"),m=r?'[rel="stylesheet"]':"";if(!!s)for(let g=n.length-1;g>=0;g--){const w=n[g];if(w.href===c&&(!r||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${m}`))return;const p=document.createElement("link");if(p.rel=r?"stylesheet":Kp,r||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),r)return new Promise((g,w)=>{p.addEventListener("load",g),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(n){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=n,window.dispatchEvent(i),!i.defaultPrevented)throw n}return e.then(n=>{for(const i of n||[])i.status==="rejected"&&a(i.reason);return o().catch(a)})};var hn=(u=>(u[u.MAX_INPUT_TOKEN_LENGTH=3e3]="MAX_INPUT_TOKEN_LENGTH",u))(hn||{}),lo={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const Ot=()=>{const u=W("use-chatgpt"),{getReadOnlyPublishPreferenceSetting:o}=xt(),t=o();let s;const e=async()=>{if(s===void 0){const{ChatGPTAPI:i,ChatGPTUnofficialProxyAPI:l}=await Fp(async()=>{const{ChatGPTAPI:c,ChatGPTUnofficialProxyAPI:r}=await import("./chunks/chunk.vendor_chatgpt.js");return{ChatGPTAPI:c,ChatGPTUnofficialProxyAPI:r}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75]),import.meta.url);try{T.isEmptyString(t.value.experimentalAIProxyUrl)?s=new i({apiKey:I.emptyOrDefault(lo.OPENAI_ACCESS_TOKEN,t.value.experimentalAICode),apiBaseUrl:I.emptyOrDefault(lo.OPENAI_BASE_URL,t.value.experimentalAIBaseUrl),debug:It,fetch:self.fetch.bind(self),completionParams:{model:t.value.experimentalAIApiModel,max_tokens:t.value.experimentalAIApiMaxTokens,temperature:t.value.experimentalAIApiTemperature}}):s=new l({accessToken:I.emptyOrDefault(lo.OPENAI_API_KEY,t.value.experimentalAICode),apiReverseProxyUrl:I.emptyOrDefault(lo.OPENAI_PROXY_URL,t.value.experimentalAIProxyUrl),debug:It,fetch:self.fetch.bind(self)})}catch(c){throw u.error("Failed to initialize ChatGPT API:",c),c}}return s};return{getChatInput:(i,l)=>{const c=i.substring(0,hn.MAX_INPUT_TOKEN_LENGTH),r=At.parseHtml(l,hn.MAX_INPUT_TOKEN_LENGTH,!0);return I.emptyOrDefault(c,r)},chat:async(i,l)=>{try{const c=await e();l.completionParams={...l.completionParams,model:t.value.experimentalAIApiModel,max_tokens:t.value.experimentalAIApiMaxTokens,temperature:t.value.experimentalAIApiTemperature},u.debug("chat q =>",{q:i,opts:l});const r=await c.sendMessage(i,l);return u.debug("chat res =>",r),l.stream?r:r.text}catch(c){u.error("Chat encountered an error:",c),ee.error("Chat encountered an error:"+c)}}}},zp={class:"category-box"},Jp={key:0},qp={key:1},Yp={key:2},Xp=J({__name:"PublishCategories",props:{useAi:{type:Boolean,default:!1},categoryType:{type:String,default:Q.CategoryType_None},categoryConfig:{type:Object,default:{}},categories:{type:Array,default:[]},md:{type:String,default:""},html:{type:String,default:""}},emits:["emitSyncCates"],setup(u,{emit:o}){const t=W("publish-categories"),{t:s}=Z(),e=u,a=ce({useAi:e.useAi,categoryType:e.categoryType,categoryConfig:e.categoryConfig,categories:e.categories,isLoading:!1,recommCates:[],md:e.md,html:e.html});Je(()=>e.useAi,c=>{a.useAi=c}),Je(()=>e.html,c=>{a.html=c});const n=o,i=c=>{t.debug("sync single cates =>",{cates:ie(c)}),a.categories=c,n("emitSyncCates",c)},l=async()=>{try{a.isLoading=!0;const c=Qs.categoryPrompt.content,{chat:r,getChatInput:m}=Ot(),y=await r(c,{name:"categories",systemMessage:m(a==null?void 0:a.md,a.html)});if(T.isEmptyString(y)){ee.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åå¥½è®¾ç½®é…ç½®è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}const p=te.safeParse(y,{});if(!(p!=null&&p.categories)||(p==null?void 0:p.categories.length)==0)throw new Error("æ–‡æ¡£ä¿¡æ¯é‡å¤ªå°‘ï¼Œæœªèƒ½æŠ½å–æœ‰æ•ˆä¿¡æ¯");a.recommCates=p.categories,t.info("ä½¿ç”¨AIæ™ºèƒ½ç”Ÿæˆçš„åˆ†ç±»ç»“æžœ =>",{inputWord:c,chatText:y})}catch(c){t.error(s("main.opt.failure")+"=>",c),ee.error(s("main.opt.failure")+"=>"+c)}finally{a.isLoading=!1}};return(c,r)=>{const m=Hp,y=Sn,p=Ue,g=Se,w=Ve;return _(),O("div",zp,[a.categoryType===h(Q).CategoryType_Multi?(_(),O("div",Jp,[f(m,{"category-config":a.categoryConfig,"onUpdate:categoryConfig":r[0]||(r[0]=d=>a.categoryConfig=d),categories:a.categories,"onUpdate:categories":r[1]||(r[1]=d=>a.categories=d),onEmitSyncMultiCates:i},null,8,["category-config","categories"])])):(_(),O("div",qp)),a.useAi&&a.categoryConfig.cateEnabled?(_(),O("div",Yp,[a.recommCates.length>0?(_(),C(p,{key:0,class:"recomm-show"},{default:b(()=>[r[2]||(r[2]=R(" æŽ¨èçš„åˆ†ç±»ï¼š ")),(_(!0),O(Ce,null,xe(a.recommCates,d=>(_(),C(y,{class:"ml-2 recomm-cate",type:"success"},{default:b(()=>[R(j(d),1)]),_:2},1024))),256))]),_:1})):X("",!0),f(p,{class:"cat-action"},{default:b(()=>[f(g,{size:"small",loading:a.isLoading,type:"primary",onClick:l},{default:b(()=>[R(j(a.isLoading?h(s)("main.opt.loading"):h(s)("main.auto.fetch.cate")),1)]),_:1},8,["loading"])]),_:1}),f(p,null,{default:b(()=>[f(w,{closable:!1,title:h(s)("category.ai.hand"),class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1}),r[3]||(r[3]=E("div",{class:"form-item-bottom"},null,-1))])):X("",!0)])}}}),Zp=pe(Xp,[["__scopeId","data-v-b43988e6"]]),Qp={class:"form-tags"},eu=J({__name:"PublishTags",props:{useAi:{type:Boolean,default:!1},pageId:{type:String,default:""},tags:{type:String,default:""},tagConfig:{type:Object,default:{}},md:{type:String,default:""},html:{type:String,default:""}},emits:["emitSyncTags"],setup(u,{emit:o}){const t=W("publish-tags"),{t:s}=Z(),e=u,a=q(),n=ce({isTagLoading:!1,useAi:e.useAi,pageId:e.pageId,tagConfig:e.tagConfig,tag:{inputValue:"",dynamicTags:T.isEmptyString(e.tags)?[]:e.tags.split(","),platformTags:[],inputVisible:!1,selectVisible:!0},md:e.md,html:e.html});Je(()=>e.useAi,r=>{n.useAi=r}),Je(()=>e.html,r=>{n.html=r});const i=o,l={handleTagClose:r=>{n.tag.dynamicTags.splice(n.tag.dynamicTags.indexOf(r),1),i("emitSyncTags",n.tag.dynamicTags)},tagShowInput:()=>{n.tag.inputVisible=!0,wn(()=>{a.value.input.focus()})},tagShowSelect:()=>{n.tag.selectVisible=!n.tag.selectVisible},handleTagInputConfirm:()=>{n.tag.inputValue&&(n.tag.dynamicTags.includes(n.tag.inputValue)||n.tag.dynamicTags.push(n.tag.inputValue),n.tag.platformTags.includes(n.tag.inputValue)||n.tag.platformTags.push({value:n.tag.inputValue,label:n.tag.inputValue}),i("emitSyncTags",n.tag.dynamicTags)),n.tag.inputVisible=!1,n.tag.inputValue=""},fetchTag:async()=>{try{n.isTagLoading=!0;const r=Qs.tagPrompt.content,{chat:m,getChatInput:y}=Ot(),p=await m(r,{name:"tags",systemMessage:y(n==null?void 0:n.md,n.html)});if(T.isEmptyString(p)){ee.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åå¥½è®¾ç½®é…ç½®è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}const g=te.safeParse(p,{});if(!(g!=null&&g.tags)||(g==null?void 0:g.tags.length)==0)throw new Error("æ–‡æ¡£ä¿¡æ¯é‡å¤ªå°‘ï¼Œæœªèƒ½æŠ½å–æœ‰æ•ˆä¿¡æ¯");for(let w=0;w<g.tags.length;w++)n.tag.dynamicTags.includes(g.tags[w])||n.tag.dynamicTags.push(g.tags[w]);t.info("ä½¿ç”¨AIæ™ºèƒ½ç”Ÿæˆçš„æ ‡ç­¾ç»“æžœ =>",{inputWord:r,chatText:p}),i("emitSyncTags",n.tag.dynamicTags),ee.success("ä½¿ç”¨äººå·¥æ™ºèƒ½æ™ºèƒ½æå–æ ‡ç­¾æˆåŠŸ")}catch(r){t.error(s("main.opt.failure")+"=>",r),ee.error(s("main.opt.failure")+"=>"+r)}finally{n.isTagLoading=!1}},onPlatformTagChange:r=>{const m=r;t.debug("é€‰ä¸­é¡¹å·²æ”¹å˜ =>",m),i("emitSyncTags",n.tag.dynamicTags)}},c=async()=>{var r,m,y,p;if((r=n==null?void 0:n.tagConfig)!=null&&r.cfg&&((m=n==null?void 0:n.tagConfig)!=null&&m.apiType)){const g=(y=n==null?void 0:n.tagConfig)==null?void 0:y.cfg,d=await(await we.getAdaptor((p=n==null?void 0:n.tagConfig)==null?void 0:p.apiType,g)).getTags();n.tag.platformTags=d.map(v=>({value:v.tagName,label:v.tagName})),t.debug("getTags for platforms",n.tag.platformTags)}else t.warn("tagConfig not found, ignore tags")};return Ze(async()=>{await c()}),(r,m)=>{const y=Sn,p=Ie,g=Se,w=Ue,d=Io;return _(),O("div",Qp,[f(w,{label:h(s)("main.tag")},{default:b(()=>[(_(!0),O(Ce,null,xe(n.tag.dynamicTags,v=>(_(),C(y,{key:v,"disable-transitions":!1,class:"mx-1 pub-tag",closable:"",onClose:P=>l.handleTagClose(v)},{default:b(()=>[R(j(v),1)]),_:2},1032,["onClose"]))),128)),n.tag.inputVisible?(_(),C(p,{key:0,ref_key:"tagRefInput",ref:a,modelValue:n.tag.inputValue,"onUpdate:modelValue":m[0]||(m[0]=v=>n.tag.inputValue=v),class:"ml-1 w-20 pub-tag-input",size:"small",onBlur:l.handleTagInputConfirm,onKeyup:Zn(l.handleTagInputConfirm,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(_(),C(g,{key:1,class:"button-new-tag ml-1 el-tag",size:"small",onClick:l.tagShowInput},{default:b(()=>[R(j(h(s)("main.tag.new")),1)]),_:1},8,["onClick"])),n.tag.platformTags.length>0?(_(),C(g,{key:2,class:"button-new-tag ml-1 el-tag",size:"small",onClick:l.tagShowSelect},{default:b(()=>[R(j(n.tag.selectVisible?h(s)("main.tag.close"):h(s)("main.tag.select")),1)]),_:1},8,["onClick"])):X("",!0)]),_:1},8,["label"]),n.tag.platformTags.length>0&&n.tag.selectVisible?(_(),C(w,{key:0},{default:b(()=>[f(d,{modelValue:n.tag.dynamicTags,"onUpdate:modelValue":m[1]||(m[1]=v=>n.tag.dynamicTags=v),style:{width:"100%"},data:n.tag.platformTags,multiple:"","check-on-click-node":!0,"render-after-expand":!1,"show-checkbox":"",placeholder:h(s)("main.tag.select"),"empty-text":h(s)("main.tag.empty"),"no-data-text":h(s)("main.tag.empty"),onNodeClick:l.onPlatformTagChange,onCheck:l.onPlatformTagChange,onChange:l.onPlatformTagChange},null,8,["modelValue","data","placeholder","empty-text","no-data-text","onNodeClick","onCheck","onChange"])]),_:1})):X("",!0),n.useAi?(_(),C(w,{key:1},{default:b(()=>[f(g,{size:"small",loading:n.isTagLoading,type:"primary",onClick:l.fetchTag},{default:b(()=>[R(j(n.isTagLoading?h(s)("main.opt.loading"):h(s)("main.auto.fetch.tag")),1)]),_:1},8,["loading","onClick"])]),_:1})):X("",!0)])}}}),$i=pe(eu,[["__scopeId","data-v-e05259e4"]]),tu={class:"form-desc"},Ni=J({__name:"PublishDescription",props:{useAi:{type:Boolean,default:!1},pageId:{type:String,default:""},desc:{type:String,default:""},md:{type:String,default:""},html:{type:String,default:""}},emits:["emitSyncDesc"],setup(u,{emit:o}){const t=W("publish-description"),{t:s}=Z(),e=u,a=ce({isDescLoading:!1,useAi:e.useAi,pageId:e.pageId,desc:e.desc,md:e.md,html:e.html});Je(()=>e.useAi,c=>{a.useAi=c}),Je(()=>e.html,c=>{a.html=c});const n=o,i=async()=>{a.isDescLoading=!0;const c=!0;try{if(c){const r=Qs.shortDescPromptStream.content,{chat:m,getChatInput:y}=Ot();a.desc="";const p=await m(r,{name:"desc",systemMessage:y(a==null?void 0:a.md,a.html),stream:!0,onProgress:g=>{a.desc=g.text,t.debug("partialResponse=>",g.text)},timeoutMs:2*60*1e3});t.debug("chatResp=>",p)}n("emitSyncDesc",a.desc),ee.success("ä½¿ç”¨äººå·¥æ™ºèƒ½æå–æ‘˜è¦æˆåŠŸ")}catch(r){t.error(s("main.opt.failure")+"=>",r),ee.error(s("main.opt.failure")+"=>"+r)}finally{a.isDescLoading=!1}},l=()=>{n("emitSyncDesc",a.desc)};return(c,r)=>{const m=Ie,y=Ue,p=Se;return _(),O("div",tu,[f(y,{label:h(s)("main.desc")},{default:b(()=>[f(m,{modelValue:a.desc,"onUpdate:modelValue":r[0]||(r[0]=g=>a.desc=g),autosize:{minRows:3,maxRows:16},type:"textarea",placeholder:"è¯·è¾“å…¥æ–‡ç« æ‘˜è¦",onInput:l},null,8,["modelValue"])]),_:1},8,["label"]),a.useAi?(_(),C(y,{key:0},{default:b(()=>[f(p,{size:"small",loading:a.isDescLoading,type:"primary",onClick:i},{default:b(()=>[R(j(a.isDescLoading?h(s)("main.opt.loading"):h(s)("main.auto.fetch.desc")),1)]),_:1},8,["loading"])]),_:1})):X("",!0)])}}}),su={key:1,class:"single-tag-slug"},ou=J({__name:"SingleTagSlug",props:{cfg:{type:Object,default:{}},apiType:{type:String,default:""},tagSlugs:{type:String,default:""}},emits:["emitSyncTagSlugs"],setup(u,{emit:o}){const t=W("single-tag-slugs");Z();const s=u,e=ce({cfg:s.cfg,apiType:s.apiType,tagSlugs:T.isEmptyString(s.tagSlugs)?[]:s.tagSlugs.split(","),tag:{tagSelected:"",tagList:[]},isInit:!1}),a=o,n=l=>{const c=l;t.debug("value=>",c),t.debug("label=>",c);const r=[];r.push(c),e.tagSlugs=r,t.debug("cateSlugs=>",e.tagSlugs),a("emitSyncTagSlugs",r)},i=async()=>{var m;let l=[];const c=e.cfg;l=await(await we.getAdaptor(e.apiType,c)).getTags(),t.debug("getTags for single slug tag",l),l.length>0&&(e.tag.tagList=l.map(y=>({value:y.tagId,label:y.tagName})),e.tag.tagSelected=((m=e.tagSlugs)==null?void 0:m[0])??"",t.debug("è¯»å–å·²æœ‰åˆ«åæ ‡ç­¾ =>",{tagSlugs:ie(e.tagSlugs)}))};return Ze(async()=>{try{await i()}catch(l){t.error("åˆ«åæ ‡ç­¾åŠ è½½å¤±è´¥",l)}finally{e.isInit=!0}}),(l,c)=>{const r=Dt,m=pt,y=ut,p=Ue;return e.isInit?(_(),O("div",su,[f(p,{label:"æ ‡ç­¾"},{default:b(()=>[f(y,{modelValue:e.tag.tagSelected,"onUpdate:modelValue":c[0]||(c[0]=g=>e.tag.tagSelected=g),placeholder:"è¯·é€‰æ‹©","no-data-text":"æš‚æ— æ•°æ®",class:"m-2",size:"default",onChange:n},{default:b(()=>[(_(!0),O(Ce,null,xe(e.tag.tagList,g=>(_(),C(m,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),c[1]||(c[1]=E("div",{class:"form-item-bottom"},null,-1))])):(_(),C(r,{key:0,class:"placeholder",rows:1,animated:""}))}}}),au=pe(ou,[["__scopeId","data-v-33e4b926"]]);var et=(u=>(u[u.YAML=0]="YAML",u[u.MD_CONTENT=1]="MD_CONTENT",u[u.YAML_MD_CONTENT=2]="YAML_MD_CONTENT",u[u.HTML_CONTENT=3]="HTML_CONTENT",u))(et||{});const nu={key:1,class:"source-mode"},iu={class:"source-opt"},lu={key:2,id:"yaml-edit-content"},ru={key:3,id:"yaml-detail-content"},cu={id:"yaml-read-mode-tip"},pu=J({__name:"SourceMode",props:{modelValue:{type:Object,default:{}},pageId:{type:String,default:""},apiType:{type:String,default:""},cfg:{type:Object,default:{}}},emits:["emitSyncPost","edmtSyncToSiyuan"],async setup(u,{emit:o}){let t,s;const e=W("source-mode"),{t:a}=Z(),{handlePicgo:n}=Oo(),i=u,l=ce({isLoading:!1,stype:et.MD_CONTENT,contentReadonlyMode:!0,readonlyMode:T.isEmptyString(i.apiType),syncStatus:"info",syncMessage:"æœªä¿®æ”¹",pageId:i.pageId,apiType:i.apiType,cfg:i.cfg,yamlAdaptor:{},yamlFormatObj:{},siyuanPost:i.modelValue,yamlContent:"",isSaved:!0}),c=o,r=P=>{switch(l.stype=P,P){case et.YAML:l.contentReadonlyMode=!1,w(l.yamlFormatObj.formatter);break;case et.MD_CONTENT:l.contentReadonlyMode=!0,w(l.yamlFormatObj.mdContent);break;case et.YAML_MD_CONTENT:l.contentReadonlyMode=!0,w(l.yamlFormatObj.mdFullContent);break;case et.HTML_CONTENT:l.contentReadonlyMode=!0,w(l.yamlFormatObj.htmlContent);break}},m=P=>{if(P.preventDefault(),P.target.select(),Lt.isInBrowser)try{Lt.copyToClipboardInBrowser(l.yamlContent),ee.success(a("main.copy.success"))}catch(k){e.error(a("main.copy.failure"),k),ee.error(a("main.copy.failure")+"=>"+k)}},y=P=>{e.debug("ä»…åœ¨å¸¸è§„å‘å¸ƒä½¿ç”¨"),l.isSaved=!1,l.syncStatus="info",l.syncMessage="å·²ä¿®æ”¹"},p=()=>{l.yamlFormatObj.formatter=l.yamlContent,l.yamlFormatObj.mdFullContent=re.addYamlToMd(l.yamlFormatObj.formatter,l.yamlFormatObj.mdContent),e.debug("val =>",l.yamlContent);try{const P=re.yaml2Obj(l.yamlFormatObj.formatter);l.yamlFormatObj.yamlObj=P,l.siyuanPost=l.yamlAdaptor.convertToAttr(l.siyuanPost,l.yamlFormatObj,l.cfg),e.debug("å‡†å¤‡emit =>",{post:ie(l.siyuanPost)}),l.siyuanPost.yamlType=Ht.Yaml_custom_hand,c("emitSyncPost",l.siyuanPost),c("edmtSyncToSiyuan"),l.syncStatus="success",l.syncMessage="YAMLå·²è§£æžæˆåŠŸå¹¶åŒæ­¥ã€‚åŒæ­¥æ—¶é—´ =>"+De.formatIsoToZh(new Date().toISOString(),!0),l.isSaved=!0}catch(P){l.syncStatus="error",l.syncMessage="YAMLè§£æžå¤±è´¥ï¼ŒYAMLå°†ä¸å¯ç”¨ï¼Œé”™è¯¯å¦‚ä¸‹ =>"+P,e.error("YAMLè§£æžå¤±è´¥",P)}},g=P=>{P.preventDefault()},w=async P=>{l.yamlContent=P},d=async P=>{let S=new ft;switch(P.yamlType){case Ht.Yaml_custom_auto:{const k=l.apiType;S=l.yamlAdaptor.convertToYaml(P,void 0,l.cfg),e.debug("å¸¸è§„å‘å¸ƒï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹åº”å¹³å°çš„YAML, =>",k);break}case Ht.Yaml_custom_hand:{const k=new ft,M=await re.yaml2ObjAsync(P.yaml);k.yamlObj=M,S=l.yamlAdaptor.convertToYaml(P,k,l.cfg),e.debug("å¸¸è§„å‘å¸ƒï¼Œä¿®æ”¹è¿‡YAML");break}default:{const k=_n.toYamlObj(l.siyuanPost);S.formatter=re.obj2Yaml(k),S.mdContent=P.markdown,S.mdFullContent=re.addYamlToMd(S.formatter,S.mdContent),S.htmlContent=P.html,e.debug("æœªæ‰¾åˆ°YAMLé€‚é…å™¨ï¼Œå°†ç”Ÿæˆå…¬å…±çš„YAML");break}}l.yamlFormatObj=S,r(l.stype),e.info("ç¼–è¾‘æ¨¡å¼åˆ° YAML çš„åŒæ­¥å·²å®Œæˆ")},v=async()=>{l.isLoading=!0;try{const P=l.siyuanPost,S=l.pageId,k=await n(S,P.markdown);P.markdown=k,l.yamlAdaptor=l.readonlyMode?null:await we.getYamlAdaptor(l.apiType,l.cfg),l.readonlyMode=l.yamlAdaptor===null,l.readonlyMode||(l.stype=et.YAML),await d(P),e.debug(`init Page in source mode, readonlyMode: ${l.readonlyMode} =>`,{siyuanPost:ie(l.siyuanPost)})}catch(P){ee.error(P.message),e.error(a("main.opt.failure")+"=>",P)}finally{l.isLoading=!1}};return[t,s]=Ae(()=>v()),await t,s(),(P,S)=>{const k=Dt,M=Ue,x=Ve,K=Ie;return l.isLoading?(_(),C(k,{key:0,class:"placeholder",rows:5,animated:""})):(_(),O("div",nu,[l.isSaved?X("",!0):(_(),C(M,{key:0,class:"un-saved-tip"},{default:b(()=>[S[6]||(S[6]=R(" æ£€æµ‹åˆ°æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œæ˜¯å¦ä¿å­˜ï¼Ÿ")),E("a",{onClick:p},"é©¬ä¸Šä¿å­˜")]),_:1})),l.readonlyMode?X("",!0):(_(),C(M,{key:1},{default:b(()=>[f(x,{closable:!1,title:l.syncMessage,class:"top-yaml-tip",type:l.syncStatus},null,8,["title","type"])]),_:1})),E("div",iu,[f(M,null,{default:b(()=>[E("a",{class:zt({current:l.stype===h(et).YAML}),onClick:S[0]||(S[0]=$=>r(h(et).YAML))},j(h(a)("yaml.show.type.yaml")),3),E("a",{class:zt({current:l.stype===h(et).MD_CONTENT,middle:!0}),onClick:S[1]||(S[1]=$=>r(h(et).MD_CONTENT))},j(h(a)("yaml.show.type.md")),3),E("a",{class:zt({current:l.stype===h(et).YAML_MD_CONTENT,middle:!0}),onClick:S[2]||(S[2]=$=>r(h(et).YAML_MD_CONTENT))},j(h(a)("yaml.show.type.yamlmd")),3),E("a",{class:zt({current:l.stype===h(et).HTML_CONTENT}),onClick:S[3]||(S[3]=$=>r(h(et).HTML_CONTENT))},j(h(a)("yaml.show.type.html")),3)]),_:1})]),!l.contentReadonlyMode&&!l.readonlyMode?(_(),O("div",lu,[f(M,null,{default:b(()=>[f(K,{modelValue:l.yamlContent,"onUpdate:modelValue":S[4]||(S[4]=$=>l.yamlContent=$),autosize:{minRows:4,maxRows:16},type:"textarea",onInput:y},null,8,["modelValue"])]),_:1})])):(_(),O("div",ru,[f(M,null,{default:b(()=>[f(K,{id:"yaml-detail-preview",modelValue:l.yamlContent,"onUpdate:modelValue":S[5]||(S[5]=$=>l.yamlContent=$),autosize:{minRows:4,maxRows:16},readonly:"",type:"textarea",class:"readonly-textarea",onClick:m,onContextmenu:g},null,8,["modelValue"])]),_:1})])),E("div",cu,[f(M,null,{default:b(()=>[l.readonlyMode?(_(),C(x,{key:0,class:"top-yaml-tip",closable:!1,title:h(a)("main.read.mode.tip1"),type:"error"},null,8,["title"])):X("",!0)]),_:1})])]))}}}),Hi=pe(pu,[["__scopeId","data-v-cecf2444"]]),uu={class:"form-edit-mode"},Li=J({__name:"EditModeSelect",props:{editType:{type:Number,default:ze.EditMode_simple}},emits:["emitSyncEditMode"],setup(u,{emit:o}){const{t}=Z(),s=u,e=ce({etype:s.editType});Je(()=>s.editType,i=>{e.etype=i});const a=o,n=i=>{e.etype=i,a("emitSyncEditMode",i)};return(i,l)=>{const c=Se,r=Ll,m=Ue;return _(),O("div",uu,[f(m,{label:h(t)("main.publish.editmode")},{default:b(()=>[f(r,null,{default:b(()=>[f(c,{type:e.etype===h(ze).EditMode_simple?"primary":"default",onClick:l[0]||(l[0]=y=>n(h(ze).EditMode_simple))},{default:b(()=>[R(j(h(t)("main.publish.editmode.simple")),1)]),_:1},8,["type"]),f(c,{type:e.etype===h(ze).EditMode_complex?"primary":"default",onClick:l[1]||(l[1]=y=>n(h(ze).EditMode_complex))},{default:b(()=>[R(j(h(t)("main.publish.editmode.complex")),1)]),_:1},8,["type"]),f(c,{type:e.etype===h(ze).EditMode_source?"primary":"default",onClick:l[2]||(l[2]=y=>n(h(ze).EditMode_source))},{default:b(()=>[R(j(h(t)("main.publish.editmode.source")),1)]),_:1},8,["type"])]),_:1})]),_:1},8,["label"])])}}}),du={class:"form-publish-time"},Ri=J({__name:"PublishTime",props:{modelValue:{type:Object,default:{}}},emits:["emitSyncPublishTime"],setup(u,{emit:o}){var i,l,c;const{t}=Z(),s=u,e=ce({dateCreatedString:De.formatIsoToZh((l=(i=s.modelValue)==null?void 0:i.dateCreated)==null?void 0:l.toISOString(),!0),dateUpdatedString:De.formatIsoToZh((((c=s.modelValue)==null?void 0:c.dateUpdated)??new Date).toISOString(),!0)}),a=o,n=()=>{const r=De.convertStringToDate(e.dateCreatedString),m=De.convertStringToDate(e.dateUpdatedString);a("emitSyncPublishTime",r,m)};return(r,m)=>{const y=Rl,p=Ue;return _(),O("div",du,[f(p,{label:h(t)("main.create.time")},{default:b(()=>[f(y,{modelValue:e.dateCreatedString,"onUpdate:modelValue":m[0]||(m[0]=g=>e.dateCreatedString=g),placeholder:h(t)("main.create.time.placeholder"),format:"YYYY-MM-DD HH:mm:ss",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",onChange:n},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),f(p,{label:h(t)("main.update.time")},{default:b(()=>[f(y,{modelValue:e.dateUpdatedString,"onUpdate:modelValue":m[1]||(m[1]=g=>e.dateUpdatedString=g),placeholder:h(t)("main.update.time.placeholder"),format:"YYYY-MM-DD HH:mm:ss",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",onChange:n},null,8,["modelValue","placeholder"])]),_:1},8,["label"])])}}}),gu={key:0,class:"tree-single-cateslugs"},mu=J({__name:"TreeSingleKnowledgeSpace",props:{knowledgeSpaceConfig:{type:Object,default:{}},cateSlugs:{type:Array,default:[]}},emits:["emitSyncTreeSingleCateSlugs"],setup(u,{emit:o}){const t=W("tree-single-cateslugs"),{t:s}=Z(),e=u,a=ce({knowledgeSpaceConfig:e.knowledgeSpaceConfig,cateSlugs:e.cateSlugs,path:{customPath:"",cacheData:[],customProps:{label:"label",children:"children",isLeaf:"isLeaf"}}}),n=o,i=async(c,r)=>{if(c.isLeaf)return r([]);const m=a.knowledgeSpaceConfig.cfg,y=await we.getAdaptor(a.knowledgeSpaceConfig.apiType,m);let p,g=c.data.value||"";g===""&&a.path.customPath!==""?p="":(g===""&&(g=""),p=g);const w=await y.getCategoryTreeNodes(p);r(w)},l=c=>{if(t.debug("onSelectChange=>",c),c.isLeaf){ee.error("æ‚¨å½“å‰é€‰æ‹©çš„æ˜¯é¡µé¢ï¼Œè¯·æ³¨æ„ï¼Œé¡µé¢å¿…é¡»å‘å¸ƒåœ¨ç›®å½•ä¸‹");return}const r=c.value,m=[];m.push(r),n("emitSyncTreeSingleCateSlugs",m)};return Ze(()=>{var r,m,y;const c=((r=a.cateSlugs)==null?void 0:r[0])??((y=(m=a.knowledgeSpaceConfig)==null?void 0:m.cfg)==null?void 0:y.blogid);a.path.customPath=c,a.path.customPath.includes(To)&&(a.knowledgeSpaceConfig.readonlyMode=!0,a.knowledgeSpaceConfig.cfg.placeholder.knowledgeSpaceReadonlyModeTip="å½“å‰ä¸ºè‡ªåŠ¨æ˜ å°„ç›®å½•æ¨¡å¼ï¼Œå°†æ ¹æ®ç¬”è®°å±‚çº§è‡ªåŠ¨ç”Ÿæˆç›®å½•ðŸ˜„"),t.debug("init tree data, cateSlugs =>",{cateSlugs:ie(a.cateSlugs)})}),(c,r)=>{const m=Io,y=Ue,p=Ve;return a.knowledgeSpaceConfig.cateEnabled?(_(),O("div",gu,[f(y,{label:h(s)("main.publish.github.choose.path")},{default:b(()=>[f(m,{modelValue:a.path.customPath,"onUpdate:modelValue":r[0]||(r[0]=g=>a.path.customPath=g),lazy:"",load:i,props:a.path.customProps,"check-strictly":!0,"empty-text":h(s)("main.data.empty"),"no-data-text":h(s)("main.data.empty"),placeholder:h(s)("main.opt.select"),disabled:a.knowledgeSpaceConfig.readonlyMode,onNodeClick:l},null,8,["modelValue","props","empty-text","no-data-text","placeholder","disabled"])]),_:1},8,["label"]),a.knowledgeSpaceConfig.readonlyMode?(_(),C(y,{key:0},{default:b(()=>{var g,w;return[f(p,{closable:!1,title:(w=(g=a.knowledgeSpaceConfig.cfg)==null?void 0:g.placeholder)==null?void 0:w.knowledgeSpaceReadonlyModeTip,class:"form-item-tip",type:"warning"},null,8,["title"])]}),_:1})):X("",!0),r[1]||(r[1]=E("div",{class:"form-item-bottom"},null,-1))])):X("",!0)}}}),hu=pe(mu,[["__scopeId","data-v-15baacab"]]),fu={key:1,class:"single-knowledge-space"},yu=J({__name:"SingleKnowledgeSpace",props:{knowledgeSpaceConfig:{type:Object,default:{}},cateSlugs:{type:Array,default:[]}},emits:["emitSyncSingleCateSlugs"],setup(u,{emit:o}){const t=W("single-knowledge-space"),{t:s}=Z(),e=u,a=q(null),n=ce({knowledgeSpaceConfig:e.knowledgeSpaceConfig,cateSlugs:e.cateSlugs,cate:{categorySelected:"",categoryList:[]},ksKeyword:"",isCateLoading:!1,isInit:!1}),i=o,l=yn(()=>{var p,g;return((g=(p=n==null?void 0:n.knowledgeSpaceConfig)==null?void 0:p.cfg)==null?void 0:g.knowledgeSpaceTitle)??s("main.cat")}),c=y=>{const p=y;t.debug("value=>",p),t.debug("label=>",p);const g=[];g.push(p),n.cateSlugs=g,t.debug("cateSlugs=>",n.cateSlugs),i("emitSyncSingleCateSlugs",g)},r=async()=>{try{n.isCateLoading=!0,t.debug("reload categories for single category woth search"),n.cate.categoryList=[],n.cate.categorySelected=void 0,await m(!1),a.value.visible=!0}catch(y){t.error("çŸ¥è¯†ç©ºé—´åŠ è½½å¤±è´¥",y)}finally{n.isCateLoading=!1,n.isInit=!0}},m=async y=>{var d;let p=[];const g=n.knowledgeSpaceConfig.cfg;p=await(await we.getAdaptor(n.knowledgeSpaceConfig.apiType,g)).getCategories(n.ksKeyword),t.debug("getCategories for single category",p),p.length>0&&(n.cate.categoryList=p.map(v=>({value:v.categoryId,label:v.categoryName})),y&&(n.cate.categorySelected=((d=n.cateSlugs)==null?void 0:d[0])??g.blogid??"",t.debug("è¯»å–å·²æœ‰çŸ¥è¯†ç©ºé—´ =>",{cateSlugs:ie(n.cateSlugs)})))};return Ze(async()=>{var y,p;try{n.isCateLoading=!0,await m(!0),(p=(y=n==null?void 0:n.cate)==null?void 0:y.categorySelected)!=null&&p.toString().includes(To)&&(n.knowledgeSpaceConfig.readonlyMode=!0,n.knowledgeSpaceConfig.readonlyModeTip="å½“å‰ä¸ºè‡ªåŠ¨æ˜ å°„ç›®å½•æ¨¡å¼ï¼Œå°†æ ¹æ®ç¬”è®°å±‚çº§è‡ªåŠ¨ç”Ÿæˆç›®å½•ðŸ˜„")}catch(g){t.error("çŸ¥è¯†ç©ºé—´åŠ è½½å¤±è´¥",g)}finally{n.isCateLoading=!1,n.isInit=!0}}),(y,p)=>{var k,M;const g=Dt,w=Ie,d=Ue,v=pt,P=ut,S=Ve;return n.isInit?(_(),O("div",fu,[!n.knowledgeSpaceConfig.readonlyMode&&((M=(k=n.knowledgeSpaceConfig)==null?void 0:k.cfg)!=null&&M.cateSearchEnabled)?(_(),C(d,{key:0,class:"cate-input",label:"æœç´¢å…³é”®è¯"},{default:b(()=>[f(w,{modelValue:n.ksKeyword,"onUpdate:modelValue":p[0]||(p[0]=x=>n.ksKeyword=x),placeholder:"è¯·è¾“å…¥["+l.value+"]æœç´¢å…³é”®è¯ï¼Œè¾“å…¥å®ŒæˆåŽè¯·æŒ‰Enteré”®æˆ–è€…ç§»èµ°å…‰æ ‡",onChange:r},null,8,["modelValue","placeholder"])]),_:1})):X("",!0),f(d,{label:l.value},{default:b(()=>[f(P,{modelValue:n.cate.categorySelected,"onUpdate:modelValue":p[1]||(p[1]=x=>n.cate.categorySelected=x),placeholder:"è¯·é€‰æ‹©","no-data-text":"æš‚æ— æ•°æ®",class:"m-2",size:"default",onChange:c,disabled:n.knowledgeSpaceConfig.readonlyMode,loading:n.isCateLoading,"loading-text":"åŠ è½½ä¸­...",ref_key:"singleCateSelect",ref:a},{default:b(()=>[(_(!0),O(Ce,null,xe(n.cate.categoryList,x=>(_(),C(v,{key:x.value,label:x.label,value:x.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","loading"])]),_:1},8,["label"]),n.knowledgeSpaceConfig.readonlyMode?(_(),C(d,{key:1},{default:b(()=>[f(S,{closable:!1,title:n.knowledgeSpaceConfig.readonlyModeTip,class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1})):X("",!0),p[2]||(p[2]=E("div",{class:"form-item-bottom"},null,-1))])):(_(),C(g,{key:0,class:"placeholder",rows:1,animated:""}))}}}),bu=pe(yu,[["__scopeId","data-v-a71bed2e"]]),wu={key:0},_u={key:1},vu={key:2},Pu=J({__name:"PublishKnowledgeSpace",props:{knowledgeSpaceType:{type:String,default:Q.CategoryType_None},knowledgeSpaceConfig:{type:Object,default:{}},cateSlugs:{type:Array,default:[]}},emits:["emitSyncCateSlugs"],setup(u,{emit:o}){const t=W("publish-categories"),s=u,e=ce({knowledgeSpaceType:s.knowledgeSpaceType,knowledgeSpaceConfig:s.knowledgeSpaceConfig,cateSlugs:s.cateSlugs}),a=o,n=i=>{t.debug("sync single cateSlugs =>",{cateSlugs:ie(i)}),a("emitSyncCateSlugs",i)};return(i,l)=>{const c=bu,r=hu;return e.knowledgeSpaceType===h(Q).CategoryType_Single?(_(),O("div",wu,[f(c,{"knowledge-space-config":e.knowledgeSpaceConfig,"onUpdate:knowledgeSpaceConfig":l[0]||(l[0]=m=>e.knowledgeSpaceConfig=m),"cate-slugs":e.cateSlugs,"onUpdate:cateSlugs":l[1]||(l[1]=m=>e.cateSlugs=m),onEmitSyncSingleCateSlugs:n},null,8,["knowledge-space-config","cate-slugs"])])):e.knowledgeSpaceType===h(Q).CategoryType_Tree_Single?(_(),O("div",_u,[f(r,{"knowledge-space-config":e.knowledgeSpaceConfig,"onUpdate:knowledgeSpaceConfig":l[2]||(l[2]=m=>e.knowledgeSpaceConfig=m),"cate-slugs":e.cateSlugs,"onUpdate:cateSlugs":l[3]||(l[3]=m=>e.cateSlugs=m),onEmitSyncTreeSingleCateSlugs:n},null,8,["knowledge-space-config","cate-slugs"])])):(_(),O("div",vu))}}}),Tu={class:"form-post-title"},Gi=J({__name:"PublishTitle",props:{useAi:{type:Boolean,default:!1},modelValue:{type:String,default:""},md:{type:String,default:""},html:{type:String,default:""}},emits:["emitSyncPublishTitle"],setup(u,{emit:o}){const t=W("publish-title"),{t:s}=Z(),e=u,a=ce({postTitle:e.modelValue,isLoading:!1,useAi:e.useAi,md:e.md,html:e.html});Je(()=>e.useAi,c=>{a.useAi=c}),Je(()=>e.modelValue,c=>{a.postTitle=c}),Je(()=>e.md,c=>{a.md=c}),Je(()=>e.html,c=>{a.html=c});const n=o,i=()=>{n("emitSyncPublishTitle",a.postTitle)},l=async()=>{try{a.isLoading=!0;const c=Qs.titlePrompt.content,{chat:r,getChatInput:m}=Ot(),y=await r(c,{name:"title",systemMessage:m(a==null?void 0:a.md,a.html)});if(T.isEmptyString(y)){ee.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åå¥½è®¾ç½®é…ç½®è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}const p=te.safeParse(y,{});if(T.isEmptyString(p==null?void 0:p.title))throw new Error("æ–‡æ¡£ä¿¡æ¯é‡å¤ªå°‘ï¼Œæœªèƒ½æŠ½å–æœ‰æ•ˆä¿¡æ¯");a.postTitle=p.title,t.info("ä½¿ç”¨AIæ™ºèƒ½ç”Ÿæˆçš„æ ‡é¢˜ç»“æžœ =>",{inputWord:c,chatText:y}),n("emitSyncPublishTitle",a.postTitle),ee.success("ä½¿ç”¨äººå·¥æ™ºèƒ½æå–æ ‡é¢˜æˆåŠŸ")}catch(c){t.error(s("main.opt.failure")+"=>",c),ee.error(s("main.opt.failure")+"=>"+c)}finally{a.isLoading=!1}};return(c,r)=>{const m=Ie,y=Ue,p=Se;return _(),O("div",Tu,[f(y,{label:h(s)("main.title")},{default:b(()=>[f(m,{modelValue:a.postTitle,"onUpdate:modelValue":r[0]||(r[0]=g=>a.postTitle=g),onInput:i},null,8,["modelValue"])]),_:1},8,["label"]),a.useAi?(_(),C(y,{key:0},{default:b(()=>[f(p,{size:"small",loading:a.isLoading,type:"primary",onClick:l},{default:b(()=>[R(j(a.isLoading?h(s)("main.opt.loading"):h(s)("main.auto.fetch.title")),1)]),_:1},8,["loading"])]),_:1})):X("",!0)])}}}),ku={key:1,id:"batch-publish-index"},Su={class:"publish-form"},Eu={key:1,class:"normal-mode"},Cu={key:2,class:"complex-mode"},Au=["href","title"],Uu=J({__name:"SinglePublishDoPublish",setup(u){const o=W("single-publish-do-publish"),{t}=Z(),s=Xe(),{query:e}=Xe(),{kernelApi:a}=Re(),{doSinglePublish:n,doSingleDelete:i,initPublishMethods:l,doForceSingleDelete:c}=Ys(),r=_t(),{getPublishCfg:m}=qs(),y=Ke.systemCfg.map(N=>N.platformKey),p=ce(s.params),g=p.key,w=p.id,d=ce({isInit:!1,method:e.method,isPublishLoading:!1,isDeleteLoading:!1,errMsg:"",siyuanPost:{},platformPost:{},mergedPost:{},publishCfg:{},tagConfig:{},categoryConfig:{},knowledgeSpaceConfig:{},postPreviewUrl:"",useAi:!1,editType:ze.EditMode_simple,actionEnable:!0}),v=async()=>{try{d.isPublishLoading=!0,d.actionEnable=!1,le.value=!1,d.errMsg="",o.info("ä¿å­˜åˆ°ç³»ç»Ÿå¹³å°å¼€å§‹");for(const G of y){const be=await m(G),ot=ve.cloneDeep(d.mergedPost);await n(G,w,be,ot)}o.info("ä¿å­˜åˆ°ç³»ç»Ÿå¹³å°ç»“æŸ"),o.info("å•ä¸ªå¸¸è§„å‘å¸ƒå¼€å§‹"),d.mergedPost.editMode=d.editType;const N=await n(g,w,d.publishCfg,d.mergedPost);o.info("normal publish processResult =>",N),o.info("å•ä¸ªå¸¸è§„å‘å¸ƒç»“æŸ"),N.status?d.method===at.METHOD_ADD?ee.success("æ–‡ç« å‘å¸ƒæˆåŠŸï¼å¦‚éœ€ç¼–è¾‘è¯·é‡æ–°æ‰“å¼€"):(d.actionEnable=!0,ee.success("æ–‡ç« æ›´æ–°æˆåŠŸï¼")):(d.actionEnable=!0,o.error(N.errMsg),d.errMsg=N.errMsg,ee.error(N.errMsg))}catch(N){o.error(t("main.opt.failure")+"=>",N),d.errMsg=N.toString(),ee.error(N.toString())}finally{d.isPublishLoading=!1,le.value=!0}},P=async()=>{const N=$(),G=B();Pt.confirm(`ç¡®è®¤è¦åˆ é™¤ [${N} - ${G}] ä¸‹çš„è¿™ç¯‡æ–‡ç« å—ï¼Œæ­¤å¹³å°çš„æ–‡ç« æ•°æ®å°†æ°¸ä¹…åˆ é™¤ ï¼Ÿ`,"æ¸©é¦¨æç¤º",{type:"error",icon:qe(Hs),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{await S()}).catch(()=>{})},S=async()=>{try{d.isDeleteLoading=!0,d.actionEnable=!1,d.errMsg="";const N=await i(g,w,d.publishCfg);if(N.status){const G=$(),be=B();ee.success(`[${G} - ${be}] æ–‡ç« åˆ é™¤æˆåŠŸ`),setTimeout(()=>{d.method=at.METHOD_ADD,window.location.href=Lt.setUrlParameter(window.location.href,"method",d.method),window.location.reload()},200)}else d.actionEnable=!0,o.error(N.errMsg),d.errMsg=N.errMsg,ee.error(N.errMsg)}catch(N){o.error(t("main.opt.failure")+"=>",N),d.errMsg=N.toString(),ee.error(N.toString())}finally{d.isDeleteLoading=!1}},k=async()=>{try{d.errMsg="",await c(g,w,d.publishCfg);const N=$(),G=B();ee.success(`[${N} - ${G}] æ–‡ç« ä¿¡æ¯å·²å¼ºåˆ¶åˆ é™¤`),setTimeout(()=>{d.method=at.METHOD_ADD,window.location.href=Lt.setUrlParameter(window.location.href,"method",d.method),window.location.reload()},200)}catch(N){d.errMsg=N.message,ee.error(N.message)}finally{d.isDeleteLoading=!1}},M=async()=>{await x(),await K(),ee.success("å±žæ€§å·²ç»æˆåŠŸåŒæ­¥åˆ°æ€æº")},x=async()=>{var G,be;const N={[nt.Sys_memo]:d.mergedPost.shortDesc,[nt.Sys_tags]:d.mergedPost.mt_keywords,[nt.Custom_categories]:((be=(G=d.mergedPost)==null?void 0:G.categories)==null?void 0:be.join(","))??[]};await a.setBlockAttrs(w,N),o.debug("ä¿å­˜å†…ç½®å¹³å°å±žæ€§",N)},K=async()=>{const N=d.mergedPost.yaml,G=$s(g);await a.setSingleBlockAttr(w,G,N),o.debug("ä¿å­˜å½“å‰å¹³å°å±žæ€§",{yaml:ie(N)})},$=()=>{var G;const N=(G=d.publishCfg)==null?void 0:G.dynCfg;return(N==null?void 0:N.platformName)||""},B=()=>{var be,ot,vt,ct,ne,de;const N=(be=d.publishCfg)==null?void 0:be.cfg;let G=(N==null?void 0:N.blogName)||"";if(N!=null&&N.knowledgeSpaceEnabled&&((vt=(ot=d.mergedPost)==null?void 0:ot.cate_slugs)==null?void 0:vt.length)>0){let se;((ne=(ct=d.mergedPost)==null?void 0:ct.categories)==null?void 0:ne.length)>0?se=(de=d.mergedPost)==null?void 0:de.categories[0]:se="",G=se??""}return G},A=yn(()=>{const N=$(),G=B();let be="å½“å‰æ“ä½œçš„å¹³å°ä¸º - ";const ot=N||g;return be+=Mt.longPlatformName(ot,11),G&&(be+=" - "+G),be}),F=async N=>{d.editType=N,o.debug("syncEditMode in single publish")},U=N=>{d.mergedPost.title=N,o.debug("syncPublishTitle in single publish")},z=N=>{d.mergedPost.shortDesc=N,d.mergedPost.mt_text_more=N,d.mergedPost.mt_excerpt=N,o.debug("syncDesc in single publish")},L=N=>{d.mergedPost.mt_keywords=N==null?void 0:N.join(","),o.debug("syncTags in single publish")},V=N=>{d.mergedPost.tags_slugs=N==null?void 0:N.join(","),o.debug("syncTagSlugs in single publish")},Y=N=>{d.mergedPost.categories=N,o.debug("syncCates in single publish")},Pe=N=>{d.mergedPost.cate_slugs=N,o.debug("syncCateSlugs in single publish")},Be=(N,G)=>{d.mergedPost.dateCreated=N,d.mergedPost.dateUpdated=G,o.debug("syncPublishTime in single publish")},He=(N,G)=>{d.mergedPost.post_status=N,d.mergedPost.wp_password=G,o.debug("syncPublishStatus in single publish")},Qe=N=>{d.mergedPost=N,o.debug("syncPost in single publish")},Ye=()=>{const N="/publish/singlePublish";o.info("will go to =>",N);const G={path:N,query:{id:w}};r.push(G)},Le=async()=>{try{const{mergedPost:N,postPreviewUrl:G}=await l.doInitSinglePage(g,w,d.method,d.publishCfg);d.mergedPost=N,d.postPreviewUrl=G}catch(N){const G=t("main.opt.failure")+"=>"+N;throw o.error(t("main.opt.failure")+"=>",N),await a.pushErrMsg({msg:G,timeout:7e3}),N}},Ge=()=>{let N=!1,G=0;for(;!N&&G<3;)try{Ot(),N=!0}catch(be){o.error(`${t("main.opt.failure")} => ${be}`),G++}return o.info(`ç¬¬${G}æ¬¡å°è¯•å°±æ£€æµ‹AIçŠ¶æ€: ${N}`),N},le=q(!1),{loadingTime:We}=Xs(le);return Ze(async()=>{var N,G;o.info("èŽ·å–åˆ°çš„IDä¸º=>",w);try{d.publishCfg=await m(g),await Le(),d.mergedPost=await l.assignInitAttrs(d.mergedPost,w,d.publishCfg);const be=d.publishCfg.cfg;d.tagConfig={apiType:g,cfg:be},d.categoryConfig={cateEnabled:be.cateEnabled,readonlyMode:d.method===at.METHOD_EDIT&&!be.allowCateChange,readonlyModeTip:(N=be==null?void 0:be.placeholder)==null?void 0:N.cateReadonlyModeTip,apiType:g,cfg:be},d.knowledgeSpaceConfig={cateEnabled:be.knowledgeSpaceEnabled,readonlyMode:d.method===at.METHOD_EDIT&&!be.allowKnowledgeSpaceChange,readonlyModeTip:(G=be==null?void 0:be.placeholder)==null?void 0:G.knowledgeSpaceReadonlyModeTip,apiType:g,cfg:be},o.debug("single publish inited mergedPost =>",ie(d.mergedPost)),d.useAi=Ge(),d.editType=ze.EditMode_simple}catch(be){const ot=t("main.opt.failure")+"=>"+be;o.error(t("main.opt.failure")+"=>",be),await a.pushErrMsg({msg:ot,timeout:7e3})}finally{d.isInit=!0,le.value=!0}}),(N,G)=>{const be=Dt,ot=js,vt=Ve,ct=Hi,ne=au,de=xo,se=Ie,ke=Ue,Ne=Ni,bt=$i,je=Zp,kt=Vp,gt=Se,Gt=st,bs=ii,ws=li;return _(),C($e,{title:"å¸¸è§„å‘å¸ƒ","has-back-emit":!0,onBackEmit:Ye},{default:b(()=>[d.isInit?(_(),O("div",ku,[f(ot,{"loading-time":h(We)},null,8,["loading-time"]),f(vt,{class:"top-tip",title:A.value,type:"info",closable:!1},null,8,["title"]),d.useAi?(_(),C(vt,{key:0,class:"top-tip",title:h(t)("category.ai.enabled"),type:"success",closable:!0},null,8,["title"])):X("",!0),h(T).isEmptyString(d.errMsg)?X("",!0):(_(),C(vt,{key:1,class:"top-tip",title:d.errMsg,type:"error",closable:!0},null,8,["title"])),f(ws,null,{default:b(()=>[f(bs,null,{default:b(()=>[E("div",Su,[f(Gt,{"label-width":"100px"},{default:b(()=>{var Vt,he;return[f(Li,{"edit-type":d.editType,"onUpdate:editType":G[0]||(G[0]=oe=>d.editType=oe),onEmitSyncEditMode:F},null,8,["edit-type"]),d.editType===h(ze).EditMode_source?(_(),C(ct,{key:0,modelValue:d.mergedPost,"onUpdate:modelValue":G[1]||(G[1]=oe=>d.mergedPost=oe),"api-type":h(g),"page-id":h(w),cfg:d.publishCfg.cfg,onEmitSyncPost:Qe,onEdmtSyncToSiyuan:M},null,8,["modelValue","api-type","page-id","cfg"])):(_(),O("div",Eu,[f(Gi,{"use-ai":d.useAi,"onUpdate:useAi":G[2]||(G[2]=oe=>d.useAi=oe),modelValue:d.mergedPost.title,"onUpdate:modelValue":G[3]||(G[3]=oe=>d.mergedPost.title=oe),md:d.mergedPost.markdown,"onUpdate:md":G[4]||(G[4]=oe=>d.mergedPost.markdown=oe),html:d.mergedPost.html,"onUpdate:html":G[5]||(G[5]=oe=>d.mergedPost.html=oe),onEmitSyncPublishTitle:U},null,8,["use-ai","modelValue","md","html"]),(Vt=d.publishCfg.cfg)!=null&&Vt.knowledgeSpaceEnabled?(_(),C(Pu,{key:0,"knowledge-space-type":d.publishCfg.cfg.knowledgeSpaceType,"onUpdate:knowledgeSpaceType":G[6]||(G[6]=oe=>d.publishCfg.cfg.knowledgeSpaceType=oe),"knowledge-space-config":d.knowledgeSpaceConfig,"onUpdate:knowledgeSpaceConfig":G[7]||(G[7]=oe=>d.knowledgeSpaceConfig=oe),"cate-slugs":d.mergedPost.cate_slugs,"onUpdate:cateSlugs":G[8]||(G[8]=oe=>d.mergedPost.cate_slugs=oe),onEmitSyncCateSlugs:Pe},null,8,["knowledge-space-type","knowledge-space-config","cate-slugs"])):X("",!0),(he=d.publishCfg.cfg)!=null&&he.tagSlugEnabled?(_(),C(ne,{key:1,cfg:d.publishCfg.cfg,"onUpdate:cfg":G[9]||(G[9]=oe=>d.publishCfg.cfg=oe),"api-type":h(g),"onUpdate:apiType":G[10]||(G[10]=oe=>as(g)?g.value=oe:null),"tag-slugs":d.mergedPost.tags_slugs,"onUpdate:tagSlugs":G[11]||(G[11]=oe=>d.mergedPost.tags_slugs=oe),onEmitSyncTagSlugs:V},null,8,["cfg","api-type","tag-slugs"])):X("",!0),f(de,{"border-style":"dashed"}),d.editType===h(ze).EditMode_complex?(_(),O("div",Cu,[f(ke,{label:h(t)("main.slug")},{default:b(()=>[f(se,{modelValue:d.mergedPost.wp_slug,"onUpdate:modelValue":G[12]||(G[12]=oe=>d.mergedPost.wp_slug=oe),disabled:!0},null,8,["modelValue"])]),_:1},8,["label"]),f(Ne,{"use-ai":d.useAi,"onUpdate:useAi":G[13]||(G[13]=oe=>d.useAi=oe),"page-id":h(w),"onUpdate:pageId":G[14]||(G[14]=oe=>as(w)?w.value=oe:null),desc:d.mergedPost.shortDesc,"onUpdate:desc":G[15]||(G[15]=oe=>d.mergedPost.shortDesc=oe),md:d.mergedPost.markdown,"onUpdate:md":G[16]||(G[16]=oe=>d.mergedPost.markdown=oe),html:d.mergedPost.html,"onUpdate:html":G[17]||(G[17]=oe=>d.mergedPost.html=oe),onEmitSyncDesc:z},null,8,["use-ai","page-id","desc","md","html"]),d.publishCfg.cfg.tagEnabled?(_(),C(bt,{key:0,"use-ai":d.useAi,"onUpdate:useAi":G[18]||(G[18]=oe=>d.useAi=oe),"page-id":h(w),"onUpdate:pageId":G[19]||(G[19]=oe=>as(w)?w.value=oe:null),tags:d.mergedPost.mt_keywords,"onUpdate:tags":G[20]||(G[20]=oe=>d.mergedPost.mt_keywords=oe),md:d.mergedPost.markdown,"onUpdate:md":G[21]||(G[21]=oe=>d.mergedPost.markdown=oe),html:d.mergedPost.html,"onUpdate:html":G[22]||(G[22]=oe=>d.mergedPost.html=oe),"tag-config":d.tagConfig,"onUpdate:tagConfig":G[23]||(G[23]=oe=>d.tagConfig=oe),onEmitSyncTags:L},null,8,["use-ai","page-id","tags","md","html","tag-config"])):X("",!0),d.publishCfg.cfg.cateEnabled?(_(),C(je,{key:1,"use-ai":d.useAi,"onUpdate:useAi":G[24]||(G[24]=oe=>d.useAi=oe),"category-type":d.publishCfg.cfg.categoryType,"onUpdate:categoryType":G[25]||(G[25]=oe=>d.publishCfg.cfg.categoryType=oe),"category-config":d.categoryConfig,"onUpdate:categoryConfig":G[26]||(G[26]=oe=>d.categoryConfig=oe),categories:d.mergedPost.categories,"onUpdate:categories":G[27]||(G[27]=oe=>d.mergedPost.categories=oe),md:d.mergedPost.markdown,"onUpdate:md":G[28]||(G[28]=oe=>d.mergedPost.markdown=oe),html:d.mergedPost.html,"onUpdate:html":G[29]||(G[29]=oe=>d.mergedPost.html=oe),onEmitSyncCates:Y},null,8,["use-ai","category-type","category-config","categories","md","html"])):X("",!0),d.publishCfg.dynCfg.platformType===h(ye).Metaweblog||d.publishCfg.dynCfg.platformType===h(ye).Wordpress?(_(),C(kt,{key:2,modelValue:d.mergedPost,"onUpdate:modelValue":G[30]||(G[30]=oe=>d.mergedPost=oe),onEmitSyncPublishStatus:He},null,8,["modelValue"])):X("",!0),d.publishCfg.dynCfg.platformType!==h(ye).Metaweblog&&d.publishCfg.dynCfg.platformType!==h(ye).Wordpress?(_(),C(Ri,{key:3,modelValue:d.mergedPost,"onUpdate:modelValue":G[31]||(G[31]=oe=>d.mergedPost=oe),onEmitSyncPublishTime:Be},null,8,["modelValue"])):X("",!0),f(de,{"border-style":"dashed"})])):X("",!0)])),f(ke,{"label-width":"100px",class:"form-action"},{default:b(()=>[f(gt,{type:"primary",loading:d.isPublishLoading,onClick:v,disabled:!d.actionEnable},{default:b(()=>[R(j(d.method===h(at).METHOD_ADD?h(t)("main.publish"):h(t)("main.update")),1)]),_:1},8,["loading","disabled"]),d.method===h(at).METHOD_EDIT?(_(),C(gt,{key:0,type:"danger",loading:d.isDeleteLoading,onClick:P,disabled:!d.actionEnable,class:"btn-rm-action"},{default:b(()=>[R(j(h(t)("main.cancel")),1)]),_:1},8,["loading","disabled"])):X("",!0),d.method===h(at).METHOD_EDIT?(_(),C(gt,{key:1,type:"danger",onClick:k,disabled:!d.actionEnable,class:"btn-rm-action"},{default:b(()=>[R(j(h(t)("main.force.cancel")),1)]),_:1},8,["disabled"])):X("",!0),f(gt,{type:"warning",onClick:M,disabled:!d.actionEnable&&d.editType!==h(ze).EditMode_source},{default:b(()=>G[32]||(G[32]=[R(" åŒæ­¥ä¿®æ”¹åˆ°æ€æºç¬”è®° ")])),_:1},8,["disabled"])]),_:1}),f(ke,null,{default:b(()=>[f(gt,{type:d.method===h(at).METHOD_EDIT?"success":"danger",text:"",disabled:""},{default:b(()=>[R(j(d.method===h(at).METHOD_EDIT?h(t)("main.publish.status.published"):h(t)("main.publish.status.unpublish")),1)]),_:1},8,["type"]),d.method===h(at).METHOD_EDIT?(_(),O("a",{key:0,href:d.postPreviewUrl,title:d.postPreviewUrl,target:"_blank"},j(h(t)("main.publish.see.preview")),9,Au)):X("",!0)]),_:1})]}),_:1})])]),_:1})]),_:1})])):(_(),C(be,{key:0,class:"placeholder",rows:5,animated:""}))]),_:1})}}}),Iu=pe(Uu,[["__scopeId","data-v-4b349d35"]]),xu={class:"form-tag-cates"},Mu={key:0},Du=J({__name:"CommonCategories",props:{useAi:{type:Boolean,default:!1},cates:{type:Array,default:[]},md:{type:String,default:""},html:{type:String,default:""}},emits:["emitSyncCates"],setup(u,{emit:o}){const t=W("common-categories"),{t:s}=Z(),e=u,a=q(),n=ce({isLoading:!1,useAi:e.useAi,cate:{inputValue:"",dynamicCates:e.cates.length==0?[]:e.cates,inputVisible:!1},recommCates:[],md:e.md,html:e.html});Je(()=>e.useAi,c=>{n.useAi=c}),Je(()=>e.html,c=>{n.html=c});const i=o,l={handleTagClose:c=>{n.cate.dynamicCates.splice(n.cate.dynamicCates.indexOf(c),1),i("emitSyncCates",n.cate.dynamicCates)},tagShowInput:()=>{n.cate.inputVisible=!0,wn(()=>{a.value.input.focus()})},handleTagInputConfirm:()=>{n.cate.inputValue&&(n.cate.dynamicCates.push(n.cate.inputValue),i("emitSyncCates",n.cate.dynamicCates)),n.cate.inputVisible=!1,n.cate.inputValue=""},fetchCate:async()=>{try{n.isLoading=!0;const c=Qs.categoryPrompt.content,{chat:r,getChatInput:m}=Ot(),y=await r(c,{name:"categories",systemMessage:m(n==null?void 0:n.md,n.html)});if(T.isEmptyString(y)){ee.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åå¥½è®¾ç½®é…ç½®è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}const p=te.safeParse(y,{});if(!(p!=null&&p.categories)||(p==null?void 0:p.categories.length)==0)throw new Error("æ–‡æ¡£ä¿¡æ¯é‡å¤ªå°‘ï¼Œæœªèƒ½æŠ½å–æœ‰æ•ˆä¿¡æ¯");n.recommCates=p.categories,t.info("ä½¿ç”¨AIæ™ºèƒ½ç”Ÿæˆçš„åˆ†ç±»ç»“æžœ =>",{inputWord:c,chatText:y})}catch(c){t.error(s("main.opt.failure")+"=>",c),ee.error(s("main.opt.failure")+"=>"+c)}finally{n.isLoading=!1}}};return(c,r)=>{const m=Sn,y=Ie,p=Se,g=Ue,w=Ve;return _(),O("div",xu,[f(g,{label:h(s)("main.commonn.cate.title")},{default:b(()=>[(_(!0),O(Ce,null,xe(n.cate.dynamicCates,d=>(_(),C(m,{key:d,"disable-transitions":!1,class:"mx-1 pub-tag",closable:"",onClose:v=>l.handleTagClose(d)},{default:b(()=>[R(j(d),1)]),_:2},1032,["onClose"]))),128)),n.cate.inputVisible?(_(),C(y,{key:0,ref_key:"tagRefInput",ref:a,modelValue:n.cate.inputValue,"onUpdate:modelValue":r[0]||(r[0]=d=>n.cate.inputValue=d),class:"ml-1 w-20 pub-tag-input",size:"small",onBlur:l.handleTagInputConfirm,onKeyup:Zn(l.handleTagInputConfirm,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(_(),C(p,{key:1,class:"button-new-tag ml-1 el-tag",size:"small",onClick:l.tagShowInput},{default:b(()=>[R(j(h(s)("main.cate.new")),1)]),_:1},8,["onClick"]))]),_:1},8,["label"]),n.useAi?(_(),O("div",Mu,[n.recommCates.length>0?(_(),C(g,{key:0,class:"recomm-show"},{default:b(()=>[r[1]||(r[1]=R(" æŽ¨èçš„åˆ†ç±»ï¼š ")),(_(!0),O(Ce,null,xe(n.recommCates,d=>(_(),C(m,{class:"ml-2 recomm-cate",type:"success"},{default:b(()=>[R(j(d),1)]),_:2},1024))),256))]),_:1})):X("",!0),f(g,{class:"cat-action"},{default:b(()=>[f(p,{size:"small",loading:n.isLoading,type:"primary",onClick:l.fetchCate},{default:b(()=>[R(j(n.isLoading?h(s)("main.opt.loading"):h(s)("main.auto.fetch.cate")),1)]),_:1},8,["loading","onClick"])]),_:1}),f(g,null,{default:b(()=>[f(w,{closable:!1,title:h(s)("category.ai.hand"),class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1})])):X("",!0),f(g,null,{default:b(()=>[f(w,{closable:!1,title:h(s)("category.batch.not.supported"),class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1}),r[2]||(r[2]=E("div",{class:"form-item-bottom"},null,-1))])}}}),Ou=pe(Du,[["__scopeId","data-v-97f1c3c2"]]),Vu={},$u={class:"publish-tips"};function Nu(u,o){const t=Ve;return _(),O("div",$u,[f(t,{closable:!1,title:"å¤šå¹³å°æ–‡ç« åˆ†å‘ã€‚å…¶ä¸­æ€æºç¬”è®°ä¸ºå†…ç½®å¹³å°ï¼Œè¿™é‡Œçš„ä¿®æ”¹å‘å¸ƒåŽï¼Œä¹Ÿä¼šåŒæ­¥æ›´æ–°æ€æºç¬”è®°",class:"top-tip",type:"info"})])}const Hu=pe(Vu,[["render",Nu],["__scopeId","data-v-79abd8eb"]]),Lu={class:"syp-distri-platform-container"},Ru=["onClick"],Gu=["innerHTML"],Bu=["innerHTML"],ju=["innerHTML"],Ku=J({__name:"PublishPlatform",props:{id:{type:String,default:""}},emits:["emitSyncDynList"],setup(u,{emit:o}){const t=W("publish-platform"),s=u,{getSetting:e}=me(),a=Ke.systemCfg.map(c=>c.platformKey),n=ce({dynamicConfigArray:[],selectedKeys:[].concat(a)}),i=o;i&&(t.info("selectedKeys=>",n.selectedKeys),i("emitSyncDynList",n.selectedKeys));const l=c=>{var r;n.selectedKeys.includes(c)?n.selectedKeys=((r=n.selectedKeys)==null?void 0:r.filter(m=>m!==c))??[]:n.selectedKeys.push(c),i&&(t.info("selectedKeys=>",n.selectedKeys),i("emitSyncDynList",n.selectedKeys))};return Ze(async()=>{var p;const c=await e(),m=(p=te.safeParse(c[Me],{}).totalCfg)==null?void 0:p.filter(g=>g.isEnabled===!0&&g.isAuth===!0);n.dynamicConfigArray=m||[];const y=c[s.id]??{};n.dynamicConfigArray.forEach(g=>{const w=g.platformKey,d=Ee(w);if(!T.isEmptyString(d)){const v=y[d]??"";T.isEmptyString(v)||l(w)}})}),(c,r)=>{const m=Mo,y=ri;return _(),O("div",null,[r[0]||(r[0]=E("p",null,"è¯·é€‰æ‹©è¦å‘å¸ƒçš„å¹³å°ï¼š",-1)),E("div",Lu,[(_(!0),O(Ce,null,xe(n.dynamicConfigArray,p=>(_(),O("a",{class:"distri-item",onClick:g=>l(p.platformKey)},[f(y,{content:h(Mt).longPlatformName(p.platformName,20),placement:"bottom"},{default:b(()=>[f(m,{class:"platform-icon"},{default:b(()=>[E("span",{innerHTML:p.platformIcon},null,8,Gu)]),_:2},1024)]),_:2},1032,["content"]),n.selectedKeys.includes(p.platformKey)?(_(),O("span",{key:0,class:"icon-yes",innerHTML:h(Te).iconOTYes},null,8,Bu)):(_(),O("span",{key:1,class:"icon-no",innerHTML:h(Te).iconOTNo},null,8,ju))],8,Ru))),256))])])}}}),Wu=pe(Ku,[["__scopeId","data-v-931dabf2"]]);var os=(u=>(u.Override="Override",u.Merge="Merge",u))(os||{}),Fu={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const zu={id:"batch-publish-index"},Ju={class:"error-total-msg"},qu=["onClick"],Yu={key:0,class:"success-result success-tips"},Xu={class:"platform"},Zu=["href"],Qu={class:"publish-form"},ed={key:2,class:"normal-mode"},td={class:"distri-type"},sd={key:0,class:"complex-mode"},od=J({__name:"BatchPublishIndex",props:{id:{type:String,default:""}},setup(u){const o=W("publisher-index"),t=u,{t:s}=Z(),{doSinglePublish:e,doSingleDelete:a,doForceSingleDelete:n,initPublishMethods:i}=Ys(),{blogApi:l}=Re(),{getPublishCfg:c}=qs(),{kernelApi:r}=Re(),m=Ke.systemCfg.map(L=>L.platformKey),y=T.isEmptyString(t.id)?Fu.VITE_DEV_PAGE_ID:t.id,p=ce({isInit:!1,isPublishLoading:!1,isDeleteLoading:!1,showProcessResult:!1,errCount:0,successBatchResults:[],failBatchResults:[],siyuanPost:{},publishCfg:{},categoryConfig:{},useAi:!1,dynList:[],editType:ze.EditMode_simple,distriPattern:os.Merge,actionEnable:!0}),g=async()=>{try{if(p.isPublishLoading=!0,U.value=!1,p.dynList.length===0)throw new Error("å¿…é¡»é€‰æ‹©ä¸€ä¸ªåˆ†å‘å¹³å°");p.errCount=0,p.failBatchResults=[],p.successBatchResults=[];const L=ve.cloneDeep(p.siyuanPost);for(const V of p.dynList){let Y;if(m.includes(V))o.info(`å¼€å§‹å‘å¸ƒ [${V}] ç³»ç»Ÿå†…ç½®å¹³å°`),Y=L;else{o.info(`å¼€å§‹å‘å¸ƒ [${V}] è‡ªå®šä¹‰å¹³å°`);const Be=await c(V);p.publishCfg=Be,Y=await i.assignInitAttrs(L,y,p.publishCfg),p.distriPattern===os.Override?(Y=i.doOverideBatchPost(L,Y),o.debug("æ‰¹é‡åˆ†å‘æ¨¡å¼æ–‡ç« å·²è¦†ç›–",{siyuanPost:ie(L),mergedPost:ie(Y)})):(Y=i.doMergeBatchPost(L,Y),o.debug("æ‰¹é‡åˆ†å‘æ¨¡å¼æ–‡ç« å·²åˆå¹¶",{siyuanPost:ie(L),mergedPost:ie(Y)}))}const Pe=await e(V,y,p.publishCfg,Y);Pe.status?p.successBatchResults.push(Pe):(p.failBatchResults.push(Pe),p.errCount++)}p.actionEnable=!1,p.showProcessResult=!0,p.errCount===0?ee.success("å¤šå¹³å°æ–‡ç« åˆ†å‘æˆåŠŸ"):ee.error(`å¤šå¹³å°æ–‡ç« åˆ†å‘å¤±è´¥ï¼Œå¤±è´¥ä¸ªæ•°ï¼š${p.errCount}`)}catch(L){const V=s("main.opt.failure")+"=>"+L;o.error(s("main.opt.failure")+"=>",L),await r.pushErrMsg({msg:V,timeout:7e3})}finally{p.isPublishLoading=!1,U.value=!0}},w=async()=>{Pt.confirm(`ç¡®è®¤è¦åˆ é™¤å¹³å° ${p.dynList.join("ã€")} ä¸‹çš„è¿™ç¯‡æ–‡ç« å—ï¼Œæ­¤å¹³å°æ–‡ç« æ•°æ®ä¹Ÿå°†æ°¸ä¹…åˆ é™¤ [æ³¨æ„ï¼šç³»ç»Ÿå†…ç½®å¹³å°ä¼šå¿½ç•¥ï¼Œä¸åšåˆ é™¤] ï¼Ÿ`,"æ¸©é¦¨æç¤º",{type:"error",icon:qe(Hs),confirmButtonText:s("main.opt.ok"),cancelButtonText:s("main.opt.cancel")}).then(async()=>{await d()}).catch(()=>{})},d=async()=>{try{if(p.isDeleteLoading=!0,p.dynList.length===0)throw new Error("å¿…é¡»é€‰æ‹©ä¸€ä¸ªåˆ†å‘å¹³å°");p.errCount=0,p.failBatchResults=[],p.successBatchResults=[];for(const L of p.dynList){if(m.includes(L)){o.info(`[${L}] ç³»ç»Ÿå†…ç½®å¹³å°ï¼Œä¸å¯åˆ é™¤ï¼Œè·³è¿‡`);continue}const V=await c(L);p.publishCfg=V;const Y=await a(L,y,V);Y.status||(p.failBatchResults.push(Y),p.errCount++)}p.actionEnable=!1,p.showProcessResult=!0,p.errCount===0?ee.success("å¤šå¹³å°æ–‡ç« åˆ é™¤æˆåŠŸ"):ee.error(`å¤šå¹³å°æ–‡ç« åˆ é™¤å¤±è´¥ï¼Œå¤±è´¥ä¸ªæ•°ï¼š${p.errCount}`)}catch(L){const V=s("main.opt.failure")+"=>"+L;o.error(s("main.opt.failure")+"=>",L),await r.pushErrMsg({msg:V,timeout:7e3})}finally{p.isDeleteLoading=!1}},v=async(L,V,Y)=>{try{await n(L,V,Y)}catch(Pe){ee.error(Pe.message)}finally{p.isDeleteLoading=!1}},P=async()=>{const L={[nt.Sys_memo]:p.siyuanPost.shortDesc,[nt.Sys_tags]:p.siyuanPost.mt_keywords,[nt.Custom_categories]:p.siyuanPost.categories.join(",")};await r.setBlockAttrs(y,L),o.info("å†…ç½®å¹³å°ï¼Œä¿å­˜å±žæ€§",L),ee.success("å±žæ€§å·²ç»æˆåŠŸåŒæ­¥åˆ°æ€æº")},S=L=>{p.siyuanPost.title=L,o.debug("syncPublishTitle in batch publish")},k=async L=>{p.editType=L,o.debug("syncEditMode in batch publish")},M=L=>{p.dynList=L,o.debug("syncDynList in batch publish")},x=L=>{p.siyuanPost.shortDesc=L,p.siyuanPost.mt_text_more=L,p.siyuanPost.mt_excerpt=L,o.debug("syncDesc in batch publish")},K=L=>{p.siyuanPost.mt_keywords=L==null?void 0:L.join(","),o.debug("syncTags in batch publish")},$=L=>{p.siyuanPost.categories=L,o.debug("syncCates in batch publish")},B=(L,V)=>{p.siyuanPost.dateCreated=L,p.siyuanPost.dateUpdated=V,o.debug("syncPublishTime in batch publish")},A=()=>{Lt.reloadPage()},F=()=>{let L=!1,V=0;for(;!L&&V<3;)try{Ot(),L=!0}catch(Y){o.error(`${s("main.opt.failure")} => ${Y}`),V++}return o.info(`ç¬¬${V}æ¬¡å°è¯•å°±æ£€æµ‹AIçŠ¶æ€: ${L}`),L},U=q(!1),{loadingTime:z}=Xs(U);return Ze(async()=>{p.publishCfg=await c();const L=await l.getPost(y);p.siyuanPost=await i.assignInitSlug(L,y,p.publishCfg),o.debug("batch inited siyuanPost =>",ie(p.siyuanPost)),p.useAi=F(),p.editType=ze.EditMode_simple,p.isInit=!0,U.value=!0}),(L,V)=>{const Y=Dt,Pe=js,Be=Ve,He=Hi,Qe=Uo,Ye=Bs,Le=Ue,Ge=xo,le=Ie,We=Ni,N=$i,G=Ou,be=Se,ot=st,vt=ii,ct=li;return _(),O("div",zu,[f(ct,null,{default:b(()=>[p.isInit?(_(),C(vt,{key:1},{default:b(()=>[f(Pe,{"loading-time":h(z)},null,8,["loading-time"]),f(Hu),p.showProcessResult?(_(),O("div",{key:0,class:zt(p.errCount>0?"batch-result fail-tips":"batch-result success-tips")},[E("div",Ju,[R(" é”™è¯¯å¹³å°ä¸ªæ•° ["+j(p.errCount)+"] ï¼Œé€‰æ‹©çš„æ€»å¹³å°æ•° ["+j(p.dynList.length)+"] ã€‚ ",1),E("a",{class:"refresh-page",onClick:A},"åˆ·æ–°é¡µé¢")]),(_(!0),O(Ce,null,xe(p.failBatchResults,ne=>(_(),O("div",null,[R(" ["+j(ne.key)+"] "+j(h(T).isEmptyString(ne.name)?"":`[${ne.name}]`)+" "+j(ne.errMsg)+" ",1),E("a",{href:"javascript:void(0)",onClick:de=>v(ne.key,t.id,p.publishCfg)},"å¼ºåˆ¶è§£é™¤å…³è”",8,qu)]))),256)),p.successBatchResults.length>0?(_(),O("div",Yu,[V[24]||(V[24]=R(" å·²åˆ†å‘æˆåŠŸçš„ç»“æžœå¦‚ä¸‹ï¼š ")),(_(!0),O(Ce,null,xe(p.successBatchResults,ne=>(_(),O("p",null,[E("span",Xu,"["+j(ne.key)+"] "+j(h(T).isEmptyString(ne.name)?"":`[${ne.name}]`),1),V[23]||(V[23]=R(" ï¼Œ ")),E("a",{href:ne.previewUrl,target:"_blank"},"æŸ¥çœ‹æ–‡ç« ",8,Zu)]))),256))])):X("",!0)],2)):X("",!0),E("div",Qu,[f(ot,{"label-width":"100px"},{default:b(()=>[p.useAi?(_(),C(Be,{key:0,class:"top-tip",title:h(s)("category.ai.enabled"),type:"success",closable:!0},null,8,["title"])):X("",!0),f(Li,{"edit-type":p.editType,"onUpdate:editType":V[0]||(V[0]=ne=>p.editType=ne),onEmitSyncEditMode:k},null,8,["edit-type"]),p.editType===h(ze).EditMode_source?(_(),C(He,{key:1,modelValue:p.siyuanPost,"onUpdate:modelValue":V[1]||(V[1]=ne=>p.siyuanPost=ne),"page-id":h(y)},null,8,["modelValue","page-id"])):(_(),O("div",ed,[f(Gi,{"use-ai":p.useAi,"onUpdate:useAi":V[2]||(V[2]=ne=>p.useAi=ne),modelValue:p.siyuanPost.title,"onUpdate:modelValue":V[3]||(V[3]=ne=>p.siyuanPost.title=ne),onEmitSyncPublishTitle:S,md:p.siyuanPost.markdown,"onUpdate:md":V[4]||(V[4]=ne=>p.siyuanPost.markdown=ne),html:p.siyuanPost.html,"onUpdate:html":V[5]||(V[5]=ne=>p.siyuanPost.html=ne)},null,8,["use-ai","modelValue","md","html"]),E("div",td,[f(Le,{label:"åˆ†å‘æ¨¡å¼"},{default:b(()=>[f(Ye,{modelValue:p.distriPattern,"onUpdate:modelValue":V[6]||(V[6]=ne=>p.distriPattern=ne),class:"ml-4 distri-type-check"},{default:b(()=>[f(Qe,{value:h(os).Override,size:"large"},{default:b(()=>V[25]||(V[25]=[R("è¦†ç›–")])),_:1},8,["value"]),f(Qe,{value:h(os).Merge,size:"large"},{default:b(()=>V[26]||(V[26]=[R("åˆå¹¶")])),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1}),f(Le,{class:"distri-tip"},{default:b(()=>[p.distriPattern===h(os).Override?(_(),C(Be,{key:0,closable:!1,title:h(s)("distri.type.overide.warn"),class:"distri-tip-alert",type:"error"},null,8,["title"])):(_(),C(Be,{key:1,closable:!1,title:h(s)("distri.type.merge.warn"),class:"distri-tip-alert",type:"warning"},null,8,["title"]))]),_:1})]),f(Ge,{"border-style":"dashed"}),p.editType===h(ze).EditMode_complex?(_(),O("div",sd,[f(Le,{label:h(s)("main.slug")},{default:b(()=>[f(le,{modelValue:p.siyuanPost.wp_slug,"onUpdate:modelValue":V[7]||(V[7]=ne=>p.siyuanPost.wp_slug=ne),disabled:!0},null,8,["modelValue"])]),_:1},8,["label"]),f(We,{"use-ai":p.useAi,"onUpdate:useAi":V[8]||(V[8]=ne=>p.useAi=ne),"page-id":h(y),"onUpdate:pageId":V[9]||(V[9]=ne=>as(y)?y.value=ne:null),desc:p.siyuanPost.shortDesc,"onUpdate:desc":V[10]||(V[10]=ne=>p.siyuanPost.shortDesc=ne),md:p.siyuanPost.markdown,"onUpdate:md":V[11]||(V[11]=ne=>p.siyuanPost.markdown=ne),html:p.siyuanPost.html,"onUpdate:html":V[12]||(V[12]=ne=>p.siyuanPost.html=ne),onEmitSyncDesc:x},null,8,["use-ai","page-id","desc","md","html"]),f(N,{"use-ai":p.useAi,"onUpdate:useAi":V[13]||(V[13]=ne=>p.useAi=ne),"page-id":h(y),"onUpdate:pageId":V[14]||(V[14]=ne=>as(y)?y.value=ne:null),tags:p.siyuanPost.mt_keywords,"onUpdate:tags":V[15]||(V[15]=ne=>p.siyuanPost.mt_keywords=ne),md:p.siyuanPost.markdown,"onUpdate:md":V[16]||(V[16]=ne=>p.siyuanPost.markdown=ne),html:p.siyuanPost.html,"onUpdate:html":V[17]||(V[17]=ne=>p.siyuanPost.html=ne),onEmitSyncTags:K},null,8,["use-ai","page-id","tags","md","html"]),f(G,{"use-ai":p.useAi,"onUpdate:useAi":V[18]||(V[18]=ne=>p.useAi=ne),cates:p.siyuanPost.categories,"onUpdate:cates":V[19]||(V[19]=ne=>p.siyuanPost.categories=ne),onEmitSyncCates:$,md:p.siyuanPost.markdown,"onUpdate:md":V[20]||(V[20]=ne=>p.siyuanPost.markdown=ne),html:p.siyuanPost.html,"onUpdate:html":V[21]||(V[21]=ne=>p.siyuanPost.html=ne)},null,8,["use-ai","cates","md","html"]),f(Ri,{modelValue:p.siyuanPost,"onUpdate:modelValue":V[22]||(V[22]=ne=>p.siyuanPost=ne),onEmitSyncPublishTime:B},null,8,["modelValue"]),f(Ge,{"border-style":"dashed"})])):X("",!0)])),f(Wu,{id:t.id,onEmitSyncDynList:M},null,8,["id"]),f(Ge,{"border-style":"dashed"}),f(Le,{"label-width":"100px",class:"form-action"},{default:b(()=>[f(be,{type:"primary",loading:p.isPublishLoading,onClick:g,disabled:!p.actionEnable},{default:b(()=>[R(j(h(s)("main.publish.start")),1)]),_:1},8,["loading","disabled"]),f(be,{type:"danger",loading:p.isDeleteLoading,onClick:w,disabled:!p.actionEnable,class:"btn-rm-action"},{default:b(()=>[R(j(h(s)("main.publish.remove")),1)]),_:1},8,["loading","disabled"]),f(be,{type:"warning",onClick:P,disabled:!p.actionEnable},{default:b(()=>V[27]||(V[27]=[R(" åŒæ­¥ä¿®æ”¹åˆ°æ€æºç¬”è®° ")])),_:1},8,["disabled"])]),_:1})]),_:1})])]),_:1})):(_(),C(Y,{key:0,class:"placeholder",rows:12,animated:"",style:{padding:"40px 12px"}}))]),_:1})])}}}),ad=pe(od,[["__scopeId","data-v-21bfab97"]]),nd=J({__name:"BatchPublish",setup(u){const{query:o}=Xe(),t=o.id??Zs();return(s,e)=>(_(),C(ad,{id:h(t)},null,8,["id"]))}}),id={key:0},ld={class:"chat-output"},rd=J({__name:"AiChat",setup(u){const o=W("chatgpt-test"),{t}=Z(),{query:s}=Xe(),{blogApi:e}=Re(),a=s.id??Zs(),n=q(""),i=q(""),l=ce({isLoading:!1,showPage:!T.isEmptyString(a),usePage:!1,siyuanPost:{}}),c=async()=>{if(n.value.trim()===""){ee.error("è¯·è¾“å…¥æ–‡æœ¬");return}l.isLoading=!0;try{const{chat:m}=Ot();let y=n.value;l.usePage&&(T.isEmptyString(l.siyuanPost.markdown)||(y=`${l.siyuanPost.markdown}
${y}`,o.info("ä½¿ç”¨å½“å‰æ–‡æ¡£ä½œä¸ºä¸Šä¸‹æ–‡")));const p=await m(y);if(T.isEmptyString(p)){ee.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åå¥½è®¾ç½®é…ç½®è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}i.value+=`> ${n.value}
${p}

`,n.value=""}catch(m){o.error(t("main.opt.failure")+"=>",m),ee.error(t("main.opt.failure")+"=>"+m)}finally{l.isLoading=!1}},r=()=>{i.value=""};return Ze(async()=>{if(l.showPage){const m=await e.getPost(a);l.siyuanPost=m}}),(m,y)=>{const p=Ve,g=Ie,w=Ue,d=qt,v=Se,P=st,S=$e;return _(),C(S,{title:"AIèŠå¤©"},{default:b(()=>[l.usePage&&l.showPage&&!h(T).isEmptyString(l.siyuanPost.markdown)?(_(),C(p,{key:0,closable:!1,title:`å½“å‰ä¸ºä¸Šä¸‹æ–‡æ¨¡å¼ï¼Œæ–‡æ¡£ä¸Šä¸‹æ–‡ä¸ºã€Š${l.siyuanPost.title}ã€‹`,class:"top-tip",type:"success"},null,8,["title"])):(_(),C(p,{key:1,closable:!1,title:"å½“å‰ä¸ºè‡ªç”±èŠå¤©æ¨¡å¼",class:"top-tip",type:"info"})),f(P,{class:"chatgpt-form"},{default:b(()=>[f(w,null,{default:b(()=>[f(g,{modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=k=>n.value=k),autosize:{minRows:4,maxRows:16},type:"textarea",class:"chat-input",placeholder:"è¯·è¾“å…¥æ–‡æœ¬..."},null,8,["modelValue"])]),_:1}),f(w,null,{default:b(()=>[l.showPage&&!h(T).isEmptyString(l.siyuanPost.markdown)?(_(),O("div",id,[f(d,{modelValue:l.usePage,"onUpdate:modelValue":y[1]||(y[1]=k=>l.usePage=k),class:"use-context"},null,8,["modelValue"]),y[2]||(y[2]=R(" Â  ä½¿ç”¨å½“å‰æ–‡æ¡£ä½œä¸ºä¸Šä¸‹æ–‡ "))])):X("",!0)]),_:1}),f(w,null,{default:b(()=>[f(v,{type:"primary",onClick:c,loading:l.isLoading},{default:b(()=>y[3]||(y[3]=[R("å‘é€æ¶ˆæ¯")])),_:1},8,["loading"]),f(v,{type:"danger",onClick:r},{default:b(()=>y[4]||(y[4]=[R("æ¸…å±")])),_:1})]),_:1}),f(w,null,{default:b(()=>[E("div",ld,[E("pre",null,j(i.value),1)])]),_:1})]),_:1})]),_:1})}}}),cd=pe(rd,[["__scopeId","data-v-45683f97"]]),pd={id:"test-list",class:"test-list-container"},ud=J({__name:"Test",setup(u){const o=_t(),t=[{title:"æ€æºç¬”è®°æµ‹è¯•",path:"/test/siyuan"},{title:"åšå®¢å›­æµ‹è¯•",path:"/test/cnblogs"},{title:"WordPressæµ‹è¯•",path:"/test/wordpress"},{title:"Typechoæµ‹è¯•",path:"/test/typecho"},{title:"è¯­é›€æµ‹è¯•",path:"/test/yuque"},{title:"çŸ¥ä¹Žæµ‹è¯•",path:"/test/zhihu"},{title:"CSDNæµ‹è¯•",path:"/test/csdn"},{title:"Picgoæµ‹è¯•",path:"/test/picgo"},{title:"å…¶ä»–æµ‹è¯•",path:"/test/other"},{title:"ChatGPTæµ‹è¯•",path:"/test/chat"}],s=async e=>{await o.push({path:e.path,query:{showBack:"true"}})};return(e,a)=>{const n=Se,i=$e;return _(),C(i,{title:"ç»„ä»¶æµ‹è¯•"},{default:b(()=>[E("div",pd,[(_(),O(Ce,null,xe(t,l=>f(n,{onClick:c=>s(l),type:"primary",size:"large",class:"test-button"},{default:b(()=>[R(j(l.title),1)]),_:2},1032,["onClick"])),64))])]),_:1})}}}),dd=pe(ud,[["__scopeId","data-v-9ca673a2"]]),gd={id:"siyuan-test"},md={class:"method-list"},hd={class:"item"},fd={class:"item"},yd={class:"item"},bd={key:0,class:"item"},wd={class:"item"},_d={class:"item"},Jo="getUsersBlogs",qo="getRecentPostsCount",Yo="getRecentPosts",Xo="newPost",Zo="getPost",Qo="editPost",ea="deletePost",ta="getCategories",sa="getPreviewUrl",oa="newMediaObject",vd=J({__name:"SiyuanTest",setup(u){const o=W("siyuan-test"),{t}=Z(),s=q("{}"),e=q(!1),a=q(null),n=q(""),i=q(!1),l=q("getUsersBlogs"),c=ce({options:[{value:Jo,label:"èŽ·å–åšå®¢ä¿¡æ¯"},{value:qo,label:"èŽ·å–æœ€æ–°æ–‡ç« æ•°ç›®"},{value:Yo,label:"èŽ·å–æœ€æ–°æ–‡ç« åˆ—è¡¨"},{value:Xo,label:"å‘å¸ƒæ–‡ç« "},{value:Zo,label:"èŽ·å–æ–‡ç« è¯¦æƒ…"},{value:Qo,label:"ç¼–è¾‘æ–‡ç« "},{value:ea,label:"åˆ é™¤æ–‡ç« "},{value:ta,label:"èŽ·å–åˆ†ç±»åˆ—è¡¨"},{value:sa,label:"èŽ·å–æ–‡ç« é¢„è§ˆåœ°å€"},{value:oa,label:"ä¸Šä¼ èµ„æºæ–‡ä»¶"}]}),r=p=>{switch(e.value=!1,p){case Jo:{s.value="{}";break}case qo:{s.value="{}";break}case Yo:{s.value=JSON.stringify({numOfPosts:10});break}case Xo:{s.value=JSON.stringify({title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]});break}case Zo:{s.value=JSON.stringify({postid:"20230526221603-3mgotyw"});break}case Qo:{s.value=JSON.stringify({postid:"20230527202519-k09a4gx",post:{title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜2",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹2",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]}});break}case ea:{s.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case ta:{s.value="{}";break}case sa:{s.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case oa:{s.value="{}",e.value=!0;break}default:{s.value="{}";break}}},m=async p=>{const g=p.target;g.files&&g.files[0]&&(a.value=g.files[0])},y=async()=>{i.value=!0,n.value="",n.value="siyuan requesting...";try{const p=new fe;switch(o.info("appInstance=>",p),l.value){case Jo:{const g=new mt("http://127.0.0.1:6806",""),w=new wt(g),v=await I.blogApi(p,w).getUsersBlogs();n.value=JSON.stringify(v),o.info("siyuan users blogs=>",v);break}case qo:{const g=new mt("http://127.0.0.1:6806",""),w=new wt(g),v=await I.blogApi(p,w).getRecentPostsCount();n.value=JSON.stringify(v),o.info("siyuan recent post count=>",v);break}case Yo:{const g=new mt("http://127.0.0.1:6806",""),w=new wt(g),d=I.blogApi(p,w),v=JSON.parse(s.value),P=await d.getRecentPosts(v.numOfPosts);n.value=JSON.stringify(P),o.info("siyuan recent post=>",P);break}case Xo:{const g=new mt("http://127.0.0.1:6806","");g.notebook="20230506132031-qbtyjdk";const w=new wt(g),d=I.blogApi(p,w),v=JSON.parse(s.value);let P=new tt;P={...P,...v};const S=await d.newPost(P);n.value=JSON.stringify(S);break}case Zo:{const g=new mt("http://127.0.0.1:6806",""),w=new wt(g),d=I.blogApi(p,w),P=JSON.parse(s.value).postid,S=await d.getPost(P);n.value=JSON.stringify(S),o.info("siyuan post=>",S);break}case Qo:{const g=new mt("http://127.0.0.1:6806","");g.notebook="20230506132031-qbtyjdk";const w=new wt(g),d=I.blogApi(p,w),v=JSON.parse(s.value),P=v.postid;let S=new tt;S={...S,...v.post};const k=await d.editPost(P,S);n.value=JSON.stringify(k);break}case ea:{const g=new mt("http://127.0.0.1:6806","");g.notebook="20230506132031-qbtyjdk";const w=new wt(g),d=I.blogApi(p,w),P=JSON.parse(s.value).postid,S=await d.deletePost(P);n.value=JSON.stringify(S);break}case ta:{const g=new mt("http://127.0.0.1:6806",""),w=new wt(g),v=await I.blogApi(p,w).getCategories();n.value=JSON.stringify(v),o.info("siyuan categories=>",v);break}case sa:{const g=new mt("http://127.0.0.1:6806",""),w=new wt(g),d=I.blogApi(p,w),P=JSON.parse(s.value).postid,S=await d.getPreviewUrl(P);n.value=JSON.stringify(S),o.info("siyuan preview url=>",S);break}case oa:{const g=new mt("http://127.0.0.1:6806",""),w=new wt(g),d=I.blogApi(p,w),v=a.value,P=await Js(v),S=new rs(v.name,v.type,P);o.info("mediaObject=>",S);const k=await d.newMediaObject(S,async()=>{const M=new FormData,x=new Blob([S.bits]);return M.append("file[]",x,S.name),M.append("assetsDirPath","/assets/"),await new ti(g).uploadAsset(M)});n.value=JSON.stringify(k),o.info("siyuan new mediaObject result=>",k);break}default:break}i.value=!1}catch(p){n.value=p,o.error(t("main.opt.failure")+"=>",p),i.value=!1}};return(p,g)=>{const w=pt,d=ut,v=Se,P=Ie,S=$e;return _(),C(S,{title:"siyuanæµ‹è¯•"},{default:b(()=>[E("div",gd,[E("div",md,[f(d,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=k=>l.value=k),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:b(()=>[(_(!0),O(Ce,null,xe(c.options,k=>(_(),C(w,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),E("div",hd,[f(v,{type:"primary",loading:i.value,onClick:y},{default:b(()=>g[3]||(g[3]=[R("å¼€å§‹æµ‹è¯•siyuan")])),_:1},8,["loading"])]),E("div",fd,[f(v,null,{default:b(()=>g[4]||(g[4]=[R("å…¥å‚")])),_:1})]),E("div",yd,[f(P,{modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=k=>s.value=k),type:"textarea",rows:5},null,8,["modelValue"])]),e.value?(_(),O("div",bd,[E("input",{type:"file",onChange:m},null,32)])):X("",!0),E("div",wd,[f(v,null,{default:b(()=>g[5]||(g[5]=[R("ç»“æžœ")])),_:1})]),E("div",_d,[f(P,{modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=k=>n.value=k),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),Pd=pe(vd,[["__scopeId","data-v-cfa9acd3"]]),Td={id:"cnblogs-test"},kd={class:"method-list"},Sd={class:"item"},Ed={class:"item"},Cd={class:"item"},Ad={key:0,class:"item"},Ud={class:"item"},Id={class:"item"},aa="getUsersBlogs",na="getRecentPostsCount",ia="getRecentPosts",la="newPost",ra="getPost",ca="editPost",pa="deletePost",ua="getCategories",da="getPreviewUrl",ga="newMediaObject",xd=J({__name:"CnblogsTest",setup(u){const o=W("cnblogs-test"),{t}=Z(),s=q("{}"),e=q(!1),a=q(null),n=q(""),i=q(!1),l=q("getUsersBlogs"),c=ce({options:[{value:aa,label:"èŽ·å–åšå®¢ä¿¡æ¯"},{value:na,label:"èŽ·å–æœ€æ–°æ–‡ç« æ•°ç›®"},{value:ia,label:"èŽ·å–æœ€æ–°æ–‡ç« åˆ—è¡¨"},{value:la,label:"å‘å¸ƒæ–‡ç« "},{value:ra,label:"èŽ·å–æ–‡ç« è¯¦æƒ…"},{value:ca,label:"ç¼–è¾‘æ–‡ç« "},{value:pa,label:"åˆ é™¤æ–‡ç« "},{value:ua,label:"èŽ·å–åˆ†ç±»åˆ—è¡¨"},{value:da,label:"èŽ·å–æ–‡ç« é¢„è§ˆåœ°å€"},{value:ga,label:"ä¸Šä¼ èµ„æºæ–‡ä»¶"}]}),r=p=>{switch(e.value=!1,p){case aa:{s.value="{}";break}case na:{s.value="{}";break}case ia:{s.value=JSON.stringify({numOfPosts:10});break}case la:{s.value=JSON.stringify({title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]});break}case ra:{s.value=JSON.stringify({postid:"17593464"});break}case ca:{s.value=JSON.stringify({postid:"17593464",post:{title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜2",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹2",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]}});break}case pa:{s.value=JSON.stringify({postid:"17593463"});break}case ua:{s.value="{}";break}case da:{s.value=JSON.stringify({postid:"17243968"});break}case ga:{s.value="{}",e.value=!0;break}default:{s.value="{}";break}}},m=async p=>{const g=p.target;g.files&&g.files[0]&&(a.value=g.files[0])},y=async()=>{i.value=!0,n.value="",n.value="cnblogs requesting...";try{const p=new fe;switch(o.info("appInstance=>",p),l.value){case aa:{const w=await we.getAdaptor("metaweblog_Cnblogs"),d=I.blogApi(p,w);o.info("cnblogsApi=>",d);const v=await d.getUsersBlogs();n.value=JSON.stringify(v),o.info("cnblogs users blogs=>",v);break}case na:{const w=await we.getAdaptor("metaweblog_Cnblogs"),d=I.blogApi(p,w);o.info("cnblogsApi=>",d);const v=await d.getRecentPostsCount();n.value=JSON.stringify(v),o.info("cnblogs getRecentPostsCount=>",v);break}case ia:{const w=await we.getAdaptor("metaweblog_Cnblogs"),d=I.blogApi(p,w);o.info("cnblogsApi=>",d);const v=await d.getRecentPosts(10);n.value=JSON.stringify(v),o.info("cnblogs getRecentPosts=>",v);break}case la:{const g=JSON.parse(s.value);let w=new tt;w={...w,...g};const v=await we.getAdaptor("metaweblog_Cnblogs"),S=await I.blogApi(p,v).newPost(w);n.value=JSON.stringify(S),o.info("cnblogs newPost=>",S);break}case ra:{const w=await we.getAdaptor("metaweblog_Cnblogs"),d=I.blogApi(p,w);o.info("cnblogsApi=>",d);const P=JSON.parse(s.value).postid,S=await d.getPost(P);n.value=JSON.stringify(S),o.info("cnblogs getPost=>",S);break}case ca:{const w=await we.getAdaptor("metaweblog_Cnblogs"),d=I.blogApi(p,w);o.info("cnblogsApi=>",d);const v=JSON.parse(s.value),P=v.postid;let S=new tt;S={...S,...v.post};const k=await d.editPost(P,S);n.value=JSON.stringify(k);break}case pa:{const w=await we.getAdaptor("metaweblog_Cnblogs"),d=I.blogApi(p,w);o.info("cnblogsApi=>",d);const P=JSON.parse(s.value).postid,S=await d.deletePost(P);n.value=JSON.stringify(S);break}case ua:{const w=await we.getAdaptor("metaweblog_Cnblogs"),d=I.blogApi(p,w);o.info("cnblogsApi=>",d);const v=await d.getCategories();n.value=JSON.stringify(v),o.info("cnblogs getCategories=>",v);break}case da:{const w=await we.getAdaptor("metaweblog_Cnblogs"),d=I.blogApi(p,w);o.info("cnblogsApi=>",d);const P=JSON.parse(s.value).postid,S=await d.getPreviewUrl(P);n.value=JSON.stringify(S),o.info("cnblogs getPreviewUrl=>",S);break}case ga:{const w=await we.getAdaptor("metaweblog_Cnblogs"),d=I.blogApi(p,w);o.info("cnblogsApi=>",d);const P=await In("https://static-rs-terwer.oss-cn-beijing.aliyuncs.com/test/image-20230812091531-hibwr1g.png"),S=P.imageBase64;o.debug("imageBase64=>",{imageBase64:S});const k=xn(S);o.debug("bits=>",k);const M=new rs(P.imageName,P.mimeType,k);o.info("mediaObject=>",M);const x=await d.newMediaObject(M);n.value=JSON.stringify(x),o.info("cnblogs new mediaObject result=>",x);break}default:break}i.value=!1}catch(p){n.value=p,o.error(t("main.opt.failure")+"=>",p),i.value=!1}};return(p,g)=>{const w=pt,d=ut,v=Se,P=Ie,S=$e;return _(),C(S,{title:"åšå®¢å›­æµ‹è¯•"},{default:b(()=>[E("div",Td,[E("div",kd,[f(d,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=k=>l.value=k),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:b(()=>[(_(!0),O(Ce,null,xe(c.options,k=>(_(),C(w,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),E("div",Sd,[f(v,{type:"primary",loading:i.value,onClick:y},{default:b(()=>g[3]||(g[3]=[R("å¼€å§‹æµ‹è¯•cnblogs")])),_:1},8,["loading"])]),E("div",Ed,[f(v,null,{default:b(()=>g[4]||(g[4]=[R("å…¥å‚")])),_:1})]),E("div",Cd,[f(P,{modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=k=>s.value=k),type:"textarea",rows:5},null,8,["modelValue"])]),e.value?(_(),O("div",Ad,[E("input",{type:"file",onChange:m},null,32)])):X("",!0),E("div",Ud,[f(v,null,{default:b(()=>g[5]||(g[5]=[R("ç»“æžœ")])),_:1})]),E("div",Id,[f(P,{modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=k=>n.value=k),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),Md=pe(xd,[["__scopeId","data-v-4331baa2"]]),Dd={id:"wordpress-test"},Od={class:"method-list"},Vd={class:"item"},$d={class:"item"},Nd={class:"item"},Hd={key:0,class:"item"},Ld={class:"item"},Rd={class:"item"},ma="getUsersBlogs",ha="getRecentPostsCount",fa="getRecentPosts",ya="newPost",ba="getPost",wa="editPost",_a="deletePost",va="getCategories",Pa="getPreviewUrl",Ta="newMediaObject",Gd=J({__name:"WordpressTest",setup(u){const o=W("wordpress-test"),{t}=Z(),s=q("{}"),e=q(!1),a=q(null),n=q(""),i=q(!1),l=q("getUsersBlogs"),c=ce({options:[{value:ma,label:"èŽ·å–åšå®¢ä¿¡æ¯"},{value:ha,label:"èŽ·å–æœ€æ–°æ–‡ç« æ•°ç›®"},{value:fa,label:"èŽ·å–æœ€æ–°æ–‡ç« åˆ—è¡¨"},{value:ya,label:"å‘å¸ƒæ–‡ç« "},{value:ba,label:"èŽ·å–æ–‡ç« è¯¦æƒ…"},{value:wa,label:"ç¼–è¾‘æ–‡ç« "},{value:_a,label:"åˆ é™¤æ–‡ç« "},{value:va,label:"èŽ·å–åˆ†ç±»åˆ—è¡¨"},{value:Pa,label:"èŽ·å–æ–‡ç« é¢„è§ˆåœ°å€"},{value:Ta,label:"ä¸Šä¼ èµ„æºæ–‡ä»¶"}]}),r=p=>{switch(e.value=!1,p){case ma:{s.value="{}";break}case ha:{s.value="{}";break}case fa:{s.value=JSON.stringify({numOfPosts:10});break}case ya:{s.value=JSON.stringify({title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]});break}case ba:{s.value=JSON.stringify({postid:"20230526221603-3mgotyw"});break}case wa:{s.value=JSON.stringify({postid:"20230527202519-k09a4gx",post:{title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜2",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹2",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]}});break}case _a:{s.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case va:{s.value="{}";break}case Pa:{s.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case Ta:{s.value="{}",e.value=!0;break}default:{s.value="{}";break}}},m=async p=>{const g=p.target;g.files&&g.files[0]&&(a.value=g.files[0])},y=async()=>{i.value=!0,n.value="",n.value="wordpress requesting...";try{const p=new fe;switch(o.info("appInstance=>",p),l.value){case ma:{const w=await we.getAdaptor("wordpress_Wordpress"),v=await I.blogApi(p,w).getUsersBlogs();n.value=JSON.stringify(v),o.info("wordpress users blogs=>",v);break}case ha:break;case fa:{const w=await we.getAdaptor("wordpress_Wordpress"),v=await I.blogApi(p,w).getRecentPosts(10);n.value=JSON.stringify(v),o.info("wordpress recent post=>",v);break}case ya:break;case ba:break;case wa:break;case _a:break;case va:break;case Pa:break;case Ta:{const g="wordpress_Wordpress",w=a.value,d=await Js(w),v=new rs(w.name,w.type,d);o.info("mediaObject=>",v);const P={name:v.name,type:v.type,bits:v.bits,overwrite:!0},S=await we.getAdaptor(g),M=await I.blogApi(p,S).newMediaObject(P);n.value=JSON.stringify(M),o.info("wordpress new mediaObject result=>",M);break}default:break}i.value=!1}catch(p){n.value=p,o.error(t("main.opt.failure")+"=>",p),i.value=!1}};return(p,g)=>{const w=pt,d=ut,v=Se,P=Ie,S=$e;return _(),C(S,{title:"WordPressæµ‹è¯•"},{default:b(()=>[E("div",Dd,[E("div",Od,[f(d,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=k=>l.value=k),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:b(()=>[(_(!0),O(Ce,null,xe(c.options,k=>(_(),C(w,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),E("div",Vd,[f(v,{type:"primary",loading:i.value,onClick:y},{default:b(()=>g[3]||(g[3]=[R("å¼€å§‹æµ‹è¯•wordpress")])),_:1},8,["loading"])]),E("div",$d,[f(v,null,{default:b(()=>g[4]||(g[4]=[R("å…¥å‚")])),_:1})]),E("div",Nd,[f(P,{modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=k=>s.value=k),type:"textarea",rows:5},null,8,["modelValue"])]),e.value?(_(),O("div",Hd,[E("input",{type:"file",onChange:m},null,32)])):X("",!0),E("div",Ld,[f(v,null,{default:b(()=>g[5]||(g[5]=[R("ç»“æžœ")])),_:1})]),E("div",Rd,[f(P,{modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=k=>n.value=k),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),Bd=pe(Gd,[["__scopeId","data-v-c35adef3"]]),jd={id:"typecho-test"},Kd={class:"method-list"},Wd={class:"item"},Fd={class:"item"},zd={class:"item"},Jd={key:0,class:"item"},qd={class:"item"},Yd={class:"item"},ka="getUsersBlogs",Sa="getRecentPostsCount",Ea="getRecentPosts",Ca="newPost",Aa="getPost",Ua="editPost",Ia="deletePost",xa="getCategories",Ma="getPreviewUrl",Da="newMediaObject",Xd=J({__name:"TypechoTest",setup(u){const o=W("typecho-test"),t=q("{}"),s=q(!1),e=q(null),a=q(""),n=q(!1),i=q("getUsersBlogs"),l=ce({options:[{value:ka,label:"èŽ·å–åšå®¢ä¿¡æ¯"},{value:Sa,label:"èŽ·å–æœ€æ–°æ–‡ç« æ•°ç›®"},{value:Ea,label:"èŽ·å–æœ€æ–°æ–‡ç« åˆ—è¡¨"},{value:Ca,label:"å‘å¸ƒæ–‡ç« "},{value:Aa,label:"èŽ·å–æ–‡ç« è¯¦æƒ…"},{value:Ua,label:"ç¼–è¾‘æ–‡ç« "},{value:Ia,label:"åˆ é™¤æ–‡ç« "},{value:xa,label:"èŽ·å–åˆ†ç±»åˆ—è¡¨"},{value:Ma,label:"èŽ·å–æ–‡ç« é¢„è§ˆåœ°å€"},{value:Da,label:"ä¸Šä¼ èµ„æºæ–‡ä»¶"}]}),c=y=>{switch(s.value=!1,y){case ka:{t.value="{}";break}case Sa:{t.value="{}";break}case Ea:{t.value=JSON.stringify({numOfPosts:10});break}case Ca:{t.value=JSON.stringify({title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]});break}case Aa:{t.value=JSON.stringify({postid:"20230526221603-3mgotyw"});break}case Ua:{t.value=JSON.stringify({postid:"20230527202519-k09a4gx",post:{title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜2",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹2",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]}});break}case Ia:{t.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case xa:{t.value="{}";break}case Ma:{t.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case Da:{t.value="{}",s.value=!0;break}default:{t.value="{}";break}}},r=async y=>{const p=y.target;p.files&&p.files[0]&&(e.value=p.files[0])},m=async()=>{n.value=!0,a.value="",a.value="typecho requesting...";try{const y=new fe;switch(o.info("appInstance=>",y),i.value){case ka:{const g=await we.getAdaptor("metaweblog_Typecho"),d=await I.blogApi(y,g).getUsersBlogs();a.value=JSON.stringify(d),o.info("typecho users blogs=>",d);break}case Sa:break;case Ea:break;case Ca:break;case Aa:break;case Ua:break;case Ia:break;case xa:break;case Ma:break;case Da:{const g=await we.getAdaptor("metaweblog_Typecho"),w="https://static-rs-terwer.oss-cn-beijing.aliyuncs.com/test/image-20230812091531-hibwr1g.png",d=w.substring(w.lastIndexOf("/")+1),P=(await In(w)).imageBase64;o.debug("imageBase64=>",{imageBase64:P});const S=xn(P);o.debug("bits=>",S);const k=new rs(d,"image/png",S);o.info("mediaObject=>",k);const M=I.blogApi(y,g);o.info("typechoApi=>",M);const x=await M.newMediaObject(k);a.value=JSON.stringify(x),o.info("typecho new mediaObject result=>",x);break}default:break}n.value=!1}catch(y){a.value=y,o.error(y),n.value=!1}};return(y,p)=>{const g=pt,w=ut,d=Se,v=Ie,P=$e;return _(),C(P,{title:"Typechoæµ‹è¯•"},{default:b(()=>[E("div",jd,[E("div",Kd,[f(w,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=S=>i.value=S),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:c},{default:b(()=>[(_(!0),O(Ce,null,xe(l.options,S=>(_(),C(g,{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),E("div",Wd,[f(d,{type:"primary",loading:n.value,onClick:m},{default:b(()=>p[3]||(p[3]=[R("å¼€å§‹æµ‹è¯•typecho")])),_:1},8,["loading"])]),E("div",Fd,[f(d,null,{default:b(()=>p[4]||(p[4]=[R("å…¥å‚")])),_:1})]),E("div",zd,[f(v,{modelValue:t.value,"onUpdate:modelValue":p[1]||(p[1]=S=>t.value=S),type:"textarea",rows:5},null,8,["modelValue"])]),s.value?(_(),O("div",Jd,[E("input",{type:"file",onChange:r},null,32)])):X("",!0),E("div",qd,[f(d,null,{default:b(()=>p[5]||(p[5]=[R("ç»“æžœ")])),_:1})]),E("div",Yd,[f(v,{modelValue:a.value,"onUpdate:modelValue":p[2]||(p[2]=S=>a.value=S),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),Zd=pe(Xd,[["__scopeId","data-v-bd526ffb"]]),Qd={id:"yuque-test"},eg={class:"method-list"},tg={class:"item"},sg={class:"item"},og={class:"item"},ag={key:0,class:"item"},ng={class:"item"},ig={class:"item"},Oa="getUsersBlogs",Va="getRecentPostsCount",$a="getRecentPosts",Na="newPost",Ha="getPost",La="editPost",Ra="deletePost",Ga="getCategories",Ba="getPreviewUrl",ja="newMediaObject",lg=J({__name:"YuqueTest",setup(u){const o=W("yuque-test"),{t}=Z(),s=q("{}"),e=q(!1),a=q(null),n=q(""),i=q(!1),l=q("getUsersBlogs"),c=ce({options:[{value:Oa,label:"èŽ·å–åšå®¢ä¿¡æ¯"},{value:Va,label:"èŽ·å–æœ€æ–°æ–‡ç« æ•°ç›®"},{value:$a,label:"èŽ·å–æœ€æ–°æ–‡ç« åˆ—è¡¨"},{value:Na,label:"å‘å¸ƒæ–‡ç« "},{value:Ha,label:"èŽ·å–æ–‡ç« è¯¦æƒ…"},{value:La,label:"ç¼–è¾‘æ–‡ç« "},{value:Ra,label:"åˆ é™¤æ–‡ç« "},{value:Ga,label:"èŽ·å–åˆ†ç±»åˆ—è¡¨"},{value:Ba,label:"èŽ·å–æ–‡ç« é¢„è§ˆåœ°å€"},{value:ja,label:"ä¸Šä¼ èµ„æºæ–‡ä»¶"}]}),r=p=>{switch(e.value=!1,p){case Oa:{s.value="{}";break}case Va:{s.value="{}";break}case $a:{s.value=JSON.stringify({numOfPosts:10});break}case Na:{s.value=JSON.stringify({title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]});break}case Ha:{s.value=JSON.stringify({postid:"20230526221603-3mgotyw"});break}case La:{s.value=JSON.stringify({postid:"20230527202519-k09a4gx",post:{title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜2",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹2",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]}});break}case Ra:{s.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case Ga:{s.value="{}";break}case Ba:{s.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case ja:{s.value="{}",e.value=!0;break}default:{s.value="{}";break}}},m=async p=>{const g=p.target;g.files&&g.files[0]&&(a.value=g.files[0])},y=async()=>{i.value=!0,n.value="",n.value="yuque requesting...";try{const p=new fe;switch(o.info("appInstance=>",p),l.value){case Oa:{const w=await we.getAdaptor("common_Yuque"),v=await I.blogApi(p,w).getUsersBlogs();n.value=JSON.stringify(v),o.info("yuque users blogs=>",v);break}case Va:break;case $a:break;case Na:break;case Ha:break;case La:break;case Ra:break;case Ga:break;case Ba:break;case ja:{const g=a.value,w=await Js(g),d=new rs(g.name,g.type,w);o.info("mediaObject=>",d);const v={name:d.name,type:d.type,bits:d.bits,overwrite:!0},P="http://127.0.0.1:3000/xmlrpc.php",k=await new si(P,"",{}).methodCall("metaWeblog.newMediaObject",["","terwer","123456",v]);n.value=JSON.stringify(k),o.info("yuque new mediaObject result=>",k);break}default:break}i.value=!1}catch(p){n.value=p,o.error(t("main.opt.failure")+"=>",p),i.value=!1}};return(p,g)=>{const w=pt,d=ut,v=Se,P=Ie,S=$e;return _(),C(S,{title:"è¯­é›€æµ‹è¯•"},{default:b(()=>[E("div",Qd,[E("div",eg,[f(d,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=k=>l.value=k),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:b(()=>[(_(!0),O(Ce,null,xe(c.options,k=>(_(),C(w,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),E("div",tg,[f(v,{type:"primary",loading:i.value,onClick:y},{default:b(()=>g[3]||(g[3]=[R("å¼€å§‹æµ‹è¯•yuque")])),_:1},8,["loading"])]),E("div",sg,[f(v,null,{default:b(()=>g[4]||(g[4]=[R("å…¥å‚")])),_:1})]),E("div",og,[f(P,{modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=k=>s.value=k),type:"textarea",rows:5},null,8,["modelValue"])]),e.value?(_(),O("div",ag,[E("input",{type:"file",onChange:m},null,32)])):X("",!0),E("div",ng,[f(v,null,{default:b(()=>g[5]||(g[5]=[R("ç»“æžœ")])),_:1})]),E("div",ig,[f(P,{modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=k=>n.value=k),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),rg=pe(lg,[["__scopeId","data-v-52e82541"]]),cg={id:"zhihu-test"},pg={class:"method-list"},ug={class:"item"},dg={class:"item"},gg={class:"item"},mg={key:0,class:"item"},hg={class:"item"},fg={class:"item"},Ka="getMetaData",yg=J({__name:"ZhihuTest",setup(u){const o=W("zhihu-test"),{t}=Z(),s=q("{}"),e=q(!1),a=q(null),n=q(""),i=q(!1),l=q("getMetaData"),c=ce({options:[{value:Ka,label:"èŽ·å–å…ƒæ•°æ®ä¿¡æ¯"}]}),r=p=>{switch(e.value=!1,p){case Ka:{s.value="{}";break}default:{s.value="{}";break}}},m=async p=>{const g=p.target;g.files&&g.files[0]&&(a.value=g.files[0])},y=async()=>{i.value=!0,n.value="",n.value="zhihu requesting...";try{const p=new fe;switch(o.info("appInstance=>",p),l.value){case Ka:{const w=await we.getAdaptor("custom_Zhihu"),v=await I.webApi(p,w).getMetaData();n.value=JSON.stringify(v),o.info("zhihu meta data=>",v);break}default:break}i.value=!1}catch(p){n.value=p,o.error(t("main.opt.failure")+"=>",p),i.value=!1}};return(p,g)=>{const w=pt,d=ut,v=Se,P=Ie,S=$e;return _(),C(S,{title:"çŸ¥ä¹Žæµ‹è¯•"},{default:b(()=>[E("div",cg,[E("div",pg,[f(d,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=k=>l.value=k),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:b(()=>[(_(!0),O(Ce,null,xe(c.options,k=>(_(),C(w,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),E("div",ug,[f(v,{type:"primary",loading:i.value,onClick:y},{default:b(()=>g[3]||(g[3]=[R("å¼€å§‹æµ‹è¯•zhihu")])),_:1},8,["loading"])]),E("div",dg,[f(v,null,{default:b(()=>g[4]||(g[4]=[R("å…¥å‚")])),_:1})]),E("div",gg,[f(P,{modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=k=>s.value=k),type:"textarea",rows:5},null,8,["modelValue"])]),e.value?(_(),O("div",mg,[E("input",{type:"file",onChange:m},null,32)])):X("",!0),E("div",hg,[f(v,null,{default:b(()=>g[5]||(g[5]=[R("ç»“æžœ")])),_:1})]),E("div",fg,[f(P,{modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=k=>n.value=k),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),bg=pe(yg,[["__scopeId","data-v-4c16df45"]]),wg={id:"csdn-test"},_g={class:"method-list"},vg={class:"item"},Pg={class:"item"},Tg={class:"item"},kg={key:0,class:"item"},Sg={class:"item"},Eg={class:"item"},Wa="getMetaData",Fa="getUsersBlogs",Cg=J({__name:"CsdnTest",setup(u){const o=W("csdn-test"),{t}=Z(),s=q("{}"),e=q(!1),a=q(null),n=q(""),i=q(!1),l=q("getMetaData"),c=ce({options:[{value:Wa,label:"èŽ·å–å…ƒæ•°æ®ä¿¡æ¯"},{value:Fa,label:"èŽ·å–åšå®¢ä¿¡æ¯"}]}),r=p=>{switch(e.value=!1,p){case Wa:{s.value="{}";break}case Fa:{s.value="{}";break}default:{s.value="{}";break}}},m=async p=>{const g=p.target;g.files&&g.files[0]&&(a.value=g.files[0])},y=async()=>{i.value=!0,n.value="",n.value="csdn requesting...";try{const p=new fe;switch(o.info("appInstance=>",p),l.value){case Wa:{const w=await we.getAdaptor("custom_Csdn"),v=await I.webApi(p,w).getMetaData();n.value=JSON.stringify(v),o.info("csdn meta data=>",v);break}case Fa:{const w=await we.getAdaptor("custom_Csdn"),v=await I.webApi(p,w).getUsersBlogs();n.value=JSON.stringify(v),o.info("csdn users blogs=>",v);break}default:break}i.value=!1}catch(p){n.value=p,o.error(t("main.opt.failure")+"=>",p),i.value=!1}};return(p,g)=>{const w=pt,d=ut,v=Se,P=Ie,S=$e;return _(),C(S,{title:"CSDNæµ‹è¯•"},{default:b(()=>[E("div",wg,[E("div",_g,[f(d,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=k=>l.value=k),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:b(()=>[(_(!0),O(Ce,null,xe(c.options,k=>(_(),C(w,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),E("div",vg,[f(v,{type:"primary",loading:i.value,onClick:y},{default:b(()=>g[3]||(g[3]=[R("å¼€å§‹æµ‹è¯•csdn")])),_:1},8,["loading"])]),E("div",Pg,[f(v,null,{default:b(()=>g[4]||(g[4]=[R("å…¥å‚")])),_:1})]),E("div",Tg,[f(P,{modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=k=>s.value=k),type:"textarea",rows:5},null,8,["modelValue"])]),e.value?(_(),O("div",kg,[E("input",{type:"file",onChange:m},null,32)])):X("",!0),E("div",Sg,[f(v,null,{default:b(()=>g[5]||(g[5]=[R("ç»“æžœ")])),_:1})]),E("div",Eg,[f(P,{modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=k=>n.value=k),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),Ag=pe(Cg,[["__scopeId","data-v-6e5e83d6"]]),Ug={id:"picgo-test"},Ig=J({__name:"PicgoTest",props:{pageId:{type:String,default:""}},setup(u){const o=W("picgo-test"),{handlePicgo:t}=Oo(),{query:s}=Xe(),e=s.id??Zs(),a=u,n=async()=>{const i=T.isEmptyString(a.pageId)?e:a.pageId,l=await t(i);o.debug("å›¾ç‰‡å¤„ç†å®Œæ¯•, md =>",l)};return(i,l)=>{const c=Se,r=$e;return _(),C(r,{title:"Picgoæµ‹è¯•"},{default:b(()=>[E("div",Ug,[f(c,{onClick:n},{default:b(()=>l[0]||(l[0]=[R("æµ‹è¯•")])),_:1})])]),_:1})}}}),xg=pe(Ig,[["__scopeId","data-v-21d58747"]]),Mg={id:"other-test"},Dg=`

â€‹â€‹![image](https://img1.terwer.space/api/public/202308142037187.png)â€‹â€‹

dfgvdfgfd

åœ°æ–¹GVå‘çš„

â€‹![image](https://img1.terwer.space/api/public/202308142036226.png)â€‹

â€

â€‹![](https://img1.terwer.space/202308142041443.png)â€‹
`,Og=J({__name:"OtherTest",setup(u){const o=ce({content:Dg}),t=()=>{const s=o.content,e=di.markdownToNotion(s);console.log("notionObject =>",e)};return(s,e)=>{const a=Ie,n=Ue,i=Se,l=st,c=$e;return _(),C(c,{title:"å…¶ä»–æµ‹è¯•"},{default:b(()=>[E("div",Mg,[f(l,null,{default:b(()=>[f(n,null,{default:b(()=>[f(a,{modelValue:o.content,"onUpdate:modelValue":e[0]||(e[0]=r=>o.content=r),style:{width:"75%","margin-right":"16px"},type:"textarea",rows:10},null,8,["modelValue"])]),_:1}),f(n,null,{default:b(()=>[f(i,{onClick:t},{default:b(()=>e[1]||(e[1]=[R("æµ‹è¯•Notion")])),_:1})]),_:1})]),_:1})])]),_:1})}}}),Vg=pe(Og,[["__scopeId","data-v-d3239933"]]),$g={class:"chat-output"},Ng=J({__name:"ChatgptTest",setup(u){const o=W("chatgpt-test"),{t}=Z(),s=q(""),e=q(""),a=ce({isLoading:!1}),n=async()=>{if(s.value.trim()===""){ee.error("è¯·è¾“å…¥æ–‡æœ¬");return}a.isLoading=!0;try{const{chat:l}=Ot(),c=await l(s.value);if(T.isEmptyString(c)){ee.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åº•éƒ¨åå¥½è®¾ç½®ä¿®æ”¹è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}e.value+=`> ${s.value}
${c}

`,s.value=""}catch(l){o.error(t("main.opt.failure")+"=>",l),ee.error(t("main.opt.failure")+"=>"+l)}finally{a.isLoading=!1}},i=()=>{e.value=""};return(l,c)=>{const r=Ie,m=Ue,y=Se,p=st,g=$e;return _(),C(g,{title:"AIèŠå¤©"},{default:b(()=>[f(p,{class:"chatgpt-form"},{default:b(()=>[f(m,null,{default:b(()=>[f(r,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=w=>s.value=w),autosize:{minRows:4,maxRows:16},type:"textarea",class:"chat-input",placeholder:"è¯·è¾“å…¥æ–‡æœ¬..."},null,8,["modelValue"])]),_:1}),f(m,null,{default:b(()=>[f(y,{type:"primary",onClick:n,loading:a.isLoading},{default:b(()=>c[1]||(c[1]=[R("å‘é€æ¶ˆæ¯")])),_:1},8,["loading"]),f(y,{type:"danger",onClick:i},{default:b(()=>c[2]||(c[2]=[R("æ¸…å±")])),_:1})]),_:1}),f(m,null,{default:b(()=>[E("div",$g,[E("pre",null,j(e.value),1)])]),_:1})]),_:1})]),_:1})}}}),Hg=pe(Ng,[["__scopeId","data-v-e49ecba0"]]),eo=()=>{const{t:u}=Z(),o=qr(u),t=[...Ke.commonCfg,...Ke.githubCfg,...Ke.gitlabCfg,...Ke.metaweblogCfg,...Ke.wordpressCfg,...Ke.customCfg];return{getPrePlatformKeys:()=>t.map(l=>l.platformKey),platformTypeList:o,getPlatformType:l=>o.find(c=>c.type===l),getAllPrePlatformList:()=>t,getPrePlatformList:l=>t.filter(c=>c.platformType===l),getPrePlatform:l=>t.find(c=>c.platformKey===l)}},Lg=["src"],Bi=J({__name:"DrawerBoxBridge",props:{src:{type:String,default:""}},setup(u){const{t:o}=Z();return(t,s)=>{const e=dl("resize");return _(),O("div",null,[Qn(E("iframe",{width:"100%",src:u.src,frameborder:"0"},null,8,Lg),[[e,{loadText:h(o)("page.loading")}]])])}}}),Rg={class:"platform-title"},Gg={class:"platform-desc"},Bg={class:"text-desc"},jg={class:"icon-list"},Kg={class:"platform-box"},Wg={class:"el-icon"},Fg=["innerHTML"],zg={key:0,class:"add-action"},Jg=J({__name:"PlatformQuickAdd",props:{apiType:{type:String,default:""}},setup(u){const o=W("platform-quick-add"),t=u;Z(),_t();const s=Xe(),{getPlatformType:e,getPrePlatformList:a,getAllPrePlatformList:n}=eo(),i=ce(s.params),l=q(t.apiType??i.type),c=q(!1),r=q(""),m=q("");Je(()=>t.apiType,v=>{l.value=v,d()});const y=ce({platformGroup:{},pre:[]}),p=(v,P)=>{r.value=v,m.value=P,c.value=!0},g=(v,P)=>{const k=`${window.origin}${Cn}#${P}`;o.debug(`Publisher will go to ${k}`),p(v,k)},w=v=>{const P=(v==null?void 0:v.platformType)??"",S=(v==null?void 0:v.platformKey)??"",k=(v==null?void 0:v.subPlatformType)??"",M=`/setting/platform/add/${P}?showBack=trye&key=${S}&sub=${k}`,x=Mt.longPlatformName((v==null?void 0:v.platformName)??(v==null?void 0:v.platformType)??"");g(`æ·»åŠ  ${x} å¹³å°`,M)},d=()=>{l.value==="all"?(y.platformGroup={type:"all",title:"å…¨éƒ¨",img:"",description:"å…¨éƒ¨å¹³å°åˆ—è¡¨"},y.pre=n()):(y.platformGroup=e(l.value),y.pre=a(l.value))};return Ze(()=>{d()}),(v,P)=>{const S=Ve,k=Gs,M=Se,x=Ao,K=En;return _(),O("div",null,[f(x,{class:"platform-add-card"},{default:b(()=>{var $,B;return[E("div",Rg,j(l.value==="all"?"å…¨éƒ¨":(($=y.platformGroup)==null?void 0:$.title)??l.value),1),E("div",Gg,[E("div",Bg,j(((B=y.platformGroup)==null?void 0:B.description)??""),1),E("p",null,[f(S,{class:"desc-tip",type:"info",title:"ç‚¹å‡»å›¾æ ‡å¿«é€Ÿæ·»åŠ ï¼Œæˆ–è€…ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è‡ªå®šä¹‰æ·»åŠ "})])]),E("div",jg,[E("div",Kg,[(_(!0),O(Ce,null,xe(y.pre,A=>(_(),C(k,{class:"define-item",onClick:F=>w(A),title:A.platformName},{default:b(()=>[E("i",Wg,[E("span",{innerHTML:A==null?void 0:A.platformIcon},null,8,Fg)]),R(" "+j(h(Mt).shortPlatformName(A.platformName,6)),1)]),_:2},1032,["onClick","title"]))),256))])]),l.value!=="all"?(_(),O("div",zg,[f(M,{type:"primary",size:"large",onClick:P[0]||(P[0]=A=>w({platformType:l.value}))},{default:b(()=>{var A;return[R(" æ·»åŠ è‡ªå®šä¹‰ "+j(((A=y.platformGroup)==null?void 0:A.title)??l.value)+" å¯¹æŽ¥ ",1)]}),_:1})])):X("",!0)]}),_:1}),f(K,{modelValue:c.value,"onUpdate:modelValue":P[1]||(P[1]=$=>c.value=$),size:"85%",title:r.value,direction:"rtl","destroy-on-close":!0},{default:b(()=>[f(Bi,{src:m.value},null,8,["src"])]),_:1},8,["modelValue","title"])])}}}),ji=pe(Jg,[["__scopeId","data-v-31ba5f78"]]),qg=J({__name:"PublishPlatformStore",setup(u){const o=W("publish-platform-import"),{getSetting:t}=me(),{platformTypeList:s}=eo(),e=q("all"),a=ce({setting:{},dynamicConfigArray:[],platformTypeList:s}),n=l=>{e.value=l},i=async()=>{a.setting=await t(),o.info("get setting from platform setting",a.setting);const l=te.safeParse(a.setting[Me],{});a.dynamicConfigArray=(l==null?void 0:l.totalCfg)||[],o.debug("store dynamic init page=>",a.dynamicConfigArray)};return Ze(async()=>{await i()}),(l,c)=>{const r=Gl,m=Bs,y=ji;return _(),O("div",null,[(_(),C(m,{modelValue:e.value,"onUpdate:modelValue":c[1]||(c[1]=p=>e.value=p),style:{"margin-bottom":"30px"},key:e.value},{default:b(()=>[f(r,{key:"all",value:"all",onClick:c[0]||(c[0]=p=>n("all"))},{default:b(()=>c[2]||(c[2]=[R("å…¨éƒ¨")])),_:1}),(_(!0),O(Ce,null,xe(h(s),p=>(_(),C(r,{key:p.type,value:p.type,onClick:g=>n(p.type)},{default:b(()=>[R(j(p.title),1)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["modelValue"])),f(y,{"api-type":e.value},null,8,["api-type"])])}}}),Yg={class:"flex flex-wrap gap-4 import-select"},Xg={class:"log-message-box"},Zg={class:"import-panel"},Qg={class:"import-panel"},em=J({__name:"PublishPlatformImport",setup(u){const o=W("publish-platform-import"),{t}=Z(),{getSetting:s,updateSetting:e,deleteKey:a}=me(),{platformTypeList:n,getPrePlatformList:i,getAllPrePlatformList:l}=eo(),c=q(!1),r=q(""),m=q(!1),y=q(""),p=ce({setting:{},dynamicConfigArray:[],isImportLoading:!1,showLogMessage:!1,logMessage:"",customImport:{path:[],datas:[]}}),g=(K,$)=>{const B=De.formatIsoToZh(new Date().toISOString(),!0);p.logMessage+=`[${B}] ${K} ${$}
`},w=K=>{let $=0;for(const B of K){const A=B.platformKey;if(fi(p.dynamicConfigArray,A)){g(A,`${A} å·²ç»å­˜åœ¨ï¼Œå¿½ç•¥å¯¼å…¥`);continue}const F=ve.cloneDeep(B);p.dynamicConfigArray.push(F),g(A,"å·²åŠ å…¥å¯¼å…¥åˆ—è¡¨"),p.setting[A]={},g(A,"å·²å¯¼å…¥å¹¶åˆå§‹åŒ–æˆåŠŸ"),$++}return $},d=()=>{Pt.confirm("ç¡®è®¤è¦å¯¼å…¥å…¨éƒ¨å†…ç½®å¹³å°å—ï¼Ÿ","æ¸©é¦¨æç¤º",{type:"warning",icon:qe(Hs),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{await v()}).catch(()=>{})},v=async()=>{p.showLogMessage=!0,p.isImportLoading=!0,p.logMessage="";let K=0;if(K+=w(Ke.commonCfg),K+=w(Ke.githubCfg),K+=w(Ke.gitlabCfg),K+=w(Ke.metaweblogCfg),K+=w(Ke.wordpressCfg),K+=w(Ke.customCfg),p.isImportLoading=!1,K>0){const $=ht(p.dynamicConfigArray);p.setting[Me]=$,await e(p.setting),await x(),p.logMessage+="å…¨éƒ¨å¯¼å…¥æˆåŠŸå¹¶ä¿å­˜",ee.success("å…¨éƒ¨å¯¼å…¥æˆåŠŸå¹¶ä¿å­˜")}else p.logMessage+="æœªå‘çŽ°æ–°å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥",ee.warning("æœªå‘çŽ°æ–°å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥")},P=()=>{c.value=!0,r.value="è‡ªå®šä¹‰å¯¼å…¥"},S=()=>{m.value=!0,y.value="ä»Žã€ŒæŒ‚ä»¶ç‰ˆã€ v0.8.1 å¯¼å…¥"},k=async(K,$)=>{if(K.isLeaf)return $([]);let B,A=K.data.value||"";if(A===""&&p.customImport.path.length==0?B="":(A===""&&(A=""),B=A),T.isEmptyString(B)){const F=[];n.forEach(U=>{const z={value:U.type,label:U.title,isLeaf:!1};F.push(z)}),$(F)}else{const F=[];i(B).forEach(z=>{if(z.platformType===B){const L={value:z.platformKey,label:z.platformName,isLeaf:!0};F.push(L)}p.dynamicConfigArray.some(L=>L.platformKey===z.platformKey)&&p.customImport.path.push(z.platformKey)}),$(F)}},M=async()=>{const K=p.customImport.path;if(K.length===0){p.logMessage+="æœªé€‰æ‹©å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥",ee.warning("æœªé€‰æ‹©å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥");return}const $=[];l().forEach(F=>{K.includes(F.platformKey)&&$.push(F)}),p.showLogMessage=!0,p.isImportLoading=!0,p.logMessage="";let A=0;if(A+=w($),p.isImportLoading=!1,A>0){const F=ht(p.dynamicConfigArray);p.setting[Me]=F,await e(p.setting),await x(),p.logMessage+="é€‰æ‹©çš„è‡ªå®šä¹‰å¹³å°å·²æˆåŠŸå¯¼å…¥å¹¶ä¿å­˜",ee.success("é€‰æ‹©çš„è‡ªå®šä¹‰å¹³å°å·²æˆåŠŸå¯¼å…¥å¹¶ä¿å­˜")}else p.logMessage+="æœªå‘çŽ°æ–°å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥",ee.warning("æœªå‘çŽ°æ–°å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥")},x=async()=>{p.setting=await s(),o.info("get setting from platform setting",p.setting);const K=te.safeParse(p.setting[Me],{});p.dynamicConfigArray=(K==null?void 0:K.totalCfg)||[],o.debug("import dynamic init page=>",p.dynamicConfigArray)};return Ze(async()=>{await x()}),(K,$)=>{const B=Ao,A=Ie,F=Io,U=Ue,z=Se,L=st,V=En,Y=Ve;return _(),O("div",Yg,[f(B,{shadow:"always",class:"select-item",onClick:d},{default:b(()=>$[4]||($[4]=[R(" ä¸€é”®å…¨éƒ¨å¯¼å…¥")])),_:1}),f(B,{shadow:"hover",class:"select-item",onClick:P},{default:b(()=>$[5]||($[5]=[R("è‡ªå®šä¹‰å¯¼å…¥")])),_:1}),f(B,{shadow:"hover",class:"select-item",onClick:S},{default:b(()=>$[6]||($[6]=[R(" ä»Žæ—§ç‰ˆ v0.8.1 ç‰ˆæœ¬ã€Œæ€æºç¬”è®°æŒ‚ä»¶ã€å¯¼å…¥ ")])),_:1}),E("div",Xg,[p.showLogMessage?(_(),C(A,{key:0,modelValue:p.logMessage,"onUpdate:modelValue":$[0]||($[0]=Pe=>p.logMessage=Pe),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])):X("",!0)]),f(V,{modelValue:c.value,"onUpdate:modelValue":$[2]||($[2]=Pe=>c.value=Pe),size:"85%",title:r.value,direction:"rtl","destroy-on-close":!0},{default:b(()=>[E("div",Zg,[f(L,null,{default:b(()=>[f(U,null,{default:b(()=>[f(F,{modelValue:p.customImport.path,"onUpdate:modelValue":$[1]||($[1]=Pe=>p.customImport.path=Pe),"show-checkbox":"",lazy:"",multiple:"","check-on-click-node":"","default-expand-all":"",load:k,"empty-text":h(t)("main.data.empty"),"no-data-text":h(t)("main.data.empty"),placeholder:h(t)("main.opt.select")},null,8,["modelValue","empty-text","no-data-text","placeholder"])]),_:1}),f(U,null,{default:b(()=>[f(z,{onClick:M,type:"primary"},{default:b(()=>$[7]||($[7]=[R("å¼€å§‹å¯¼å…¥")])),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue","title"]),f(V,{modelValue:m.value,"onUpdate:modelValue":$[3]||($[3]=Pe=>m.value=Pe),size:"85%",title:y.value,direction:"rtl","destroy-on-close":!0},{default:b(()=>[E("div",Qg,[f(Y,{closable:!1,title:h(t)("import.v081.warn"),class:"form-item-tip",type:"warning"},null,8,["title"])])]),_:1},8,["modelValue","title"])])}}}),tm=pe(em,[["__scopeId","data-v-9f1197a9"]]),sm=["href"],om=["href"],am=J({__name:"CookieSetting",props:{apiType:"",setting:{},dynCfg:{},settingCfg:{}},emits:["emitHideDlg"],setup(u,{emit:o}){const t=W("cookie-setting"),s=u,e=o,{t:a}=Z(),{updateSetting:n}=me(),i=q(),l=ce({key:s.apiType,settingData:s.setting,dynCfgData:s.dynCfg,settingCfgData:s.settingCfg}),c=ce({}),r=async m=>{if(!(!m||!await m.validate((p,g)=>{p?t.debug("æ ¡éªŒæˆåŠŸ"):t.error(a("main.opt.failure"),g)}))){if(T.isEmptyString(l.key)){ee.error("å¹³å°keyä¸èƒ½ä¸ºç©ºï¼Œè¯·æŽ’æŸ¥ã€‚å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ä½œè€…");return}l.settingData[l.key]=l.settingCfgData,await n(l.settingData),e&&e("emitHideDlg"),ee.success(a("main.opt.success"))}};return(m,y)=>{const p=Ve,g=Ue,w=Ie,d=Se,v=st;return _(),O("div",null,[f(v,{class:"add-form",ref_key:"formRef",ref:i,"label-width":"100px",model:l.settingCfgData,rules:c},{default:b(()=>[f(p,{class:"top-tip",title:"æ£€æµ‹åˆ°å½“å‰ä¸ºæµè§ˆå™¨é¡µé¢æˆ–è€…å—å¹³å°æŠ€æœ¯é™åˆ¶ï¼Œæ— æ³•èŽ·å–Cookieï¼Œè¯·æ‰‹åŠ¨ç²˜è´´å¹³å°Cookieã€‚æœ¬æ’ä»¶æ‰¿è¯ºï¼Œæ‰€æœ‰æ•°æ®ä»…åœ¨æ‚¨çš„æœ¬åœ°å­˜å‚¨ï¼Œæˆ‘ä»¬ä¸ä¼šä¸Šä¼ æˆ–è€…åˆ†äº«ä½ çš„ä»»ä½•æ•°æ®ï¼Œè¯·æ”¾å¿ƒä½¿ç”¨ã€‚å¦‚æœ‰ç–‘é—®è¯·æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ã€‚",type:"error",closable:!1}),f(g,null,{default:b(()=>[y[2]||(y[2]=R(" ç‰¹åˆ«æç¤ºï¼šå—å¹³å°é™åˆ¶ï¼Œå½“å‰æ— æ³•è‡ªåŠ¨èŽ·å–cookieï¼Œè¯·åœ¨Chromeæµè§ˆå™¨æ‰‹åŠ¨æ‰“å¼€ Â  ")),E("a",{href:h(is).cookieLimitTipsAuth[l.dynCfgData.subPlatformType],target:"_blank"},j(h(is).cookieLimitTipsAuth[l.dynCfgData.subPlatformType]),9,sm),y[3]||(y[3]=R(" Â å¹¶ç™»å½•ï¼Œç„¶åŽä½¿ç”¨å¼€å‘è€…å·¥å…·æ‰¾åˆ°cookieï¼Œæœ€åŽå¤åˆ¶ç²˜è´´åˆ°ä¸‹æ–¹æ–‡æœ¬æ¡†ï¼Œå¯å‚è€ƒ ")),E("a",{href:h(is).cookieLimitTipsImg[l.dynCfgData.subPlatformType],target:"_blank"},"æ­¤å›¾ç‰‡",8,om),y[4]||(y[4]=R(" çš„æŒ‡å¼•ã€‚ "))]),_:1}),f(g,{label:"å¹³å°Cookie"},{default:b(()=>[f(w,{modelValue:l.settingCfgData.password,"onUpdate:modelValue":y[0]||(y[0]=P=>l.settingCfgData.password=P),style:{width:"75%","margin-right":"16px"},placeholder:"è¯·ç›´æŽ¥ç²˜è´´å¹³å°cookieï¼Œä¸ºäº†æ‚¨çš„éšç§å®‰å…¨ï¼Œè¯·å‹¿æ³„éœ²cookieç»™ä»»ä½•äºº",type:"textarea",rows:10},null,8,["modelValue"])]),_:1}),f(g,null,{default:b(()=>[f(d,{type:"primary",onClick:y[1]||(y[1]=P=>r(i.value))},{default:b(()=>[R(j(h(a)("setting.blog.save")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}}),nm=pe(am,[["__scopeId","data-v-35ab3525"]]),im={key:0},lm={key:1},rm={class:"publish-right-setting"},cm={class:"platform-item"},pm=["innerHTML"],um={class:"item-right"},dm={class:"text"},gm=["title"],mm=["onClick"],hm=["innerHTML"],fm={class:"actions"},ym=J({__name:"PublishPlatformSettingList",setup(u){const o=W("publish-platform-setting-list"),{t}=Z(),s=_t(),{getSetting:e,updateSetting:a,deleteKey:n}=me(),{getPrePlatformKeys:i}=eo(),{isInSiyuanOrSiyuanNewWin:l,isInChromeExtension:c}=dt(),r=ce({setting:{},dynamicConfigArray:[],newPlatformCount:0,newPlatformTip:"",webAuthLoadingMap:{},cookieSettingFormVisible:!1,dlgCookieTitle:"",dlgKey:"",dlgDynCfg:{},dlgSettingCfg:{}}),m=U=>{s.push({path:`/setting/platform/update/${U.platformKey}`,query:{showBack:"true"}})},y=async U=>{r.dynamicConfigArray=Wt(r.dynamicConfigArray,U.platformKey,U);const z=ht(r.dynamicConfigArray);r.setting[Me]=z,await a(r.setting)},p=async U=>{const z=U.platformKey;await s.push({path:`/setting/platform/single/${z}`,query:{showBack:"true"}})},g=U=>{Pt.confirm(`ç¡®è®¤è¦åˆ é™¤ã€${U.platformName}ã€‘å—ï¼Œæ‰€æœ‰ä¸Žæ­¤å¹³å°ç›¸å…³çš„é…ç½®éƒ½å°†æ°¸ä¹…åˆ é™¤ï¼Ÿ`,"æ¸©é¦¨æç¤º",{type:"error",icon:qe(Hs),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{r.dynamicConfigArray=Jr(r.dynamicConfigArray,U.platformKey);const z=ht(r.dynamicConfigArray);r.setting[Me]=z,delete r.setting[U.platformKey],n(U.platformKey),await a(r.setting),await F(),ee.success(t("main.opt.success"))}).catch(()=>{})},w=async U=>{U.cookieLimit?await P(U):l()?await d(U):c()?v(U):await P(U)},d=async U=>{Pt.confirm(`å°†æ‰“å¼€ [${U.platformName}] ç™»å½•æŽˆæƒé¡µé¢ï¼Œæ‚¨éœ€è¦åœ¨æ–°é¡µé¢å®Œæˆç™»å½•ï¼Œç„¶åŽç‚¹å‡»éªŒè¯æŸ¥çœ‹æŽˆæƒç»“æžœï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ`,"ç½‘é¡µæŽˆæƒ",{type:"warning",icon:qe(Rn),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{if(U.isAuth){U.isAuth=!1,r.dynamicConfigArray=Wt(r.dynamicConfigArray,U.platformKey,U);const z=ht(r.dynamicConfigArray);r.setting[Me]=z,await a(r.setting),o.info("å·²æŽˆæƒï¼Œå°†æ¸…ç©ºçŠ¶æ€ï¼Œå¹¶é‡æ–°è¿›è¡ŒæŽˆæƒï¼ŒæŽˆæƒå®Œæˆéœ€è¦é‡æ–°éªŒè¯")}else o.info("æœªæŽˆæƒï¼Œå‡†å¤‡å¼€å§‹æŽˆæƒ");zo(U.authUrl)}).catch(()=>{})},v=U=>{Pt.confirm(`å°†æ‰“å¼€ [${U.platformName}] ç™»å½•æŽˆæƒé¡µé¢ï¼Œæ‚¨éœ€è¦åœ¨æ–°é¡µé¢å®Œæˆç™»å½•ï¼Œç„¶åŽç‚¹å‡»éªŒè¯æŸ¥çœ‹æŽˆæƒç»“æžœï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ`,"ç½‘é¡µæŽˆæƒ",{type:"warning",icon:qe(Rn),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{if(U.isAuth){U.isAuth=!1,r.dynamicConfigArray=Wt(r.dynamicConfigArray,U.platformKey,U);const z=ht(r.dynamicConfigArray);r.setting[Me]=z,await a(r.setting),o.info("å·²æŽˆæƒï¼Œå°†æ¸…ç©ºçŠ¶æ€ï¼Œå¹¶é‡æ–°è¿›è¡ŒæŽˆæƒï¼ŒæŽˆæƒå®Œæˆéœ€è¦é‡æ–°éªŒè¯")}else o.info("æœªæŽˆæƒï¼Œå‡†å¤‡å¼€å§‹æŽˆæƒ");window.open(U.authUrl)}).catch(()=>{})},P=async U=>{await S(U)},S=async U=>{if(U.isAuth){U.isAuth=!1,r.dynamicConfigArray=Wt(r.dynamicConfigArray,U.platformKey,U);const V=ht(r.dynamicConfigArray);r.setting[Me]=V,await a(r.setting),o.info("å·²æŽˆæƒï¼Œå°†æ¸…ç©ºçŠ¶æ€ï¼Œå¹¶é‡æ–°è¿›è¡ŒæŽˆæƒï¼ŒæŽˆæƒå®Œæˆéœ€è¦é‡æ–°éªŒè¯")}else o.info("æœªæŽˆæƒï¼Œå‡†å¤‡å¼€å§‹æŽˆæƒ");const z=te.safeParse(r.setting[U.platformKey],{}),L=await we.getCfg(U.platformKey,z);r.dlgKey=U.platformKey,r.dlgDynCfg=U,r.dlgSettingCfg=L,r.dlgCookieTitle=`${U.platformName} Cookie è®¾ç½®`,r.cookieSettingFormVisible=!0},k=async U=>{U.cookieLimit?await $(U):l()?M(U):c()?await K(U):await $(U)},M=U=>{const z=async(L,V)=>{o.debug("get cookie result=>",V),r.webAuthLoadingMap[L.platformKey]=!0;const Y=new fe,Pe=await we.getCfg(L.platformKey),Be=await we.getAdaptor(L.platformKey,Pe),He=I.webApi(Y,Be);try{const Ye=await He.buildCookie(V),Le=Pe;Le.password=Ye,r.setting[L.platformKey]=Le,await a(r.setting),He.updateCfg(Le);const Ge=await He.getMetaData();if(o.debug("get meta data=>",Ge),Ge.flag){L.isAuth=!0;const le=te.safeParse(r.setting[L.platformKey],{});le.metadata=Ge,r.setting[L.platformKey]=le,await a(r.setting),o.info("å·²æ›´æ–°æœ€æ–°çš„metadata"),ee.success("éªŒè¯æˆåŠŸï¼Œè¯¥å¹³å°å¯æ­£å¸¸ä½¿ç”¨")}else L.isAuth=!1,ee.error("éªŒè¯å¤±è´¥ï¼Œè¯¥å¹³å°å°†ä¸å¯ç”¨")}catch(Ye){L.isAuth=!1;const Le=t("main.opt.failure")+"=>"+Ye;o.error(t("main.opt.failure")+"=>",Ye);const Ge=L.logoutUrl??Pe.logoutUrl;if(T.isEmptyString(Ge))ee.error(Le);else{const le=Le+"ï¼Œæ˜¯å¦éœ€è¦é€€å‡ºç™»å½•ï¼Ÿæ³¨æ„ï¼šï¼ï¼ï¼æœ¬çª—å£åªè´Ÿè´£é€€å‡ºï¼Œç™»å½•ä¿¡æ¯å¡«å†™æ— æ•ˆï¼ï¼ï¼ï¼Œéœ€è¦ç¨åŽé‡æ–°ç‚¹å‡»æŽˆæƒæ“ä½œç™»å½•ï¼Ÿ";x(le,Ge)}}r.dynamicConfigArray=Wt(r.dynamicConfigArray,L.platformKey,L);const Qe=ht(r.dynamicConfigArray);r.setting[Me]=Qe,await a(r.setting),r.webAuthLoadingMap[L.platformKey]=!1};zo(U.authUrl,U,z)},x=(U,z)=>{Pt.confirm(U,"æ¸©é¦¨æç¤º",{type:"error",icon:qe(bn),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{zo(z)}).catch(()=>{})},K=async U=>{r.webAuthLoadingMap[U.platformKey]=!0;try{const L=new fe,V=await we.getCfg(U.platformKey),Y=await we.getAdaptor(U.platformKey,V),Be=await I.webApi(L,Y).getMetaData();if(Be.flag){U.isAuth=!0;const He=V;He.metadata=Be,r.setting[U.platformKey]=He,await a(r.setting),o.info("å·²æ›´æ–°æœ€æ–°çš„metadata"),ee.success("éªŒè¯æˆåŠŸï¼Œè¯¥å¹³å°å¯æ­£å¸¸ä½¿ç”¨")}else U.isAuth=!1,ee.error("éªŒè¯å¤±è´¥ï¼Œè¯¥å¹³å°å°†ä¸å¯ç”¨")}catch(L){U.isAuth=!1,ee.error(t("main.opt.failure")+"=>"+L+"ï¼Œå¦‚æžœæ˜¯ç™»å½•è¿‡æœŸï¼Œè¯·åœ¨å·¦ä¾§ç‚¹å‡»ã€ŒæŽˆæƒã€ä¿®æ”¹æ–°çš„ cookie æˆ–è€…å‚è€ƒ https://blog.terwer.space/s/20230810132040-nn4q7vs FAQ4 è§£å†³"),o.error(t("main.opt.failure")+"=>",L)}r.dynamicConfigArray=Wt(r.dynamicConfigArray,U.platformKey,U);const z=ht(r.dynamicConfigArray);r.setting[Me]=z,await a(r.setting),r.webAuthLoadingMap[U.platformKey]=!1},$=async U=>{await K(U)},B=()=>{r.cookieSettingFormVisible=!1},A=async U=>{for(const z of U)is.cookieWhiteList.includes(z.subPlatformType.toString())&&(z.cookieLimit=!1),is.cookieLimit.includes(z.subPlatformType.toString())&&(z.cookieLimit=!0);return U},F=async()=>{r.setting=await e(),o.info("get setting from platform setting",r.setting);const U=te.safeParse(r.setting[Me],{});r.dynamicConfigArray=(U==null?void 0:U.totalCfg)||[],r.dynamicConfigArray=await A(r.dynamicConfigArray),o.debug("dynamic init page=>",r.dynamicConfigArray);const z=[],L=i(),V=r.dynamicConfigArray.map(Y=>Y.platformKey);r.newPlatformCount=0;for(const Y of L)V.includes(Y)||(r.newPlatformCount++,z.push(Y));r.newPlatformCount>0&&(r.newPlatformTip=t("platform.new.platform").replace("[count]",r.newPlatformCount).replace("[platform]",z.join(", ")))};return Ze(async()=>{await F()}),(U,z)=>{const L=Ve,V=Mo,Y=Gs,Pe=Pn,Be=qt,He=Se,Qe=Tn,Ye=kn,Le=nm,Ge=Bl;return _(),O("div",null,[r.dynamicConfigArray.length===0?(_(),O("div",im,[f(L,{class:"no-tip",type:"error",title:h(t)("platform.must.select.one")},null,8,["title"])])):(_(),O("div",lm,[E("div",rm,[f(Ye,{gutter:20,class:"platform-list"},{default:b(()=>[(_(!0),O(Ce,null,xe(r.dynamicConfigArray,le=>(_(),C(Qe,{key:le.platformKey,span:11,class:"platform-item-box"},{default:b(()=>[E("div",cm,[f(V,{class:"item-left-icon"},{default:b(()=>[E("span",{class:"item-icon",innerHTML:le.platformIcon},null,8,pm)]),_:2},1024),E("div",um,[E("div",dm,[f(Pe,{value:le.isAuth?"å·²æŽˆæƒ":le.authMode===h(ge).API?"è®¾ç½®æ— æ•ˆ":"æ²¡æœ‰æŽˆæƒ",class:"badge-item",type:le.isAuth?"success":"danger"},{default:b(()=>[E("span",{title:le.platformName},j(h(Mt).longPlatformName(le.platformName,11)),9,gm),E("span",{class:"name-edit",onClick:We=>m(le)},[f(V,null,{default:b(()=>[E("span",{innerHTML:h(Te).iconIFEdit},null,8,hm)]),_:1})],8,mm),f(Y,{type:le.authMode===h(ge).API?"primary":"info",class:"auth-mode-text"},{default:b(()=>[R(j(le.authMode===h(ge).API?"APIæŽˆæƒ":"ç½‘é¡µæŽˆæƒ"),1)]),_:2},1032,["type"])]),_:2},1032,["value","type"])]),E("div",fm,[f(Be,{modelValue:le.isEnabled,"onUpdate:modelValue":We=>le.isEnabled=We,"inline-prompt":"",size:"small",class:"action-btn action-switch","active-text":"å·²å¯ç”¨","inactive-text":"æœªå¯ç”¨",onChange:We=>y(le)},null,8,["modelValue","onUpdate:modelValue","onChange"]),le.isEnabled&&le.authMode===h(ge).API?(_(),C(Y,{key:0,class:"action-btn action-setting",onClick:We=>p(le)},{default:b(()=>[f(V,null,{default:b(()=>[f(h($o))]),_:1}),z[5]||(z[5]=R(" è®¾ç½® "))]),_:2},1032,["onClick"])):X("",!0),le.isEnabled&&le.authMode===h(ge).WEBSITE&&le.isAuth?(_(),C(Y,{key:1,class:"action-btn action-setting",onClick:We=>p(le)},{default:b(()=>[f(V,null,{default:b(()=>[f(h($o))]),_:1}),z[6]||(z[6]=R(" è®¾ç½® "))]),_:2},1032,["onClick"])):X("",!0),le.isEnabled&&le.authMode===h(ge).WEBSITE?(_(),C(Y,{key:2,class:"action-btn action-web-setting",onClick:We=>w(le)},{default:b(()=>[f(V,null,{default:b(()=>[f(h($o))]),_:1}),R(" "+j(le.isAuth?"å†æ¬¡æŽˆæƒ":"æŽˆæƒ"),1)]),_:2},1032,["onClick"])):X("",!0),le.isEnabled&&le.authMode===h(ge).WEBSITE&&!le.isAuth?(_(),C(He,{key:3,class:"action-btn action-web-auth",onClick:We=>k(le),size:"small",loading:r.webAuthLoadingMap[le.platformKey]===!0},{default:b(()=>[f(V,null,{default:b(()=>[f(h(gl))]),_:1}),z[7]||(z[7]=R(" éªŒè¯ "))]),_:2},1032,["onClick","loading"])):X("",!0),le.isEnabled?X("",!0):(_(),C(Y,{key:4,class:"action-btn action-del",onClick:We=>g(le)},{default:b(()=>[f(V,null,{default:b(()=>[f(h(Hs))]),_:1}),z[8]||(z[8]=R(" åˆ é™¤ "))]),_:2},1032,["onClick"]))])])])]),_:2},1024))),128))]),_:1}),r.newPlatformCount>0?(_(),C(Ye,{key:0},{default:b(()=>[f(L,{type:"error",title:r.newPlatformTip},null,8,["title"])]),_:1})):X("",!0)]),f(Ge,{modelValue:r.cookieSettingFormVisible,"onUpdate:modelValue":z[4]||(z[4]=le=>r.cookieSettingFormVisible=le),title:r.dlgCookieTitle},{default:b(()=>[f(Le,{"api-type":r.dlgKey,"onUpdate:apiType":z[0]||(z[0]=le=>r.dlgKey=le),setting:r.setting,"onUpdate:setting":z[1]||(z[1]=le=>r.setting=le),"setting-cfg":r.dlgSettingCfg,"onUpdate:settingCfg":z[2]||(z[2]=le=>r.dlgSettingCfg=le),"dyn-cfg":r.dlgDynCfg,"onUpdate:dynCfg":z[3]||(z[3]=le=>r.dlgDynCfg=le),onEmitHideDlg:B},null,8,["api-type","setting","setting-cfg","dyn-cfg"])]),_:1},8,["modelValue","title"])]))])}}}),bm=pe(ym,[["__scopeId","data-v-21c7de88"]]),wm={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function _m(u,o){return _(),O("svg",wm,o[0]||(o[0]=[E("path",{fill:"currentColor",d:"M9 19v-2h12v2zm0-6v-2h12v2zm0-6V5h12v2zM5 20q-.825 0-1.412-.587T3 18t.588-1.412T5 16t1.413.588T7 18t-.587 1.413T5 20m0-6q-.825 0-1.412-.587T3 12t.588-1.412T5 10t1.413.588T7 12t-.587 1.413T5 14m0-6q-.825 0-1.412-.587T3 6t.588-1.412T5 4t1.413.588T7 6t-.587 1.413T5 8"},null,-1)]))}const vm=qe({name:"material-symbols-format-list-bulleted",render:_m}),Pm={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Tm(u,o){return _(),O("svg",Pm,o[0]||(o[0]=[E("path",{fill:"currentColor",d:"m14 12l-4-4v3H2v2h8v3m10 2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3h2V6h12v12H6v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"},null,-1)]))}const km=qe({name:"mdi-import",render:Tm}),Sm={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Em(u,o){return _(),O("svg",Sm,o[0]||(o[0]=[E("path",{fill:"currentColor",d:"M20.506 10.896v7.989q0 .69-.463 1.153t-1.152.462H5.12q-.69 0-1.153-.462t-.462-1.153v-8.027q-.633-.467-.926-1.225t-.013-1.617l.973-3.208q.2-.612.645-.96Q4.63 3.5 5.286 3.5h13.4q.655 0 1.098.326q.442.326.648.943l1.011 3.246q.281.86-.012 1.631t-.926 1.25m-6.3-.396q.963 0 1.438-.54q.475-.539.4-1.114L15.38 4.5h-2.873v4.2q0 .737.504 1.268q.504.532 1.196.532m-4.5 0q.806 0 1.303-.532t.497-1.268V4.5H8.633l-.666 4.423q-.061.466.407 1.021t1.332.556m-4.45 0q.661 0 1.124-.45t.576-1.123L7.583 4.5H5.287q-.327 0-.52.144t-.288.433l-.923 3.158q-.246.788.21 1.527t1.49.738m13.5 0q.898 0 1.434-.7q.537-.7.266-1.565l-.973-3.196q-.096-.289-.289-.414t-.519-.125h-2.246l.627 4.427q.113.673.576 1.123t1.124.45"},null,-1)]))}const Cm=qe({name:"material-symbols-light-storefront",render:Em}),Am={class:"right-setting-tips"},Um={class:"el-alert el-alert--warning is-light",role:"alert"},Im={class:"el-alert__content"},xm={class:"el-alert__title"},Mm=J({__name:"PublishSettingTips",setup(u){const{t:o}=Z();return(t,s)=>(_(),O("div",Am,[E("div",Um,[E("div",Im,[E("div",xm,[E("div",null,j(h(o)("setting.platform.right.tips0")),1),E("div",null,j(h(o)("setting.platform.right.tips1")),1),E("div",null,j(h(o)("setting.platform.right.tips2")),1),E("div",null,j(h(o)("setting.platform.right.tips3")),1),E("div",null,j(h(o)("setting.platform.right.tips4")),1)])])]),s[0]||(s[0]=ml('<h2 data-v-afc0d1fc>FAQ:</h2><div class="setting-help" data-v-afc0d1fc> ä¸ä¼šé…ç½®ï¼Œæˆ–è€…é…ç½®é‡åˆ°é—®é¢˜ï¼Ÿ è¯·åŠ QQç¾¤ <span style="font-weight:bold;color:red;" data-v-afc0d1fc><a href="https://qm.qq.com/cgi-bin/qm/qr?k=fYrA79XDvtr4JuEgez-dmj1h3tOef8pg&amp;jump_from=webapi&amp;authKey=DC+XcjkoTH762jxvkSgpt7V97QFETnaLVTZIWhd8PdZoX+MNSr+LsprWFYYELXu8" target="_blank" data-v-afc0d1fc> 722632752 </a></span> è®¨è®ºã€‚ </div><div class="setting-help" data-v-afc0d1fc> éœ€è¦è¯¦ç»†çš„é…ç½®æŒ‡å¯¼ï¼Ÿè¯·æŸ¥çœ‹åœ¨çº¿æ–‡æ¡£ <a href="https://siyuan.wiki/s/20230810132040-nn4q7vs" target="_blank" data-v-afc0d1fc>å¹³å°é…ç½®æŒ‡å—</a></div><div class="tips-form" data-v-afc0d1fc> æˆ‘æƒ³è¦çš„å¹³å°è¿™é‡Œæ²¡æœ‰ï¼Ÿ<a href="https://terwergreen.feishu.cn/share/base/form/shrcnGRdThUiqnhBg15xgclMM0c" target="_blank" data-v-afc0d1fc> ç‚¹å‡»è¿™é‡Œæäº¤å‘å¸ƒå·¥å…·å¹³å°é€‚é…è·Ÿè¸ªè¡¨ </a></div><div class="tips-form" data-v-afc0d1fc> æˆ‘è¿˜æœ‰å…¶ä»–é—®é¢˜æˆ–è€…æƒ³ç§ä¸‹æ²Ÿé€šä½œè€…ï¼Ÿ<a href="mailto:youweics@163.com" data-v-afc0d1fc> ç›´æŽ¥å‘é‚®ä»¶åˆ°ï¼šyouweics@163.com </a></div>',5))]))}}),Dm=pe(Mm,[["__scopeId","data-v-afc0d1fc"]]),Om={class:"publish-setting-body"},Vm={class:"el-icon"},$m={class:"el-icon"},Nm={class:"el-icon"},Hm=J({__name:"PublishSetting",setup(u){const{t:o}=Z(),t=q("publish");return(s,e)=>{const a=bm,n=ci,i=tm,l=qg,c=pi,r=$e;return _(),C(r,{title:h(o)("service.tab.publish.setting")},{default:b(()=>[E("div",Om,[(_(),C(c,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=m=>t.value=m),class:"setting-tabs",key:t.value},{default:b(()=>[f(n,{name:"publish"},{label:b(()=>[E("span",null,[E("i",Vm,[f(h(vm))]),R(" "+j(h(o)("service.tab.publish.setting")),1)])]),default:b(()=>[f(a)]),_:1}),f(n,{name:"import"},{label:b(()=>[E("span",null,[E("i",$m,[f(h(km))]),R(" "+j(h(o)("setting.platform.import")),1)])]),default:b(()=>[f(i)]),_:1}),f(n,{name:"store"},{label:b(()=>[E("span",null,[E("i",Nm,[f(h(Cm))]),R(" "+j(h(o)("setting.platform.store")),1)])]),default:b(()=>[f(l)]),_:1})]),_:1},8,["modelValue"])),f(Dm)])]),_:1},8,["title"])}}}),Ki=pe(Hm,[["__scopeId","data-v-491a3b4c"]]),Lm=J({__name:"SetIndex",setup(u){return(o,t)=>(_(),C(Ki))}}),Rm=J({__name:"Setting",setup(u){return(o,t)=>(_(),C(Lm))}}),Gm={key:0},Bm=["innerHTML"],jm={key:0},Km=J({__name:"PlatformAddForm",setup(u){const o=W("platform-add-form"),{t}=Z(),s=_t(),e=Xe(),{query:a}=Xe(),{getPlatformType:n,getPrePlatform:i}=eo(),{getSetting:l,updateSetting:c,checkKeyExists:r}=me(),m=ce(e.params),y=m.type,p=q(),g=ce({setting:{},ptype:y,subtype:void 0,subtypeOptions:[],isPre:!1,dynCfg:new Os(y,Vs(y,void 0),"None-1"),dynamicConfigArray:[]}),w=ce({platformName:[{required:!0,message:()=>t("form.validate.name.required")}],authMode:[{required:!0,message:()=>t("form.validate.name.required")}],platformIcon:[{required:!0,message:()=>t("form.validate.name.required")}]}),d=M=>{if(!g.subtype)return ee.error("è¯·é€‰æ‹©å­å¹³å°ç±»åž‹"),!1;const x=g.dynCfg.platformKey;return r(x)?(ee.error(t("dynamic.platform.opt.key.exist")),!1):!0},v=async M=>{if(!M||!d()||!await M.validate((B,A)=>{B?o.debug("æ ¡éªŒæˆåŠŸ"):o.error(t("main.opt.failure"),A)}))return;const K=g.dynCfg;g.dynamicConfigArray.push(K);const $=ht(g.dynamicConfigArray);g.setting[Me]=$,g.setting[K.platformKey]={},await c(g.setting),ee.success(t("main.opt.success")),await s.push({path:"/setting/publish"})},P=async()=>{await S(g.ptype,g.subtype)},S=async(M,x)=>{const K=a.key;g.setting=await l();const $=te.safeParse(g.setting[Me],{});if(g.dynamicConfigArray=($==null?void 0:$.totalCfg)||[],!g.ptype){ee.error("å¹³å°ç±»åž‹ä¸èƒ½ä¸ºç©º");return}const B=n(g.ptype);let A=T.isEmptyString(B.img)?Te.iconEPPlus:`<img src="${B.img}" alt="platform-icon" class="img-platform-icon" style="width: 32px;height: 32px;"/>`;const F=!T.isEmptyString(K),U=!T.isEmptyString(x);if(F&&U)if(g.subtype=x,fi(g.dynamicConfigArray,K)){const L=i(K);A=L.platformIcon;const V=Vs(M,x),Y=new Os(M,V,V,x,A);Y.authMode=L.authMode,Y.authUrl=L.authUrl??"",Y.domain=L.domain??"",g.dynCfg=Y,o.debug("pkey already exists, initialize the new one")}else{const L=i(K);g.dynCfg=L,g.isPre=!0,o.debug("Initialized via pkey")}else if(U){g.subtype=x;const z=Vs(M,x);g.dynCfg=new Os(M,z,z,x,A),o.debug("Initialized by subtype")}else{g.subtypeOptions=zr(M);const z=Vs(M,x);g.dynCfg=new Os(M,z,z,x,A),o.debug("Initialize by selecting a subtype")}};return(async()=>{const M=m.type,x=a.sub;await S(M,x)})(),(M,x)=>{const K=Ve,$=pt,B=ut,A=Ue,F=Ie,U=Mo,z=qt,L=Se,V=st;return _(),C($e,{title:"æ–°å¢žè‡ªå®šä¹‰å¹³å° - "+h(y)},{default:b(()=>[f(V,{class:"add-form",ref_key:"formRef",ref:p,"label-width":"100px",model:g.dynCfg,rules:w},{default:b(()=>[g.isPre?(_(),C(K,{key:0,class:"top-tip",title:"å½“å‰ä¸ºåˆæ¬¡æ·»åŠ ï¼Œå°†å¯¼å…¥è¯¥å¹³å°çš„é¢„å®šä¹‰æ¨¡æ¿ï¼›å¦‚æžœå†æ¬¡æ·»åŠ ï¼Œå°†ç”Ÿæˆå¯ä¿®æ”¹çš„æ–°å®žä¾‹",type:"error",closable:!1})):X("",!0),f(K,{class:"top-tip",title:"å½“å‰å¹³å°ç±»åž‹ä¸º=>"+h(y),type:"info",closable:!1},null,8,["title"]),g.subtypeOptions.length>0?(_(),C(A,{key:1,label:"å­å¹³å°ç±»åž‹"},{default:b(()=>[f(B,{modelValue:g.subtype,"onUpdate:modelValue":x[0]||(x[0]=Y=>g.subtype=Y),class:"m-2",placeholder:"è¯·é€‰æ‹©",onChange:P},{default:b(()=>[(_(!0),O(Ce,null,xe(g.subtypeOptions,Y=>(_(),C($,{key:Y,label:Y,value:Y},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):(_(),C(K,{key:2,class:"top-tip",title:"å­å¹³å°ç±»åž‹ä¸º=>"+g.subtype,type:"info",closable:!1},null,8,["title"])),f(A,{label:h(t)("dynamic.platform.key"),prop:"platformKey"},{default:b(()=>[R(j(g.dynCfg.platformKey),1)]),_:1},8,["label"]),f(A,{label:"å¹³å°åç§°",prop:"platformName"},{default:b(()=>[g.isPre?(_(),O("span",Gm,j(g.dynCfg.platformName),1)):(_(),C(F,{key:1,modelValue:g.dynCfg.platformName,"onUpdate:modelValue":x[1]||(x[1]=Y=>g.dynCfg.platformName=Y)},null,8,["modelValue"]))]),_:1}),f(A,{label:"å¹³å°å›¾æ ‡",prop:"platformIcon",class:"cfg-icon"},{default:b(()=>[g.isPre?X("",!0):(_(),C(F,{key:0,modelValue:g.dynCfg.platformIcon,"onUpdate:modelValue":x[2]||(x[2]=Y=>g.dynCfg.platformIcon=Y),style:{width:"75%","margin-right":"16px"},placeholder:"ç›´æŽ¥ç²˜è´´svgä»£ç æˆ–è€…imgæ ‡ç­¾ä»£ç ",type:"textarea",rows:10},null,8,["modelValue"])),f(U,null,{default:b(()=>[E("span",{innerHTML:g.dynCfg.platformIcon},null,8,Bm)]),_:1})]),_:1}),f(A,{label:"æŽˆæƒæ–¹å¼",prop:"authMode"},{default:b(()=>[g.isPre?(_(),O("span",jm,j(g.dynCfg.authMode===h(ge).API?"APIæŽˆæƒ":"ç½‘é¡µæŽˆæƒ"),1)):(_(),C(B,{key:1,modelValue:g.dynCfg.authMode,"onUpdate:modelValue":x[3]||(x[3]=Y=>g.dynCfg.authMode=Y),placeholder:"è¯·é€‰æ‹©",disabled:!0},{default:b(()=>[f($,{value:h(ge).API,label:"APIæŽˆæƒ"},null,8,["value"]),f($,{value:h(ge).WEBSITE,label:"ç½‘é¡µæŽˆæƒ"},null,8,["value"])]),_:1},8,["modelValue"]))]),_:1}),g.dynCfg.authMode===h(ge).WEBSITE?(_(),C(A,{key:3,label:"ç™»å½•åœ°å€",prop:"authUrl",required:""},{default:b(()=>[f(F,{modelValue:g.dynCfg.authUrl,"onUpdate:modelValue":x[4]||(x[4]=Y=>g.dynCfg.authUrl=Y),placeholder:"è¯·è¾“å…¥è¯¥å¹³å°çš„ç½‘é¡µç™»å½•åœ°å€"},null,8,["modelValue"])]),_:1})):X("",!0),g.dynCfg.authMode===h(ge).WEBSITE?(_(),C(A,{key:4,label:"ä¸»åŸŸå",prop:"domain",required:""},{default:b(()=>[f(F,{modelValue:g.dynCfg.domain,"onUpdate:modelValue":x[5]||(x[5]=Y=>g.dynCfg.domain=Y),placeholder:"è¯·è¾“å…¥è¯¥å¹³å°çš„ä¸»åŸŸå"},null,8,["modelValue"])]),_:1})):X("",!0),f(A,{label:"æ˜¯å¦å¯ç”¨"},{default:b(()=>[f(z,{modelValue:g.dynCfg.isEnabled,"onUpdate:modelValue":x[6]||(x[6]=Y=>g.dynCfg.isEnabled=Y)},null,8,["modelValue"])]),_:1}),f(A,null,{default:b(()=>[f(L,{type:"primary",onClick:x[7]||(x[7]=Y=>v(p.value))},{default:b(()=>[R(j(h(t)("dynamic.platform.opt.add")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])}}}),Wm=pe(Km,[["__scopeId","data-v-93cfb31b"]]),Fm=["innerHTML"],zm=J({__name:"PlatformUpdateForm",setup(u){const o=W("platform-update-form"),{t}=Z(),s=_t(),e=Xe(),{getSetting:a,updateSetting:n}=me(),l=ce(e.params).key,c=q(),r=ce({key:l,dynCfg:new Os(ye.Common,Vs(ye.Common,void 0),"None-1"),setting:{},dynamicConfigArray:[]}),m=ce({platformName:[{required:!0,message:()=>t("form.validate.name.required")}],authMode:[{required:!0,message:()=>t("form.validate.name.required")}],platformIcon:[{required:!0,message:()=>t("form.validate.name.required")}]}),y=async w=>{if(!w||!await w.validate((S,k)=>{S?o.debug("æ ¡éªŒæˆåŠŸ"):o.error(t("main.opt.failure"),k)}))return;const v=r.dynCfg;Wt(r.dynamicConfigArray,l,v);const P=ht(r.dynamicConfigArray);r.setting[Me]=P,await n(r.setting),ee.success(t("main.opt.success")),await s.push({path:"/setting/publish"})},p=async w=>{r.setting=await a();const d=te.safeParse(r.setting[Me],{});r.dynamicConfigArray=(d==null?void 0:d.totalCfg)||[],r.dynCfg=Ws(r.dynamicConfigArray,w)};return(async()=>{await p(r.key)})(),(w,d)=>{const v=Ve,P=Ue,S=Ie,k=Mo,M=pt,x=ut,K=qt,$=Se,B=st;return _(),C($e,{title:"ä¿®æ”¹å¹³å°å®šä¹‰ - "+h(l)},{default:b(()=>[f(B,{class:"update-form",ref_key:"formRef",ref:c,"label-width":"100px",model:r.dynCfg,rules:m},{default:b(()=>[f(v,{class:"top-tip",title:"å½“å‰å¹³å°ç±»åž‹ä¸º=>"+r.dynCfg.platformKey,type:"info",closable:!1},null,8,["title"]),f(v,{class:"top-tip",title:"å­å¹³å°ç±»åž‹ä¸º=>"+r.dynCfg.subPlatformType,type:"info",closable:!1},null,8,["title"]),f(v,{class:"top-tip",title:"æ³¨æ„ï¼šä¸ºäº†ä¿ç•™é…ç½®ä¿¡æ¯çš„å®Œæ•´æ€§ï¼Œç¼–è¾‘å¹³å°æ—¶æŽˆæƒæ–¹å¼ä¸å¯ä¿®æ”¹ï¼Œå¦‚éœ€åˆ‡æ¢ï¼Œè¯·æ–°å»ºæ–°çš„å®žä¾‹",type:"warning",closable:!1}),f(P,{label:h(t)("dynamic.platform.key"),prop:"platformKey"},{default:b(()=>[R(j(r.dynCfg.platformKey),1)]),_:1},8,["label"]),f(P,{label:"å¹³å°åç§°",prop:"platformName"},{default:b(()=>[f(S,{modelValue:r.dynCfg.platformName,"onUpdate:modelValue":d[0]||(d[0]=A=>r.dynCfg.platformName=A)},null,8,["modelValue"])]),_:1}),f(P,{label:"å¹³å°å›¾æ ‡",prop:"platformIcon",class:"cfg-icon"},{default:b(()=>[f(S,{modelValue:r.dynCfg.platformIcon,"onUpdate:modelValue":d[1]||(d[1]=A=>r.dynCfg.platformIcon=A),style:{width:"75%","margin-right":"16px"},placeholder:"ç›´æŽ¥ç²˜è´´svgä»£ç æˆ–è€…imgæ ‡ç­¾ä»£ç ",type:"textarea",rows:10},null,8,["modelValue"]),f(k,null,{default:b(()=>[E("span",{innerHTML:r.dynCfg.platformIcon},null,8,Fm)]),_:1})]),_:1}),f(P,{label:"æŽˆæƒæ–¹å¼",prop:"authMode"},{default:b(()=>[f(x,{modelValue:r.dynCfg.authMode,"onUpdate:modelValue":d[2]||(d[2]=A=>r.dynCfg.authMode=A),placeholder:"è¯·é€‰æ‹©",disabled:!0},{default:b(()=>[f(M,{value:h(ge).API,label:"APIæŽˆæƒ"},null,8,["value"]),f(M,{value:h(ge).WEBSITE,label:"ç½‘é¡µæŽˆæƒ"},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),r.dynCfg.authMode===h(ge).WEBSITE?(_(),C(P,{key:0,label:"ç™»å½•åœ°å€",prop:"authUrl",required:""},{default:b(()=>[f(S,{modelValue:r.dynCfg.authUrl,"onUpdate:modelValue":d[3]||(d[3]=A=>r.dynCfg.authUrl=A),placeholder:"è¯·è¾“å…¥è¯¥å¹³å°çš„ç½‘é¡µç™»å½•åœ°å€"},null,8,["modelValue"])]),_:1})):X("",!0),r.dynCfg.authMode===h(ge).WEBSITE?(_(),C(P,{key:1,label:"ä¸»åŸŸå",prop:"domain",required:""},{default:b(()=>[f(S,{modelValue:r.dynCfg.domain,"onUpdate:modelValue":d[4]||(d[4]=A=>r.dynCfg.domain=A),placeholder:"è¯·è¾“å…¥è¯¥å¹³å°çš„ä¸»åŸŸå"},null,8,["modelValue"])]),_:1})):X("",!0),f(P,{label:"æ˜¯å¦å¯ç”¨"},{default:b(()=>[f(K,{modelValue:r.dynCfg.isEnabled,"onUpdate:modelValue":d[5]||(d[5]=A=>r.dynCfg.isEnabled=A)},null,8,["modelValue"])]),_:1}),f(P,null,{default:b(()=>[f($,{type:"primary",onClick:d[6]||(d[6]=A=>y(c.value))},{default:b(()=>[R(j(h(t)("dynamic.platform.opt.add")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])}}}),Jm=pe(zm,[["__scopeId","data-v-5866978d"]]),qm=["href"],Ym=["href"],Xm={target:"_blank",href:"https://gitee.com/terwer/siyuan-plugin-publisher#%E6%8D%90%E8%B5%A0"},Zm=J({__name:"CommonBlogSetting",props:{apiType:{type:String,default:""},cfg:{type:Object,default:null}},emits:["onHomeChange","onApiUrlChange","onUsernameChange"],setup(u,{emit:o}){const t=W("commonblog-setting"),s=new fe,{t:e}=Z(),{getSetting:a,updateSetting:n}=me(),{getPicbedServiceType:i,checkPicgoInstalled:l}=Oo(),{isInSiyuanOrSiyuanNewWin:c}=dt(),r=u,m=o,y=B=>{m&&m("onHomeChange",B,d.cfg)},p=B=>{m&&m("onUsernameChange",B,d.cfg)},g=q(!1),w=q(null),d=ce({cfg:{},ksKeyword:"",isCateLoading:!1,kwSpaces:[],settingTips:"",dynCfg:{},setting:{},dynamicConfigArray:[],isInit:!1,proxy:{useMiddleware:!1,useCorsAnywhere:!1,useSiyuanProxy:!1}});Je(()=>d.cfg.blogid,(B,A)=>{B!==A&&(v(B),t.debug("Watch logic triggered:",B))},{immediate:!0});const v=B=>{var U;const A=e("setting.blog.platform.support.common")+r.apiType+" ";let F=d.cfg.blogName;if((U=r.cfg)!=null&&U.knowledgeSpaceEnabled){const z=d.kwSpaces.find(L=>L.value===B);console.log(z),F=z?z.label:d.cfg.blogid??d.cfg.blogName,d.cfg.blogName=F}d.settingTips=A+F},P=async()=>{g.value=!0;let B;const A=await we.getAdaptor(r.apiType,d.cfg),F=I.blogApi(s,A);try{await F.checkAuth();try{await S(F),d.cfg.apiStatus=!0}catch(U){d.cfg.apiStatus=!1,B=U.toString()}t.info("======æ ¡éªŒæ­£å¸¸ç»“æŸ======")}catch(U){if(typeof U=="boolean"){if(U===!0)try{await S(F),d.cfg.apiStatus=!0}catch(z){d.cfg.apiStatus=!1,B=z.toString()}else d.cfg.apiStatus=!1,B="æ ¡éªŒå¤±è´¥ï¼Œè¯·æ£€æŸ¥å¹³å°é…ç½®";t.info("======æ ¡éªŒä¿®æ­£ç»“æŸ======")}else d.cfg.apiStatus=!1,B=U.toString(),t.error(e("main.opt.failure")+"=>",U)}if(d.cfg.apiStatus)ee.success(e("main.opt.success"));else{const U=e("setting.blog.vali.error")+`=>${B.toString()}`;t.error(U),ee.error(U)}d.dynCfg&&(d.dynCfg.isAuth=d.cfg.apiStatus),await k(!0),g.value=!1,t.debug("Commonblogé€šç”¨SettingéªŒè¯å®Œæ¯•")},S=async B=>{const A=await B.getUsersBlogs(d.ksKeyword);if(A&&A.length>0){d.kwSpaces.length==0&&A.forEach(U=>{const z={label:U.blogName,value:U.blogid};d.kwSpaces.push(z)});const F=A[0];d.cfg.blogid=F.blogid,d.cfg.blogName=F.blogName;for(const U in F.metadataMap)d.cfg[U]=F.metadataMap[U]}},k=async B=>{t.debug("prepare to store cfg=>",{cfg:ie(d.cfg)}),t.debug("Commonblogé€šç”¨Settingä¿å­˜é…ç½®"),d.setting[r.apiType]=d.cfg;const A=ht(d.dynamicConfigArray);d.setting[Me]=A,await n(d.setting),B!==!0&&ee.success(e("main.opt.success"))},M=async B=>{try{const A=await we.getAdaptor(r.apiType,d.cfg);t.debug("commonblogApiAdaptor=>",A);const U=await I.blogApi(s,A).getUsersBlogs(B);U&&U.length>0&&(U.forEach(z=>{const L={label:z.blogName,value:z.blogid};d.kwSpaces.push(L)}),v(d.cfg.blogid),t.debug("å·²å¼ºåˆ¶åˆ·æ–°"))}catch(A){t.error(e("main.opt.failure"),A)}},x=async()=>{var B;try{d.isCateLoading=!0,t.debug("reload categories for single category woth search"),d.kwSpaces=[],d.cfg.blogid=void 0,(B=r.cfg)!=null&&B.knowledgeSpaceEnabled&&await M(d.ksKeyword),w.value.visible=!0}catch(A){t.error("çŸ¥è¯†ç©ºé—´åŠ è½½å¤±è´¥",A)}finally{d.isCateLoading=!1,d.isInit=!0}},K=async()=>{await l()||(ee.error(e("publisher.picbed.picgo.not.install")),d.cfg.picbedService=it.None)},$=async()=>{var F;d.setting=await a();const B=te.safeParse(d.setting[Me],{});d.dynamicConfigArray=(B==null?void 0:B.totalCfg)||[],d.dynCfg=Ws(d.dynamicConfigArray,r.apiType),t.debug("Commonblogé€šç”¨Settingé…ç½®åˆå§‹åŒ–");let A=r.cfg;if(ae.isEmptyObject(A)){const U=d.setting[r.apiType];A=te.safeParse(U,{})}A?(t.debug("get setting conf=>",A),d.cfg=A,(F=r.cfg)!=null&&F.knowledgeSpaceEnabled&&await M(d.ksKeyword)):ee.error("Read init config error, your config may not work")};return Ze(async()=>{await $();const{isUseSiyuanProxy:B}=Do(d.cfg.middlewareUrl,d.cfg.corsAnywhereUrl);d.proxy.useSiyuanProxy=B,d.proxy.useCorsAnywhere=!T.isEmptyString(d.cfg.corsAnywhereUrl),d.proxy.useMiddleware=!T.isEmptyString(d.cfg.middlewareUrl),d.cfg.picbedService=await i(d.cfg),d.isInit=!0}),(B,A)=>{const F=Dt,U=Ve,z=Ie,L=Ue,V=Uo,Y=Bs,Pe=pt,Be=ut,He=Se,Qe=st;return d.isInit?(_(),C(Qe,{key:1,"label-width":"120px"},{default:b(()=>{var Ye,Le,Ge,le,We;return[f(U,{closable:!1,title:d.settingTips,class:"top-tip",type:"info"},null,8,["title"]),(Ye=r.cfg)!=null&&Ye.knowledgeSpaceEnabled?(_(),C(U,{key:0,closable:!1,title:h(e)("knowledgeSpaceEnabled.Tips").replace(/\[knowledge-space-title\]/g,(Le=r.cfg)==null?void 0:Le.knowledgeSpaceTitle),class:"top-tip",type:"info"},null,8,["title"])):X("",!0),Ct(B.$slots,"header",{cfg:d.cfg},void 0,!0),f(L,{label:h(e)("setting.common.home")},{default:b(()=>{var N;return[f(z,{modelValue:d.cfg.home,"onUpdate:modelValue":A[0]||(A[0]=G=>d.cfg.home=G),placeholder:(N=r.cfg)==null?void 0:N.placeholder.homePlaceholder,onInput:y},null,8,["modelValue","placeholder"])]}),_:1},8,["label"]),f(L,{label:h(e)("setting.common.apiurl")},{default:b(()=>{var N;return[f(z,{modelValue:d.cfg.apiUrl,"onUpdate:modelValue":A[1]||(A[1]=G=>d.cfg.apiUrl=G),placeholder:(N=r.cfg)==null?void 0:N.placeholder.apiUrlPlaceholder},null,8,["modelValue","placeholder"])]}),_:1},8,["label"]),r.cfg.usernameEnabled?(_(),C(L,{key:1,label:d.cfg.usernameLabel??h(e)("setting.common.username")},{default:b(()=>{var N;return[f(z,{modelValue:d.cfg.username,"onUpdate:modelValue":A[2]||(A[2]=G=>d.cfg.username=G),placeholder:(N=r.cfg)==null?void 0:N.placeholder.usernamePlaceholder,onInput:p},null,8,["modelValue","placeholder"])]}),_:1},8,["label"])):X("",!0),d.cfg.passwordType===h(Oe).PasswordType_Password?(_(),C(L,{key:2,label:d.cfg.passwordLabel??h(e)("setting.common.password"),required:""},{default:b(()=>[f(z,{type:"password",modelValue:d.cfg.password,"onUpdate:modelValue":A[3]||(A[3]=N=>d.cfg.password=N),"show-password":"",placeholder:r.cfg.placeholder.passwordPlaceholder},null,8,["modelValue","placeholder"]),d.cfg.showTokenTip?(_(),O("a",{key:0,href:d.cfg.tokenSettingUrl,target:"_blank"},j(h(e)("setting.common.username.gen"))+"ï¼š"+j(d.cfg.tokenSettingUrl),9,qm)):X("",!0)]),_:1},8,["label"])):d.cfg.passwordType===h(Oe).PasswordType_Token?(_(),C(L,{key:3,label:d.cfg.passwordLabel??h(e)("setting.common.token"),required:""},{default:b(()=>[f(z,{type:"password",modelValue:d.cfg.password,"onUpdate:modelValue":A[4]||(A[4]=N=>d.cfg.password=N),"show-password":"",placeholder:r.cfg.placeholder.passwordPlaceholder},null,8,["modelValue","placeholder"]),d.cfg.showTokenTip?(_(),O("a",{key:0,href:d.cfg.tokenSettingUrl,target:"_blank"},j(h(e)("setting.common.token.gen"))+"ï¼š"+j(d.cfg.tokenSettingUrl),9,Ym)):X("",!0)]),_:1},8,["label"])):(_(),C(L,{key:4,label:d.cfg.passwordLabel??"å¹³å°Cookie",required:""},{default:b(()=>[f(z,{modelValue:d.cfg.password,"onUpdate:modelValue":A[5]||(A[5]=N=>d.cfg.password=N),style:{width:"75%","margin-right":"16px"},placeholder:"è¯·ç›´æŽ¥ç²˜è´´å¹³å°cookieï¼Œä¸ºäº†æ‚¨çš„éšç§å®‰å…¨ï¼Œè¯·å‹¿æ³„éœ²cookieç»™ä»»ä½•äºº",type:"textarea",rows:10,disabled:!0},null,8,["modelValue"]),f(U,{closable:!1,title:"æ­¤å¤„æ•°æ®ä¸ºç½‘é¡µæŽˆæƒè‡ªåŠ¨ç”Ÿæˆï¼Œä»…åœ¨æ‚¨æœ¬åœ°æµè§ˆå™¨å­˜å‚¨ï¼Œä¸æ”¯æŒä¿®æ”¹ã€‚ä¸ºäº†æ‚¨çš„å®‰å…¨ï¼Œè¯·å‹¿æ³„éœ²æ­¤å¤„ä¿¡æ¯ç»™ä»»ä½•äººã€‚",class:"inline-tip",type:"error"})]),_:1},8,["label"])),Ct(B.$slots,"main",{cfg:d.cfg},void 0,!0),f(L,{label:h(e)("setting.blog.previewUrl")},{default:b(()=>{var N;return[f(z,{modelValue:d.cfg.previewUrl,"onUpdate:modelValue":A[6]||(A[6]=G=>d.cfg.previewUrl=G),placeholder:(N=r.cfg)==null?void 0:N.placeholder.previewUrlPlaceholder,disabled:!r.cfg.allowPreviewUrlChange},null,8,["modelValue","placeholder","disabled"])]}),_:1},8,["label"]),f(L,{label:h(e)("setting.blog.pageType")},{default:b(()=>[f(Y,{modelValue:d.cfg.pageType,"onUpdate:modelValue":A[7]||(A[7]=N=>d.cfg.pageType=N),class:"ml-4"},{default:b(()=>[f(V,{value:h(ue).Markdown,size:"large"},{default:b(()=>A[13]||(A[13]=[R("Markdown")])),_:1},8,["value"]),f(V,{value:h(ue).Html,size:"large"},{default:b(()=>A[14]||(A[14]=[R("HTML")])),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),(Ge=r.cfg)!=null&&Ge.cateSearchEnabled?(_(),C(L,{key:5,class:"cate-input",label:"æœç´¢å…³é”®è¯"},{default:b(()=>{var N;return[f(z,{modelValue:d.ksKeyword,"onUpdate:modelValue":A[8]||(A[8]=G=>d.ksKeyword=G),placeholder:"è¯·è¾“å…¥["+((N=r.cfg)==null?void 0:N.knowledgeSpaceTitle)+"]æœç´¢å…³é”®è¯ï¼Œè¾“å…¥å®ŒæˆåŽè¯·æŒ‰Enteré”®æˆ–è€…ç§»èµ°å…‰æ ‡",onChange:x},null,8,["modelValue","placeholder"])]}),_:1})):X("",!0),(le=r.cfg)!=null&&le.knowledgeSpaceEnabled?(_(),C(L,{key:6,label:(We=r.cfg)==null?void 0:We.knowledgeSpaceTitle},{default:b(()=>[f(Be,{modelValue:d.cfg.blogid,"onUpdate:modelValue":A[9]||(A[9]=N=>d.cfg.blogid=N),class:"m-2",placeholder:h(e)("main.opt.select"),"no-data-text":h(e)("main.data.empty"),loading:d.isCateLoading,"loading-text":"åŠ è½½ä¸­...",ref_key:"singleCateSelect",ref:w},{default:b(()=>[(_(!0),O(Ce,null,xe(d.kwSpaces,N=>(_(),C(Pe,{key:N.value,label:N.label,value:N.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","no-data-text","loading"])]),_:1},8,["label"])):X("",!0),f(L,{label:h(e)("publisher.picbed.service")},{default:b(()=>[f(Y,{modelValue:d.cfg.picbedService,"onUpdate:modelValue":A[10]||(A[10]=N=>d.cfg.picbedService=N),class:"ml-4"},{default:b(()=>[f(V,{value:h(it).None,size:"large"},{default:b(()=>[R(j(h(e)("publisher.picbed.none")),1)]),_:1},8,["value"]),d.cfg.picgoPicbedSupported?(_(),C(V,{key:0,value:h(it).PicGo,size:"large",onClick:K},{default:b(()=>[R(j(h(e)("publisher.picbed.picgo"))+" ",1),E("sup",null,j(h(e)("publisher.picbed.recom1")),1)]),_:1},8,["value"])):X("",!0),d.cfg.bundledPicbedSupported?(_(),C(V,{key:1,value:h(it).Bundled,size:"large"},{default:b(()=>[R(j(h(e)("publisher.picbed.bundled"))+" ",1),E("sup",null,j(h(e)("publisher.picbed.recom2")),1)]),_:1},8,["value"])):X("",!0)]),_:1},8,["modelValue"])]),_:1},8,["label"]),!d.proxy.useSiyuanProxy&&!h(c)()&&!d.proxy.useCorsAnywhere?(_(),C(L,{key:7,label:h(e)("setting.blog.middlewareUrl")},{default:b(()=>[f(z,{modelValue:d.cfg.middlewareUrl,"onUpdate:modelValue":A[11]||(A[11]=N=>d.cfg.middlewareUrl=N),placeholder:h(e)("setting.blog.middlewareUrl.tip")},null,8,["modelValue","placeholder"]),f(U,{closable:!1,title:h(e)("setting.blog.middlewareUrl.my.tip"),class:"top-tip",type:"info"},null,8,["title"])]),_:1},8,["label"])):X("",!0),!d.proxy.useSiyuanProxy&&!h(c)()?(_(),C(L,{key:8,label:h(e)("setting.blog.middlewareUrl.new")},{default:b(()=>[f(z,{modelValue:d.cfg.corsAnywhereUrl,"onUpdate:modelValue":A[12]||(A[12]=N=>d.cfg.corsAnywhereUrl=N),placeholder:h(e)("setting.blog.corsAnywhereUrl.tip")},null,8,["modelValue","placeholder"]),f(U,{closable:!1,title:h(e)("setting.blog.middlewareUrl.my.new.tip"),class:"top-tip",type:"warning"},null,8,["title"])]),_:1},8,["label"])):X("",!0),!d.proxy.useSiyuanProxy&&!h(c)()?(_(),C(L,{key:9},{default:b(()=>[f(U,{closable:!1,title:h(e)("setting.blog.middlewareUrl.my.warn.tip"),class:"top-tip",type:"error"},null,8,["title"]),f(U,{closable:!1,title:h(e)("setting.blog.middlewareUrl.my.fee.tip"),class:"top-tip",type:"error"},null,8,["title"]),E("a",Xm,j(h(e)("setting.blog.middlewareUrl.my.coffee")),1)]),_:1})):X("",!0),f(L,null,{default:b(()=>[f(He,{type:"primary",loading:g.value,onClick:P},{default:b(()=>[R(j(g.value?h(e)("setting.blog.vali.ing"):h(e)("setting.blog.vali")),1)]),_:1},8,["loading"]),d.cfg.apiStatus?X("",!0):(_(),C(U,{key:0,title:h(e)("setting.blog.vali.tip.metaweblog"),type:"warning",closable:!1},null,8,["title"])),d.cfg.apiStatus?(_(),C(U,{key:1,title:h(e)("setting.blog.vali.ok.metaweblog"),type:"success",closable:!1},null,8,["title"])):X("",!0)]),_:1}),f(L,null,{default:b(()=>[f(He,{type:"primary",onClick:k},{default:b(()=>[R(j(h(e)("setting.blog.save")),1)]),_:1}),f(He,null,{default:b(()=>[R(j(h(e)("setting.blog.cancel")),1)]),_:1})]),_:1}),Ct(B.$slots,"footer",{cfg:d.cfg},void 0,!0)]}),_:3})):(_(),C(F,{key:0,class:"placeholder",rows:5,animated:""}))}}}),ts=pe(Zm,[["__scopeId","data-v-3d0f0988"]]),hs=J({__name:"CustomWebSetting",props:{apiType:{type:String,default:""},cfg:{type:Object,default:null}},setup(u){const o=u;return(t,s)=>{const e=ts;return _(),C(e,{"api-type":o.apiType,cfg:o.cfg},null,8,["api-type","cfg"])}}});class Qm extends Qt{}const eh=J({__name:"JuejinSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>rn(s.apiType)),o=await o,t(),o),n=a,i=new Qm;return i.homePlaceholder=e("setting.juejin.home.tip"),i.apiUrlPlaceholder=e("setting.juejin.apiUrl.tip"),i.passwordPlaceholder=e("setting.juejin.password.tip"),i.previewUrlPlaceholder=e("setting.juejin.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(hs,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}});class th extends Qt{}const sh=J({__name:"JianshuSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>ln(s.apiType)),o=await o,t(),o),n=a,i=new th;return i.homePlaceholder=e("setting.jianshu.home.tip"),i.apiUrlPlaceholder=e("setting.jianshu.apiUrl.tip"),i.passwordPlaceholder=e("setting.jianshu.password.tip"),i.previewUrlPlaceholder=e("setting.jianshu.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(hs,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}});class oh extends Qt{}const ah=J({__name:"WechatSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>nn(s.apiType)),o=await o,t(),o),n=a,i=new oh;return i.homePlaceholder=e("setting.wechat.home.tip"),i.apiUrlPlaceholder=e("setting.wechat.apiUrl.tip"),i.passwordPlaceholder=e("setting.wechat.password.tip"),i.previewUrlPlaceholder=e("setting.wechat.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(hs,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}});class nh extends Qt{}const ih=J({__name:"CsdnSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>an(s.apiType)),o=await o,t(),o),n=a,i=new nh;return i.homePlaceholder=e("setting.csdn.home.tip"),i.apiUrlPlaceholder=e("setting.csdn.apiUrl.tip"),i.passwordPlaceholder=e("setting.csdn.password.tip"),i.previewUrlPlaceholder=e("setting.csdn.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(hs,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}}),lh=J({__name:"ZhihuSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>en(s.apiType)),o=await o,t(),o),n=a,i=new Pi;return i.homePlaceholder=e("setting.zhihu.home.tip"),i.apiUrlPlaceholder=e("setting.zhihu.apiUrl.tip"),i.usernamePlaceholder=e("setting.zhihu.username.tip"),i.passwordPlaceholder=e("setting.zhihu.password.tip"),i.previewUrlPlaceholder=e("setting.zhihu.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(hs,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}}),fs=J({__name:"MetaweblogSetting",props:{apiType:{type:String,default:""},cfg:{type:Object,default:null}},setup(u){const o=u;return(t,s)=>{const e=ts;return _(),C(e,{"api-type":o.apiType,cfg:o.cfg},null,8,["api-type","cfg"])}}});class rh extends Xt{}const ch=J({__name:"WordpressSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,e=(c,r)=>{const{home:m,apiUrl:y}=Mn.parseHomeAndUrl(c);r.home=m,r.apiUrl=y,T.isEmptyString(r.home)&&(r.apiUrl="")},{t:a}=Z(),{cfg:n}=([o,t]=Ae(()=>Xa(s.apiType)),o=await o,t(),o),i=n,l=new rh;return l.homePlaceholder=a("setting.wordpress.home.tip"),l.usernamePlaceholder=a("setting.wordpress.username.tip"),l.passwordPlaceholder=a("setting.wordpress.password.tip"),l.apiUrlPlaceholder=a("setting.wordpress.apiUrl.tip"),l.previewUrlPlaceholder=a("setting.wordpress.previewUrl.tip"),i.placeholder=l,(c,r)=>(_(),C(fs,{"api-type":s.apiType,cfg:h(i),onOnHomeChange:e},null,8,["api-type","cfg"]))}});class ph extends Xt{}const uh=J({__name:"JvueSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>dn(s.apiType)),o=await o,t(),o),n=a,i=new ph;return i.homePlaceholder=e("setting.jvue.home.tip"),i.usernamePlaceholder=e("setting.jvue.username.tip"),i.passwordPlaceholder=e("setting.jvue.password.tip"),i.apiUrlPlaceholder=e("setting.jvue.apiUrl.tip"),i.previewUrlPlaceholder=e("setting.jvue.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(fs,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}});class dh extends Xt{}const gh=J({__name:"TypechoSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,e=(c,r)=>{const{home:m,apiUrl:y}=Dn.parseHomeAndUrl(c);r.home=m,r.apiUrl=y,T.isEmptyString(r.home)&&(r.apiUrl="")},{t:a}=Z(),{cfg:n}=([o,t]=Ae(()=>Za(s.apiType)),o=await o,t(),o),i=n,l=new dh;return l.homePlaceholder=a("setting.typecho.home.tip"),l.usernamePlaceholder=a("setting.typecho.username.tip"),l.passwordPlaceholder=a("setting.typecho.password.tip"),l.apiUrlPlaceholder=a("setting.typecho.apiUrl.tip"),l.previewUrlPlaceholder=a("setting.typecho.previewUrl.tip"),i.placeholder=l,(c,r)=>(_(),C(fs,{"api-type":s.apiType,cfg:h(i),onOnHomeChange:e},null,8,["api-type","cfg"]))}});class mh extends Xt{}const hh=J({__name:"CnblogsSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>Ya(s.apiType)),o=await o,t(),o),n=a,i=new mh;return i.homePlaceholder=e("setting.cnblogs.home.tip"),i.usernamePlaceholder=e("setting.cnblogs.username.tip"),i.passwordPlaceholder=e("setting.cnblogs.password.tip"),i.apiUrlPlaceholder=e("setting.cnblogs.apiUrl.tip"),i.previewUrlPlaceholder=e("setting.cnblogs.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(fs,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}}),fh=J({__name:"OthermetaSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>tn(s.apiType)),o=await o,t(),o),n=a,i=new Xt;return i.homePlaceholder=e("setting.metaweblog.home.tip"),i.usernamePlaceholder=e("setting.metaweblog.username.tip"),i.passwordPlaceholder=e("setting.metaweblog.password.tip"),i.apiUrlPlaceholder=e("setting.metaweblog.apiUrl.tip"),i.previewUrlPlaceholder=e("setting.metaweblog.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(fs,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}}),yh={key:1},bh=J({__name:"CommonGithubSetting",props:{apiType:{type:String,default:""},cfg:{type:Object,default:null}},setup(u){const o=W("common-blog-setting"),t=u,{t:s}=Z(),e=ce({showAdvancedConfig:!1,advanceBtnText:"æ˜¾ç¤ºæ›´å¤šé…ç½®"}),a=()=>{e.showAdvancedConfig?(e.showAdvancedConfig=!e.showAdvancedConfig,e.advanceBtnText="æ˜¾ç¤ºæ›´å¤šé…ç½®"):(e.showAdvancedConfig=!e.showAdvancedConfig,e.advanceBtnText="éšè—æ›´å¤šé…ç½®")},n=i=>{i.blogid=i.defaultPath,o.debug("sync defaultPath to blogid",{cfg:ie(i)})};return(i,l)=>{const c=Ie,r=Ue,m=qt,y=ts;return _(),C(y,{"api-type":t.apiType,cfg:t.cfg},{header:b(p=>[Ct(i.$slots,"header",{cfg:p.cfg},void 0,!0)]),main:b(p=>[f(r,{label:h(s)("setting.blog.type.github.repo")},{default:b(()=>[f(c,{modelValue:p.cfg.githubRepo,"onUpdate:modelValue":g=>p.cfg.githubRepo=g,placeholder:h(s)("setting.blog.type.github.repo.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:h(s)("setting.blog.yamlLinkEnabled")},{default:b(()=>[f(m,{modelValue:p.cfg.yamlLinkEnabled,"onUpdate:modelValue":g=>p.cfg.yamlLinkEnabled=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),f(r,{label:h(s)("setting.blog.type.github.default.branch")},{default:b(()=>[f(c,{modelValue:p.cfg.githubBranch,"onUpdate:modelValue":g=>p.cfg.githubBranch=g,placeholder:h(s)("setting.blog.type.github.default.branch.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:h(s)("setting.blog.type.github.default.path")},{default:b(()=>[f(c,{modelValue:p.cfg.defaultPath,"onUpdate:modelValue":g=>p.cfg.defaultPath=g,onInput:g=>n(p.cfg),placeholder:h(s)("setting.blog.type.github.default.path.tip")},null,8,["modelValue","onUpdate:modelValue","onInput","placeholder"])]),_:2},1032,["label"]),p.cfg.picbedService===h(it).Bundled?(_(),C(r,{key:0,label:h(s)("setting.blog.type.github.images.path")},{default:b(()=>[f(c,{modelValue:p.cfg.imageStorePath,"onUpdate:modelValue":g=>p.cfg.imageStorePath=g,placeholder:h(s)("setting.blog.type.github.images.path.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])):X("",!0),f(r,{label:h(s)("setting.blog.mdFilenameRule")},{default:b(()=>[f(c,{modelValue:p.cfg.mdFilenameRule,"onUpdate:modelValue":g=>p.cfg.mdFilenameRule=g,placeholder:h(s)("setting.blog.mdFilenameRule.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:h(s)("setting.blog.previewPostUrl")},{default:b(()=>[f(c,{modelValue:p.cfg.previewPostUrl,"onUpdate:modelValue":g=>p.cfg.previewPostUrl=g,placeholder:h(s)("setting.blog.previewPostUrl.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,null,{default:b(()=>[E("a",{href:"javascript:;",onClick:a},j(e.advanceBtnText),1)]),_:1}),e.showAdvancedConfig?(_(),O("div",yh,[f(r,{label:h(s)("setting.blog.type.github.msg")},{default:b(()=>[f(c,{modelValue:p.cfg.defaultMsg,"onUpdate:modelValue":g=>p.cfg.defaultMsg=g,placeholder:h(s)("setting.blog.type.github.msg.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:h(s)("setting.blog.type.github.author")},{default:b(()=>[f(c,{modelValue:p.cfg.author,"onUpdate:modelValue":g=>p.cfg.author=g,placeholder:h(s)("setting.blog.type.github.author")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:h(s)("setting.blog.type.github.email")},{default:b(()=>[f(c,{modelValue:p.cfg.email,"onUpdate:modelValue":g=>p.cfg.email=g,placeholder:h(s)("setting.blog.type.github.email.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:h(s)("setting.blog.type.github.site")},{default:b(()=>[f(c,{modelValue:p.cfg.site,"onUpdate:modelValue":g=>p.cfg.site=g,placeholder:h(s)("setting.blog.type.github.site.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])])):X("",!0),f(r,{label:h(s)("setting.blog.type.github.dyn.yaml")},{default:b(()=>[f(c,{autosize:{minRows:4,maxRows:16},type:"textarea",modelValue:p.cfg.dynYamlCfg,"onUpdate:modelValue":g=>p.cfg.dynYamlCfg=g,placeholder:h(s)("setting.blog.type.github.dyn.yaml.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),Ct(i.$slots,"main",{cfg:p.cfg},void 0,!0)]),footer:b(p=>[Ct(i.$slots,"footer",{cfg:p.cfg},void 0,!0)]),_:3},8,["api-type","cfg"])}}}),yt=pe(bh,[["__scopeId","data-v-132fa347"]]);class ys extends Yt{}class Wi extends ys{}class wh extends Wi{}const _h=J({__name:"GitlabvitepressSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>vo(s.apiType)),o=await o,t(),o),n=a,i=new wh;i.homePlaceholder=e("setting.blog.gitlab.url.tip"),i.usernamePlaceholder=e("setting.blog.type.gitlab.user.tip"),i.passwordPlaceholder=e("setting.blog.type.gitlab.token.tip"),i.apiUrlPlaceholder=e("setting.blog.gitlab.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.gitlab.previewUrl.tip"),n.placeholder=i;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":(r.apiUrl=r.home,r.tokenSettingUrl=`${r.home}/-/profile/personal_access_tokens`)};return(c,r)=>{const m=yt;return _(),C(m,{"api-type":s.apiType,cfg:h(n),onOnHomeChange:l},{header:b(y=>r[0]||(r[0]=[])),main:b(y=>r[1]||(r[1]=[])),footer:b(y=>r[2]||(r[2]=[])),_:1},8,["api-type","cfg"])}}});class Fi extends ys{}class zi extends Fi{}const vh=J({__name:"Gitlabvuepress2Setting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>_o(s.apiType)),o=await o,t(),o),n=a,i=new zi;i.homePlaceholder=e("setting.blog.gitlab.url.tip"),i.usernamePlaceholder=e("setting.blog.type.gitlab.user.tip"),i.passwordPlaceholder=e("setting.blog.type.gitlab.token.tip"),i.apiUrlPlaceholder=e("setting.blog.gitlab.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.gitlab.previewUrl.tip"),n.placeholder=i;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":(r.apiUrl=r.home,r.tokenSettingUrl=`${r.home}/-/profile/personal_access_tokens`)};return(c,r)=>{const m=yt;return _(),C(m,{"api-type":s.apiType,cfg:h(n),onOnHomeChange:l},{header:b(y=>r[0]||(r[0]=[])),main:b(y=>r[1]||(r[1]=[])),footer:b(y=>r[2]||(r[2]=[])),_:1},8,["api-type","cfg"])}}}),Ph=J({__name:"GitlabvuepressSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>yo(s.apiType)),o=await o,t(),o),n=a,i=new zi;i.homePlaceholder=e("setting.blog.gitlab.url.tip"),i.usernamePlaceholder=e("setting.blog.type.gitlab.user.tip"),i.passwordPlaceholder=e("setting.blog.type.gitlab.token.tip"),i.apiUrlPlaceholder=e("setting.blog.gitlab.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.gitlab.previewUrl.tip"),n.placeholder=i;const l=(r,m)=>{T.isEmptyString(m.home)?m.apiUrl="":(m.apiUrl=m.home,m.tokenSettingUrl=`${m.home}/-/profile/personal_access_tokens`),T.isEmptyString(m.home)||T.isEmptyString(m.username)?m.site="":m.site=T.pathJoin(m.home,"/"+m.username)},c=(r,m)=>{T.isEmptyString(m.home)||T.isEmptyString(m.username)?m.site="":m.site=T.pathJoin(m.home,"/"+m.username)};return(r,m)=>{const y=yt;return _(),C(y,{"api-type":s.apiType,cfg:h(n),onOnHomeChange:l,onOnUsernameChange:c},{header:b(p=>m[0]||(m[0]=[])),main:b(p=>m[1]||(m[1]=[])),footer:b(p=>m[2]||(m[2]=[])),_:1},8,["api-type","cfg"])}}});class Ji extends ys{}class Th extends Ji{}const kh=J({__name:"GitlabjekyllSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>ho(s.apiType)),o=await o,t(),o),n=a,i=new Th;i.homePlaceholder=e("setting.blog.gitlab.url.tip"),i.usernamePlaceholder=e("setting.blog.type.gitlab.user.tip"),i.passwordPlaceholder=e("setting.blog.type.gitlab.token.tip"),i.apiUrlPlaceholder=e("setting.blog.gitlab.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.gitlab.previewUrl.tip"),n.placeholder=i;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":(r.apiUrl=r.home,r.tokenSettingUrl=`${r.home}/-/profile/personal_access_tokens`)};return(c,r)=>{const m=yt;return _(),C(m,{"api-type":s.apiType,cfg:h(n),onOnHomeChange:l},{header:b(y=>r[0]||(r[0]=[])),main:b(y=>r[1]||(r[1]=[])),footer:b(y=>r[2]||(r[2]=[])),_:1},8,["api-type","cfg"])}}});class qi extends ys{}class Sh extends qi{}const Eh=J({__name:"GitlabhugoSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>go(s.apiType)),o=await o,t(),o),n=a,i=new Sh;i.homePlaceholder=e("setting.blog.gitlab.url.tip"),i.usernamePlaceholder=e("setting.blog.type.gitlab.user.tip"),i.passwordPlaceholder=e("setting.blog.type.gitlab.token.tip"),i.apiUrlPlaceholder=e("setting.blog.gitlab.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.gitlab.previewUrl.tip"),n.placeholder=i;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":(r.apiUrl=r.home,r.tokenSettingUrl=`${r.home}/-/profile/personal_access_tokens`)};return(c,r)=>{const m=yt;return _(),C(m,{"api-type":s.apiType,cfg:h(n),onOnHomeChange:l},{header:b(y=>r[0]||(r[0]=[])),main:b(y=>r[1]||(r[1]=[])),footer:b(y=>r[2]||(r[2]=[])),_:1},8,["api-type","cfg"])}}});class Yi extends ys{}class Ch extends Yi{}const Ah=J({__name:"GitlabhexoSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>po(s.apiType)),o=await o,t(),o),n=a,i=new Ch;i.homePlaceholder=e("setting.blog.gitlab.url.tip"),i.usernamePlaceholder=e("setting.blog.type.gitlab.user.tip"),i.passwordPlaceholder=e("setting.blog.type.gitlab.token.tip"),i.apiUrlPlaceholder=e("setting.blog.gitlab.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.gitlab.previewUrl.tip"),n.placeholder=i;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":(r.apiUrl=r.home,r.tokenSettingUrl=`${r.home}/-/profile/personal_access_tokens`)};return(c,r)=>{const m=yt;return _(),C(m,{"api-type":s.apiType,cfg:h(n),onOnHomeChange:l},{header:b(y=>r[0]||(r[0]=[])),main:b(y=>r[1]||(r[1]=[])),footer:b(y=>r[2]||(r[2]=[])),_:1},8,["api-type","cfg"])}}}),Uh=J({__name:"VitepressSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>wo(s.apiType)),o=await o,t(),o),n=a,i=new Wi;return i.homePlaceholder=e("setting.blog.github.url.tip"),i.usernamePlaceholder=e("setting.blog.type.github.user.tip"),i.passwordPlaceholder=e("setting.blog.type.github.token.tip"),i.apiUrlPlaceholder=e("setting.blog.github.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.previewUrl.tip"),n.placeholder=i,(l,c)=>{const r=yt;return _(),C(r,{"api-type":s.apiType,cfg:h(n)},{header:b(m=>c[0]||(c[0]=[])),main:b(m=>c[1]||(c[1]=[])),footer:b(m=>c[2]||(c[2]=[])),_:1},8,["api-type","cfg"])}}});class Ih extends ys{}const xh=J({__name:"Vuepress2Setting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>bo(s.apiType)),o=await o,t(),o),n=a,i=new Ih;return i.homePlaceholder=e("setting.blog.github.url.tip"),i.usernamePlaceholder=e("setting.blog.type.github.user.tip"),i.passwordPlaceholder=e("setting.blog.type.github.token.tip"),i.apiUrlPlaceholder=e("setting.blog.github.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.previewUrl.tip"),n.placeholder=i,(l,c)=>{const r=yt;return _(),C(r,{"api-type":s.apiType,cfg:h(n)},{header:b(m=>c[0]||(c[0]=[])),main:b(m=>c[1]||(c[1]=[])),footer:b(m=>c[2]||(c[2]=[])),_:1},8,["api-type","cfg"])}}}),Mh=J({__name:"VuepressSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>fo(s.apiType)),o=await o,t(),o),n=a,i=new Fi;i.homePlaceholder=e("setting.blog.github.url.tip"),i.usernamePlaceholder=e("setting.blog.type.github.user.tip"),i.passwordPlaceholder=e("setting.blog.type.github.token.tip"),i.apiUrlPlaceholder=e("setting.blog.github.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.previewUrl.tip"),n.placeholder=i;const l=(r,m)=>{T.isEmptyString(m.home)||T.isEmptyString(m.username)?m.site="":m.site=T.pathJoin(m.home,"/"+m.username)},c=(r,m)=>{T.isEmptyString(m.home)||T.isEmptyString(m.username)?m.site="":m.site=T.pathJoin(m.home,"/"+m.username)};return(r,m)=>{const y=yt;return _(),C(y,{"api-type":s.apiType,cfg:h(n),onOnHomeChange:l,onOnUsernameChange:c},{header:b(p=>m[0]||(m[0]=[])),main:b(p=>m[1]||(m[1]=[])),footer:b(p=>m[2]||(m[2]=[])),_:1},8,["api-type","cfg"])}}}),Dh=J({__name:"JekyllSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>mo(s.apiType)),o=await o,t(),o),n=a,i=new Ji;return i.homePlaceholder=e("setting.blog.github.url.tip"),i.usernamePlaceholder=e("setting.blog.type.github.user.tip"),i.passwordPlaceholder=e("setting.blog.type.github.token.tip"),i.apiUrlPlaceholder=e("setting.blog.github.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.previewUrl.tip"),n.placeholder=i,(l,c)=>{const r=yt;return _(),C(r,{"api-type":s.apiType,cfg:h(n)},{header:b(m=>c[0]||(c[0]=[])),main:b(m=>c[1]||(c[1]=[])),footer:b(m=>c[2]||(c[2]=[])),_:1},8,["api-type","cfg"])}}}),Oh=J({__name:"HugoSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>uo(s.apiType)),o=await o,t(),o),n=a,i=new qi;return i.homePlaceholder=e("setting.blog.github.url.tip"),i.usernamePlaceholder=e("setting.blog.type.github.user.tip"),i.passwordPlaceholder=e("setting.blog.type.github.token.tip"),i.apiUrlPlaceholder=e("setting.blog.github.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.previewUrl.tip"),n.placeholder=i,(l,c)=>{const r=yt;return _(),C(r,{"api-type":s.apiType,cfg:h(n)},{header:b(m=>c[0]||(c[0]=[])),main:b(m=>c[1]||(c[1]=[])),footer:b(m=>c[2]||(c[2]=[])),_:1},8,["api-type","cfg"])}}}),Vh=J({__name:"HexoSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>co(s.apiType)),o=await o,t(),o),n=a,i=new Yi;return i.homePlaceholder=e("setting.blog.github.url.tip"),i.usernamePlaceholder=e("setting.blog.type.github.user.tip"),i.passwordPlaceholder=e("setting.blog.type.github.token.tip"),i.apiUrlPlaceholder=e("setting.blog.github.apiurl.tip"),i.previewUrlPlaceholder=e("setting.blog.previewUrl.tip"),n.placeholder=i,(l,c)=>{const r=yt;return _(),C(r,{"api-type":s.apiType,cfg:h(n)},{header:b(m=>c[0]||(c[0]=[])),main:b(m=>c[1]||(c[1]=[])),footer:b(m=>c[2]||(c[2]=[])),_:1},8,["api-type","cfg"])}}});class $h extends Yt{}const Nh=J({__name:"HaloSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>cn(s.apiType)),o=await o,t(),o),n=a,i=new $h;i.homePlaceholder=e("setting.halo.home.tip"),i.usernamePlaceholder=e("setting.halo.username.tip"),i.passwordPlaceholder=e("setting.halo.password.tip"),i.apiUrlPlaceholder=e("setting.halo.apiUrl.tip"),i.previewUrlPlaceholder=e("setting.halo.previewUrl.tip"),n.placeholder=i;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":r.apiUrl=r.home};return(c,r)=>{const m=Ve;return _(),C(ts,{"api-type":s.apiType,cfg:h(n),onOnHomeChange:l},{header:b(y=>[f(m,{title:h(e)("setting.platform.halo.v29.only"),type:"error",class:"form-item-tip",closable:!1},null,8,["title"])]),_:1},8,["api-type","cfg"])}}}),Hh=pe(Nh,[["__scopeId","data-v-090c2dfd"]]);class Lh extends Yt{}const Rh=J({__name:"NotionSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>sn(s.apiType)),o=await o,t(),o),n=a,i=new Lh;return i.homePlaceholder=e("setting.notion.home.tip"),i.passwordPlaceholder=e("setting.notion.password.tip"),i.apiUrlPlaceholder=e("setting.notion.apiurl.tip"),i.previewUrlPlaceholder=e("setting.notion.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(ts,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}});class Gh extends Yt{}const Bh=J({__name:"YuqueSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>Qa(s.apiType)),o=await o,t(),o),n=a,i=new Gh;return i.homePlaceholder=e("setting.yuque.home.tip"),i.usernamePlaceholder=e("setting.yuque.username.tip"),i.passwordPlaceholder=e("setting.yuque.password.tip"),i.apiUrlPlaceholder=e("setting.yuque.apiurl.tip"),i.previewUrlPlaceholder=e("setting.yuque.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(ts,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}});class jh extends Yt{}const Kh=J({__name:"TelegraphSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>un(s.apiType)),o=await o,t(),o),n=a;n.usernameLabel=e("setting.telegraph.username.label"),n.passwordLabel=e("setting.telegraph.password.label");const i=new jh;i.homePlaceholder=e("setting.telegraph.home.tip"),i.usernamePlaceholder=e("setting.telegraph.username.tip"),i.passwordPlaceholder=e("setting.telegraph.password.tip"),i.apiUrlPlaceholder=e("setting.telegraph.apiurl.tip"),i.previewUrlPlaceholder=e("setting.telegraph.previewUrl.tip"),n.placeholder=i;const l=c=>{c.password="",c.accessToken="",c.saveHash=""};return(c,r)=>{const m=Uo,y=Bs,p=Ue,g=Ie,w=qt;return _(),C(ts,{"api-type":s.apiType,cfg:h(n)},{header:b(d=>[f(p,{label:"ç™»å½•æ¨¡å¼",required:""},{default:b(()=>[f(y,{modelValue:d.cfg.postType,"onUpdate:modelValue":v=>d.cfg.postType=v,class:"ml-4",onChange:()=>{l(d.cfg)}},{default:b(()=>[f(m,{value:h(Jt).ANONYMOUS,size:"large"},{default:b(()=>[R(j(h(e)("setting.telegraph.login.anonymous")),1)]),_:1},8,["value"]),f(m,{value:h(Jt).LOGIN_USER,size:"large"},{default:b(()=>[R(j(h(e)("setting.telegraph.login.user")),1)]),_:1},8,["value"])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]),main:b(d=>[d.cfg.postType===h(Jt).LOGIN_USER?(_(),C(p,{key:0,label:"Access Token",required:""},{default:b(()=>[f(g,{modelValue:d.cfg.accessToken,"onUpdate:modelValue":v=>d.cfg.accessToken=v,placeholder:h(e)("setting.telegraph.accessToken.tip"),type:"password","show-password":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)):X("",!0),f(p,{label:"Hash",required:""},{default:b(()=>[f(g,{modelValue:d.cfg.saveHash,"onUpdate:modelValue":v=>d.cfg.saveHash=v,placeholder:h(e)("setting.telegraph.saveHash.tip"),type:"password","show-password":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),f(p,{label:"åˆ·æ–°æŽˆæƒ"},{default:b(()=>[f(w,{modelValue:d.cfg.forceReAuth,"onUpdate:modelValue":v=>d.cfg.forceReAuth=v,placeholder:h(e)("setting.telegraph.forceReAuth.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)]),footer:b(d=>r[0]||(r[0]=[])),_:1},8,["api-type","cfg"])}}});class Xi{static parseHomeAndUrl(o){this.logger.debug(`Parsing Home address: ${o}`);let t="";return o.endsWith("/xmlrpc.php")?(t=o,o=o.replace("/xmlrpc.php","")):(o=o.replace(/\/$/,""),t=`${o}/xmlrpc.php`),this.logger.debug(`Parse result: home=${o}, apiUrl=${t}`),{home:o,apiUrl:t}}}D(Xi,"logger",W("wordpress-dot-com-utils"));class Wh extends Xt{}const Fh=J({__name:"WordpressdotcomSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,e=(c,r)=>{const{home:m,apiUrl:y}=Xi.parseHomeAndUrl(c);r.home=m,r.apiUrl=y,T.isEmptyString(r.home)&&(r.apiUrl="")},{t:a}=Z(),{cfg:n}=([o,t]=Ae(()=>gn(s.apiType)),o=await o,t(),o),i=n,l=new Wh;return l.homePlaceholder=a("setting.wordpressdotcom.home.tip"),l.usernamePlaceholder=a("setting.wordpressdotcom.username.tip"),l.passwordPlaceholder=a("setting.wordpressdotcom.password.tip"),l.apiUrlPlaceholder=a("setting.wordpressdotcom.apiUrl.tip"),l.previewUrlPlaceholder=a("setting.wordpressdotcom.previewUrl.tip"),i.placeholder=l,(c,r)=>(_(),C(fs,{"api-type":s.apiType,cfg:h(i),onOnHomeChange:e},null,8,["api-type","cfg"]))}});class zh extends Qt{}const Jh=J({__name:"HalowebSetting",props:{apiType:{type:String,default:""}},async setup(u){let o,t;const s=u,{t:e}=Z(),{cfg:a}=([o,t]=Ae(()=>mn(s.apiType)),o=await o,t(),o),n=a,i=new zh;return i.homePlaceholder=e("setting.haloweb.home.tip"),i.apiUrlPlaceholder=e("setting.haloweb.apiUrl.tip"),i.passwordPlaceholder=e("setting.haloweb.password.tip"),i.previewUrlPlaceholder=e("setting.haloweb.previewUrl.tip"),n.placeholder=i,(l,c)=>(_(),C(hs,{"api-type":s.apiType,cfg:h(n)},null,8,["api-type","cfg"]))}}),qh={key:28},Yh=J({__name:"SingleSettingIndex",setup(u){const{t:o}=Z(),t=Xe(),e=ce(t.params).key,a=ro(e);return(n,i)=>{const l=Bh,c=Rh,r=Hh,m=Vh,y=Oh,p=Dh,g=Mh,w=xh,d=Uh,v=Ah,P=Eh,S=kh,k=Ph,M=vh,x=_h,K=fh,$=hh,B=gh,A=uh,F=ch,U=lh,z=ih,L=ah,V=sh,Y=eh,Pe=Ve;return _(),C($e,{title:h(o)("setting.entry.title")+h(e)},{default:b(()=>[h(a)===h(H).Common_Yuque?(_(),C(l,{key:0,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Common_Notion?(_(),C(c,{key:1,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Common_Halo?(_(),C(r,{key:2,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Common_Telegraph?(_(),C(Kh,{key:3,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Github_Hexo?(_(),C(m,{key:4,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Github_Hugo?(_(),C(y,{key:5,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Github_Jekyll?(_(),C(p,{key:6,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Github_Vuepress?(_(),C(g,{key:7,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Github_Vuepress2?(_(),C(w,{key:8,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Github_Vitepress?(_(),C(d,{key:9,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Gitlab_Hexo?(_(),C(v,{key:10,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Gitlab_Hugo?(_(),C(P,{key:11,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Gitlab_Jekyll?(_(),C(S,{key:12,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Gitlab_Vuepress?(_(),C(k,{key:13,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Gitlab_Vuepress2?(_(),C(M,{key:14,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Gitlab_Vitepress?(_(),C(x,{key:15,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Metaweblog_Metaweblog?(_(),C(K,{key:16,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Metaweblog_Cnblogs?(_(),C($,{key:17,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Metaweblog_Typecho?(_(),C(B,{key:18,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Metaweblog_Jvue?(_(),C(A,{key:19,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Wordpress_Wordpress?(_(),C(F,{key:20,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Wordpress_Wordpressdotcom?(_(),C(Fh,{key:21,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Custom_Zhihu?(_(),C(U,{key:22,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Custom_CSDN?(_(),C(z,{key:23,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Custom_Wechat?(_(),C(L,{key:24,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Custom_Jianshu?(_(),C(V,{key:25,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Custom_Juejin?(_(),C(Y,{key:26,"api-type":h(e)},null,8,["api-type"])):h(a)===h(H).Custom_Haloweb?(_(),C(Jh,{key:27,"api-type":h(e)},null,8,["api-type"])):(_(),O("span",qh,[f(Pe,{closable:!1,title:h(o)("setting.entry.not.supported"),class:"top-tip",type:"error"},null,8,["title"])]))]),_:1},8,["title"])}}}),Xh=pe(Yh,[["__scopeId","data-v-4401738c"]]),Zh={key:0},Qh={key:0},ef={key:1},tf=J({__name:"PostBind",setup(u){const o=W("post-bind"),{t}=Z(),{query:s}=Xe(),{getPublishCfg:e}=qs(),{updateSetting:a}=me(),{kernelApi:n}=Re(),i=q(),l=ce({}),c=ce({}),r=ce({pageId:"",siyuanPost:{},dynamicConfigArray:[],postIdMap:{}}),m=q(`å°†å¯¹æ–‡æ¡£ã€Œ${r.pageId}ã€è¿›è¡Œä¿®å¤`);Je(()=>r.pageId,g=>{m.value=`å°†å¯¹æ–‡æ¡£ã€Œ${g}ã€è¿›è¡Œä¿®å¤`});const y=async g=>{if(T.isEmptyString(r.pageId)){ee.error("");return}try{const d=(await e()).setting,v=ae.getProperty(d,r.pageId,{});r.dynamicConfigArray=r.dynamicConfigArray.map(P=>{const S=r.postIdMap[P.platformKey],k=ae.getProperty(d,P.platformKey,{}),M=k==null?void 0:k.posidKey;return!T.isEmptyString(M)&&!T.isEmptyString(r.pageId)&&(v[M]=S),P}),d[r.pageId]=v,o.debug("prepare to save setting =>",{setting:ie(d)}),await a(d),ee.success(t("main.opt.success"))}catch(w){o.error(t("main.opt.failure")+"=>",w),ee.error(t("main.opt.failure")+"=>"+w)}},p=()=>{ee.warning(t("import.v081.warn"))};return Ze(async()=>{var S;const g=I.emptyOrDefault(s.id,Zs()),w=await wi(g);if(r.pageId=w,!T.isEmptyString(r.pageId)){r.siyuanPost=await n.getBlockByID(r.pageId);const k=I.emptyOrDefault((S=r.siyuanPost)==null?void 0:S.content,r.pageId);m.value=`å°†å¯¹æ–‡æ¡£ã€Œ${k}ã€è¿›è¡Œä¿®å¤`}const d=await e(),v=d.setting;r.dynamicConfigArray=d.dynamicConfigArray;const P=ae.getProperty(v,r.pageId,{});r.dynamicConfigArray.forEach(k=>{let M="";const x=ae.getProperty(v,k.platformKey,{}),K=x==null?void 0:x.posidKey;!T.isEmptyString(K)&&!T.isEmptyString(r.pageId)&&(M=ae.getProperty(P,K)),r.postIdMap[k.platformKey]=M})}),(g,w)=>{const d=Ve,v=Ie,P=Ue,S=xo,k=Se,M=st;return _(),O("div",null,[f(d,{class:"top-tip",title:h(t)("post.bind.auto.tips"),type:"error",closable:!1},null,8,["title"]),f(P,null,{default:b(()=>[f(v,{modelValue:r.pageId,"onUpdate:modelValue":w[0]||(w[0]=x=>r.pageId=x),placeholder:"è¯·è¾“å…¥éœ€è¦ä¿®å¤çš„æ–‡æ¡£æ ¹ ID"},null,8,["modelValue"])]),_:1}),f(S,{"border-style":"dashed"}),h(T).isEmptyString(r.pageId)?(_(),O("div",Zh,[f(d,{class:"top-tip",title:h(t)("post.bind.auto.error"),type:"warning",closable:!1},null,8,["title"])])):(_(),C(M,{key:1,"label-width":"85px",class:"post-bind-form",ref_key:"ruleFormRef",ref:i,model:l,rules:c,"status-icon":""},{default:b(()=>[f(d,{class:"top-tip",title:m.value,type:"warning",closable:!1},null,8,["title"]),r.dynamicConfigArray.length>0?(_(),O("div",Qh,[(_(!0),O(Ce,null,xe(r.dynamicConfigArray,(x,K)=>Qn((_(),C(P,{key:K,label:x.platformName},{default:b(()=>[f(v,{modelValue:r.postIdMap[x.platformKey],"onUpdate:modelValue":$=>r.postIdMap[x.platformKey]=$},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])),[[hl,x.isEnabled&&x.isEnabled]])),128))])):(_(),O("div",ef,[f(d,{class:"top-tip",title:h(t)("post.bind.auto.empty"),type:"info",closable:!1},null,8,["title"])])),f(P,null,{default:b(()=>[f(k,{type:"primary",onClick:w[1]||(w[1]=x=>y(i.value))},{default:b(()=>[R(j(h(t)("post.bind.conf.save")),1)]),_:1}),f(k,{type:"warning",onClick:p},{default:b(()=>[R(j(h(t)("post.bind.conf.v081")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"]))])}}}),sf=pe(tf,[["__scopeId","data-v-90e60352"]]),of={class:"locale-changer"},af=J({__name:"ChangeLocal",async setup(u){let o,t;const s=W("change-local"),{getSetting:e,updateSetting:a}=me(),{t:n,locale:i}=Z(),l=[{value:"zh_CN",label:"ç®€ä½“ä¸­æ–‡"},{value:"en_US",label:"English"}],c=([o,t]=Ae(()=>e()),o=await o,t(),o),r=async m=>{i.value=m,c.lang=m,await a(c),s.info("lang changed to",m)};return Rs(()=>{c!=null&&c.lang&&(i.value=c==null?void 0:c.lang)}),(m,y)=>{const p=pt,g=ut,w=Ue,d=st;return _(),O("div",of,[f(d,{"label-width":"85px"},{default:b(()=>[f(w,{label:h(n)("lang.choose")},{default:b(()=>[f(g,{modelValue:h(i),"onUpdate:modelValue":y[0]||(y[0]=v=>as(i)?i.value=v:null),placeholder:h(n)("lang.choose.placeholder"),onChange:r},{default:b(()=>[(_(),O(Ce,null,xe(l,(v,P)=>f(p,{key:P,label:v.label,value:v.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})])}}}),Zi=J({__name:"SiyuanSetting",setup(u){const{t:o}=Z(),{getSiyuanSetting:t}=Un(),s=t();return(e,a)=>{const n=Ie,i=Ue,l=st;return _(),C(l,{"label-width":"125px",class:"siyuan-setting-form"},{default:b(()=>[f(i,{label:h(o)("setting.blog.siyuan.apiurl"),prop:"apiUrl"},{default:b(()=>[f(n,{modelValue:h(s).apiUrl,"onUpdate:modelValue":a[0]||(a[0]=c=>h(s).apiUrl=c),autocomplete:"off",placeholder:h(o)("setting.blog.siyuan.apiurl.tip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),f(i,{label:h(o)("setting.blog.siyuan.password"),prop:"pwd"},{default:b(()=>[f(n,{modelValue:h(s).password,"onUpdate:modelValue":a[1]||(a[1]=c=>h(s).password=c),type:"password",autocomplete:"off",placeholder:h(o)("setting.blog.siyuan.password.tip"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})}}}),nf=J({__name:"AiSetting",setup(u){const{t:o}=Z(),{getPublishPreferenceSetting:t}=xt(),s=t();return(e,a)=>{const n=Ie,i=Ue,l=Ve,c=st;return _(),C(c,{"label-width":"135px",class:"ai-setting-form"},{default:b(()=>[f(i,{label:h(o)("pref.setting.aicode")},{default:b(()=>[f(n,{modelValue:h(s).experimentalAICode,"onUpdate:modelValue":a[0]||(a[0]=r=>h(s).experimentalAICode=r),type:"password",autocomplete:"off",placeholder:h(o)("pref.setting.aicode.tip"),disabled:h(s).experimentalUseSiyuanNoteAIConfig},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),f(i,{label:h(o)("pref.setting.ai.baseurl")},{default:b(()=>[f(n,{modelValue:h(s).experimentalAIBaseUrl,"onUpdate:modelValue":a[1]||(a[1]=r=>h(s).experimentalAIBaseUrl=r),autocomplete:"off",placeholder:h(o)("pref.setting.ai.baseurl.tip"),disabled:h(s).experimentalUseSiyuanNoteAIConfig},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),f(i,{label:h(o)("pref.setting.ai.proxy.url")},{default:b(()=>[f(n,{modelValue:h(s).experimentalAIProxyUrl,"onUpdate:modelValue":a[2]||(a[2]=r=>h(s).experimentalAIProxyUrl=r),autocomplete:"off",placeholder:h(o)("pref.setting.ai.proxy.url.tip"),disabled:h(s).experimentalUseSiyuanNoteAIConfig},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),h(s).experimentalUseSiyuanNoteAIConfig?(_(),C(i,{key:0},{default:b(()=>[f(l,{closable:!1,title:h(o)("config.ai.use.siyuan"),class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1})):X("",!0),a[3]||(a[3]=E("div",{class:"form-item-bottom"},null,-1))]),_:1})}}}),lf=pe(nf,[["__scopeId","data-v-aedab5c6"]]),rf={key:0},cf=J({__name:"PreferenceSetting",setup(u){const{t:o}=Z(),{getPublishPreferenceSetting:t}=xt(),{isInSiyuanWin:s,isInSiyuanWidget:e}=dt(),a=t(),n=s()||e()&&T.isEmptyString(bi());return(i,l)=>{const c=qt,r=Ue,m=xo,y=st;return _(),C(y,{inline:"","label-width":"125px",class:"publish-preference-setting-form"},{default:b(()=>[f(r,{label:h(o)("preference.setting.fixTitle")},{default:b(()=>[f(c,{modelValue:h(a).fixTitle,"onUpdate:modelValue":l[0]||(l[0]=p=>h(a).fixTitle=p)},null,8,["modelValue"])]),_:1},8,["label"]),f(r,{label:h(o)("preference.setting.keepTitle")},{default:b(()=>[f(c,{modelValue:h(a).keepTitle,"onUpdate:modelValue":l[1]||(l[1]=p=>h(a).keepTitle=p)},null,8,["modelValue"])]),_:1},8,["label"]),f(r,{label:h(o)("preference.setting.removeH1")},{default:b(()=>[f(c,{modelValue:h(a).removeFirstH1,"onUpdate:modelValue":l[2]||(l[2]=p=>h(a).removeFirstH1=p)},null,8,["modelValue"])]),_:1},8,["label"]),f(r,{label:h(o)("preference.setting.removeWidgetTag")},{default:b(()=>[f(c,{modelValue:h(a).removeMdWidgetTag,"onUpdate:modelValue":l[3]||(l[3]=p=>h(a).removeMdWidgetTag=p)},null,8,["modelValue"])]),_:1},8,["label"]),h(n)?(_(),O("div",rf,[f(m,{"border-style":"dashed",class:"psd"}),f(r,{label:h(o)("preference.setting.showDocQuickMenu")},{default:b(()=>[f(c,{modelValue:h(a).showDocQuickMenu,"onUpdate:modelValue":l[4]||(l[4]=p=>h(a).showDocQuickMenu=p)},null,8,["modelValue"])]),_:1},8,["label"]),f(m,{"border-style":"dashed",class:"psd"}),f(r,{label:h(o)("preference.setting.showQuickMenu")},{default:b(()=>[f(c,{modelValue:h(a).showQuickMenu,"onUpdate:modelValue":l[5]||(l[5]=p=>h(a).showQuickMenu=p)},null,8,["modelValue"])]),_:1},8,["label"]),f(r,{label:h(o)("preference.setting.showSingleMenu")},{default:b(()=>[f(c,{modelValue:h(a).showSingleMenu,"onUpdate:modelValue":l[6]||(l[6]=p=>h(a).showSingleMenu=p)},null,8,["modelValue"])]),_:1},8,["label"]),f(r,{label:h(o)("preference.setting.showBatchMenu")},{default:b(()=>[f(c,{modelValue:h(a).showBatchMenu,"onUpdate:modelValue":l[7]||(l[7]=p=>h(a).showBatchMenu=p)},null,8,["modelValue"])]),_:1},8,["label"]),f(r,{label:h(o)("preference.setting.showAIMenu")},{default:b(()=>[f(c,{modelValue:h(a).showAIMenu,"onUpdate:modelValue":l[8]||(l[8]=p=>h(a).showAIMenu=p)},null,8,["modelValue"])]),_:1},8,["label"]),f(r,{label:h(o)("preference.setting.showExtendMenu")},{default:b(()=>[f(c,{modelValue:h(a).showExtendMenu,"onUpdate:modelValue":l[9]||(l[9]=p=>h(a).showExtendMenu=p)},null,8,["modelValue"])]),_:1},8,["label"]),f(r,{label:h(o)("preference.setting.showArticleManageMenu")},{default:b(()=>[f(c,{modelValue:h(a).showArticleManageMenu,"onUpdate:modelValue":l[10]||(l[10]=p=>h(a).showArticleManageMenu=p)},null,8,["modelValue"])]),_:1},8,["label"])])):X("",!0)]),_:1})}}}),pf=pe(cf,[["__scopeId","data-v-e9d0a8ac"]]),uf=J({__name:"GeneralSetting",setup(u){const{t:o}=Z();return(t,s)=>{const e=ci,a=lf,n=Zi,i=af,l=sf,c=pi,r=$e;return _(),C(r,{title:h(o)("service.tab.change.local")},{default:b(()=>[f(c,{"tab-position":"left",class:"general-setting-box"},{default:b(()=>[f(e,{label:h(o)("service.tab.change.local")},{default:b(()=>[f(pf)]),_:1},8,["label"]),f(e,{label:h(o)("sys.config.ai")},{default:b(()=>[f(a)]),_:1},8,["label"]),f(e,{label:h(o)("siyuan.config.setting")},{default:b(()=>[f(n)]),_:1},8,["label"]),f(e,{label:h(o)("lang.choose")},{default:b(()=>[f(i)]),_:1},8,["label"]),f(e,{label:h(o)("service.tab.post.bind")},{default:b(()=>[f(l)]),_:1},8,["label"])]),_:1})]),_:1},8,["title"])}}}),df=pe(uf,[["__scopeId","data-v-1598226e"]]),gf=""+new URL("assets/icon.png",import.meta.url).href,mf={id:"about-box"},hf={class:"notice"},ff={class:"title"},yf={class:"param slogan"},bf={class:"param"},wf=["href"],_f={class:"third-libs"},vf={class:"lib-container"},Pf={class:"lib-item"},Tf={key:0,class:"lib-item"},kf=J({__name:"About",setup(u){const{t:o}=Z(),t=ce({v:mi,deps:Object.entries(hi).slice(0,24)});return(s,e)=>{const a=$e;return _(),C(a,{title:"å…³äºŽä½œè€…"},{default:b(()=>[E("div",mf,[e[5]||(e[5]=E("div",{class:"logo"},[E("img",{src:gf,alt:"logo"})],-1)),E("div",hf,[E("p",ff,"å‘å¸ƒå·¥å…· v"+j(t.v),1),E("div",yf,[E("span",null,j(h(o)("slogan.make.written.fun")),1)]),e[3]||(e[3]=E("div",{class:"space"},null,-1)),E("div",bf,[e[0]||(e[0]=R("Created by ")),E("a",{href:h(or),target:"_blank"},"terwer",8,wf)]),e[4]||(e[4]=E("div",{class:"space"},null,-1)),E("div",_f,[e[2]||(e[2]=E("div",{class:"lib-title"},"Thanks for third party libraries:",-1)),E("div",vf,[(_(!0),O(Ce,null,xe(t.deps,n=>(_(),O("div",Pf,j(n),1))),256)),t.deps.length>=24?(_(),O("div",Tf,e[1]||(e[1]=[E("a",{target:"_blank",href:"https://github.com/terwer/siyuan-plugin-publisher/blob/main/package.json#L54"},"more... ",-1)]))):X("",!0)])])])])]),_:1})}}}),Sf=pe(kf,[["__scopeId","data-v-cec1a207"]]),Ef={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Cf(u,o){return _(),O("svg",Ef,o[0]||(o[0]=[E("path",{fill:"currentColor",d:"M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20zm7-3h2v-4.2l1.6 1.6L16 13l-4-4l-4 4l1.4 1.4l1.6-1.6z"},null,-1)]))}const Af=qe({name:"material-symbols-drive-folder-upload",render:Cf}),Uf={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function If(u,o){return _(),O("svg",Uf,o[0]||(o[0]=[E("path",{fill:"currentColor",d:"M160 96a96 96 0 1 1 192 0a96 96 0 1 1-192 0m80 152v264l-48.4-24.2c-20.9-10.4-43.5-17-66.8-19.3l-96-9.6C12.5 457.2 0 443.5 0 427V224c0-17.7 14.3-32 32-32h30.3c63.6 0 125.6 19.6 177.7 56m32 264V248c52.1-36.4 114.1-56 177.7-56H480c17.7 0 32 14.3 32 32v203c0 16.4-12.5 30.2-28.8 31.8l-96 9.6c-23.2 2.3-45.9 8.9-66.8 19.3z"},null,-1)]))}const xf=qe({name:"fa6-solid-book-open-reader",render:If}),Mf={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Df(u,o){return _(),O("svg",Mf,o[0]||(o[0]=[E("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h8v2H5v14h14v-8h2v8q0 .825-.587 1.413T19 21zm1-4h12l-3.75-5l-3 4L9 13zm11-8V7h-2V5h2V3h2v2h2v2h-2v2z"},null,-1)]))}const Of=qe({name:"material-symbols-add-photo-alternate-outline",render:Df}),Vf={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function $f(u,o){return _(),O("svg",Vf,o[0]||(o[0]=[E("path",{fill:"currentColor",d:"m2.45 10.575l4.2-4.2q.35-.35.825-.5t.975-.05l1.3.275Q8.4 7.7 7.625 9t-1.5 3.15zm5.125 2.275q.575-1.8 1.563-3.4t2.387-3q2.2-2.2 5.025-3.287t5.275-.663q.425 2.45-.65 5.275T17.9 12.8q-1.375 1.375-3 2.388t-3.425 1.587zm6.9-3q.575.575 1.413.575T17.3 9.85t.575-1.412t-.575-1.413t-1.412-.575t-1.413.575t-.575 1.413t.575 1.412m-.7 12.025l-1.6-3.675q1.85-.725 3.163-1.5t2.912-2.125l.25 1.3q.1.5-.05.988t-.5.837zM4.05 16.05q.875-.875 2.125-.888t2.125.863t.875 2.125t-.875 2.125q-.625.625-2.087 1.075t-4.038.8q.35-2.575.8-4.025T4.05 16.05"},null,-1)]))}const Nf=qe({name:"material-symbols-rocket-launch",render:$f}),Hf={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Lf(u,o){return _(),O("svg",Hf,o[0]||(o[0]=[E("path",{fill:"currentColor",d:"M18 11h-8V9h8m2-5v12H8V4zm0-2H8c-1.1 0-2 .9-2 2v12a2 2 0 0 0 2 2h12c1.11 0 2-.89 2-2V4a2 2 0 0 0-2-2M4 6H2v14a2 2 0 0 0 2 2h14v-2H4z"},null,-1)]))}const Rf=qe({name:"mdi-minus-box-multiple-outline",render:Lf});class Yn{static async preCheckPicgoPlugin(){const{kernelApi:o}=Re();return await Ja(o,"/data/plugins/siyuan-plugin-picgo/plugin.json","text")}static async preCheckBlogPlugin(){const{kernelApi:o}=Re();return await Ja(o,"/data/plugins/siyuan-blog/plugin.json","text")}}const Gf={class:"admin-box"},Bf={id:"post-list"},jf={class:"search-btn"},Kf={class:"value"},Wf={key:0,class:"data-empty-box"},Ff={key:1,class:"data-box"},zf={m:"4",style:{"padding-left":"10px"},class:"tb-extend"},Jf={m:"t-0 b-2"},qf={m:"t-0 b-2"},Yf={m:"t-0 b-2"},Xf={m:"t-0 b-2"},Zf={m:"t-0 b-2"},Qf={m:"t-0 b-2"},ey={key:0},ty=["onClick"],sy={class:"el-icon"},oy=["innerHTML"],ay={key:1},ny={key:0,class:"yaml-count-sign"},za=8,iy=J({__name:"Admin",setup(u){const{t:o}=Z(),{kernelApi:t,blogApi:s}=Re(),{isInSiyuanWidget:e,isInSiyuanOrSiyuanNewWin:a}=dt(),n=_t(),{getReadOnlyPublishPreferenceSetting:i}=xt(),{getReadOnlySiyuanSetting:l}=Un(),{getSetting:c}=me(),r=W("admin"),m=q(!1),y=q("prev,pager,next"),p=q(""),g=q([]),w=q(!1),d=[],v=q(0),P=q(0),S=q(1),k=q(!1),M=q(!1),x=q([]),K=l(),$=q(!1),B=q(""),A=q(""),F=(de,se)=>{const ke=de?g.value.filter(U(de)):g.value;se(ke)},U=de=>se=>se.value.toLowerCase().indexOf(de.toLowerCase())===0,z=de=>{},L=()=>{ct()},V=de=>{ct()},Y=async de=>{S.value=de,await ct()},Pe=async de=>{S.value=de,await ct()},Be=async de=>{S.value=de,await ct()},He=(de,se)=>{B.value=de,A.value=se,$.value=!0},Qe=(de,se)=>{const Ne=`${window.origin}${Cn}#${se}`;r.debug(`Publisher will go to ${Ne}`),He(de,Ne)},Ye=(de,se)=>{const ke=`${K.value.apiUrl}/plugins/siyuan-blog/#${se}`;r.debug(`Blog will go to ${ke}`),He(de,ke)},Le=(de,se)=>{const ke=`${K.value.apiUrl}/plugins/siyuan-plugin-picgo/#${se}`;r.debug(`Picgo will go to ${ke}`),He(de,ke)},Ge=de=>{const se=`${K.value.apiUrl}/plugins/siyuan-plugin-picgo/#${de}`;r.debug(`Picgo will go to ${se}`),window.open(se)},le=(de,se)=>{const ke=se.postid;Qe("æžé€Ÿå‘å¸ƒ",`/publish/quickSelect?id=${ke}`)},We=(de,se)=>{const ke=se.postid;Qe("å•ä¸ªå‘å¸ƒ",`/publish/singlePublish?id=${ke}`)},N=async(de,se)=>{const ke=se.postid;Qe("å¸¸è§„å‘å¸ƒ",`/publish/singlePublish/doPublish/${de}/${ke}?method=edit`)},G=(de,se)=>{const ke=se.postid;Qe("æ‰¹é‡å‘å¸ƒ",`/publish/batchPublish?id=${ke}`)},be=(de,se)=>{const ke=window,Ne=se.postid;if(!se.isShared){ee.warning(o("message.publish.notShared")),ke.event.stopPropagation();return}Ye("æ–‡ç« é¢„è§ˆ",`/post/${Ne}`)},ot=(de,se)=>{const ke=se.postid;a()?Le("å›¾åºŠ",`/?pageId=${ke}`):Ge(`/?pageId=${ke}`)},vt=async(de,se,ke)=>{},ct=async()=>{m.value=!0;let de=1,se=[],ke=!1;try{const Ne=await wi();if(e()&&!T.isEmptyString(Ne))if(de=await t.getSubdocCount(Ne,w.value),de>1&&(ke=!0),ke){const bt=await t.getSubdocs(Ne,S.value-1,za,p.value,w.value);for(let je=0;je<bt.length;je++){const gt=bt[je].root_id,Gt=await s.getPost(gt);se.push(Gt)}r.info("æŒ‚ä»¶æ¨¡å¼ï¼Œæœ‰å­æ–‡æ¡£ï¼Œå±•ç¤ºå­æ–‡æ¡£")}else r.info("æŒ‚ä»¶æ¨¡å¼ï¼Œæ²¡æœ‰å­æ–‡æ¡£ï¼Œç›´æŽ¥æ˜¾ç¤ºå‘å¸ƒé¡µé¢"),await n.push({path:"/publish/singlePublish",query:{id:Ne}});else de=await s.getRecentPostsCount(p.value,w.value),se=await s.getRecentPosts(za,S.value-1,p.value,w.value),r.info("æ— æ³•èŽ·å–é¡µé¢IDï¼Œå¯èƒ½æ˜¯æµè§ˆå™¨çŽ¯å¢ƒæˆ–è€…æµè§ˆå™¨æ’ä»¶å±•ç¤ºæ–‡æ¡£åˆ—è¡¨");r.debug("postList=>",se),P.value=de,d.splice(0,d.length);for(let bt=0;bt<se.length;bt++){const je=se[bt];let kt=je.title;i().value.fixTitle&&(kt=At.removeTitleNumber(kt).replace(/\.md/g,""));const Gt=T.getByLength(kt,ar,!1),bs=Ns.mdToHtml(je.description),ws=je==null?void 0:je.shortDesc,Vt=te.safeParse(je.attrs,{}),he=Vt["custom-publish-status"]==="publish",oe=Vt["custom-expires"]&&Vt["custom-expires"]-Date.now()<0,Bt=await t.getBlockAttrs(je.postid),jt={},_s={};for(let to in Bt){if(!to.startsWith("custom-")||!to.endsWith("-yaml"))continue;const Vo=to.replace("-yaml","").replace("custom-","").replace("-","_");jt[Vo]=Bt[to],_s[Vo]=Ws(x.value,Vo)}const Qi={postid:je.postid,title:kt,shortTitle:Gt,dateCreated:De.formatIsoToZhDate(je.dateCreated.toISOString(),!0),mt_keywords:je.mt_keywords,description:I.emptyOrDefault(bs,"æš‚æ— å†…å®¹"),shortDesc:I.emptyOrDefault(ws,"æš‚æ— å†…å®¹"),isShared:he&&!oe,yamlCount:Object.keys(jt).length,yamlAttrs:jt,dynCfgs:_s};d.push(Qi)}}catch(Ne){r.error(o("main.opt.failure")+"=>",Ne),ee.error(o("main.opt.failure")+"=>"+Ne)}finally{m.value=!1}v.value++},ne=async()=>{k.value=await Yn.preCheckPicgoPlugin(),M.value=await Yn.preCheckBlogPlugin();const de=await c(),se=te.safeParse(de[Me],{});x.value=(se==null?void 0:se.totalCfg)||[],await ct(),r.debug("Post init page=>",d)};return Rs(async()=>{await ne()}),(de,se)=>{const ke=jl,Ne=Se,bt=Kl,je=Dt,kt=Gs,gt=Wl,Gt=ri,bs=Fl,ws=zl,Vt=En;return _(),O("div",Gf,[E("div",Bf,[E("div",jf,[f(ke,{class:"s-input",modelValue:p.value,"onUpdate:modelValue":se[0]||(se[0]=he=>p.value=he),"fetch-suggestions":F,"popper-class":"my-autocomplete",placeholder:"è¯·è¾“å…¥å…³é”®å­—",onChange:L,onSelect:z},{default:b(({item:he})=>[E("div",Kf,j(he.value),1)]),_:1},8,["modelValue"]),f(Ne,{class:"s-btn",type:"primary",onClick:L},{default:b(()=>se[3]||(se[3]=[R("æœç´¢")])),_:1}),f(bt,{class:"s-filter-item s-filter-published",size:"large",modelValue:w.value,"onUpdate:modelValue":se[1]||(se[1]=he=>w.value=he),onChange:V},{default:b(()=>se[4]||(se[4]=[R("å·²å‘å¸ƒ ")])),_:1},8,["modelValue"])]),m.value?(_(),O("div",Wf,[f(je,{loading:m.value,rows:5,animated:""},null,8,["loading"])])):(_(),O("div",Ff,[(_(),C(bs,{class:"tb-data",data:d,key:v.value,border:"",stripe:"","highlight-current-row":"","empty-text":"ç¬”è®°æ•°æ®ä¸ºç©ºæˆ–è€…æ€æºç¬”è®°æœªå¯åŠ¨ï¼",onRowClick:vt,style:{width:"100%","min-width":"600px"}},{default:b(()=>[f(gt,{type:"expand"},{default:b(he=>[E("div",zf,[E("p",Jf,"ID: "+j(he.row.postid),1),E("p",qf,"å‘å¸ƒæ—¶é—´: "+j(he.row.dateCreated),1),E("p",Yf,"æ ‡é¢˜: "+j(he.row.title),1),E("p",Xf," æ ‡ç­¾: "+j(he.row.mt_keywords===""?"æš‚æ— æ ‡ç­¾":he.row.mt_keywords),1),E("p",Zf,"æ‘˜è¦: "+j(he.row.shortDesc),1),E("p",Qf,[se[5]||(se[5]=R(" å¹³å°: ")),he.row.yamlCount>0?(_(),O("span",ey,[(_(!0),O(Ce,null,xe(he.row.yamlAttrs,(oe,Bt)=>(_(),O("span",{key:Bt,class:"box-item"},[E("a",{onClick:jt=>N(Bt.toString(),he.row)},[f(kt,null,{default:b(()=>{var jt,_s;return[E("i",sy,[E("span",{innerHTML:((jt=he.row.dynCfgs[Bt])==null?void 0:jt.platformIcon)??h(Te).iconOTRemove},null,8,oy)]),R(" "+j(((_s=he.row.dynCfgs[Bt])==null?void 0:_s.platformName)??"[å·²åˆ é™¤]"),1)]}),_:2},1024)],8,ty)]))),128))])):(_(),O("span",ay,"æš‚æ— å¹³å°"))])])]),_:1}),f(gt,{prop:"title"},{header:b(()=>se[6]||(se[6]=[E("div",{style:{"text-align":"center"}},"æ ‡é¢˜",-1)])),default:b(he=>[f(Gt,{content:he.row.yamlCount>0?"æ–‡ç« å·²å‘å¸ƒåˆ°ï¼š"+Object.keys(he.row.yamlAttrs).toString():"å°šæœªå‘å¸ƒ",class:"box-item",effect:"light",placement:"right","popper-class":"publish-menu-tooltip"},{default:b(()=>[E("span",null,j(he.row.title),1)]),_:2},1032,["content"]),he.row.yamlCount>0?(_(),O("sup",ny,j(he.row.yamlCount),1)):X("",!0)]),_:1}),f(gt,{align:"center",width:"420"},{header:b(()=>se[7]||(se[7]=[E("div",{style:{"text-align":"center"}},"æ“ä½œ",-1)])),default:b(he=>[f(Ne,{size:"small",onClick:oe=>le(he.$index,he.row)},{default:b(()=>[f(h(Nf)),se[8]||(se[8]=R(" Â é—ªå‘ "))]),_:2},1032,["onClick"]),f(Ne,{size:"small",onClick:oe=>We(he.$index,he.row)},{default:b(()=>[f(h(Af)),se[9]||(se[9]=R(" Â å•å‘ "))]),_:2},1032,["onClick"]),f(Ne,{size:"small",onClick:oe=>G(he.$index,he.row)},{default:b(()=>[f(h(Rf)),se[10]||(se[10]=R(" Â æ‰¹å‘ "))]),_:2},1032,["onClick"]),M.value&&he.row.isShared?(_(),C(Ne,{key:0,size:"small",onClick:oe=>be(he.$index,he.row)},{default:b(()=>[f(h(xf)),se[11]||(se[11]=R(" Â æŸ¥çœ‹ "))]),_:2},1032,["onClick"])):X("",!0),k.value?(_(),C(Ne,{key:1,size:"small",onClick:oe=>ot(he.$index,he.row)},{default:b(()=>[f(h(Of)),se[12]||(se[12]=R(" Â å›¾åºŠ "))]),_:2},1032,["onClick"])):X("",!0)]),_:1})]),_:1})),f(ws,{small:"",background:"",layout:y.value,total:P.value,class:"mt-4","page-size":za,onPrevClick:Y,onNextClick:Pe,"current-page":S.value,onCurrentChange:Be},null,8,["layout","total","current-page"])]))]),f(Vt,{modelValue:$.value,"onUpdate:modelValue":se[2]||(se[2]=he=>$.value=he),size:"85%",title:B.value,direction:"rtl","destroy-on-close":!0},{default:b(()=>[f(Bi,{src:A.value},null,8,["src"])]),_:1},8,["modelValue","title"])])}}}),ly=pe(iy,[["__scopeId","data-v-a0047030"]]),ry={key:1},cy={class:"platform-title"},py={class:"platform-desc"},uy={class:"one-key-preview"},dy={class:"icon-list"},gy={class:"el-icon"},my=["innerHTML"],hy=J({__name:"QuickPublishSelectPlatform",props:{id:{type:String,default:""}},setup(u){const o=W("quick-publish-select-platform"),t=new fe,{getPostPreviewUrl:s}=Ys(),{kernelApi:e}=Re(),{getReadOnlyPublishPreferenceSetting:a}=xt(),n=u,{t:i}=Z(),{query:l}=Xe(),c=_t(),{getSetting:r}=me(),m=ce({isInit:!1,pageId:T.isEmptyString(l.id)?n.id:l.id,enabledConfigArray:[],postInfo:{},postMeta:{},unpublishCount:0}),y=q(""),p=(k,M)=>{k.stopPropagation();const x=`/workers/quickPublish/${M}/${m.pageId}`;o.info("will go to =>",x);const K={path:x,query:{showBack:"true"}};c.push(K)},g=k=>{const M=Ee(k),x=ae.getProperty(m.postMeta,M);return!T.isEmptyString(x)},w=async(k,M)=>{if(k.stopPropagation(),!g(M)){m.unpublishCount++;return}const K=await we.getCfg(M),$=await we.getAdaptor(M,K),B=I.blogApi(t,$),A=await s(B,m.pageId,K);window.open(A)},d=async k=>{Pt.confirm("å°†åœ¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€æ‰€æœ‰å·²å‘å¸ƒå¹³å°çš„æ–‡ç« é¢„è§ˆé¡µé¢ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","æ¸©é¦¨æç¤º",{type:"error",icon:qe(bn),confirmButtonText:i("main.opt.ok"),cancelButtonText:i("main.opt.cancel")}).then(async()=>{for(const M of m.enabledConfigArray)await w(k,M.platformKey);(m.enabledConfigArray.length===0||m.unpublishCount===m.enabledConfigArray.length)&&(m.unpublishCount=0,ee.error("æ–‡ç« æœªå‘å¸ƒè¿‡ï¼Œè¯·è‡³å°‘å‘å¸ƒåˆ°ä¸€ä¸ªå¹³å°ï¼"))}).catch(()=>{})},v=async()=>{const k=await r(),M=te.safeParse(k[Me],{}),x=(M==null?void 0:M.totalCfg)||[];if(m.enabledConfigArray=x.filter($=>$.isEnabled&&$.isAuth),m.postMeta=ae.getProperty(k,m.pageId,{}),m.postInfo=await e.getBlockByID(m.pageId),a().value.fixTitle){const $=At.removeTitleNumber(m.postInfo.content).replace(/\.md/g,"");y.value=$}else y.value=m.postInfo.content},P=q(!1),{loadingTime:S}=Xs(P);return Rs(async()=>{await v(),m.isInit=!0,P.value=!0}),(k,M)=>{const x=js,K=Dt,$=Ve,B=Se,A=Gs,F=Pn,U=Ao,z=Tn,L=kn,V=$e;return _(),O(Ce,null,[f(x,{"loading-time":h(S),style:{padding:"0 24px"}},null,8,["loading-time"]),m.isInit?(_(),O("div",ry,[f(V,{title:"æ–‡ç« æžé€Ÿå‘å¸ƒ"},{default:b(()=>[E("div",cy,j(y.value),1),E("div",py,[E("p",null,[f($,{class:"desc-tip",type:"error",title:"ç‚¹å‡»å›¾æ ‡å³å¯æžé€Ÿå‘å¸ƒæˆ–è€…æ›´æ–° ðŸš€ã€‚"})])]),E("div",uy,[f(B,{type:"primary",size:"small",onClick:d},{default:b(()=>M[0]||(M[0]=[R("ä¸€é”®é¢„è§ˆ")])),_:1})]),f(L,{gutter:20,class:"row-box"},{default:b(()=>[(_(!0),O(Ce,null,xe(m.enabledConfigArray,Y=>(_(),C(z,{span:8,sm:12,xs:12,md:12,lg:8,xl:8,title:Y.platformName,class:"platform-select-card"},{default:b(()=>[f(U,{class:"card-item"},{default:b(()=>[E("div",dy,[f(F,{type:g(Y.platformKey)?"success":"danger",value:g(Y.platformKey)?"é¢„è§ˆ":"æœªå‘å¸ƒ",class:zt(g(Y.platformKey)?"item published-item":"item"),onClick:Po(Pe=>w(Pe,Y.platformKey),["stop"])},{default:b(()=>[f(A,{class:"define-item",onClick:Po(Pe=>p(Pe,Y.platformKey),["stop"])},{default:b(()=>[E("i",gy,[E("span",{innerHTML:Y==null?void 0:Y.platformIcon},null,8,my)]),R(" "+j(h(Mt).longPlatformName(Y==null?void 0:Y.platformName,11)),1)]),_:2},1032,["onClick"])]),_:2},1032,["type","value","class","onClick"])])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:1})]),_:1})])):(_(),C(K,{key:0,class:"placeholder platform-skt",rows:12,animated:""}))],64)}}}),fy=pe(hy,[["__scopeId","data-v-3e7c1d4b"]]),yy=[{path:"/publish/quickSelect",component:fy},{path:"/workers/quickPublish/:key/:id",component:Pp},{path:"/publish/singlePublish",component:Op},{path:"/publish/singlePublish/doPublish/:key/:id",component:Iu},{path:"/",component:ly},{path:"/publish/batchPublish",component:nd},{path:"/ai/chat",component:cd},{path:"/test",component:dd},{path:"/test/siyuan",component:Pd},{path:"/test/cnblogs",component:Md},{path:"/test/wordpress",component:Bd},{path:"/test/typecho",component:Zd},{path:"/test/yuque",component:rg},{path:"/test/zhihu",component:bg},{path:"/test/csdn",component:Ag},{path:"/test/picgo",component:xg},{path:"/test/other",component:Vg},{path:"/test/chat",component:Hg},{path:"/setting",component:Rm},{path:"/setting/publish",component:Ki},{path:"/setting/platform/quickadd/:type",component:ji},{path:"/setting/platform/add/:type",component:Wm},{path:"/setting/platform/update/:key",component:Jm},{name:"setting-platform-single",path:"/setting/platform/single/:key",component:Xh},{path:"/setting/general",component:df},{path:"/setting/siyuan",component:Zi},{path:"/about",component:Sf}],by=()=>Cl({history:Al(),routes:yy}),wy={"lang.choose":"è¯­è¨€é€‰æ‹©","lang.choose.placeholder":"è¯·é€‰æ‹©è¯­è¨€","theme.mode.choose":"åˆ‡æ¢æ¨¡å¼","theme.mode.dark":"æš—é»‘æ¨¡å¼","theme.mode.light":"æµ…è‰²æ¨¡å¼","service.tab.manage":"æ–‡ç« ç®¡ç†","service.tab.publish.service":"å‘å¸ƒæœåŠ¡","service.tab.publish.setting":"å‘å¸ƒé…ç½®","service.tab.platform.setting":"å¹³å°é…ç½®","service.tab.post.bind":"æ–‡ç« ç»‘å®š","service.tab.service.switch":"æœåŠ¡å¼€å…³","service.tab.change.local":"åå¥½è®¾ç½®","main.publish.editmode":"ç¼–è¾‘æ¨¡å¼","main.publish.editmode.simple":"ç®€æ´æ¨¡å¼","main.publish.editmode.complex":"è¯¦ç»†æ¨¡å¼","main.publish.editmode.source":"æºç æ¨¡å¼","main.publish.vuepress.tip":"æŽ¨èVuepressçš„V1ç‰ˆæœ¬ï¼Œé…åˆ vuepress-theme-vdoing ä½¿ç”¨ï¼ŒåŽç»­bugä¹Ÿåªä¼šå¯¹V1å’Œæ­¤ä¸»é¢˜è¿›è¡Œæ›´æ–°","main.publish.github.error.tip":"é…ç½®é”™è¯¯æˆ–è€…apiä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥ã€‚è‹¥ä¿®æ”¹è¿‡é…ç½®ï¼Œè¯·åˆ·æ–°é¡µé¢","main.publish.github":"å‘å¸ƒé¡µé¢","main.publish.github.tip":"è‡ªåŠ¨å°†æ–‡ç« çš„markdownæ–‡æœ¬å‘å¸ƒåˆ°Vuepresså¯¹åº”çš„Githubä»“åº“ï¼ˆéœ€è¦å…ˆè¿›è¡Œç›¸å…³é…ç½®ï¼‰","main.publish.github.no.tip":"æ‚¨æœªå¼€å¯Github pageså‘å¸ƒï¼Œè¯·åˆ‡æ¢æºç æ¨¡å¼å¤åˆ¶YAMLä»¥åŠMarkdownæ–‡æœ¬","main.publish.github.choose.path":"å‘å¸ƒç›®å½•","main.publish.github.published.path":"å‘å¸ƒè·¯å¾„","main.publish.github.choose.path.use.default":"é»˜è®¤ç›®å½•","main.publish.github.choose.path.use.default.tip":"ä½¿ç”¨é»˜è®¤ç›®å½•ï¼Œåˆ™é»˜è®¤æ‰€æœ‰æ–‡ç« éƒ½å‘å¸ƒåœ¨é…ç½®å¥½çš„é»˜è®¤ç›®å½•ä¸‹ï¼ˆå¯åœ¨å‘å¸ƒé…ç½®è®¾ç½®ï¼‰ï¼Œæ— éœ€æ¯æ¬¡å‘å¸ƒçš„æ—¶å€™æ¥é€‰æ‹©ç›®å½•ï¼Œå½“å‰å¹³å°çš„é»˜è®¤ç›®å½•ä¸ºï¼š","main.publish.github.choose.title":"æ–‡ä»¶åç§°","main.publish.github.choose.title.tip":"Vuepress-theme-vdoingæ”¯æŒæ–‡ä»¶ååŠ ä¸Šåºå·æ¥æ ‡è¯†ï¼Œå¦‚æžœä½ ä¸æ¸…æ¥šæ­¤ç”¨æ³•ï¼Œè¯·ä¸è¦ä¿®æ”¹æ–‡ä»¶å","main.publish.github.failure":"å‘å¸ƒå¤±è´¥ï¼Œè¯·è‡ªè¡Œå¤åˆ¶å³ä¾§æ–‡æœ¬","main.publish.see.preview":"ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æœ€æ–°æ–‡ç« ","main.publish.see.md.preview":"ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹MDæ–‡ä»¶","main.publish.see.real.preview":"ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æœ€æ–°æ–‡ç« ","main.publish.to.wordpress":"å‘å¸ƒåˆ°Wordpress","main.title":"æ–‡ç« æ ‡é¢˜","main.slug":"æ–‡ç« åˆ«å","main.auto.fetch.slug":"è‡ªåŠ¨ç”Ÿæˆåˆ«å","main.use.google.translate":"ä½¿ç”¨Googleç¿»è¯‘API","main.use.hash":"åˆ«ååŽç¼€","main.use.hash.tip":"ä¸ä½¿ç”¨hashä¼šå±•ç¤ºæ›´æœ‰æ„ä¹‰çš„urlï¼Œä½†æ˜¯å¯èƒ½å¯¼è‡´æ–‡ç« åˆ«åé‡å¤ï¼ˆåŽæžœæ˜¯Vuepressä¼šBuildå¤±è´¥é™¤éžæ‰‹åŠ¨è§£å†³åˆ«åå”¯ä¸€é—®é¢˜ï¼‰ï¼Œè¯·çŸ¥æ‚‰ã€‚","main.force.refresh":"åˆ·æ–°åˆ«å","main.force.refresh.tip":"ä¸ºäº†é˜²æ­¢è¯¯æ“ä½œæ›´æ–°åˆ«åï¼Œåˆ«åä¸ä¸ºç©ºçš„æ—¶å€™é»˜è®¤ä¸ä¼šæ›´æ–°åˆ«åï¼Œå¦‚éœ€æ›´æ–°ï¼Œè¯·å‹¾é€‰åˆ·æ–°åˆ«åã€‚","main.desc":"æ–‡ç« æ‘˜è¦","main.auto.fetch.desc":"è‡ªåŠ¨æå–æ‘˜è¦","main.create.time":"å‘å¸ƒæ—¶é—´","main.update.time":"æ›´æ–°æ—¶é—´","main.create.time.placeholder":"è¯·é€‰æ‹©å‘å¸ƒæ—¶é—´","main.update.time.placeholder":"è¯·é€‰æ‹©æ›´æ–°æ—¶é—´","main.tag":"æ–‡ç« æ ‡ç­¾","main.tag.new":"æ–°æ ‡ç­¾","main.tag.select":"è¯·é€‰æ‹©æ ‡ç­¾","main.auto.fetch.tag":"è‡ªåŠ¨æå–æ ‡ç­¾","main.tag.auto.switch":"è‡ªåŠ¨æ ‡ç­¾","main.tag.auto.switch.no.tip":"è‡ªåŠ¨æ ‡ç­¾å·²å…³é—­ï¼Œå°†ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾","main.tag.empty":"æš‚æ— æ ‡ç­¾","main.tag.close":"æ”¶èµ·é€‰é¡¹","main.cat":"æ–‡ç« åˆ†ç±»","main.cat.empty":"æš‚æ— åˆ†ç±»","main.cat.select":"è¯·é€‰æ‹©åˆ†ç±»","main.yaml.formatter":"YAML Formatter","main.siyuan.to.yaml":"æ–‡ç« å±žæ€§è½¬YAML","main.yaml.to.siyuan":"YAMLè½¬æ–‡ç« å±žæ€§","main.save.attr.to.siyuan":"ä¿å­˜å±žæ€§åˆ°æ€æº","main.copy":"å¤åˆ¶","main.publish":"å‘å¸ƒ","main.publish.loading":"å‘å¸ƒä¸­...","main.loading":"åŠ è½½ä¸­...","main.update":"æ›´æ–°","main.cancel":"å–æ¶ˆ","main.publish.oneclick.attr":"ä¸€é”®ç”Ÿæˆå±žæ€§","main.publish.oneclick.attr.finish":"å±žæ€§å·²ç”Ÿæˆ","main.publish.status.unpublish":"æœªå‘å¸ƒ","main.publish.status.published":"å·²å‘å¸ƒ","main.publish.to.vuepress":"å‘å¸ƒåˆ°Vuepress","main.publish.to.hugo":"å‘å¸ƒåˆ°Hugo","main.publish.to.hexo":"å‘å¸ƒåˆ°Hexo","main.publish.to.jekyll":"å‘å¸ƒåˆ°Jekyll","main.publish.to.jvue":"å‘å¸ƒåˆ°JVue","main.publish.to.conf":"å‘å¸ƒåˆ°Confluence","main.publish.to.cnblogs":"å‘å¸ƒåˆ°åšå®¢å›­","main.publish.to.liandi":"å‘å¸ƒåˆ°é“¾æ»´","main.publish.to.yuque":"å‘å¸ƒåˆ°è¯­é›€","main.publish.to.kms":"å‘å¸ƒåˆ°KMS","main.opt.success":"æ“ä½œæˆåŠŸ","main.opt.failure":"æ“ä½œå¤±è´¥","main.copy.success":"å¤åˆ¶æˆåŠŸ","main.copy.failure":"å¤åˆ¶å¤±è´¥","main.opt.quick":"å¿«æ·æ“ä½œ","main.opt.status.publish":"æ–‡ç« å·²å‘å¸ƒ","main.opt.status.updated":"æ–‡ç« å·²æ›´æ–°","main.opt.status.cancel":"æ–‡ç« å‘å¸ƒå·²å–æ¶ˆ","main.opt.loading":"æ“ä½œä¸­...","main.opt.warning":"è­¦å‘Šä¿¡æ¯","main.opt.tip":"æ¸©é¦¨æç¤º","main.opt.ok":"ç¡®è®¤","main.opt.cancel":"å–æ¶ˆ","main.opt.select":"è¯·é€‰æ‹©","main.opt.warning.tip":"æ­¤æ“ä½œä¸å¯æ¢å¤ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","setting.noneed":"æ— éœ€é…ç½®","setting.blog.setting":"è®¾ç½®","setting.blog.index":"åå¥½è®¾ç½®","setting.blog.type":"åšå®¢ç±»åž‹","setting.blog.type.placeholder":"è¯·é€‰æ‹©åšå®¢ç±»åž‹","setting.blog.type.wordpress.value":"Wordpress","setting.blog.type.wordpress.label":"Wordpress","setting.blog.type.metaweblog.value":"MetaweblogApi","setting.blog.type.metaweblog.label":"Metaweblog API","setting.blog.type.github.value":"Github","setting.blog.type.github.label":"Github","setting.blog.type.github.user":"Githubç”¨æˆ·å","setting.blog.type.github.user.tip":"Githubç”¨æˆ·åï¼Œä¾‹å¦‚ï¼šterwer","setting.blog.type.github.repo":"gitä»“åº“å","setting.blog.type.github.repo.tip":"gitä»“åº“åï¼Œä¾‹å¦‚ï¼šhexo-blog","setting.blog.type.github.token":"Githubä»¤ç‰Œ","setting.blog.type.github.token.tip":"Githubä»¤ç‰Œï¼Œä¾‹å¦‚ï¼šghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","setting.blog.type.github.token.gen":"Github ä¸ªäººä»¤ç‰Œç”Ÿæˆåœ°å€","setting.blog.type.github.default.branch":"é»˜è®¤åˆ†æ”¯","setting.blog.type.github.default.branch.tip":"é»˜è®¤åˆ†æ”¯ï¼ˆæ—§ç‰ˆä»“åº“ä¸ºmasterï¼Œæ–°ç‰ˆä»“åº“é»˜è®¤ä¸ºmainï¼‰ï¼Œä¾‹å¦‚ï¼šmain","setting.blog.type.github.default.path":"å­˜å‚¨ç›®å½•","setting.blog.type.github.default.path.tip":"å­˜å‚¨ç›®å½•ä¾‹å¦‚ï¼šdocsï¼Œéƒ¨åˆ†å¹³å°å¯ä½¿ç”¨[auto]ä½œä¸ºç‰¹æ®Šå ä½ç¬¦ï¼Œä»£è¡¨è‡ªåŠ¨æ˜ å°„å±‚çº§ç›®å½•ï¼Œä¾‹å¦‚ï¼šdocs/[auto]","setting.blog.type.github.images.path":"å›¾ç‰‡å­˜å‚¨ç›®å½•","setting.blog.type.github.images.path.tip":"å›¾ç‰‡å­˜å‚¨ç›®å½•ï¼Œç›¸å¯¹äºŽä»“åº“æ ¹ç›®å½•ï¼Œç•™ç©ºåˆ™ä½¿ç”¨ç›¸å¯¹äºŽæ ¹ç›®å½•çš„ images ç›®å½•","setting.blog.type.github.msg":"æäº¤ä¿¡æ¯","setting.blog.type.github.msg.tip":"æäº¤ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šauto published by siyuan-publish-publisher","setting.blog.type.github.author":"ä½œè€…","setting.blog.type.github.author.tip":"ä½œè€…ï¼Œä¾‹å¦‚ï¼šterwer","setting.blog.type.github.email":"é‚®ç®±","setting.blog.type.github.email.tip":"é‚®ç®±","setting.blog.type.github.site":"ä½œè€…ä¸»é¡µ","setting.blog.type.github.site.tip":"ä½œè€…ä¸»é¡µï¼Œå¦‚æžœä¸ºç©ºé»˜è®¤ä¸ºï¼š[GitHubåœ°å€]/[ç”¨æˆ·å]","setting.blog.type.github.dyn.yaml":"YAMLé¢„è®¾é…ç½®","setting.blog.type.github.dyn.yaml.tip":'YAMLé¢„è®¾é…ç½®ï¼Œå¦‚æžœæ‚¨ä¸äº†è§£æ˜¯å¹²ä»€ä¹ˆçš„è¯·ä¸è¦é…ç½®ï¼ŒJSONæ ¼å¼ï¼Œä¾‹å¦‚ï¼š{"sidebar": false}ã€‚è¿™ä¸ªé…ç½®ä¼šè¦†ç›–å½“å‰å¹³å°çš„é»˜è®¤é…ç½®ã€‚å¦‚æžœéœ€è¦ä½¿ç”¨é»˜è®¤çš„å°±ç•™ç©ºå³å¯ã€‚',"setting.blog.url":"åšå®¢ç½‘å€","setting.blog.github.url.tip":"Githubé¦–é¡µåœ°å€","setting.blog.username":"è´¦å·","setting.blog.password":"å¯†ç /Token","setting.blog.apiurl":"APIåœ°å€","setting.blog.github.apiurl.tip":"Github çš„ REST API åœ°å€ï¼Œé€šå¸¸æ˜¯ï¼šhttps://api.github.com","setting.blog.previewPostUrl":"æ–‡ç« é¢„è§ˆè§„åˆ™","setting.blog.previewPostUrl.tip":"é¢„è§ˆè§„åˆ™ï¼ˆå ä½ç¬¦ï¼š[yyyy] [MM] [dd] [postid]ï¼‰ï¼Œä¾‹å¦‚ï¼š/post/[postid].html æˆ–è€… /[cats]/[yyyy]/[mm]/[dd]/[postid].html","setting.blog.previewUrl":"é¢„è§ˆè§„åˆ™","setting.blog.previewUrl.tip":"å¦‚æžœä¸æ˜Žç™½åŽŸç†ï¼Œè¯·å‹¿ä¿®æ”¹æ­¤é€‰é¡¹ã€‚MDæ–‡ä»¶é¢„è§ˆè§„åˆ™ï¼ˆå ä½ç¬¦ï¼š[user] [repo] [branch] [docpath]ï¼‰ï¼Œé€šå¸¸æ˜¯ï¼š/[user]/[repo]/blob/[branch]/[docpath]","setting.blog.mdFilenameRule":"æ–‡ä»¶è§„åˆ™","setting.blog.mdFilenameRule.tip":"Markdownæ–‡ä»¶åè§„åˆ™(å ä½ç¬¦ï¼š[yyyy] [MM] [mm] [dd] [category] [cats] [tag] [tags] [slug] [filename])ï¼Œä¾‹å¦‚ï¼š[filename].mdã€[slug].mdã€[yyyy]-[mm]-[dd]-[slug].md","setting.blog.pageType":"å‘å¸ƒæ ¼å¼","setting.blog.validate":"éªŒè¯","setting.blog.save":"ä¿å­˜","setting.blog.vali":"éªŒè¯","setting.blog.vali.tip":"å¼ºçƒˆå»ºè®®ä¿å­˜ä¹‹å‰å…ˆéªŒè¯é…ç½®ä»¥ä¿è¯apiçš„å¯ç”¨æ€§ï¼ŒéªŒè¯è¿‡ç¨‹ä¸­å°†å‘é€ä¸€ç¯‡æµ‹è¯•æ–‡ç« ï¼Œæ‚¨å¯ä»¥ç¨åŽåœ¨å¹³å°æ‰‹åŠ¨åˆ é™¤å®ƒã€‚æ‚¨ä¹Ÿå¯ä»¥å…ˆä¿å­˜ï¼Œç¨åŽä¿®æ”¹ï¼Œä½†æ˜¯åœ¨éªŒè¯é€šè¿‡ä¹‹å‰è¯¥apiå°†ä¸å¯ä½¿ç”¨ã€‚","setting.blog.vali.tip.metaweblog":"é…ç½®é”™è¯¯æˆ–è€…apiä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥ã€‚è‹¥ä¿®æ”¹è¿‡é…ç½®ï¼Œè¯·åˆ·æ–°é¡µé¢","setting.blog.vali.ing":"éªŒè¯ä¸­...","setting.blog.vali.ok":"éªŒè¯é€šè¿‡ï¼Œä¸è¦å¿˜äº†ç‚¹å‡»ä¸‹æ–¹ä¿å­˜å“Ÿ(*^â–½^*)","setting.blog.vali.ok.metaweblog":"é…ç½®å·²ä¿å­˜å¹¶éªŒè¯é€šè¿‡","setting.blog.vali.error":"APIéªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®","setting.blog.platform.support.github":"æ‚¨å½“å‰æ“ä½œçš„æ˜¯æ”¯æŒGithubçš„å¹³å°ï¼š","setting.blog.platform.support.metaweblog":"æ‚¨å½“å‰æ“ä½œçš„æ˜¯æ”¯æŒmetaweblogçš„å¹³å°ï¼š","setting.blog.cancel":"å–æ¶ˆ","setting.vuepress":"Vuepress","setting.hugo":"Hugo","setting.hexo":"Hexo","setting.jekyll":"Jekyll","setting.jvue":"JVue","setting.conf":"Confluence","setting.conf.tip":"å‘å¸ƒåˆ°Confluenceéœ€è¦é…åˆæˆ‘çš„å¦ä¸€ä¸ªé€‚é…å™¨é¡¹ç›®ä½¿ç”¨ï¼ˆå¼ºçƒˆæŽ¨èï¼‰ï¼Œè¯·å‚è€ƒï¼šhttps://github.com/terwer/node-metaweblog-api-adaptor","setting.cnblogs":"åšå®¢å›­","setting.wordpress":"Wordpress","setting.liandi":"é“¾æ»´","setting.yuque":"è¯­é›€","setting.kms":"KMS","setting.other1":"å…¶ä»–1","service.switch.vuepress":"Vuepress","service.switch.hugo":"Hugo","service.switch.hexo":"Hexo","service.switch.jekyll":"Jekyll","service.switch.jvue":"JVue","service.switch.conf":"Confluence","service.switch.cnblogs":"åšå®¢å›­","service.switch.wordpress":"Wordpress","service.switch.yuque":"è¯­é›€","service.switch.liandi":"é“¾æ»´","service.switch.wechat":"å¾®ä¿¡èŠå¤©","service.switch.wemp":"å¾®ä¿¡å…¬ä¼—å·","service.switch.zhihu":"çŸ¥ä¹Ž","service.switch.kms":"çŸ¥è¯†ä»“åº“","service.switch.must.select.one":"æ‚¨å¿…é¡»é€‰æ‹©ä¸€ä¸ªè‡³å°‘å¹³å°","post.bind.vuepress.slug":"Vuepressåˆ«å","post.bind.hugo.slug":"Hugoåˆ«å","post.bind.hexo.slug":"Hexoåˆ«å","post.bind.jekyll.slug":"Jekyllåˆ«å","post.bind.cnblogs.postid":"åšå®¢å›­åˆ«å","post.bind.jvue.postid":"JVueçš„ID","post.bind.conf.postid":"Confçš„ID","post.bind.wordpress.postid":"WPçš„ID","post.bind.liandi.postid":"é“¾æ»´çš„ID","post.bind.yuque.postid":"è¯­é›€çš„ID","post.bind.kms.postid":"KMSçš„ID","post.bind.conf.save":"ä¿å­˜","post.bind.conf.v081":"æ£€æµ‹ v0.8.1 å…ƒæ•°æ®å¹¶å¯¼å…¥","post.bind.auto.error":"æœªæ£€æµ‹åˆ°IDï¼Œè¯·æ‰‹åŠ¨è¾“å…¥æ–‡æ¡£æ ¹ ID ï¼Œç„¶åŽå†è¿›è¡Œä¿®å¤","post.bind.auto.empty":"è¯¥æ–‡æ¡£æœªå‘å¸ƒè¿‡ï¼Œæ— éœ€ä¿®å¤","post.bind.conf.cancel":"å–æ¶ˆ","form.validate.name.required":"è¯·è¾“å…¥åç§°","form.validate.name.length":"é•¿åº¦å¿…é¡»åœ¨0åˆ°1ä¹‹é—´","form.validate.github.auto.delete":"è‡ªåŠ¨åˆ é™¤","dynamic.platform.new":"å¹³å°ç®¡ç†","dynamic.platform.tip":"å¦‚æžœå†…ç½®çš„å‘å¸ƒæœåŠ¡æ— æ³•æ»¡è¶³æˆ–è€…éœ€è¦æ·»åŠ å¤šä¸ªå®žä¾‹ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å—æ”¯æŒçš„å¹³å°ï¼Œç›®å‰æ”¯æŒé€šç”¨å¹³å°ï¼ˆZhihuã€è¯­é›€ã€CSDNç­‰ï¼‰ã€Githubï¼ˆHUGOã€HEXOã€Jekyllç­‰ï¼‰ã€metaweblog APIï¼ˆå¼€æºä¸­å›½ç­‰ï¼‰å’ŒWordpress API","dynamic.platform.type":"å¹³å°ç±»åž‹[å¿…é€‰]","dynamic.platform.subtype":"å­å¹³å°åç§°","dynamic.platform.type.metaweblog":"metaweblog API","dynamic.platform.type.wordpress":"Wordpress","dynamic.platform.type.github":"Github","dynamic.platform.type.common":"é€šç”¨å¹³å°","dynamic.platform.type.custom":"è‡ªå®šä¹‰","dynamic.platform.key":"å¹³å°key","dynamic.platform.key.tip":"å¹³å°å”¯ä¸€æ ‡è¯†ï¼Œä¸èƒ½é‡å¤ï¼Œä¾‹å¦‚ï¼šmyblog","dynamic.platform.name":"å¹³å°åç§°","dynamic.platform.name.tip":"å¹³å°åç§°ï¼Œä¾‹å¦‚ï¼šæˆ‘çš„åšå®¢","dynamic.platform.opt.add":"æäº¤","dynamic.platform.opt.noselect":"è¯·é€‰æ‹©å¹³å°ç±»åž‹","dynamic.platform.opt.key.exist":"å¹³å°keyå·²ç»å­˜åœ¨","dynamic.platform.opt.del.confirm":"åˆ é™¤æ­¤å¹³å°å°†ä¼šå½»åº•ç§»é™¤æ­¤å¹³å°ç›¸å…³é…ç½®ä¿¡æ¯ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","dynamic.platform.opt.del.select":"åˆ é™¤","dynamic.platform.opt.item.select":"æœªé€‰æ‹©","dynamic.platform.opt.item.select.tip":"å½“å‰é€‰æ‹©çš„æ˜¯ï¼š","dynamic.platform.opt.item.no.select.tip":"è¯·é€‰æ‹©è¦åˆ é™¤çš„è¡Œ","setting.common.home":"å¹³å°é¦–é¡µ","setting.common.tip":"å¹³å°é¦–é¡µï¼Œç”¨äºŽé¢„è§ˆæ–‡ç« ï¼Œä¾‹å¦‚ï¼šhttps://terwer.space","setting.common.apiurl":"APIåœ°å€","setting.common.token":"é‰´æƒtoken","setting.common.token.gen":"Tokenç”Ÿæˆåœ°å€","setting.common.username":"ç”¨æˆ·å","setting.common.username.gen":"è®¿é—®ç­–ç•¥è®¾ç½®","setting.common.password":"å¯†ç ","setting.blog.platform.support.common":"æ‚¨å½“å‰æ“ä½œçš„å¹³å°æ˜¯ï¼š","platform.must.select.one":"å“‡å“¦ï¼Œç¦»ä½¿ç”¨å°±å·®ä¸€æ­¥å•¦ o(â•¥ï¹â•¥)o ï¼Œæ‚¨å¿…é¡»æ·»åŠ å¹¶å¯ç”¨è‡³å°‘ä¸€ä¸ªå¹³å°ã€‚å¯é€šè¿‡ã€Œå¹³å°å¯¼å…¥ã€èŽ·å–åŽ»æ’ä»¶é—ªå•†åº—è‡ªå®šä¹‰æ·»åŠ ã€‚","blog.list.toptip":"æ¸©é¦¨æç¤ºï¼šå•å‡»è¡¨æ ¼è¡Œå¯ä»¥è¿›å…¥æ–‡ç« è¯¦æƒ…é¡µï¼Œè¯¦æƒ…é¡µæœ‰å‘å¸ƒæŒ‰é’®å“¦! (ã€ƒ'â–½'ã€ƒ)","config.error.msg":"é…ç½®é”™è¯¯ï¼Œè¯·å‰å¾€å¯¹åº”å‘å¸ƒé…ç½®ä¿®æ”¹","config.platform.none":"æ²¡æœ‰å¯ç”¨çš„å‘å¸ƒå¹³å°ï¼Œè¯·å‰å¾€æœåŠ¡å¼€å…³å¼€å¯","post.delete.by.platform":"æ–‡ç« å·²è¢«å¹³å°è‡ªè¡Œåˆ é™¤ï¼Œè¯·ç‚¹å‡»å–æ¶ˆå¼ºåˆ¶è§£é™¤å…³è”","blog.top-data-tip":"æ¸©é¦¨æç¤ºï¼š1. 0.1.0+ ä»¥åŽï¼Œå¯é€šè¿‡ã€åå¥½è®¾ç½®->æ€æºè®¾ç½®ã€‘æ¥ä¿®æ”¹é»˜è®¤ä¼ºæœé…ç½®ï¼Œæ”¯æŒæœ¬åœ°å’Œè¿œç¨‹ï¼›å¦‚æžœæ˜¯è¿œç¨‹è¿˜éœ€è¦è®¾ç½®tokenï¼Œå¦‚æžœä½¿ç”¨æµè§ˆå™¨æ’ä»¶æˆ–è€…æŒ‚ä»¶ä¹‹å¤–çš„è®¿é—®æ–¹å¼è¿˜éœ€è¦è®¾ç½®è·¨åŸŸè¯·æ±‚ä»£ç†ã€‚ 2ã€å‡çº§æ–°ç‰ˆä¹‹å‰å¼ºçƒˆå»ºè®®å¯¼å‡ºé…ç½®ï¼Œé˜²æ­¢é…ç½®ä¸¢å¤±ã€‚ 3ã€å¦‚æžœå‡ºçŽ°æ–°ç‰ˆæœ¬ä¸å…¼å®¹çš„å¼‚å¸¸æƒ…å†µï¼Œå»ºè®®æ¸…ç©ºé…ç½®ã€‚æ­¤æ“ä½œä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…Žæ“ä½œï¼","blog.top-data-tip.siyuan":"æ¸©é¦¨æç¤ºï¼š1ã€å½“å‰å¤„äºŽæŒ‚ä»¶æ¨¡å¼ï¼Œä»Ž 0.1.0 ç‰ˆæœ¬å¼€å§‹ï¼Œæ— éœ€åœ¨æ‰€æœ‰é¡µé¢å¼•ç”¨æŒ‚ä»¶äº†ï¼Œåªéœ€è¦åœ¨çˆ¶çº§é¡µé¢å¼•ç”¨ä¸€ä¸ªæŒ‚ä»¶å³å¯ã€‚å…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š(1). å¦‚æžœæ£€æµ‹åˆ°æ²¡æœ‰å­æ–‡æ¡£ï¼Œä¼šå…¼å®¹ 0.0.3 ç‰ˆæœ¬ä»¥å‰çš„æ–¹å¼ï¼Œå±•ç¤ºå½“å‰æ–‡æ¡£çš„å‘å¸ƒé¡µé¢ã€‚ (2). å¦‚æžœæ£€æµ‹åˆ°æœ‰å­æ–‡æ¡£ï¼Œä¼šä»¥åˆ—è¡¨åŠ åˆ†é¡µçš„æ–¹å¼å±•ç¤ºæ‰€æœ‰å­æ–‡æ¡£åˆ—è¡¨ã€‚å¯å•ç‹¬é€‰æ‹©æŸä¸ªå­æ–‡æ¡£è¿›è¡Œå‘å¸ƒæ“ä½œã€‚ 2ã€å‡çº§æ–°ç‰ˆä¹‹å‰å¼ºçƒˆå»ºè®®å¯¼å‡ºé…ç½®ï¼Œé˜²æ­¢é…ç½®ä¸¢å¤±ã€‚ 3ã€å¦‚æžœå‡ºçŽ°æ–°ç‰ˆæœ¬ä¸å…¼å®¹çš„å¼‚å¸¸æƒ…å†µï¼Œå»ºè®®æ¸…ç©ºé…ç½®ã€‚æ­¤æ“ä½œä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…Žæ“ä½œï¼","blog.newwin.open":"é¡µç­¾æ¨¡å¼","blog.change.siyuan.api":"æ€æºåœ°å€","setting.blog.siyuan.current.apiurl":"å½“å‰APIåœ°å€=>","setting.blog.middlewareUrl":"è·¨åŸŸè¯·æ±‚ä»£ç†","setting.blog.middlewareUrl.tip":"æŸäº›åœºæ™¯ä¸‹éœ€è¦ï¼ˆä¾‹å¦‚è‡ªéƒ¨ç½²æ¨¡å¼ï¼ŒNginxä¼ºæœç­‰ã€viteå¼€å‘çŽ¯å¢ƒä¼ºæœç­‰ï¼‰ï¼Œå…¶ä»–æƒ…å†µå¯å¿½ç•¥","setting.blog.middlewareUrl.my.tip":"éƒ¨åˆ†è·¨åŸŸåœºæ™¯å¯ç”¨ï¼ˆä¸æ”¯æŒç»•è¿‡æµè§ˆå™¨æ‹’ç»çš„ header ï¼Œä¾‹å¦‚ originã€referer ç­‰ï¼›è¯·æ±‚ä½“ä¸æ”¯æŒ FormData ç­‰äºŒè¿›åˆ¶æ ¼å¼ï¼Œä»…æ”¯æŒå­—ç¬¦ä¸²ï¼‰ï¼Œå‡ºäºŽæ€§èƒ½è€ƒè™‘ï¼Œå»ºè®®è‡ªå·±éƒ¨ç½²ä¸€ä»½ï¼Œè¯·ä½¿ç”¨ https://github.com/terwer/node-metaweblog-api-adaptor è¿›è¡Œéƒ¨ç½²ã€‚","setting.blog.middlewareUrl.my.fee.tip":"ðŸ¤ç”±äºŽå…±äº«ä»£ç†å ç”¨å·¨å¤§çš„æˆæœ¬ï¼Œæˆ–è€…å› ä¸ºä¸å¯æŠ—åŠ›åŽŸå› å¯èƒ½ä¼šå–æ¶ˆå…±äº«ï¼Œä¸ºäº†ä¿è¯æœåŠ¡å¯ç”¨æ€§ï¼Œå»ºè®®è‡ªå·±éƒ¨ç½²ä¸€ä»½ï¼Œæˆ–è€…è¯·ä½œè€…å–ä¸€æ¯å’–å•¡ï¼Œé¼“åŠ±æˆ‘ä»¬æŒç»­å…±äº«ðŸŒ¹ã€‚å‚è€ƒä¹‹å‰çš„å‰è¾ˆå¤§ä½¬å€’ä¸‹çš„æ•…äº‹ï¼šhttps://linux.do/t/topic/1051","setting.blog.middlewareUrl.my.coffee":"èµžåŠ©å’–å•¡â˜•ï¸","setting.conf.export":"å¯¼å‡ºé…ç½®","setting.conf.import":"å¯¼å…¥é…ç½®","setting.conf.transport":"å¯¼å…¥å¯¼å‡º","setting.conf.clear":"æ¸…ç©ºé…ç½®","page.no.id":"è¯·æ±‚éžæ³•ï¼ŒåŽŸå› ï¼špageIdèŽ·å–å¤±è´¥","yaml.show.type.yaml":"YAML","yaml.show.type.md":"MDæ­£æ–‡","yaml.show.type.yamlmd":"YAML+MDæ­£æ–‡","yaml.show.type.html":"HTMLæ­£æ–‡","main.read.mode":"åªè¯»æ¨¡å¼","main.edit.mode":"ç¼–è¾‘æ¨¡å¼","main.read.mode.tip1":"æ¸©é¦¨æç¤ºï¼šä¸ºäº†æ•°æ®ä¸€è‡´æ€§ï¼Œå¤šå¹³å°åˆ†å‘æˆ–è€…æœªæä¾›YAMLé€‚é…å™¨æ—¶æ— æ³•å¤„ç†å¹³å°å±žæ€§ï¼ŒYAMLå°†ä»…æ˜¾ç¤ºå…¬å…±å±žæ€§ä¸”åªèƒ½åªè¯»ã€‚","main.read.mode.tip2":"YAMLå¦‚æœ‰ä¿®æ”¹ï¼Œè¯·åŠ¡å¿…ç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå¦åˆ™ä¿®æ”¹å†…å®¹å°†ä¸¢å¤±ï¼","main.read.mode.tip3":"ä¸ºäº†æ ‡è¯†æ–‡ç« çš„å”¯ä¸€æ€§ï¼Œslugä¿®æ”¹å°†å¿½ç•¥ï¼Œå…¶ä»–å±žæ€§å¯åŒæ­¥ã€‚","main.read.mode.tip4":"å¦‚éœ€åˆ é™¤äº†å†…ç½®çš„YAMLå±žæ€§ï¼Œåˆ é™¤ä¹‹åŽè¯·åŠ¡å¿…å…ˆåŒæ­¥åˆ°æ€æºç¬”è®°ï¼Œå¦åˆ™åˆ‡æ¢æ¨¡å¼ä¼šè¿˜åŽŸã€‚","main.opt.onclick.confirm.tip":"æ­¤æ“ä½œé»˜è®¤å°†é‡æ–°ç”Ÿæˆé™¤åˆ«åä»¥å¤–çš„æ‰€æœ‰å±žæ€§ï¼Œå¦‚æžœåªæƒ³ä¿®æ”¹ä¸ªåˆ«å±žæ€§ï¼Œè¯·åœ¨è¯¦ç»†æ¨¡å¼ç‚¹å‡»å•ç‹¬çš„åŠŸèƒ½æŒ‰é’®è¿›è¡Œå¯¹åº”æ“ä½œï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","main.cat.list.error":"åˆ†ç±»èŽ·å–å¤±è´¥","main.yaml.no.save":"æ‚¨ç¼–è¾‘è¿‡YAMLï¼Œç‚¹å‡»ç¡®è®¤å¯åŒæ­¥YAMLåˆ°å±žæ€§ï¼Œå–æ¶ˆå°†ä¸¢å¤±YAMLä¿®æ”¹ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","setting.github.baseUrl":"Gitå¹³å°åœ°å€","setting.github.baseUrl.tip":"Gitå¹³å°åœ°å€ï¼Œç”¨äºŽMDæ–‡ä»¶é¢„è§ˆï¼Œé»˜è®¤æ˜¯ï¼šhttps://github.com","preference.setting.fixTitle":"åŽ»é™¤æ ‡é¢˜ç¼–å·","preference.setting.removeH1":"åŽ»é™¤æ­£æ–‡H1","preference.setting.removeH1.tip":"åˆ é™¤H1å¯èƒ½ä¼šè¯¯åˆ é™¤Markdowné‡Œé¢çš„#å¼€å¤´çš„æ³¨é‡Šï¼Œå¦‚éœ€å¼€å¯ï¼Œè¯·ä½¿ç”¨2ä¸ªä»¥ä¸Šçš„#æ³¨é‡Šï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","preference.setting.newWin":"æ–°çª—å£æ“ä½œ","siyuan.browser.show.close.btn":"æ˜¾ç¤ºå…³é—­æŒ‰é’®","siyuan.browser.menu.quick.btn":"ä¸€é”®å¿«é€Ÿå‘å¸ƒ","siyuan.browser.menu.publish.btn":"æ–‡ç« å‘å¸ƒï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼Œæœ‰å­æ–‡æ¡£->åˆ—è¡¨é¡µï¼›æ— å­æ–‡æ¡£->å‘å¸ƒé¡µï¼‰","siyuan.browser.menu.preview.btn":"æ–‡ç« é¢„è§ˆï¼ˆå½“å‰æ–‡ç« åªè¯»é¢„è§ˆï¼‰","siyuan.browser.menu.manage.btn":"æ–‡ç« ç®¡ç†ï¼ˆå…¨éƒ¨æ–‡ç« ç»Ÿä¸€ç®¡ç†ï¼‰","siyuan.browser.menu.anki.btn":"Ankiæ ‡è®°ï¼ˆé…åˆankisiyuanç”ŸæˆAnkiæ ‡è®°ï¼‰","siyuan.browser.menu.picture.btn":"PicGOå›¾åºŠï¼ˆæ”¯æŒå›¾åºŠé…ç½®ä¸Žå›¾ç‰‡ä¸Šä¼ ï¼‰","siyuan.browser.menu.setting.btn":"åå¥½è®¾ç½®ï¼ˆç³»ç»Ÿè®¾ç½®ç»Ÿä¸€å…¥å£ï¼‰","anki.siyuan.deck":"ç‰Œç»„","anki.siyuan.deck.new":"æ–°ç‰Œç»„","anki.siyuan.tag":"æ ‡ç­¾","anki.siyuan.tag.new":"æ–°æ ‡ç­¾","picgo.chrome.tip":"æ‚¨å½“å‰ä½¿ç”¨çš„æ˜¯æµè§ˆå™¨æ’ä»¶ï¼Œéœ€è¦ä»Žè¿™é‡Œä¸‹è½½é…ç½® PicGo å®¢æˆ·ç«¯ï¼šhttps://github.com/Molunerfinn/PicGo/releases","picgo.siyuan.tip":"æ‚¨å½“å‰ä½¿ç”¨çš„æ˜¯æ€æºç¬”è®°æŒ‚ä»¶ï¼ŒPicGOå·²å†…ç½®ï¼Œåªéœ€é…ç½®å³å¯","post.detail.button.copy.id":"å¤åˆ¶æœ¬æ–‡ID","post.detail.button.share.link":"å¤åˆ¶åˆ†äº«é“¾æŽ¥","post.detail.button.browser.open":"é»˜è®¤æµè§ˆå™¨æ‰“å¼€","post.detail.button.pic.manage":"å›¾ç‰‡ç®¡ç†","post.detail.button.anki.mark":"Ankiæ ‡è®°","post.detail.index.send.to.publish":"å‘å¸ƒåˆ°å…¶ä»–å¹³å°","post.detail.index.export.to.pdf":"å¯¼å‡ºä¸ºPDF","picgo.upload.status":"ä¸Šä¼ çŠ¶æ€","picgo.upload.select.pic":"é€‰æ‹©å›¾ç‰‡","picgo.upload.clipboard":"å‰ªè´´æ¿å›¾ç‰‡","picgo.upload.onclick":"ä¸€é”®ä¸Šä¼ æœ¬åœ°å›¾ç‰‡åˆ°å›¾åºŠ","picgo.download.onclick":"ä¸€é”®ä¸‹è½½è¿œç¨‹å›¾ç‰‡åˆ°æœ¬åœ°","picgo.download.local.to.bed":"ä¸Šä¼ æœ¬åœ°å›¾ç‰‡åˆ°å›¾åºŠ","picgo.download.bed.to.local":"ä¸‹è½½è¿œç¨‹å›¾ç‰‡åˆ°æœ¬åœ°","picgo.pic.preview":"å›¾ç‰‡é¢„è§ˆ","picgo.pic.setting":"å›¾åºŠè®¾ç½®","picgo.pic.setting.no.tip":"ç”±äºŽæ‚¨å½“å‰ä½¿ç”¨çš„æ˜¯æµè§ˆå™¨æ’ä»¶ï¼Œæ— æ³•ç›´æŽ¥é›†æˆ PicGo ï¼Œåªèƒ½é€šè¿‡ HTTP è¯·æ±‚é—´æŽ¥è°ƒç”¨æœ¬åœ° PicGo å®¢æˆ·ç«¯ä¸Šå›¾ç‰‡ï¼Œè¯·ç›´æŽ¥åœ¨æœ¬åœ° PicGo å®¢æˆ·ç«¯è¿›è¡Œè®¾ç½®ã€‚å¦‚éœ€ä½“éªŒæ›´åŠ å®Œæ•´çš„åŠŸèƒ½ï¼Œè¯·é€šè¿‡æ€æºç¬”è®°æŒ‚ä»¶ç‰ˆæŒ‚è½½èœå•æ‰“å¼€æ–°çª—å£çš„æ–¹å¼ä½¿ç”¨ã€‚è¯¦æƒ…è¯·å‚è€ƒï¼šhttps://docs.publish.terwer.space/post/the-pendant-mode-is-used-in-the-method-of-mounting-menu-169wrw.html","github.use.permalink":"æ°¸ä¹…é“¾æŽ¥","github.use.permalink.no.warn":"æ‚¨å·²å…³é—­æ°¸ä¹…é“¾æŽ¥ï¼Œformatterå°†ä¸ä¼šç”Ÿæˆæ ‡è®°ï¼Œè¿™åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹å¯èƒ½æœ‰ç”¨ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éœ€è¦å¼€å¯æ­¤é€‰é¡¹ï¼Œæ³¨æ„ï¼šç›®å‰ä»…ä»…åœ¨HUGOå¹³å°ç”Ÿæ•ˆï¼Œä¸»è¦æ˜¯é€‚é…Docsy","github.menu.title":"èœå•æ ‡é¢˜","github.menu.title.placeholder":"èœå•æ æ ‡é¢˜ï¼ˆHUGOå¹³å°ä¸“ç”¨ï¼Œä¸ºç©ºåˆ™ä¸æ˜¾ç¤ºåœ¨èœå•ï¼‰","github.weight":"æ˜¾ç¤ºæƒé‡","github.weight.placeholder":"æƒé‡ï¼ˆå†³å®šæ˜¾ç¤ºé¡ºåºï¼Œè¶Šå°æ˜¾ç¤ºè¶Šé å‰ï¼‰","github.use.date":"æ˜¾ç¤ºæ—¥æœŸ","github.use.date.no.warn":"æ‚¨å·²å…³é—­æ—¥æœŸæ˜¾ç¤ºï¼Œå°†ä¸ä¼šåœ¨formatterç”Ÿæˆdateå­—æ®µ","github.post.picgo.use":"ä½¿ç”¨å›¾åºŠ","github.post.picgo.use.tip":"å¯ç”¨æ­¤é€‰é¡¹ï¼Œå°†ä¼šè‡ªåŠ¨å°†æ­¤æ–‡æ¡£åŒ…å«çš„æ‰€æœ‰æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³è‡ªå®šä¹‰å›¾åºŠï¼ˆè¿œç¨‹å›¾ç‰‡ä¸ä¸Šä¼ ï¼‰ï¼Œè¯·ç¡®ä¿PicGOå›¾åºŠé…ç½®æ­£ç¡®","github.post.picgo.start.upload":"å›¾åºŠå·²å¼€å¯ï¼Œå³å°†ä¸Šä¼ æœ¬åœ°å›¾ç‰‡åˆ°å›¾åºŠ","github.post.picgo.picbed.error":"æ–‡æ¡£å¯èƒ½å·²ç»æˆåŠŸå‘å¸ƒï¼Œä½†æ˜¯å›¾ç‰‡ä¸Šä¼ å¤±è´¥æˆ–è€…å½“å‰åœºæ™¯ä¸æ”¯æŒå›¾ç‰‡ä¸Šä¼ ï¼Œè¯¦ç»†ä¿¡æ¯","setting.yuque.home.tip":"è¯­é›€å¹³å°é¦–é¡µï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://www.yuque.com/","setting.yuque.username.tip":"è¯­é›€å¹³å°ç”¨æˆ·åï¼Œæ³¨æ„æ˜¯ã€è´¦æˆ·è®¾ç½®ã€‘é‡Œé¢å›ºå®šè¿žæŽ¥é‡Œé¢çš„ç”¨æˆ·åï¼Œä¸æ˜¯ç”¨æˆ·æ˜µç§°å“¦(*^â–½^*)","setting.yuque.password.tip":"è¯­é›€å¹³å°çš„Tokenï¼Œè¯·æŒ‰ç…§é“¾æŽ¥ç‚¹å‡»èŽ·å–ï¼Œåªéœ€è¦å‹¾é€‰ã€è¯»å–ä½ çš„çŸ¥è¯†åº“ã€‘å’Œã€ä¿®æ”¹å’Œè¯»å–ä½ çš„æ–‡æ¡£ã€‘ä¸¤ä¸ªæƒé™å³å¯","setting.yuque.apiurl.tip":"è¯­é›€å¹³å°çš„APIåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://www.yuque.com/api/v2","setting.yuque.previewUrl.tip":"è¯­é›€å¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/[notebook]/[postid]","setting.notion.home.tip":"Notionå¹³å°é¦–é¡µï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://www.notion.so/","setting.notion.password.tip":"Notionå¹³å°çš„Tokenï¼Œè¯·æŒ‰ç…§é“¾æŽ¥ç‚¹å‡»èŽ·å–ï¼Œéœ€è¦å‹¾é€‰ã€Read contentã€‘ã€ã€Update contentã€‘ã€ã€Insert contentã€‘ä¸‰ä¸ªæƒé™","setting.notion.apiurl.tip":"Notionå¹³å°çš„APIåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://api.notion.com/v1","setting.notion.previewUrl.tip":"Notionå¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/[postid]","setting.liandi.home.tip":"é“¾æ»´å¹³å°é¦–é¡µï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://ld246.com/","setting.liandi.username.tip":"é“¾æ»´å¹³å°ç”¨æˆ·åï¼Œæ³¨æ„æ˜¯ç‚¹å‡»ã€ä¸ªäººä¸»é¡µã€‘ä¹‹åŽURLä¸ŠmemberåŽé¢æ˜¾ç¤ºçš„ç”¨æˆ·åï¼Œä¸æ˜¯ç”¨æˆ·æ˜µç§°å“¦(*^â–½^*)","setting.liandi.password.tip":"é“¾æ»´å¹³å°çš„Tokenï¼Œè¯·æŒ‰ç…§é“¾æŽ¥ç‚¹å‡»èŽ·å–","setting.liandi.apiurl.tip":"é“¾æ»´å¹³å°çš„APIåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://ld246.com/api/v2","setting.kms.home.tip":"KMSå¹³å°é¦–é¡µï¼Œä¾‹å¦‚ï¼šhttp://localhost:9564/kms16_release/kms/multidoc","setting.kms.username.tip":"KMSå¹³å°Restè´¦æˆ·ç”¨æˆ·åï¼Œè¯·æŒ‰ç…§é“¾æŽ¥æŒ‡ç¤ºåˆ›å»º","setting.kms.password.tip":"KMSå¹³å°Restè´¦æˆ·å¯†ç ï¼Œè¯·æŒ‰ç…§é“¾æŽ¥æŒ‡ç¤ºåˆ›å»º","setting.kms.apiurl.tip":"KMSå¹³å°çš„APIåœ°å€ï¼Œä¾‹å¦‚ï¼šhttp://localhost:9564/kms16_release/api/kms-multidoc/kmsMultidocKnowledgeRestService","siyuan.local.share.tip":"æ¸©é¦¨æç¤ºï¼šå¦‚æžœå‘çŽ°åˆ†äº«é“¾æŽ¥æˆ–è€…æµè§ˆå™¨æ‰“å¼€æ— æ³•æ˜¾ç¤ºæˆ–è€…ç½‘ç»œè¿žæŽ¥è¢«æ‹’ç»ï¼Œè¯·æŒ‰ç…§ä¸‹é¢æ“ä½œæŽ’æŸ¥ã€‚1ï¼šæ€æºç¬”è®°->è®¾ç½®->å…³äºŽ->æ‰“å¼€ç½‘ç»œä¼ºæœï¼›2ï¼šåœ¨æµè§ˆå™¨æ‰“å¼€ä¹‹åŽï¼Œç‚¹å‡»åº•éƒ¨æ€æºåœ°å€ï¼Œä¿®æ”¹å¯¹åº”åœ°å€ä¸ºå±€åŸŸç½‘ipåœ°å€ã€‚","setting.cnblogs.home.tip":"æ‚¨çš„åšå®¢å›­é¦–é¡µï¼Œé€šå¸¸æ˜¯ï¼šhttps://www.cnblogs.com/<æ‚¨çš„ç”¨æˆ·å>","setting.cnblogs.username.tip":"æ‚¨çš„åšå®¢å›­MetaWeblogç™»å½•åï¼Œå¯å‰å¾€æ‚¨çš„åšå®¢å›­åŽå°->è®¾ç½®æŸ¥çœ‹ï¼Œæ³¨æ„ï¼šæ˜¯ç™»å½•åï¼Œä¸æ˜¯ç”¨æˆ·æ˜µç§°å“¦(*^â–½^*)","setting.cnblogs.password.tip":"æ‚¨çš„åšå®¢å›­MetaWeblogè®¿é—®ä»¤ç‰Œï¼Œå¯å‰å¾€æ‚¨çš„åšå®¢å›­åŽå°->è®¾ç½®æŸ¥çœ‹","setting.cnblogs.apiUrl.tip":"æ‚¨çš„åšå®¢å›­MetaWeblogè®¿é—®åœ°å€ï¼Œå¯å‰å¾€æ‚¨çš„åšå®¢å›­åŽå°->è®¾ç½®æŸ¥çœ‹ï¼Œé€šå¸¸æ˜¯ï¼šhttps://rpc.cnblogs.com/metaweblog/<æ‚¨çš„ç”¨æˆ·å>","setting.cnblogs.previewUrl.tip":"åšå®¢å›­å¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/p/[postid].html","setting.wordpress.home.tip":"WordPressé¦–é¡µ","setting.wordpress.username.tip":"WordPressç™»å½•åï¼Œæ³¨æ„ï¼šæ˜¯ç™»å½•åï¼Œä¸æ˜¯ç”¨æˆ·æ˜µç§°å“¦(*^â–½^*)","setting.wordpress.password.tip":"WordPressç™»å½•å¯†ç ","setting.wordpress.apiUrl.tip":"WordPressçš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€ï¼Œé€šå¸¸æ˜¯ï¼šhttps://<WordPressåšå®¢åœ°å€>/xmlrpc.php","setting.wordpress.previewUrl.tip":"WordPresså¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š?p=[postid]","setting.wordpressdotcom.home.tip":"WordPress.com é¦–é¡µ","setting.wordpressdotcom.username.tip":"WordPress.com ç™»å½•åï¼Œæ³¨æ„ï¼šæ˜¯ç™»å½•åæˆ–è€…é‚®ç®±ï¼Œä¸æ˜¯ç”¨æˆ·æ˜µç§°å“¦(*^â–½^*)","setting.wordpressdotcom.password.tip":"WordPress.com ç™»å½•å¯†ç ","setting.wordpressdotcom.apiUrl.tip":"WordPress.com çš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€ï¼Œé€šå¸¸æ˜¯ï¼šhttps://<WordPressç™»å½•å>.wordpress.com/xmlrpc.php","setting.wordpressdotcom.previewUrl.tip":"WordPress.com å¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š?p=[postid]","setting.oschina.home.tip":"å¼€æºä¸­å›½é¦–é¡µï¼Œé€šå¸¸æ˜¯ï¼šhttps://my.oschina.net/<æ‚¨çš„ç”¨æˆ·å>","setting.oschina.username.tip":"å¼€æºä¸­å›½ç™»å½•åï¼Œå¯ä»¥è¾“å…¥ç™»å½•é‚®ç®±","setting.oschina.password.tip":"å¼€æºä¸­å›½ç™»å½•å¯†ç ","setting.oschina.apiUrl.tip":"å¼€æºä¸­å›½çš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://www.oschina.net/action/xmlrpc","setting.oschina.previewUrl.tip":"å¼€æºä¸­å›½å¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/blog/[postid]","setting.typecho.home.tip":"Typechoå¹³å°çš„é¦–é¡µ","setting.typecho.username.tip":"Typechoå¹³å°ç™»å½•å","setting.typecho.password.tip":"Typechoå¹³å°å¯†ç ","setting.typecho.apiUrl.tip":"Typechoå¹³å°çš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://<å¹³å°åœ°å€>/index.php/action/xmlrpc","setting.typecho.previewUrl.tip":"Typechoå¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/index.php/archives/[postid]","setting.metaweblog.home.tip":"Metaweblogå¹³å°çš„é¦–é¡µ","setting.metaweblog.username.tip":"Metaweblogå¹³å°ç™»å½•å","setting.metaweblog.password.tip":"Metaweblogå¹³å°å¯†ç ","setting.metaweblog.apiUrl.tip":"Metaweblogå¹³å°çš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€","setting.metaweblog.previewUrl.tip":"Metaweblogå¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œ[postid]å¯ä½œæ–‡æ–‡ç« IDå ä½ç¬¦","setting.jvue.home.tip":"Jvueå¹³å°çš„é¦–é¡µï¼Œä¾‹å¦‚ï¼šhttp://localhost:3000","setting.jvue.username.tip":"Jvueå¹³å°ç™»å½•å","setting.jvue.password.tip":"Jvueå¹³å°å¯†ç ","setting.jvue.apiUrl.tip":"Jvueå¹³å°çš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://<å¹³å°åœ°å€>/xmlrpcï¼Œä¾‹å¦‚ï¼šhttp://localhost:8008/xmlrpc","setting.jvue.previewUrl.tip":"Jvueå¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/post/[postid].html","setting.conf.home.tip":"Confluence Cloudï¼Œé¦–é¡µï¼Œé€šå¸¸æ˜¯ï¼šhttps://<æ‚¨çš„ç”¨æˆ·å>.atlassian.net/wiki/spaces/<ç©ºé—´å>","setting.conf.username.tip":"Confluenceç™»å½•åï¼Œå¯å‰å¾€æ‚¨çš„atlassianè´¦æˆ·èŽ·å–","setting.conf.password.tip":"Confluenceè®¿é—®ä»¤ç‰Œï¼Œå¯å‰å¾€æ‚¨çš„atlassianè´¦æˆ·èŽ·å–","setting.conf.apiUrl.tip":"å¯å‰å¾€ https://developer.atlassian.com/cloud/confluence/rest/v1/#api-wiki-rest-api-content-get æŸ¥çœ‹æ–‡æ¡£","setting.conf.previewUrl.tip":"Confluenceå¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/pages/[postid]","setting.zhihu.home.tip":"çŸ¥ä¹Žä¸“æ é¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.zhihu.username.tip":"çŸ¥ä¹Žç”¨æˆ·åï¼Œå¿…é¡»è®¾ç½®æ­£ç¡®ï¼Œå¦åˆ™æ— æ³•èŽ·å–ä¸“æ ","setting.zhihu.password.tip":"çŸ¥ä¹ŽCookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.zhihu.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.zhihu.previewUrl.tip":"çŸ¥ä¹Žå¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/[postid]","setting.csdn.home.tip":"CSDNåšå®¢é¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.csdn.password.tip":"CSDNçš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.csdn.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.csdn.previewUrl.tip":"CSDNå¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","setting.wechat.home.tip":"å¾®ä¿¡å…¬ä¼—å·é¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.wechat.password.tip":"å¾®ä¿¡å…¬ä¼—å·çš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.wechat.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.wechat.previewUrl.tip":"å¾®ä¿¡å…¬ä¼—å·å¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","setting.jianshu.home.tip":"ç®€ä¹¦é¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.jianshu.password.tip":"ç®€ä¹¦çš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.jianshu.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.jianshu.previewUrl.tip":"ç®€ä¹¦å¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","setting.juejin.home.tip":"æŽ˜é‡‘é¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.juejin.password.tip":"æŽ˜é‡‘çš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.juejin.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.juejin.previewUrl.tip":"æŽ˜é‡‘å¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","setting.halo.home.tip":"Haloé¦–é¡µåœ°å€ï¼Œéœ€è¦åŒ…æ‹¬åŸŸåç«¯å£ï¼Œä¾‹å¦‚ï¼šhttp://localhost:8090","setting.halo.username.tip":"Haloåšå®¢ç™»å½•å","setting.halo.password.tip":"Haloåšå®¢ç™»å½•å¯†ç ","setting.halo.apiUrl.tip":"Haloåšå®¢APIåœ°å€ï¼Œä¸€èˆ¬ä¸ŽHaloé¦–é¡µç›¸åŒ","setting.halo.previewUrl.tip":"Haloåšå®¢æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé»˜è®¤ /archives/{slug}ï¼Œå ä½ç¬¦æœ‰ {slug} {name} {year} {month} {day}ï¼Œå¯åœ¨ [halo-home-url]/console/settings?tab=routeRulesè®¾ç½®","setting.flowus.home.tip":"Flowusé¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.flowus.password.tip":"Flowusçš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.flowus.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.flowus.previewUrl.tip":"Flowuså¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","setting.picgo.refer.to":"è¯¦æƒ…è¯·å‚è€ƒï¼š","setting.picgo.refer.to.online.doc":"PicGOé…ç½®åœ¨çº¿æ–‡æ¡£","setting.picgo.picbed":"å›¾åºŠè®¾ç½®","setting.picgo.picgo":"PicGOè®¾ç½®","main.opt.edit":"ç¼–è¾‘","main.opt.delete":"åˆ é™¤","setting.picgo.picgo.open.config.file":"æ‰“å¼€é…ç½®æ–‡ä»¶","setting.picgo.picgo.click.to.open":"ç‚¹å‡»æ‰“å¼€","setting.picgo.picgo.choose.showed.picbed":"è¯·é€‰æ‹©æ˜¾ç¤ºçš„å›¾åºŠ","setting.picgo.picbed.selected.tip":"å·²é€‰ä¸­","setting.picgo.picbed.unselected.tip":"æœªé€‰ä¸­","setting.picgo.picbed.set.default":"è®¾ä¸ºé»˜è®¤å›¾åºŠ","setting.picgo.picbed.current.selected.tip":"å·²é€‰ä¸­å›¾åºŠï¼š","setting.picgo.picbed.current.tip":"å½“å‰é»˜è®¤å›¾åºŠæ˜¯ï¼š","setting.picgo.picbed.uploader.config.name":"å›¾åºŠé…ç½®å","setting.picgo.picbed.uploader.config.name.placeholder":"è¯·è¾“å…¥é…ç½®åç§°","setting.picgo.config.name":"é…ç½®åç§°","setting.picgo.config.name.placeholder":"è¯·è¾“å…¥é…ç½®åç§°","setting.picgo.index.tip":"æ³¨æ„ï¼š1ã€æ­¤å¤„ä¸Šä¼ çš„å›¾ç‰‡ä¸ä¼šè‡ªåŠ¨æ’å…¥æ–‡æ¡£ä¸­ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®å¤åˆ¶é“¾æŽ¥ï¼Œç„¶åŽ Ctrl+V ç²˜è´´åˆ°æ–‡æ¡£ä¸­ã€‚2ã€å¯¹äºŽæ–‡æ¡£å½“ä¸­åŽŸæœ¬å·²ç»å­˜åœ¨çš„æœ¬åœ°å›¾ç‰‡ï¼Œç‚¹å‡»ä¸Šä¼ ä¹‹åŽä¸ä¼šç›´æŽ¥æ›¿æ¢åŽŸå§‹å›¾ç‰‡ï¼Œåªä¼šå­˜å‚¨æœ¬åœ°å›¾ç‰‡ä¸Žå›¾åºŠå›¾ç‰‡çš„æ˜ å°„ä¿¡æ¯ï¼Œéœ€è¦åœ¨å‘å¸ƒæ–‡ç« æ—¶æ‰‹åŠ¨å‹¾é€‰ã€ä½¿ç”¨å›¾åºŠã€‘æ‰ä¼šè¿›è¡Œä¸´æ—¶é“¾æŽ¥æ›¿æ¢ï¼Œè¯·çŸ¥æ‚‰ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†ä¸ç ´åå…¶ä»–åœ°æ–¹å¯¹æ–‡æ¡£å›¾ç‰‡çš„å¤„ç†ã€‚å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨å¤åˆ¶å›¾åºŠé“¾æŽ¥ï¼Œç„¶åŽåˆ é™¤åŽŸå›¾ç‰‡ï¼Œæ›¿æ¢ä¸ºå›¾åºŠå›¾ç‰‡ã€‚3ã€è¯¥å›¾ç‰‡åˆ—è¡¨ä»…å±•ç¤ºæ­¤æ–‡æ¡£åŒ…å«çš„å›¾ç‰‡ã€‚","setting.picgo.index.copy.link":"å¤åˆ¶é“¾æŽ¥","setting.picgo.setting.timestamp.rename":"æ—¶é—´æˆ³é‡å‘½å","setting.picgo.setting.close":"å…³","setting.picgo.setting.open":"å¼€","setting.picgo.setting.log.file":"æ—¥å¿—æ–‡ä»¶","setting.picgo.plugin":"æ’ä»¶è®¾ç½®","setting.picgo.plugin.list":"æ’ä»¶åˆ—è¡¨","setting.picgo.plugin.import.local":"å¯¼å…¥æœ¬åœ°æ’ä»¶","setting.picgo.plugin.install":"å®‰è£…","setting.picgo.plugin.installing":"å®‰è£…ä¸­","setting.picgo.plugin.installed":"å·²å®‰è£…","setting.picgo.plugin.doing.something":"è¿›è¡Œä¸­","setting.picgo.plugin.search.placeholder":"æœç´¢npmä¸Šçš„PicGoæ’ä»¶ï¼Œæˆ–è€…ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹ä¼˜ç§€æ’ä»¶åˆ—è¡¨ã€‚æŽ¨èï¼šwatermark-elecã€s3","setting.picgo.plugin.gui.not.implemented":"è¯¥æ’ä»¶æœªå¯¹å¯è§†åŒ–ç•Œé¢è¿›è¡Œä¼˜åŒ–, æ˜¯å¦ç»§ç»­å®‰è£…?","setting.picgo.setting.node.path":"Nodeå®‰è£…è·¯å¾„","setting.picgo.setting.node.path.tip":"è¯·è¾“å…¥Nodeå®‰è£…å®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚ï¼š/opt/node16/binï¼ŒNodeç‰ˆæœ¬>=16","setting.picgo.setting.node.registry":"NPMçš„registry","setting.picgo.setting.node.registry.tip":"å›½å†…æŽ¨èï¼šhttps://registry.npmmirror.com","setting.picgo.setting.node.proxy":"NPMä»£ç†","setting.picgo.setting.node.proxy.tip":"ä¸€èˆ¬å¯ç•™ç©ºï¼Œå¦‚æœ‰ç‰¹æ®Šéœ€æ±‚å¯è®¾ç½®è‡ªå®šä¹‰ä»£ç†","setting.picgo.setting.config.tip":"æ³¨æ„ï¼šæ¨ªçº¿ä»¥ä¸Šçš„å±žæ€§ä¼šæ”¹å˜ä¸Šä¼ å›¾ç‰‡çš„è¡Œä¸ºï¼Œé…ç½®å¯è‡ªåŠ¨ä¿å­˜ã€‚æ¨ªçº¿ä»¥ä¸‹çš„å±žæ€§ä»…ä»…åœ¨å®‰è£…æ’ä»¶æ—¶ç”¨åˆ°ï¼Œå¹¶ä¸”éœ€è¦ç‚¹å‡»ã€ç¡®è®¤ã€‘æŒ‰é’®æ‰èƒ½ä¿å­˜ã€‚","setting.picgo.plugin.install.success":"æ’ä»¶å·²ç»æˆåŠŸå®‰è£…ï¼Œè¯·æ¸…é™¤æœç´¢å…³é”®å­—åˆ·æ–°åˆ—è¡¨ã€‚ç‚¹å‡»æ’ä»¶å¯¹åº”ã€è®¾ç½®ã€‘å›¾æ ‡å¯æŸ¥çœ‹æ’ä»¶è¯¦æƒ…ï¼Œå¹¶å¯¹æ’ä»¶è¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ã€‚å¦‚æžœæ˜¯å›¾åºŠæ‰©å±•ï¼Œè¯·å…³é—­é‡æ–°æ‰“å¼€ï¼Œç„¶åŽå¯ç”¨å›¾åºŠå¹¶è¿›è¡Œè®¾ç½®ã€‚","syp.about":"å…³äºŽä½œè€…","setting.picgo.plugin.uninstall":"å¸è½½æ’ä»¶","setting.picgo.plugin.uninstall.success":"æ’ä»¶å·²ç»æˆåŠŸå¸è½½ã€‚","setting.picgo.plugin.enable":"å¯ç”¨æ’ä»¶","setting.picgo.plugin.disable":"ç¦ç”¨æ’ä»¶","setting.picgo.plugin.update":"æ›´æ–°æ’ä»¶","setting.picgo.plugin.config.setting":"æ’ä»¶è®¾ç½®","setting.picgo.plugin.work":"å·²å…¼å®¹","setting.picgo.plugin.nowork":"ä¸å…¼å®¹","setting.picgo.plugin.nouse":"ä¸å¯ç”¨","setting.picgo.plugin.update.success":"æ›´æ–°æˆåŠŸ","setting.conf.import.syp":"å¯¼å…¥æŒ‚ä»¶é…ç½®","setting.conf.import.picgo":"å¯¼å…¥PicGOé…ç½®","setting.conf.export.syp":"å¯¼å‡ºæŒ‚ä»¶é…ç½®","setting.conf.export.picgo":"å¯¼å‡ºPicGOé…ç½®","setting.conf.import.syp.tip":"è¯·é€‰æ‹©æœ‰æ•ˆçš„åŽ†å²å¤‡ä»½jsonæ–‡ä»¶è¿›è¡Œå¯¼å…¥ã€‚æ³¨æ„ï¼šæŒ‚ä»¶é…ç½®ä¼šè¿›è¡Œé…ç½®æ›¿æ¢ã€‚","setting.conf.import.picgo.tip":"è¯·é€‰æ‹©æœ‰æ•ˆçš„åŽ†å²å¤‡ä»½jsonæ–‡ä»¶è¿›è¡Œå¯¼å…¥ã€‚æ³¨æ„ï¼šPicGOæ’ä»¶çš„æ³¨å†Œä¿¡æ¯ä¸å¯¼å…¥ã€‚ä¸ºäº†é…ç½®çš„å…¼å®¹æ€§ï¼Œè¯·å¸è½½æ‰€æœ‰æ’ä»¶ä¹‹åŽï¼Œè¿›è¡ŒPicGOé…ç½®å¯¼å‡ºæ“ä½œã€‚å¸è½½PicGOæ’ä»¶ä¸ä¼šåˆ é™¤æ’ä»¶é…ç½®ï¼Œåªä¼šåˆ é™¤æ’ä»¶æ–‡ä»¶ä»¥åŠæ’ä»¶æ³¨å†Œè®°å½•ã€‚è¯·æ”¾å¿ƒå¸è½½ã€‚","setting.conf.export.syp.tip":"å°†å¯¼å‡ºå¯¹åº”çš„jsoné…ç½®æ–‡ä»¶ï¼Œå¼ºçƒˆå»ºè®®å®šæœŸè¿›è¡Œé…ç½®å¤‡ä»½ã€‚åŽŸåˆ™ä¸Šæ”¯æŒå‘åŽå…¼å®¹ã€‚å¦‚æœ‰ä¸å…¼å®¹é—®é¢˜ï¼Œä¼šç‰¹åˆ«è¯´æ˜Žã€‚","setting.conf.export.picgo.tip":"å°†å¯¼å‡ºå¯¹åº”çš„jsoné…ç½®æ–‡ä»¶ï¼Œå¼ºçƒˆå»ºè®®å®šæœŸè¿›è¡Œé…ç½®å¤‡ä»½ã€‚åŽŸåˆ™ä¸Šæ”¯æŒå‘åŽå…¼å®¹ã€‚å¦‚æœ‰ä¸å…¼å®¹é—®é¢˜ï¼Œä¼šç‰¹åˆ«è¯´æ˜Žã€‚","setting.conf.clear.syp":"æ¸…ç©ºæŒ‚ä»¶é…ç½®","setting.conf.clear.picgo":"æ¸…ç©ºPicGOé…ç½®","setting.conf.clear.tip":"æ¸…ç©ºé…ç½®ä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…Žæ“ä½œã€‚å¼ºçƒˆå»ºè®®å…ˆå¤‡ä»½é…ç½®ã€‚","setting.conf.clear.picgo.tip":"æ¸…ç©ºé…ç½®ä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…Žæ“ä½œã€‚å¼ºçƒˆå»ºè®®å…ˆå¤‡ä»½é…ç½®ã€‚æ­¤æ“ä½œä¼šåˆ é™¤PicGOç›¸å…³é…ç½®æ–‡ä»¶å¤¹ï¼ŒåŒ…æ‹¬é…ç½®ã€æ’ä»¶ã€ç¼“å­˜ç­‰ï¼Œä»…åœ¨PicGOåŠ è½½å‘ç”Ÿå¼‚å¸¸ï¼Œå¹¶ä¸”å®Œå…¨æ— æ³•ä½¿ç”¨çš„æ—¶å€™ä½¿ç”¨ï¼Œå¦åˆ™ä¸¢å¤±é…ç½®åŽæžœè‡ªè´Ÿï¼","setting.main.background":"æŒ‚ä»¶èƒŒæ™¯","setting.main.background.tip":"æ”¯æŒ16è¿›åˆ¶å’Œrgbï¼Œä¾‹å¦‚ï¼š#000000ï¼Œæœªè®¾ç½®æˆ–è€…ç•™ç©ºä¸å˜ã€‚å¦‚æžœæ–°çª—å£è®¾ç½®ï¼Œè¯·é‡æ–°åˆ·æ–°æ–‡æ¡£ã€‚","setting.picgo.manage":"å›¾åºŠç®¡ç†","setting.platform.import":"å¹³å°å¯¼å…¥","setting.platform.store":"æ’ä»¶å•†åº—","setting.platform.add":"æ–°å¢žå¹³å°","setting.platform.add.this":"æ–°å¢žæ­¤å¹³å°","setting.platform.universal":"é€šç”¨å¹³å°","setting.platform.universal.desc":"ç›®å‰æ”¯æŒçš„é€šç”¨å¹³å°æœ‰ï¼šè¯­é›€ã€Notionç­‰ï¼Œé‡‡ç”¨APIæŽˆæƒã€‚è¿™äº›å¹³å°é€šå¸¸æä¾›äº†çŽ°ä»£åŒ–çš„REST APIï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œé›†æˆã€‚","setting.platform.wordpress":"WordPress","setting.platform.wordpress.desc":"Wordpress é€šè¿‡Xmlrpc APIæ”¯æŒï¼Œé‡‡ç”¨ API æŽˆæƒã€‚WordPressæ˜¯ä¸€ä¸ªè‡ªç”±å¼€æºçš„åšå®¢è½¯ä»¶å’Œå†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œå…·æœ‰æ•°é‡ä¼—å¤šçš„ä¼˜è´¨æ’ä»¶å’Œä¸»é¢˜ã€‚","setting.platform.github":"Github","setting.platform.github.desc":"ç›®å‰æ”¯æŒGithubå‘å¸ƒçš„çš„å¹³å°æœ‰ï¼šHexoã€Hugoã€Jekyllã€Vitepressç­‰ï¼Œé‡‡ç”¨ API æŽˆæƒã€‚GitHub æ˜¯ä¸€ä¸ªä½¿ç”¨ Git è¿›è¡Œè½¯ä»¶å¼€å‘å’Œç‰ˆæœ¬æŽ§åˆ¶çš„ä»£ç å¹³å°ã€‚","setting.platform.gitlab":"Gitlab","setting.platform.gitlab.desc":"GitlabåŸºæœ¬ä¸Šä¸ŽGithubçš„ä½¿ç”¨æ–¹å¼ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯Gitlabæ”¯æŒè‡ªå·±æœ¬åœ°éƒ¨ç½²æˆ–è€…äº‘æœåŠ¡å™¨éƒ¨ç½²ã€‚","setting.platform.metaweblog":"Metaweblog","setting.platform.metaweblog.desc":"ç›®å‰æ”¯æŒMetaweblogçš„å¹³å°æœ‰ï¼šåšå®¢å›­ã€Typechoç­‰ï¼Œé‡‡ç”¨ API æŽˆæƒã€‚MetaWeblog API ä½œä¸ºXML-RPC Web æœåŠ¡å®žçŽ°ï¼Œæ˜¯ç›®å‰å…¬è®¤çš„å¼€æ”¾åšå®¢æ ‡å‡†ã€‚","setting.platform.custom":"è‡ªå®šä¹‰ HTTP åè®®","setting.platform.custom.desc":"ç›®å‰æ”¯æŒè‡ªå®šä¹‰HTTPåè®®çš„å¹³å°æœ‰ï¼šçŸ¥ä¹Žç­‰ï¼Œé‡‡ç”¨ç½‘é¡µæŽˆæƒã€‚è‡ªå®šä¹‰HTTPåè®®é€šè¿‡ç±»ä¼¼ WeChatSync çš„æ–¹å¼å®žçŽ°ã€‚","setting.platform.right.tips0":"ç‰¹åˆ«æç¤ºï¼š","setting.platform.right.tips1":"1ã€åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œå‘å¸ƒé…ç½®ï¼Œç›´æŽ¥ç‚¹å‡» [è®¾ç½®å›¾æ ‡] å³å¯è¿›è¡Œé…ç½®ã€‚","setting.platform.right.tips2":"2ã€å¦‚éœ€æ–°å¢žå¹³å°ï¼Œç›´æŽ¥ç‚¹å‡»ã€Œå¹³å°å¯¼å…¥ã€æˆ–è€…ã€Œæ’ä»¶å•†åº—ã€è¿›è¡Œæ·»åŠ ã€‚","setting.platform.right.tips3":"3ã€ç›®å‰æ”¯æŒ ç½‘é¡µæŽˆæƒ å’Œ API æŽˆæƒä¸¤ç§æ–¹å¼ï¼ŒAPIæŽˆæƒ å¤æ‚ç‚¹ä½†æ˜¯ç›¸å¯¹ç¨³å®šï¼Œç½‘é¡µæŽˆæƒç®€å•ä½†æ˜¯å¯èƒ½ä¼šå¤±æ•ˆã€‚ç½‘é¡µæŽˆæƒæ¨¡å¼å®žçŽ°æ€è·¯ç±»ä¼¼ wechatsync ã€‚","setting.platform.right.tips4":"4ã€å¦‚éœ€å…¼å®¹å…¶ä»–å¹³å°ï¼Œè¯·è”ç³»æˆ‘ï¼šyouweics@163.com æˆ–è€…å¡«å†™ä¸‹é¢çš„è¡¨å•ã€‚","setting.entry.title":"å¹³å°ç»Ÿä¸€è®¾ç½® - ","setting.entry.not.supported":"ä¸æ”¯æŒçš„å¹³å°","setting.upgrade.syp.tip1":"å‡†å¤‡å¼€å§‹è¿ç§»...","setting.upgrade.syp.tip2":"è¿ç§»æˆåŠŸ.","setting.upgrade.syp.tip3":"å·²ç»æ˜¯æœ€æ–°ï¼Œæ— éœ€è¿ç§».","setting.upgrade.syp.tip4":"è¿ç§»å¤±è´¥ï¼Œé”™è¯¯å¦‚ä¸‹","setting.upgrade.syp.tip5":"è¿ç§»æ“ä½œå®Œæˆ.","setting.upgrade.syp.doTip1":"æ£€æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦ä¸ºæœ€æ–°ç‰ˆæœ¬","setting.upgrade.syp.doTip2":"æ£€æµ‹åˆ°æ—§é…ç½®ï¼Œå‡†å¤‡å‡çº§é…ç½®æ–‡ä»¶","setting.upgrade.syp.doTip3":"æ—§é…ç½®å‡çº§","setting.upgrade.syp.doTip4":"æ²¡æœ‰ç‰ˆæœ¬æ›´æ–°ï¼Œè·³è¿‡å‡çº§","main.publish.start":"å¼€å§‹åŒæ­¥","main.publish.remove":"æ‰¹é‡åˆ é™¤","setting.blog.knowledge.space":"çŸ¥è¯†ç©ºé—´/çŸ¥è¯†åº“","main.data.empty":"æš‚æ— æ•°æ®","knowledgeSpaceEnabled.Tips":"éªŒè¯é€šè¿‡ä¹‹åŽï¼Œå°†åˆ—å‡ºå¯ç”¨çš„ [[knowledge-space-title]] åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹é»˜è®¤ [[knowledge-space-title]] å¹¶ä¿å­˜","post.bind.auto.tips":"æ­¤å¤„IDä¸ºå‘å¸ƒå·¥å…·è‡ªåŠ¨ä¿å­˜ï¼Œä»…ä½œä¸ºä¿®å¤æ•°æ®ä½¿ç”¨ï¼Œå¦‚æžœæ‚¨ä¸æ¸…æ¥šåŽŸç†ï¼Œè¯·å‹¿ä¿®æ”¹","siyuan.config.setting":"æ€æºè®¾ç½®","setting.blog.siyuan.apiurl":"æ€æºAPIåœ°å€","setting.blog.siyuan.apiurl.tip":"æ€æºç¬”è®°çš„APIåœ°å€ï¼ŒåŒ…æ‹¬ç«¯å£ï¼Œé»˜è®¤æ˜¯ï¼šhttp://127.0.0.1:6806","setting.blog.siyuan.password":"æ€æºToken","setting.blog.siyuan.password.tip":"æ€æºç¬”è®°é‰´æƒTokenï¼Œè¯·ä»Žã€è®¾ç½®->å…³äºŽã€‘å¤åˆ¶ï¼Œå¦‚æžœæ˜¯æœ¬åœ°ç¬”è®°ç•™ç©ºå³å¯","slogan.make.written.fun":"è®©åˆ›ä½œå›žå½’ä¹è¶£","category.batch.not.supported":"æ³¨æ„ï¼šæ‰¹é‡åˆ†å‘æ¨¡å¼éƒ¨åˆ†å¹³å°ä¸æ”¯æŒå…¬å…±åˆ†ç±»ï¼Œä¾‹å¦‚è¯­é›€ã€çŸ¥ä¹Žç­‰","yuque.edit.cate.no.change":"ç”±äºŽè¯­é›€å¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žçŸ¥è¯†åº“ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„çŸ¥è¯†åº“å‘å¸ƒ","main.commonn.cate.title":"å…¬å…±åˆ†ç±»","main.cate.new":"æ–°åˆ†ç±»","pref.setting.aicode":"ChatGPTè¯·æ±‚key","pref.setting.aicode.tip":"ChatGPTè¯·æ±‚keyæˆ–è€…ç¬¬ä¸‰æ–¹ä»£ç†keyï¼Œå¦‚æžœæ˜¯ä»£ç†keyï¼Œè¯·è®¾ç½®è¯·æ±‚åœ°å€","pref.setting.ai.baseurl":"ChatGPTè¯·æ±‚åœ°å€","pref.setting.ai.baseurl.tip":"ChatGPTè¯·æ±‚åœ°å€ï¼Œå¦‚æžœæ˜¯ChatGPTå®˜æ–¹ï¼Œå¯ç•™ç©º","preference.setting.removeWidgetTag":"åŽ»é™¤æŒ‚ä»¶HTML","pref.setting.ai.proxy.url":"ChatGPTä»£ç†åœ°å€","pref.setting.ai.proxy.url.tip":"å¯ç•™ç©ºï¼Œæ³¨æ„ï¼šå¡«å†™äº†ä»£ç†ä¼šå¿½ç•¥ChatGPTè¯·æ±‚åœ°å€","main.auto.fetch.title":"è‡ªåŠ¨æå–æ ‡é¢˜","main.auto.fetch.cate":"è‡ªåŠ¨æå–åˆ†ç±»","category.ai.hand":"ç”±äºŽå„å¹³å°åˆ†ç±»ä½“ç³»ä¸ä¸€è‡´ï¼Œåˆ†ç±»éœ€è¦æ‰‹åŠ¨è¿›è¡Œæ ¡å‡†ï¼Œä¸ä¼šè‡ªåŠ¨ä¿å­˜","category.ai.enabled":"æ£€æµ‹åˆ°æ‚¨å·²ç»é…ç½®AIï¼Œå¯è¯·å‰å¾€è¯¦ç»†æ¨¡å¼è¿›è¡Œæ“ä½œã€‚å°è´´å£«ï¼šç”±äºŽç½‘ç»œæˆ–è€…å…¶ä»–é—®é¢˜ï¼Œå¦‚æžœç¬¬ä¸€æ¬¡å¤±è´¥ç”Ÿæˆï¼Œå¤šè¯•å‡ æ¬¡æˆ–è®¸å°±èƒ½å‡ºç»“æžœå“Ÿ~ðŸ˜„","sys.config.ai":"AI è®¾ç½®","config.ai.use.siyuan":"æ€æºç¬”è®°å†…éƒ¨ï¼Œç›´æŽ¥ä½¿ç”¨æ€æºç¬”è®°é…ç½®ï¼Œæ— éœ€é…ç½®","setting.blog.yamlLinkEnabled":"YAMLæ°¸ä¹…é“¾æŽ¥","distri.type.overide.warn":"æ³¨æ„ï¼šè¦†ç›–æ¨¡å¼ä¸‹ä¼šç”¨å½“å‰æ•°æ®è¦†ç›–æ‰€æœ‰é€‰æ‹©çš„å¹³å°ï¼Œè¯·è°¨æ…Žæ“ä½œã€‚","distri.type.merge.warn":"æ³¨æ„ï¼šä¸ºäº†ä¿ç•™å¹³å°æ•°æ®ï¼Œåˆå¹¶æ¨¡å¼ä¸‹ï¼Œæ ‡é¢˜å’Œæ‘˜è¦çš„ä¿®æ”¹æ— æ•ˆï¼Œæ‚¨å¯åœ¨åœ¨å¸¸è§„å‘å¸ƒå•ç‹¬ä¿®æ”¹å¯¹åº”å¹³å°çš„æ ‡é¢˜å’Œæ‘˜è¦ï¼Œæ ‡ç­¾å’Œåˆ†ç±»ä¼šä¸Žæ‰€é€‰æ‹©çš„å¹³å°æ•°æ®åˆå¹¶ã€‚","preference.setting.keepTitle":"ä¸æ›´æ–°åŽŸå§‹æ ‡é¢˜","setting.blog.gitlab.url.tip":"Gitlabé¦–é¡µï¼Œä¾‹å¦‚ï¼šhttp://localhost:8002","setting.blog.type.gitlab.user.tip":"Gitlabçš„ç”¨æˆ·å","setting.blog.type.gitlab.token.tip":"Gitlabçš„tokenï¼Œè¯·å‚è€ƒä¸‹é¢é“¾æŽ¥è®¾ç½®ï¼Œå¹¶ä¿è¯æœ‰apiæƒé™","setting.blog.gitlab.apiurl.tip":"Gitlabçš„APIåœ°å€ï¼Œä¸€èˆ¬ä¸Žé¦–é¡µç›¸åŒ","setting.blog.gitlab.previewUrl.tip":"æ–‡ç« é¢„è§ˆåœ°å€ï¼Œä¸€èˆ¬é»˜è®¤å³å¯","main.force.cancel":"å¼ºåˆ¶åˆ é™¤","loading.cost":"æ“ä½œè€—æ—¶","preference.setting.showDocQuickMenu":"æ˜¾ç¤ºæ–‡æ¡£èœå•","preference.setting.showQuickMenu":"æ˜¾ç¤ºæžé€Ÿå‘å¸ƒ","preference.setting.showSingleMenu":"æ˜¾ç¤ºå¸¸è§„å‘å¸ƒ","preference.setting.showBatchMenu":"æ˜¾ç¤ºæ‰¹é‡åˆ†å‘","preference.setting.showAIMenu":"æ˜¾ç¤ºAIèœå•","preference.setting.showExtendMenu":"æ˜¾ç¤ºæ‰©å±•èœå•","preference.setting.showArticleManageMenu":"æ˜¾ç¤ºæ–‡ç« ç®¡ç†èœå•","message.publish.notShared":"æ–‡ç« å°šæœªåˆ†äº«ï¼Œæ— æ³•åœ¨å¤–éƒ¨æŸ¥çœ‹ã€‚è¯·åˆ†äº«æ–‡ç« æˆ–è€…åœ¨PC å®¢æˆ·ç«¯å†…éƒ¨é€šè¿‡æ’ä»¶èœå•è¿›è¡Œé¢„è§ˆã€‚","setting.telegraph.username.label":"ä½œè€…","setting.telegraph.password.label":"Uuid","setting.telegraph.home.tip":"telegra.phå¹³å°é¦–é¡µï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://telegra.ph/","setting.telegraph.username.tip":"ä½œè€…ï¼Œä¼šæ˜¾ç¤ºåœ¨æ–‡ç« è¯¦æƒ…ï¼Œå¯è‡ªè¡Œè®¾ç½®ï¼Œé»˜è®¤ä¸ºç©º","setting.telegraph.password.tip":"åŒ¿åæ¨¡å¼æ— éœ€å¡«å†™ï¼Œç‚¹å‡»éªŒè¯ä¹‹åŽå¯è‡ªåŠ¨èŽ·å–ï¼Œç™»å½•æ¨¡å¼è¯·ä»Žè¯·ä»Ž TG å®¢æˆ·ç«¯æŽˆæƒä¹‹åŽè·³è½¬çš„æµè§ˆå™¨é‡Œé¢æ‰¾åˆ° Cookie tph_uuid å¡«åˆ°è¿™é‡Œ","setting.telegraph.apiurl.tip":"telegra.phçš„APIåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://telegra.ph/","setting.telegraph.previewUrl.tip":"telegra.phçš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/[notebook]/[postid]","setting.telegraph.accessToken.tip":"åŒ¿åæ¨¡å¼æ— éœ€å¡«å†™ï¼Œç™»å½•æ¨¡å¼è¯·ä»Žè¯·ä»Ž TG å®¢æˆ·ç«¯æŽˆæƒä¹‹åŽè·³è½¬çš„æµè§ˆå™¨æ‰¾åˆ° Cookie tph_token å¡«åˆ°è¿™é‡Œ","setting.telegraph.saveHash.tip":"åŒ¿åæ¨¡å¼æ— éœ€å¡«å†™ï¼Œç‚¹å‡»éªŒè¯ä¹‹åŽå¯è‡ªåŠ¨èŽ·å–ï¼Œç™»å½•æ¨¡å¼è¯·ä»Ž TG å®¢æˆ·ç«¯æŽˆæƒä¹‹åŽè·³è½¬çš„æµè§ˆå™¨é‡Œé¢æ‰¾åˆ° https://edit.telegra.ph/check è¿”å›žçš„ save_hash å¡«åˆ°è¿™é‡Œ","setting.telegraph.forceReAuth.tip":"æŽˆæƒä¿¡æ¯ç”Ÿæ•ˆä¹‹åŽå¯å‹¾é€‰æ­¤é¡¹ï¼Œç„¶åŽä¼šé‡æ–°æŽˆæƒ","setting.telegraph.login.anonymous":"åŒ¿åå‘å¸ƒ","setting.telegraph.login.user":"ç™»å½•å‘å¸ƒ","page.loading":"é¡µé¢åŠ è½½ä¸­...","setting.blog.middlewareUrl.new":"æ–°ä»£ç†(æŽ¨è)","setting.blog.corsAnywhereUrl.tip":"1.20.0+ å…¨æ–°CORSå…¨å±€ä»£ç†ï¼Œä¼˜å…ˆçº§é«˜ï¼Œè®¾ç½®ä¹‹åŽä¼šå¿½ç•¥ä¸Šé¢æ—§çš„ä»£ç†åœ°å€ã€‚è®¾ç½®ä¹‹åŽå¯å½»åº•è§£å†³æµè§ˆå™¨è·¨åŸŸã€ç§‘å­¦ä¸Šç½‘é—®é¢˜","setting.blog.middlewareUrl.my.new.tip":"1.20.0+ æ–°ç‰ˆCORSä»£ç†ï¼Œå½»åº•è§£å†³ã€Œç§‘å­¦ä¸Šç½‘ã€ã€ã€ŒCORS è·¨åŸŸã€ä¸¤å¤§é—®é¢˜ï¼Œæ”¯æŒå…¨å±€è·¨åŸŸè¯·æ±‚ï¼ˆæ”¯æŒç»•è¿‡ headerã€è¯·æ±‚ä½“æ”¯æŒ FormDataï¼‰ã€‚å—é™äºŽ CORS ç­–ç•¥ï¼Œã€ŒDocker ç‰ˆæœ¬ã€å¿…é¡»è®¾ç½® CORS ä»£ç†ï¼Œå¦åˆ™å¤§éƒ¨åˆ†åœºæ™¯å°†æ— æ³•ä½¿ç”¨ã€‚æŠ€æœ¯ç»†èŠ‚å¯å‚è€ƒ MDNï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS ä»¥åŠ https://developer.mozilla.org/zh-CN/docs/Glossary/CORSã€‚å¯ç§å‘é‚®ä»¶åˆ° youweics@163.com ä»˜è´¹å’¨è¯¢ðŸ¤ã€‚","setting.blog.middlewareUrl.my.warn.tip":"âš ï¸ç‰¹åˆ«æé†’ï¼šè¯·æ±‚é™åˆ¶ä¸º ã€Œ10ä¸‡æ¬¡/å¤©ã€ã€ã€Œ1000æ¬¡/10åˆ†é’Ÿã€ï¼Œé¢‘æ¬¡ä¸ºã€Œæ‰€æœ‰äººå…±äº«ã€ï¼Œå› æ­¤èµ„æºååˆ†çè´µã€‚ä¸ºäº†å¤§å®¶çš„åˆ©ç›Šï¼Œè¯·å‹¿æ¶æ„è¯·æ±‚ï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬ä¼šå…³é—­æ­¤å…±äº«ä»£ç†ã€‚","platform.new.platform":"æ£€æµ‹åˆ°è¿˜æœ‰ [count] ä¸ªå†…ç½®å¹³å° [platform] å°šæœªå¯¼å…¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¹³å°å¯¼å…¥æ‰¹é‡å¯¼å…¥ï¼Œæˆ–è€…åŽ»æ’ä»¶å•†åº—è‡ªè¡Œæ·»åŠ ã€‚","import.v081.warn":"è€ƒè™‘åˆ° v0.8.1 å·²ç»æ˜¯å¾ˆæ—©çš„ç‰ˆæœ¬äº†ï¼Œæ­¤åŠŸèƒ½å¯èƒ½ä¸å†éœ€è¦ã€‚å¦‚æžœæ‚¨éœ€è¦æ­¤åŠŸèƒ½ï¼Œå¯åé¦ˆè‡³ youweics@163.com ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®éœ€æ±‚å†³å®šæ˜¯å¦å®žçŽ°æ­¤åŠŸèƒ½ã€‚","publisher.picbed.service":"å›¾åºŠæœåŠ¡","publisher.picbed.none":"ä¸ä½¿ç”¨","publisher.picbed.picgo":"PicGo æ’ä»¶","publisher.picbed.picgo.not.install":"æ­¤åŠŸèƒ½éœ€è¦ã€ŒPicGo å›¾åºŠã€æ’ä»¶ 1.9.0+ æ”¯æŒï¼Œè¯·å…ˆä»Žé›†å¸‚å®‰è£…","publisher.picbed.bundled":"å½“å‰å¹³å°","publisher.picbed.recom1":"å¼ºçƒˆæŽ¨è","publisher.picbed.recom2":"æŽ¨è","publisher.post.status":"æ–‡ç« çŠ¶æ€","publisher.post.status.pubish":"å‘å¸ƒ","publisher.post.status.draft":"è‰ç¨¿","publisher.post.status.private":"ç§å¯†","publisher.post.status.future":"å®šæ—¶","publisher.post.password":"å¯†ç ä¿æŠ¤","publisher.post.password.tip":"è¯·è¾“å…¥æ–‡ç« å¯†ç ï¼Œç•™ç©ºåˆ™ä¸è®¾ç½®","publisher.post.future":"å®šæ—¶å‘å¸ƒ","setting.platform.halo.v29.only":"æ³¨æ„ï¼šç”±äºŽ Halo 2.20+ ä¿®æ”¹äº† API ç­–ç•¥ï¼ŒV2.20+ æ­¤å¹³å°å·²ç»æ— æ³•ä½¿ç”¨ï¼Œè¯·å¯¼å…¥å¹¶ä½¿ç”¨æ–°å¹³å° ã€ŒHaloç½‘é¡µç‰ˆã€ã€‚å¦‚ä»éœ€ä½¿ç”¨æ­¤å¹³å°ï¼Œè¯·é™çº§åˆ° Halo 2.9ã€‚","setting.haloweb.home.tip":"æ‚¨çš„Halo2.20+åšå®¢é¦–é¡µåœ°å€","setting.haloweb.password.tip":"Haloçš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.haloweb.apiUrl.tip":"é€šå¸¸å’Œæ‚¨çš„Halo2.20+åšå®¢é¦–é¡µåœ°å€ç›¸åŒ","setting.haloweb.previewUrl.tip":"Haloç½‘é¡µç‰ˆå¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™"},_y={"lang.choose":"Language","lang.choose.placeholder":"Please select language","theme.mode.choose":"Mode","theme.mode.dark":"Dark mode","theme.mode.light":"Light mode","service.tab.manage":"Post manage","service.tab.publish.service":"Publish service","service.tab.publish.setting":"Publish setting","service.tab.platform.setting":"Platform setting","service.tab.post.bind":"Post bind","service.tab.service.switch":"Service switch","service.tab.change.local":"Change language","main.publish.editmode":"Edit mode","main.publish.editmode.simple":"Simple","main.publish.editmode.complex":"Complex","main.publish.editmode.source":"Source","main.publish.vuepress.tip":"Recommends use it with vuepress-theme-vdoing , and the subsequent bug will only update this theme","main.publish.github.error.tip":"Configure error or API is not available, please check. If you modify the configuration, please refresh the page","main.publish.github":"Send Github","main.publish.github.tip":"Checking the Markdown text of the article to the GitHub warehouse corresponding to Vuepress (need to perform related configuration first, unsatisfactory or configuration error will be ignored)","main.publish.github.choose.path":"Choose path","main.publish.github.published.path":"Published path","main.publish.github.choose.path.use.default":"Default path","main.publish.github.choose.path.use.default.tip":"Using the default directory, all articles are published in the configuration default directory, no need to select the directory every time it is published","main.publish.github.no.tip":"You have not opened github release, please copy the right text on your own","main.publish.github.choose.title":"File name","main.publish.github.choose.title.tip":"Vuepress-theme-VDoing support file name plus serial number to identify. If you donâ€™t know this usage, please do not modify the file name","main.publish.see.preview":"Click here see new post","main.publish.see.md.preview":"Click here see new md file","main.publish.see.real.preview":"Click here see new post","main.publish.to.wordpress":"Send to WP","main.title":"Post title","main.slug":"Post slug","main.auto.fetch.slug":"Auto fetch slug","main.use.google.translate":"Use Google translate API","main.use.hash":"Use hash","main.use.hash.tip":"Do not use HASH to show more meaningful URLs, but it may cause the only path of the article to repeat (the consequence is that Vuepress will build a failure unless manual solution to the other problem), please know","main.force.refresh":"Force refresh","main.force.refresh.tip":"In order to prevent the wrongdoing aliases by mistake, the attribute will not be updated by default. If you need to update, please check for compulsory refresh.","main.desc":"Post desc","main.auto.fetch.desc":"Auto fetch desc","main.create.time":"Pub time","main.update.time":"Update time","main.create.time.placeholder":"Please select time","main.update.time.placeholder":"Please select time","main.tag":"Post tag","main.tag.new":"New tag","main.tag.close":"Close tag","main.tag.select":"Select tag","main.auto.fetch.tag":"Auto fetch tag","main.tag.empty":"No tags","main.tag.auto.switch":"Tag switch","main.tag.auto.switch.no.tip":"Auto tag is closed","main.cat":"Category","main.cat.empty":"No Category","main.cat.select":"Please select category","main.yaml.formatter":"YAML Formatter","main.siyuan.to.yaml":"Siyuan attr to YAML","main.yaml.to.siyuan":"YAML to Siyuan attr","main.save.attr.to.siyuan":"Save attr to Siyuan","main.copy":"Copy","main.publish":"Publish","main.publish.loading":"Publishing...","main.loading":"Loading...","main.update":"Update","main.cancel":"Cancel","main.publish.oneclick.attr":"Click to attr","main.publish.oneclick.attr.finish":"Make attr finished","main.publish.status.unpublish":"Unpublish","main.publish.status.published":"Published","main.publish.to.vuepress":"Send to Vuepress","main.publish.to.hugo":"Send to Hugo","main.publish.to.hexo":"Send to Hexo","main.publish.to.jekyll":"Send to Jekyll","main.publish.to.jvue":"Send to JVue","main.publish.to.conf":"Send to Confluence","main.publish.to.cnblogs":"Send to Cnblogs","main.publish.to.liandi":"Send to Liandi","main.publish.to.yuque":"Send to Yuque","main.publish.to.kms":"Send to KMS","main.opt.success":"Success","main.opt.failure":"Error","main.copy.success":"Copy Success","main.copy.failure":"Copy Error","main.opt.quick":"Quick","main.opt.status.publish":"Post published success","main.opt.status.cancel":"Post publishing has been canceled","main.opt.loading":"Loading...","main.opt.warning":"Warning","main.opt.ok":"Confirm","main.opt.cancel":"Cancel","main.opt.select":"Select","main.opt.warning.tip":"The operation will delete the data, whether to continue?","main.opt.tip":"Tips","setting.noneed":"No need setting","setting.blog.setting":" Setting","setting.blog.index":"System setting","setting.blog.type":"Blog type","setting.blog.type.placeholder":"Please select type","setting.blog.type.wordpress.value":"Wordpress","setting.blog.type.wordpress.label":"Wordpress","setting.blog.type.metaweblog.value":"MetaweblogApi","setting.blog.type.metaweblog.label":"Metaweblog API","setting.blog.type.github.value":"Github","setting.blog.type.github.label":"Github","setting.blog.type.github.user":"Github user","setting.blog.type.github.user.tip":"Github user, eg:terwer","setting.blog.type.github.repo":"Github repo","setting.blog.type.github.repo.tip":"Github repo, eg:hexo-blog","setting.blog.type.github.token":"Github token","setting.blog.type.github.token.tip":"Github token, eg:ghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","setting.blog.type.github.token.gen":"Generate Github Personal Token","setting.blog.type.github.default.path":"Doc path","setting.blog.type.github.default.path.tip":"Doc path, eg:docs/_posts","setting.blog.type.github.images.path":"Image store path","setting.blog.type.github.images.path.tip":"Image store path, eg:images","setting.blog.type.github.msg":"Commit msg","setting.blog.type.github.msg.tip":"Commit msg, eg:auto published by sy-post-publisher","setting.blog.type.github.author":"Author","setting.blog.type.github.author.tip":"Author, eg:terwer","setting.blog.type.github.email":"Email","setting.blog.type.github.email.tip":"Email","setting.blog.type.github.site":"Author's Page","setting.blog.type.github.site.tip":"Author's page, defaults to: [GitHub URL]/[Username] if left empty. Please do not change the key, translate the value to English.","setting.blog.type.github.dyn.yaml":"YAML Preset Configuration","setting.blog.type.github.dyn.yaml.tip":'YAML Preset Configuration, if you do not understand what it is for, please do not configure. JSON format, for example: {"sidebar": false}',"setting.blog.url":"Blog addr","setting.blog.github.url.tip":"Github homepage address","setting.blog.github.apiurl.tip":"Github's REST API address, typically: https://api.github.com","setting.blog.previewPostUrl":"Preview rule","setting.blog.previewPostUrl.tip":"Preview Rules (place occupied: [yyyy] [mm] [dd] [postid]), for example:/post/[postid].html or /[cats]/[yyyy]/[mm]/[dd]/[[dd]/[postid].html","setting.blog.previewUrl":"MD preview rule","setting.blog.previewUrl.tip":"MD file preview rules (place occupied: [user] [repo] [Branch] [docpath]), for example:/[user]/[repo]/blob/[branch]/[docpath]","setting.blog.mdFilenameRule":"File rule","setting.blog.mdFilenameRule.tip":"Markdown File Name Rules (Plasma: [yyyy] [MM] [mm] [dd] [category] [cats] [tag] [tags] [slug] [filename]), for example: [filename].md or [slug].md or [yyyy]-[MM]-[dd]-[slug].md","setting.blog.username":"Username","setting.blog.password":"Password","setting.blog.apiurl":"API Url","setting.blog.pageType":"Page Type","setting.blog.validate":"Validate","setting.blog.save":"Save","setting.blog.vali":"Validate","setting.blog.vali.tip":"Please verify the configuration to ensure the availability of the API, and it will not be used without verification.","setting.blog.vali.tip.metaweblog":"Please verify the configuration to ensure the availability of the API, and it will not be used without verification.","setting.blog.vali.ing":"Validating...","setting.blog.vali.ok":"Available","setting.blog.vali.ok.metaweblog":"The configuration has been saved and verified","setting.blog.vali.error":"Validate error","setting.blog.platform.support.github":"Current github supported platform:","setting.blog.platform.support.metaweblog":"Current metaweblog supported platform:","setting.blog.cancel":"Cancel","setting.vuepress":"Vuepress","setting.hugo":"Hugo","setting.hexo":"Hexo","setting.jekyll":"Jekyll","setting.jvue":"JVue","setting.conf":"Confluence","setting.conf.tip":"Published to Confluence needs to cooperate with my other adapter project (strong recommendation), please refer to:https://github.com/terwer/node-metaweblog-api-adaptor","setting.cnblogs":"Cnblogs","setting.wordpress":"Wordpress","setting.liandi":"Liandi","setting.yuque":"Yuque","setting.kms":"KMS","setting.other1":"Other1","service.switch.vuepress":"Vuepress","service.switch.hugo":"Hugo","service.switch.hexo":"Hexo","service.switch.jekyll":"Jekyll","service.switch.jvue":"JVue","service.switch.conf":"Confluence","service.switch.cnblogs":"Cnblogs","service.switch.wordpress":"Wordpress","service.switch.yuque":"Yuque","service.switch.liandi":"Liandi","service.switch.wechat":"WeChat","service.switch.wemp":"WeMedia","service.switch.zhihu":"Zhihu","service.switch.kms":"LandrayKms","service.switch.must.select.one":"You must add at least one platform","post.bind.vuepress.slug":"Vuepress slug","post.bind.hugo.slug":"Hugo slug","post.bind.hexo.slug":"Hexo slug","post.bind.jekyll.slug":"Jekyll slug","post.bind.cnblogs.postid":"Cnblogs ID","post.bind.jvue.postid":"JVue ID","post.bind.conf.postid":"Conf ID","post.bind.wordpress.postid":"WP ID","post.bind.liandi.postid":"Liandi ID","post.bind.yuque.postid":"Yuque ID","post.bind.kms.postid":"KMS ID","post.bind.conf.save":"Save","post.bind.conf.v081":"Examine the v0.8.1 metadata and import it","post.bind.auto.error":"No ID detected, kindly input the document root ID manually, before proceeding with the repair.","post.bind.auto.empty":"This document has never been published, hence no repair is necessary","post.bind.conf.cancel":"Cancel","form.validate.name.required":"Please input name","form.validate.name.length":"Length should be 0 to 1","form.validate.github.auto.delete":"Auto delete","dynamic.platform.new":"New platform","dynamic.platform.tip":"If the built -in release service cannot be satisfied or multiple instances need to be added, you can add supporting platforms here. Currently supporting Metaweblog API and WordPress API","dynamic.platform.type":"Platform type","dynamic.platform.subtype":"Platform subtype","dynamic.platform.type.metaweblog":"metaweblog API","dynamic.platform.type.wordpress":"Wordpress","dynamic.platform.type.common":"Common","dynamic.platform.type.custom":"Custom","dynamic.platform.key":"Platform key","dynamic.platform.key.tip":"The unique logo of the platform, cannot be repeated, for example: myblog","dynamic.platform.type.github":"Github","dynamic.platform.name":"Platform name","dynamic.platform.name.tip":"Platform name, for example: my blog","dynamic.platform.opt.add":"Submit","dynamic.platform.opt.noselect":"Please select platform type","dynamic.platform.opt.key.exist":"Platform key exists","dynamic.platform.opt.del.select":"Delete","dynamic.platform.opt.del.confirm":"Deleting this platform will completely remove the relevant configuration information of this platform. Do you continue?","dynamic.platform.opt.item.select":"Item no select","dynamic.platform.opt.item.select.tip":"The current selection is:","dynamic.platform.opt.item.no.select.tip":"Please select the line to be deleted","setting.common.home":"Home","setting.common.tip":"The platform homepage is used to preview articles, for example: https://terwork.space","setting.common.apiurl":"API","setting.common.token":"Token","setting.common.token.gen":"Token addr","setting.common.username":"Username","setting.common.username.gen":"Username setting","setting.common.password":"Password","setting.blog.platform.support.common":"Current platformï¼š","platform.must.select.one":"You must enable at least one platform","blog.list.toptip":"Reminder: Click the table line to enter the article details page. The details page has the release button! (ã€ƒ'â–½'ã€ƒ)","config.error.msg":"Network or config error, no data fetched","config.platform.none":"No available platform, please go to switch","post.delete.by.platform":"The article has been deleted by the platform by itself, please click to cancel the compulsory lifting connection","blog.top-data-tip":"Reminder: Please ensure that the Siyuan notes are started and opened the servo. The default servo address: http://127.0.0.0.1: 6806.0.0. Note: The modification will cover the value of the startup setting.","blog.top-data-tip.siyuan":"It is currently in the pendant mode. Starting from version 0.1.0, there is no need to reference the pendant on all pages. You only need to reference a pendant on the parent page. The specific rules are as follows: 1. If there are no subsidiaries, it will be compatible with the previous method of version 0.0.3 to display the release page of the current document. 2. If a subsidiary document is detected, all the subsidiaries will be displayed in a list and paging. You can choose a sub -document separately for release operations.","blog.newwin.open":"Open in a new window","blog.change.siyuan.api":"Modify Siyuan API address","setting.blog.siyuan.current.apiurl":"Current apiUrl=>","setting.blog.middlewareUrl.tip":"In certain scenarios, a necessity might arise (as seen in self-hosting environments, Nginx server setups, Vite development environments, etc.), while other situations could warrant overlooking this requirement.","setting.blog.middlewareUrl.my.tip":"In most cases, it is unnecessary, yet in specific contexts within 'browser environments,' 'docker environments,' 'Nginx server' setups, and the like, it might become essential. If a proxy deployment is absent, one can utilize my shared address: https://api.terwer.space/api/middleware. For performance considerations, I recommend self-deployment; kindly employ https://github.com/terwer/node-metaweblog-api-adaptor for deployment.","setting.blog.middlewareUrl.my.fee.tip":"ðŸ¤Due to substantial costs associated with shared proxies or potential unforeseeable circumstances that may lead to its discontinuation, for the sake of service continuity, deploying one's instance is advised. Alternatively, consider inviting the author for a coffee to support ongoing sharing endeavorsðŸŒ¹.","setting.blog.middlewareUrl.my.coffee":"Sponsor a coffeeâ˜•ï¸","setting.conf.export":"Export config","setting.conf.import":"Import config","setting.conf.transport":"Transport","setting.conf.clear":"Clear config","page.no.id":"pageId fetch error","main.read.mode":"Readonly","main.edit.mode":"Editable","main.read.mode.tip1":"Tips: The multi-platform distribution mode will display the built-in public YAML, and the general release can display the platform's custom YAML.","main.read.mode.tip2":"To identify the uniqueness of the article, slug modifications are ignored and other attributes can be synchronized.","main.read.mode.tip3":"ï¼ï¼ï¼ This feature is advanced, if you are unclear about the YAML syntax and purpose, do not modify it!!","main.opt.onclick.confirm.tip":"This operation will re -generate all attributes other than alias. If you just want to modify individual attributes, please click the individual function button to operate in the detailed mode. Do you continue?","main.cat.list.error":"Category list get error","main.yaml.no.save":"Have you edited YAML, do you synchronize to attributes, and cancel the loss of YAML modification?","setting.github.baseUrl":"Git repo index","setting.github.baseUrl.tip":"Git platform address is used for md file preview, the default is: https://github.com","preference.setting.fixTitle":"Fix title","preference.setting.removeH1":"Remove h1","preference.setting.removeH1.tip":"Delete H1 may accidentally delete the beginning of the beginning of Markdown. If you need to open it, please use more than 2 ones.","preference.setting.newWin":"New win","siyuan.browser.show.close.btn":"Show close btn","siyuan.browser.menu.quick.btn":"Quick publish","siyuan.browser.menu.publish.btn":"Publish","siyuan.browser.menu.preview.btn":"Preview","siyuan.browser.menu.manage.btn":"Manage","siyuan.browser.menu.anki.btn":"Anki","siyuan.browser.menu.picture.btn":"PicGo","siyuan.browser.menu.setting.btn":"Setting","anki.siyuan.deck":"Deck","anki.siyuan.deck.new":"New deck","anki.siyuan.tag":"Tag","anki.siyuan.tag.new":"New tag","picgo.chrome.tip":"If you are using a browser plug -in, you need to download the configuration Picgo client from here: https://github.com/Molunerfinn/PicGo/releases","picgo.siyuan.tip":"If you are using Siyuan notes pendants, you need to configure your own integration of PICGO. The pendant version of the PICGO configuration file is:`[Siyuan Workspace]/data/widgets/sy-post-publisher/lib/picgo/picgo.cfg.json`ï¼ŒPlease refer to the official picgo document for configurationï¼šhttps://picgo.github.io/PicGo-Core-Doc/zh/guide/config.html#%E6%89%8B%E5%8A%A8%E7%94%9F%E6%88%90","post.detail.button.copy.id":"Copy post ID","post.detail.button.share.link":"Copy share link","post.detail.button.browser.open":"Open with default browser","post.detail.button.pic.manage":"Picture manage","post.detail.button.anki.mark":"Anki mark","post.detail.index.send.to.publish":"Send to other platform","post.detail.index.export.to.pdf":"Export to PDF","picgo.upload.status":"Upload status","picgo.upload.select.pic":"Select picture","picgo.upload.clipboard":"Clipboard picture","picgo.upload.onclick":"One click upload","picgo.download.onclick":"One click download","picgo.download.local.to.bed":"Upload picture to bed","picgo.download.bed.to.local":"Upload picture from bed","picgo.pic.preview":"Picture preview","picgo.pic.setting":"Picture setting","picgo.pic.setting.no.tip":"You are currently using the browser plug -in and cannot inherit PicGo. You can only call the local Picgo client on the local Picgo client through HTTP","github.use.permalink":"Use permalink","github.use.permalink.no.warn":"You have closed the permanent link, and Formatter will not generate a mark, which may be useful in some scenarios","github.menu.title":"Menu title","github.menu.title.placeholder":"The menu column title (HUGO platform is dedicated, but the empty is not displayed in the menu)","github.weight":"Weight","github.weight.placeholder":"Weight (decide to display the order, the smaller the display, the more upward)","github.use.date":"Show date","github.use.date.no.warn":"You have closed the date show that it will not generate the date field in Formatter","github.post.picgo.use":"Use picbed","github.post.picgo.use.tip":"To enable this option, the local picture will be uploaded to the custom diagram bed (the remote picture is not uploaded), please make sure that the PICGO diagram bed configuration is correct","github.post.picgo.start.upload":"The picture bed has been opened, and the picture bed is about to upload the picture bed to the bed","github.post.picgo.picbed.error":"The picture uploaded to the picture bed failed, it may be an error in the configuration of the graph, please check the picture bed configuration","setting.yuque.home.tip":"The homepage of the language bird platform is usually fixed: https://www.yuque.com/","setting.yuque.username.tip":"The user name of the spark platform, note that the user name is fixed in [account settings], not the user nickname (*^â–½^*)","setting.yuque.password.tip":"For the token of the spark platform, please follow the link to get it. You only need to grant the document to read and modify the two permissions.","setting.yuque.apiurl.tip":"The API address of the language bird platform is usually fixed: https://www.yuque.com/api/v2","setting.yuque.previewUrl.tip":"Article preview rules for the Yuque platform, Usually: /[notebook]/[postid]","setting.notion.home.tip":"The homepage of the Notion platform is usually fixed: https://www.notion.so/","setting.notion.password.tip":"For the token of the Notion platform, please click the link to get it, you need to check the three permissions of [Read content], [Update content], and [Insert content].","setting.notion.apiurl.tip":"The API address of the Notion platform is usually fixed: https://api.notion.com/v1","setting.notion.previewUrl.tip":"Article preview rules for the Notion platform, usually:/[postid]","setting.liandi.home.tip":"The homepage of the chain drop platform is usually fixed: https://ld246.com/","setting.liandi.username.tip":"The user name of the chain drop platform, note that after clicking [Personal Homepage], the user name displayed behind the MEMBER on the URL is not a user nickname (*^â–½^*)","setting.liandi.password.tip":"Token on the chain drop platform, please click on the link to get","setting.liandi.apiurl.tip":"The API address of the chain drop platform is usually fixed: https://ld246.com/api/v2","setting.kms.home.tip":"KMS platform homepage, for example: http:// localhost: 9564/kms16_release/kms/multidoc","setting.kms.username.tip":"KMS platform REST account user name, please create according to the link instruction","setting.kms.password.tip":"KMS platform REST account password, please create according to the link instruction","setting.kms.apiurl.tip":"The API address of the KMS platform, for example: http:// localhost: 9564/kms16_release/API/KMS-Multidoc/KMSMultidOWRESTSERVICE","siyuan.local.share.tip":"Reminder: If you find that the sharing link or the browser can be displayed or the network connection is rejected, please check according to the following operation. 1: Siyuan Note-> Settings-> About-> Open the network servo; 2: After the browser is opened, click the bottom Siyuan address at the bottom to modify the corresponding address to the local area network IP address.","setting.cnblogs.home.tip":"The homepage of your blog park is usually: https://www.cnblogs.com/ <your username>","setting.cnblogs.username.tip":"Your blog garden MetaWeblog login name, you can go to your blog garden background-> Settings, note: login name, not a user nickname (*^â–½^*)","setting.cnblogs.password.tip":"Your blog garden Metaweblog access token, you can go to your blog garden backstage-> Settings","setting.cnblogs.apiUrl.tip":"Your blog garden Metaweblog access address, you can go to your blog park background-> settings, usually: https://rpc.cnblogs.com/metaweblog/ <Your username>","setting.cnblogs.previewUrl.tip":"Preview rules for your blog garden article","setting.wordpress.home.tip":"Wordpress homepage","setting.wordpress.username.tip":"WordPress login name, note: it is login name, not a user nickname (*^â–½^*)","setting.wordpress.password.tip":"Wordpress login password","setting.wordpress.apiUrl.tip":"WordPress's XMLRPC remote release address, usually: https:// <WordPress blog address> /xmlrpc.php","setting.wordpress.previewUrl.tip":"The preview rules of the WordPress platform are usually :? P = [Postid]","setting.wordpressdotcom.home.tip":"Wordpress homepage","setting.wordpressdotcom.username.tip":"WordPress login name, note: it is login name, not a user nickname (*^â–½^*)","setting.wordpressdotcom.password.tip":"Wordpress login password","setting.wordpressdotcom.apiUrl.tip":"WordPress's XMLRPC remote release address, usually: https:// <WordPress login name>.wordpress.com/xmlrpc.php","setting.wordpressdotcom.previewUrl.tip":"The preview rules of the WordPress platform are usually :? P = [Postid]","setting.oschina.home.tip":"Homepage of open source China, usually: https://my.oschina.net/ <Your username>","setting.oschina.username.tip":"Open source China login name, you can enter the login mailbox","setting.oschina.password.tip":"Open source China login password","setting.oschina.apiUrl.tip":"Open source China XMLRPC remote publishing address, usually fixed: https://www.oschina.net/ACTION/xmlrpc","setting.oschina.previewUrl.tip":"The preview rules of the open source China platform are usually:/blog/[postid]","setting.typecho.home.tip":"Homepage of the Typecho platform","setting.typecho.username.tip":"Typecho platform login name","setting.typecho.password.tip":"Typecho platform password","setting.typecho.apiUrl.tip":"The XMLRPC remote publishing address of the Typecho platform is usually fixed: https: // <platform address> /index.php/xmlrpc","setting.typecho.previewUrl.tip":"The preview rules of the Typecho platform are usually: /index.php/archives/ [Postid]","setting.metaweblog.home.tip":"The homepage of the Metaweblog platform","setting.metaweblog.username.tip":"Metaweblog platform login","setting.metaweblog.password.tip":"Metaweblog platform password","setting.metaweblog.apiUrl.tip":"The xmlrpc remote publishing address for the Metaweblog platform","setting.metaweblog.previewUrl.tip":"Article preview rules for the Metaweblog platform, [postid] can be composed article ID placeholder","setting.jvue.home.tip":"Homepage of the Jvue platform","setting.jvue.username.tip":"Jvue platform login name","setting.jvue.password.tip":"Jvue platform password","setting.jvue.apiUrl.tip":"The XMLRPC remote release address of the Jvue platform is usually fixed: https: // <platform address>/xmlrpc","setting.jvue.previewUrl.tip":"The preview rules of the Jvue platform are usually:/post/[postid] .html","setting.conf.home.tip":"Confluence Cloud, homepage, usually: https: // <your user name> .atlassian.net/wiki/spaces/<Space name>","setting.conf.username.tip":"CONFLUENCE login name, you can go to your Atlassian account to get","setting.conf.password.tip":"Confluence access token, you can go to your Atlassian account to get","setting.conf.apiUrl.tip":"You can go to https://developper.atlassian.com/Cloud/confluence/rest/v1/1/1/","setting.conf.previewUrl.tip":"CONFLUENCE platform articles preview rules, usually:/pages/[postid]","setting.zhihu.home.tip":"The address of the front page of the column, usually fixed","setting.zhihu.username.tip":"Zhihu username, must be set correctly, otherwise you cannot get the column","setting.zhihu.password.tip":"Know cookies, please do not modify them","setting.zhihu.apiUrl.tip":"Usually fixed, do not modify","setting.zhihu.previewUrl.tip":"Zhihu platform article preview rules, usually: //[postid]","setting.csdn.home.tip":"CSDN blog homepage address, usually fixed","setting.csdn.password.tip":"CSDN cookies, do not modify","setting.csdn.apiUrl.tip":"Usually fixed, do not modify","setting.csdn.previewUrl.tip":"CSDN Platform Article Preview Rules","setting.wechat.home.tip":"The address of the home page of the WeChat public account is usually fixed","setting.wechat.password.tip":"Please do not modify the cookies of WeChat official account","setting.wechat.apiUrl.tip":"Usually fixed, do not modify","setting.wechat.previewUrl.tip":"WeChat official account platform article preview rules","setting.jianshu.home.tip":"Jianshu homepage address, usually fixed","setting.jianshu.password.tip":"Jianshu's Cookie, do not modify","setting.jianshu.apiUrl.tip":"Usually fixed, do not modify","setting.jianshu.previewUrl.tip":"Jianshu platform article preview rules","setting.juejin.home.tip":"Juejin homepage address, usually fixed","setting.juejin.password.tip":"Juejin's Cookie, do not modify","setting.juejin.apiUrl.tip":"Usually fixed, do not modify","setting.juejin.previewUrl.tip":"Juejin platform article preview rules","setting.halo.home.tip":"Halo homepage address, should include the domain and port, for example: http://localhost:8090","setting.halo.username.tip":"Halo blog login name","setting.halo.password.tip":"Halo blog login password","setting.halo.apiUrl.tip":"Halo blog API address, typically the same as the Halo homepage","setting.halo.previewUrl.tip":"Halo blog article preview rule, default /archives/{slug}, with placeholders {slug} {name} {year} {month} {day}, can be set in [halo-home-url]/console/settings?tab=routeRules","setting.flowus.home.tip":"Flowus homepage address, usually fixed","setting.flowus.password.tip":"Flowus cookie, do not modify","setting.flowus.apiUrl.tip":"Usually fixed, do not modify","setting.flowus.previewUrl.tip":"Flowus platform article preview rules","setting.picgo.refer.to":"For details, please refer to:","setting.picgo.refer.to.online.doc":"Picgo configuration online documentation","setting.picgo.picbed":"Picbed setting","setting.picgo.picgo":"PicGo setting","main.opt.edit":"Edit","main.opt.delete":"Delete","setting.picgo.picgo.open.config.file":"Open config file","setting.picgo.picgo.click.to.open":"Click open","setting.picgo.picgo.choose.showed.picbed":"Please select showed picbed","setting.picgo.picbed.selected.tip":"Selected","setting.picgo.picbed.unselected.tip":"Unselected","setting.picgo.picbed.set.default":"Set as default picbed","setting.picgo.picbed.current.selected.tip":"Current selected picbed is:","setting.picgo.picbed.current.tip":"Current picbed is:","setting.picgo.picbed.uploader.config.name":"Picbed config name","setting.picgo.picbed.uploader.config.name.placeholder":"Please input config name","setting.picgo.config.name":"Config name","setting.picgo.config.name.placeholder":"Please input config name","setting.picgo.index.tip":"Note: The image uploaded here will not be automatically inserted into the document. Please manually click the copy button to copy the link, and then Ctrl+V to paste it into the document. This picture list only shows the pictures contained in this document.","setting.picgo.index.copy.link":"Copy link","setting.picgo.setting.timestamp.rename":"Timestamp rename","setting.picgo.setting.close":"Close","setting.picgo.setting.open":"Open","setting.picgo.setting.log.file":"Log file","setting.picgo.plugin":"Plugin setting","setting.picgo.plugin.list":"Plugin list","setting.picgo.plugin.import.local":"Import local plugin","setting.picgo.plugin.install":"Install","setting.picgo.plugin.installing":"Installing","setting.picgo.plugin.installed":"Installed","setting.picgo.plugin.doing.something":"Loading","setting.picgo.plugin.search.placeholder":"Search the picgo plug -in on NPM, or click the button above to view the excellent plug -in list","setting.picgo.plugin.gui.not.implemented":"This plug -in does not optimize the visual interface, is it continued to be installed?","setting.picgo.setting.node.path":"Node install path","setting.picgo.setting.node.path.tip":"Please enter Node to install the full path, for example: /opt/node-v16.14.0-darwin-x64/bin, node version> = 16","setting.picgo.setting.node.registry":"NPM registry","setting.picgo.setting.node.registry.tip":"Mainland recommendï¼šhttps://registry.npmmirror.com","setting.picgo.setting.node.proxy":"NPM proxy","setting.picgo.setting.node.proxy.tip":"Generally, you can leave empty. If you have special needs, you can set a custom agent","setting.picgo.setting.config.tip":"Note: The attributes above the horizontal line will change the behavior of uploading pictures, and the configuration can be stored automatically. The attribute below the horizontal line is only used when installing the plug -in, and you need to click the [Confirm] button to save.","setting.picgo.plugin.install.success":"The plug -in has been successfully installed, please clear the search keyword refresh list. Click the plug -in corresponding [Settings] icon to view the plug -in details and customize the plug -in","syp.about":"About me","setting.picgo.plugin.uninstall":"Uninstall plugin","setting.picgo.plugin.uninstall.success":"Plugin is uninstalled successfully","setting.picgo.plugin.enable":"Enable plugin","setting.picgo.plugin.disable":"Disable plugin","setting.picgo.plugin.update":"Update plugin","setting.picgo.plugin.config.setting":"Plugin setting","setting.picgo.plugin.work":"Work","setting.picgo.plugin.nowork":"Nowork","setting.picgo.plugin.nouse":"Nouse","setting.picgo.plugin.update.success":"Update success","setting.conf.import.syp":"Import pendant configuration","setting.conf.import.picgo":"Import picgo configuration","setting.conf.export.syp":"Export pendant configuration","setting.conf.export.picgo":"Export picgo configuration","setting.conf.import.syp.tip":"Please select effective historical backup JSON files for import. Note: The pendant configuration will be replaced.","setting.conf.import.picgo.tip":"Please select effective historical backup JSON files for import. Note: PICGO configuration will be replaced directly. For the compatibility of configuration, please uninstall all plug -in and perform the picgo configuration export operation. Uninstall the PICGO plugin will not delete the plug -in configuration, only the plug -in file and the plug -in registration record will be deleted. Please rest assured.","setting.conf.export.syp.tip":"The corresponding JSON configuration file will be exported, and configuration backups are strongly recommended. In principle, support is compatible. If there is any compatibility problem, it will be specifically explained.","setting.conf.export.picgo.tip":"The corresponding JSON configuration file will be exported, and configuration backups are strongly recommended. In principle, support is compatible. If there is any compatibility problem, it will be specifically explained.","setting.conf.clear.syp":"Clear pendant configuration","setting.conf.clear.picgo":"Clear picgo configuration","setting.conf.clear.tip":"Clear configuration cannot be restored, please do it carefully. It is strongly recommended to backup configuration first.","setting.conf.clear.picgo.tip":"Clear configuration cannot be restored, please do it carefully. It is strongly recommended to backup configuration first. This operation will delete PicGo -related configuration folders, including configuration, plug -in, cache, etc. It is used only when picgo is completely unavailable, otherwise the consequences of the loss of configuration will be at your own risk!","setting.main.background":"Widget background","setting.main.background.tip":"Support hexadecimal and RGB, for example: #000000, no settings or staying empty unchanged","setting.platform.gitlab":"Gitlab","setting.platform.gitlab.desc":"Gitlab is basically similar to Github, except that Gitlab supports its own on-premises or cloud server deployment","setting.picgo.manage":"Picture manage","setting.platform.import":"Platform import","setting.platform.store":"Plugin store","setting.platform.add":"Add platform","setting.platform.add.this":"Add this platform","setting.platform.universal":"Universal platform","setting.platform.universal.desc":"Currently supported general platforms include Zhihu, Yuque, CSDN, etc. Click the icon to quickly add, or click the button below to customize and add","setting.platform.wordpress":"WordPress","setting.platform.wordpress.desc":"WordPress is a free and open source blog software and Content management system based on PHP and MySQL. WordPress has a plugin architecture and template system. As of April 2018, over 30.6% of the top 10 million websites used WordPress. WordPress is the most popular website Content management system. Approximately 40% of global websites (7500 million) are built using WordPress. WordPress is currently the most popular blog system on the Internet. WordPress stands out in the most famous stage of online publishing. Today, it is used on over 70 million sites.","setting.platform.github":"Github","setting.platform.github.desc":"At present, the platforms that support Github release are: Hexo, Hugo, Jekyll, Vitepress, etc., using API authorization. GitHub is a platform and cloud-based service that uses Git for software development and version control, allowing developers to store and manage their code.","setting.platform.metaweblog":"Metaweblog","setting.platform.metaweblog.desc":"At present, the platforms that support Metaweblog are: Blog Park, Typecho, etc., using API authorization. The MetaWeblog API is an application programming interface created by software developer Dave Winer that allows writing, editing, and deletion using Web services. The API is implemented as an XML-RPC Web service with three methods whose names describe its functionality: metaweblog.newPost(), metaweblog.getPost(), and metaweblog.editPost(). These methods take parameters that specify the username and password of the blogger and information related to a single blog entry.","setting.platform.custom":"Customization","setting.platform.custom.desc":"Customize the HTTP protocol, stay tuned","setting.platform.right.tips0":"Special Notes:","setting.platform.right.tips1":"1. You can publish the configuration here, and you can directly click the menu or the following icons to configure it.","setting.platform.right.tips2":"2. If you need to add a new platform, click the left button directly.","setting.platform.right.tips3":"3. At present, we support webpage authorization and API authorization. The complex points of API authorization are relatively stable. The webpage authorization is simple but may fail. Surprise: Webpage authorization mode 100 compatible","setting.platform.right.tips4":"4. If you need to be compatible with other platforms, please contact me","setting.entry.title":"Platform Unified Settings - ","setting.entry.not.supported":"Unsupported platforms","setting.upgrade.syp.tip1":"Ready to start migration ...","setting.upgrade.syp.tip2":"Migration successfully.","setting.upgrade.syp.tip3":"It is already the latest, no need to migrate.","setting.upgrade.syp.tip4":"Migration failed, the error is as follows","setting.upgrade.syp.tip5":"The migration operation is completed.","setting.upgrade.syp.doTip1":"Detect whether the configuration file is the latest version","setting.upgrade.syp.doTip2":"Detected old configuration, preparation to upgrade the configuration file","setting.upgrade.syp.doTip3":"Old configuration upgraded","setting.upgrade.syp.doTip4":"No update for version, skip upgrade","main.publish.start":"Start syncing","main.publish.remove":"Remove","setting.blog.knowledge.space":"Knowledge space/Knowledge base","main.data.empty":"No data","knowledgeSpaceEnabled.Tips":"After validation, a list of available knowledge spaces is listed, and you can modify the default knowledge spaces as needed and save them","post.bind.auto.tips":"The ID here is automatically saved by the publishing tool, if you are not clear about the principle, please do not modify it","siyuan.config.setting":"Source settings","setting.blog.siyuan.apiurl":"Siyuan API","setting.blog.siyuan.apiurl.tip":"The API address of Siyuan Note, including ports, The default address of Siyuan API is: http://127.0.0.1;6806","setting.blog.siyuan.password":"Siyuan Token","setting.blog.siyuan.password.tip":"Siyuan Token, which is empty by default","slogan.make.written.fun":"Let creation return to fun","category.batch.not.supported":"Note: Some platforms in the bulk distribution mode do not support public classification, such as Yuque and Zhihu","yuque.edit.cate.no.change":"Due to the limitations of the Yuque platform, editing the knowledge base is not supported at the moment. If you want to move a document, click Undelete and then select the new knowledge base publication again","main.commonn.cate.title":"Public category","main.cate.new":"New category","pref.setting.aicode":"ChatGPT request key","pref.setting.aicode.tip":"ChatGPT request key or third-party proxy key, if it is a proxy key, please set the request address","pref.setting.ai.baseurl":"ChatGPT request address","pref.setting.ai.baseurl.tip":"The ChatGPT request address, if it is official ChatGPT, can be left blank","preference.setting.removeWidgetTag":"Remove the widget HTML","pref.setting.ai.proxy.url":"ChatGPT proxy address","pref.setting.ai.proxy.url.tip":"Can be left blank, note: Filling in the proxy will ignore the ChatGPT request address","main.auto.fetch.title":"Auto fetch title","main.auto.fetch.cate":"Auto fetch category","category.ai.hand":"Due to inconsistent classification systems across platforms, classifications need to be calibrated manually and are not automatically saved","category.ai.enabled":"AI is available, please go to the detailed mode to operate","sys.config.ai":"AI configuration","config.ai.use.siyuan":"Inside Siyuan notes, you can directly use Siyuan notes to configure, no configuration is required","setting.blog.yamlLinkEnabled":"YAML permalink","distri.type.overide.warn":"Note: Please use caution when overwriting the selected platform with the current data.","distri.type.merge.warn":"Note: In merge mode, the title and abstract changes are not valid, and the labels and categories are merged with the selected platform data.","preference.setting.keepTitle":"Do not update the original title","setting.blog.gitlab.url.tip":"GitLab homepage, e.g., http://localhost:8002","setting.blog.type.gitlab.user.tip":"Username for GitLab","setting.blog.type.gitlab.token.tip":"Token for GitLab, please refer to the link below for setup and ensure API permissions are granted","setting.blog.gitlab.apiurl.tip":"GitLab API address, usually the same as the homepage","setting.blog.gitlab.previewUrl.tip":"Article preview address, usually the default","main.force.cancel":"Force delete","loading.cost":"Loading cost","preference.setting.showDocQuickMenu":"Show doc menu","preference.setting.showQuickMenu":"Show quick publish","preference.setting.showSingleMenu":"Show normal publish","preference.setting.showBatchMenu":"Show batch publish","preference.setting.showAIMenu":"Show AI menu","preference.setting.showExtendMenu":"Show extend menu","preference.setting.showArticleManageMenu":"Show artile manage menu","message.publish.notShared":"The article has not been shared and therefore cannot be viewed externally. Kindly share the article or preview it within the PC client through the plugin menu.","setting.telegraph.username.label":"Author","setting.telegraph.password.label":"Uuid","setting.telegraph.home.tip":"The primary landing page of the telegra.ph platform typically remains constant at: https://telegra.ph/","setting.telegraph.username.tip":"The individual credited as the author, a detail showcased in the article's specifics, is customizable at will, with the default setting being empty.","setting.telegraph.password.tip":"The uuid pertinent to the current environment. Please note: 1. Anonymous mode automatically retrieves this detail, requiring no manual input; 2. Logging in as a user necessitates the entry of the Cookie's thp_uuid.","setting.telegraph.apiurl.tip":"The designated API endpoint for telegra.ph, routinely established as: https://telegra.ph/","setting.telegraph.previewUrl.tip":"The prescribed pattern for previewing telegra.ph articles commonly follows this structure: /[notebook]/[postid]","setting.telegraph.accessToken.tip":"This item is unnecessary in anonymous mode. For authenticated sessions, please procure the tph_token from the browser post authorization via the TG client. To ensure the sanctity of your privacy, exercise caution against sharing this token with any third party.","setting.telegraph.saveHash.tip":"No need to fill out; automatic retrieval after clicking validation.","setting.telegraph.forceReAuth.tip":"After the authorization information takes effect, uncheck this option, and then reauthorize. Note: Old articles may become uneditable as a result.","setting.telegraph.login.anonymous":"Anonymous","setting.telegraph.login.user":"User","page.loading":"Page is loading...","setting.blog.middlewareUrl.new":"Fresh Proxy (Recommended)","setting.blog.corsAnywhereUrl.tip":"CORS Global Proxy, once configured, helps alleviate browser common-origin issues.","setting.blog.middlewareUrl.my.new.tip":"Enhanced CORS proxy, enabling comprehensive common-origin requests. It is advisable to deploy independently. For deployment guidance, kindly refer to https://github.com/Zibri/cloudflare-cors-anywhere.","reminder.blog.middlewareUrl.my.warning":"A special note: Request limits are set at '100,000 times/day' and '1,000 times/10 minutes'. For the benefit of all, kindly refrain from malicious requests; otherwise, we reserve the right to terminate this proxy service.","platform.new.platform":"It has been observed that there are still [count] internal platforms [platform] awaiting importation. You may utilize the platform importation tool for a bulk import, or alternatively, manually add them from the plugin store.","import.v081.warn":"Given that v0.8.1 is considered a significantly antiquated iteration, this feature may no longer be pertinent. Should you find yourself in need of this functionality, please direct your feedback to youweics@qq.com, and we shall deliberate on its implementation based on demand.","publisher.picbed.service":"Image Hosting Service","publisher.picbed.none":"Not in use","publisher.picbed.picgo":"PicGo Plugin","publisher.picbed.picgo.not.install":"PicGo plugin not detected. You may proceed to the plugin store for installation before enabling it.","publisher.picbed.bundled":"Current Platform","publisher.picbed.recom1":"Strongly Recommended","publisher.picbed.recom2":"Recommended","publisher.post.status":"Article Status","publisher.post.status.publish":"Published","publisher.post.status.draft":"Draft","publisher.post.status.private":"Private","publisher.post.status.future":"Scheduled","publisher.post.password":"Password Protection","publisher.post.password.tip":"Please enter the password for the article; leave blank if not setting one","publisher.post.future":"Scheduled Publishing","setting.platform.halo.v29.only":"Note: Due to changes in the API policy in Halo 2.20+, the original method for this platform is no longer usable. Please import and use the new platform 'Halo web'. If you still need to use this platform, please downgrade your server to Halo 2.9.","setting.haloweb.home.tip":"The URL of your Halo 2.20+ blog homepage","setting.haloweb.password.tip":"Halo's Cookie, do not modify","setting.haloweb.apiUrl.tip":"Usually the same as the URL of your Halo 2.20+ blog homepage","setting.haloweb.previewUrl.tip":"Article preview rule for the Halo web platform"},Xn=bl({legacy:!1,locale:"zh_CN",fallbackLocale:"en_US",messages:{zh_CN:wy,en_US:_y}}),vy={mounted(u,o){const t=Jl.service({lock:!0,text:o.value.loadText}),s={log:o.value.log||It,checkOrigin:o.value.checkOrigin||!1,iframeResizerEnable:o.value.iframeResizerEnable||!0,autoResize:o.value.autoResize||!1,warningTimeout:o.value.warningTimeout||3e4};u.addEventListener("load",()=>{wn(()=>{const e=ve.max([document.body.offsetWidth,document.body.scrollWidth,document.documentElement.offsetWidth,document.documentElement.scrollWidth]);u.style.height=e+"px",sr(s,u)})}),u.onload=function(){t.close()}},unmounted(u){const o=u;o.iFrameResizer&&o.iFrameResizer.removeListeners()}},Py=async u=>{const o=fl(Ur);o.use(Xn);const t=xl();o.use(t);const s=by();return o.use(s),o.directive("resize",vy),{i18n:Xn,router:s,app:o}};(async()=>(await Py()).app.mount("#app"))();
